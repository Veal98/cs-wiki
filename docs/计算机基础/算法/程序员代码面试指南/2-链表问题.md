# é“¾è¡¨é—®é¢˜

---

## CD48. æ‰“å°ä¸¤ä¸ªå‡åºé“¾è¡¨å…·æœ‰ç›¸åŒå€¼çš„éƒ¨åˆ†

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD48. æ‰“å°ä¸¤ä¸ªå‡åºé“¾è¡¨çš„å…¬å…±éƒ¨åˆ†](https://www.nowcoder.com/practice/8943eea40dbb4185b187d80fd050fee9?tpId=101&tqId=33116&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸¤ä¸ªå‡åºé“¾è¡¨ï¼Œæ‰“å°ä¸¤ä¸ªå‡åºé“¾è¡¨çš„å…¬å…±éƒ¨åˆ†ã€‚ï¼ˆé¢˜æ„è¡¨è¿°çš„ä¸æ¸…æ¥šï¼Œå…¶å®æ˜¯æ‰“å°å‡ºä¸¤ä¸ªå‡åºé“¾è¡¨å…·æœ‰ç›¸åŒå€¼çš„éƒ¨åˆ†ï¼‰

è¾“å…¥æè¿°:

```
ç¬¬ä¸€ä¸ªé“¾è¡¨çš„é•¿åº¦ä¸º nã€‚

ç¬¬äºŒä¸ªé“¾è¡¨çš„é•¿åº¦ä¸º mã€‚

é“¾è¡¨ç»“ç‚¹çš„å€¼ä¸º valã€‚
```

è¾“å‡ºæè¿°:

```
è¾“å‡ºä¸€è¡Œæ•´æ•°è¡¨ç¤ºä¸¤ä¸ªå‡åºé“¾è¡¨çš„å…¬å…±éƒ¨åˆ†çš„å€¼ (æŒ‰å‡åºè¾“å‡º)ã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
4
1 2 3 4
5
1 2 3 5 6

è¾“å‡º
1 2 3
```

ç¤ºä¾‹2

```
è¾“å…¥
3
1 3 6
3
3 4 6

è¾“å‡º
3 6
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

å¾ˆç®€å•å§ï¼Œè·å–ä¸¤ä¸ªå‡åºé“¾è¡¨ä¸­å…·æœ‰ç›¸åŒå€¼å¾—å…ƒç´ ï¼Œä½¿ç”¨**å½’å¹¶**æ€æƒ³ï¼Œä»ä¸¤ä¸ªé“¾è¡¨çš„å¤´å¼€å§‹è¿›è¡Œå¦‚ä¸‹åˆ¤æ–­ï¼š

- å¦‚æœ head1 çš„å€¼å°äº head2ï¼Œåˆ™ head1 å¾€ä¸‹ç§»åŠ¨ã€‚
- å¦‚æœ head2 çš„å€¼å°äº head1ï¼Œåˆ™ head2 å¾€ä¸‹ç§»åŠ¨ã€‚
- å¦‚æœ head1 çš„å€¼ä¸ head2 çš„å€¼ç›¸ç­‰ï¼Œåˆ™æ‰“å°è¿™ä¸ªå€¼ï¼Œç„¶å head1 ä¸ head2 éƒ½å¾€ä¸‹ç§»åŠ¨ã€‚
- head1 æˆ– head2 æœ‰ä»»ä½•ä¸€ä¸ªç§»åŠ¨åˆ° nullï¼Œåˆ™æ•´ä¸ªè¿‡ç¨‹åœæ­¢ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // ç¬¬ä¸€ä¸ªé“¾è¡¨çš„é•¿åº¦
        ListNode head1 = new ListNode(-1); // ç¬¬ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹
        ListNode p = head1;
        for (int i = 0; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;

        }
        int m = sc.nextInt(); // ç¬¬äºŒä¸ªé“¾è¡¨çš„é•¿åº¦
        ListNode head2 = new ListNode(-1); // ç¬¬äºŒä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹
        ListNode q = head2;
        for (int i = 0; i < m; i ++) {
            q.next = new ListNode(sc.nextInt());
            q = q.next;
        }

        List<Integer> res = getCommonPart(head1.next, head2.next);
        for (int num : res) {
            System.out.print(num + " ");
        }
    }
    
    // å®šä¹‰é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }

    private static List<Integer> getCommonPart(ListNode head1, ListNode head2) {
        List<Integer> res = new ArrayList<>();
        ListNode p = head1;
        ListNode q = head2;

        while (p != null && q != null) {
            if (p.val == q.val) {
                res.add(p.val);
                p = p.next;
                q = q.next;
            }
            else if (p.val < q.val) {
                p = p.next;
            }
            else { // p.val >= q.val
                q = q.next;
            }
        }

        return res;
    }
}
```

## CD106. åˆ é™¤é“¾è¡¨çš„ç¬¬ K ä¸ªèŠ‚ç‚¹

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[åˆ é™¤é“¾è¡¨çš„ç¬¬ K ä¸ªèŠ‚ç‚¹](https://www.nowcoder.com/practice/0796dbf0eb054716937b0b82e0671c5f?tpId=101&tqId=33174&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œå®ç°åˆ é™¤é“¾è¡¨ç¬¬ K ä¸ªèŠ‚ç‚¹çš„å‡½æ•°ã€‚

è¾“å…¥æè¿°:

```
n è¡¨ç¤ºé“¾è¡¨çš„é•¿åº¦ã€‚

m è¡¨ç¤ºåˆ é™¤é“¾è¡¨ç¬¬å‡ ä¸ªèŠ‚ç‚¹ã€‚

val è¡¨ç¤ºé“¾è¡¨èŠ‚ç‚¹çš„å€¼ã€‚
```

è¾“å‡ºæè¿°:

```
åœ¨ç»™å®šçš„å‡½æ•°ä¸­è¿”å›é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5 3
1 2 3 4 5

è¾“å‡º
1 2 4 5
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

æ²¡å•¥éš¾åº¦ï¼Œæ‰¾åˆ°ç¬¬ k ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹å°±è¡Œäº†

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // é“¾è¡¨çš„é•¿åº¦
        int k = sc.nextInt(); // ç¬¬ k ä¸ªèŠ‚ç‚¹
        ListNode head = new ListNode(-1); // å¤´èŠ‚ç‚¹
        ListNode p = head;
        for (int i = 0; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        removeKthNode(head.next, k);

        ListNode q = head.next;
        while (q != null) {
            System.out.print(q.val + " ");
            q = q.next;
        }
    }

    // å®šä¹‰é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }

    // åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªå…ƒç´ 
    private static ListNode removeKthNode(ListNode head, int k) {
        ListNode p = head;
        ListNode pre = head; // å‰é©±èŠ‚ç‚¹

        for (int i = 1; i < k; i ++) {
            pre = p;
            p = p.next;
        }

        // åˆ é™¤ç¬¬ k ä¸ªèŠ‚ç‚¹
        pre.next = p.next;

        return head;
    }
}
```



## CD49/LC19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ K ä¸ªèŠ‚ç‚¹

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD49. åœ¨é“¾è¡¨ä¸­åˆ é™¤å€’æ•°ç¬¬ K ä¸ªèŠ‚ç‚¹](https://www.nowcoder.com/practice/e5d90aac4c8b4628aa70d9b6597c0560?tpId=101&tqId=33117&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)
- LeetCodeï¼š[19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªèŠ‚ç‚¹ â€” Meidum](https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å‡ºä¸€ä¸ªå•é“¾è¡¨ï¼Œè¿”å›åˆ é™¤å•é“¾è¡¨çš„å€’æ•°ç¬¬ K ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨ã€‚

è¾“å…¥æè¿°:

```
n è¡¨ç¤ºé“¾è¡¨çš„é•¿åº¦ã€‚
val è¡¨ç¤ºé“¾è¡¨ä¸­èŠ‚ç‚¹çš„å€¼ã€‚
```

è¾“å‡ºæè¿°:

```
åœ¨ç»™å®šçš„å‡½æ•°å†…è¿”å›é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5 4
1 2 3 4 5

è¾“å‡º
1 3 4 5
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

**å¿«æ…¢æŒ‡é’ˆ**ã€‚è®©å¿«æŒ‡é’ˆå…ˆèµ° `n` æ­¥ï¼Œç„¶åå¿«æ…¢æŒ‡é’ˆå¼€å§‹åŒé€Ÿå‰è¿›ã€‚è¿™æ ·å½“å¿«æŒ‡é’ˆèµ°åˆ°é“¾è¡¨æœ€åä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ…¢æŒ‡é’ˆæ‰€åœ¨çš„ä½ç½®å°±æ˜¯å€’æ•°ç¬¬ `n` ä¸ªé“¾è¡¨èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // é“¾è¡¨çš„é•¿åº¦
        int k = sc.nextInt(); // å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹
        ListNode head = new ListNode(-1); // å¤´èŠ‚ç‚¹
        ListNode p = head;
        for (int i = 0; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        removeLastKthNode(head.next, k);

        ListNode q = head.next;
        while (q != null) {
            System.out.print(q.val + " ");
            q = q.next;
        }
    }

    // å®šä¹‰é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }

    // åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªå…ƒç´ 
    private static ListNode removeLastKthNode(ListNode head, int k) {
        ListNode fast = head;
        ListNode slow = head;

        while (k > 0) {
            fast = fast.next;
            k --;
        }

        while (fast.next != null) {
            fast = fast.next;
            slow = slow.next;
        }
        // æ‰¾åˆ°äº†å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
        ListNode kNode = slow.next;
        // åˆ é™¤ç¬¬ k ä¸ªèŠ‚ç‚¹
        slow.next = kNode.next;

        return head;
    }
}
```

## CD107. åè½¬å•å‘é“¾è¡¨å’ŒåŒå‘é“¾è¡¨

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD107. åè½¬å•å‘é“¾è¡¨å’ŒåŒå‘é“¾è¡¨](https://www.nowcoder.com/practice/b66a251dec8847f386bbe6cd96b7e9c8?tpId=101&tqId=33175&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

å®ç°åè½¬å•å‘é“¾è¡¨å’ŒåŒå‘é“¾è¡¨çš„å‡½æ•°ã€‚

å¦‚ 1->2->3 åè½¬åå˜æˆ 3->2->1ã€‚

è¾“å…¥æè¿°:

```
ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºå•é“¾è¡¨çš„é•¿åº¦ã€‚

ç¬¬äºŒè¡Œ n ä¸ªæ•´æ•° val è¡¨ç¤ºå•é“¾è¡¨çš„å„ä¸ªèŠ‚ç‚¹ã€‚

ç¬¬ä¸‰è¡Œä¸€ä¸ªæ•´æ•° mï¼Œè¡¨ç¤ºåŒé“¾è¡¨çš„é•¿åº¦ã€‚

ç¬¬å››è¡Œ m ä¸ªæ•´æ•° val è¡¨ç¤ºåŒé“¾è¡¨çš„å„ä¸ªèŠ‚ç‚¹ã€‚
```

è¾“å‡ºæè¿°:

```
åœ¨ç»™å®šçš„å‡½æ•°å†…è¿”å›ç›¸åº”é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
3
1 2 3
4
1 2 3 4

è¾“å‡º
3 2 1
4 3 2 1
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

åè½¬å•å‘é“¾è¡¨å’Œåè½¬åŒå‘é“¾è¡¨çš„æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡åŒå‘é“¾è¡¨å¤šå¤„ç†ä¸€ä¸‹ pre æŒ‡é’ˆç½¢äº†ã€‚

è¿™é‡Œä»¥å•å‘é“¾è¡¨ä¸ºä¾‹ï¼Œè®²è§£ä¸€ä¸‹åè½¬é“¾è¡¨çš„ä¸¤ç§æ–¹æ³•ï¼ˆè¿™é‡Œå¾ˆé‡è¦ï¼‰ï¼š

â­ 1ï¼‰**ç¬¬ä¸€ç§ï¼šæ–°é“¾è¡¨ + å¤´æ’æ³•**

é¦–å…ˆæ–°å»º newHead èŠ‚ç‚¹ä½œä¸ºæ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼›ç„¶åä½¿ç”¨å¤´æ’æ³•ä¾æ¬¡ä»åŸé“¾è¡¨å–ä¸‹èŠ‚ç‚¹æ’å…¥ newHead çš„åé¢ã€‚æœ€åè¿”å› newHead.next å³å¯

![](https://gitee.com/veal98/images/raw/master/img/20210224233624.png)

```java
// åè½¬å•é“¾è¡¨ (ä½¿ç”¨å¤´èŠ‚ç‚¹+æ–°é“¾è¡¨çš„æ–¹å¼)
private static ListNode reverseList(ListNode head) {
    if (head == null || head.next == null) {
        return head;
    }

    ListNode newHead = new ListNode(-1); // æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹
    newHead.next = null;

    // ä¸æ–­åœ°æŠŠåŸé“¾è¡¨çš„èŠ‚ç‚¹æ‘˜ä¸‹æ¥å¤´æ’åˆ°æ–°é“¾è¡¨ä¸Š
    while (head != null) {
        ListNode temp = head.next; // é˜²æ­¢æ–­é“¾

        // å¤´æ’æ³•
        head.next = newHead.next;
        newHead.next = head;

        // å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯
        head = temp;
    }

    return newHead.next;
}
```

> è¿™é‡Œæä¸€å˜´ï¼Œå¦‚æœæ²¡æœ‰é‡‡ç”¨æ–°é“¾è¡¨ï¼Œè€Œæ˜¯ç›´æ¥åœ¨åŸé“¾è¡¨ä¸Šè¿›è¡Œå¤´æ’ï¼Œè®°å¾—ä¸€å®šè¦å¤„ç†æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„ next æŒ‡é’ˆï¼Œé˜²æ­¢æˆç¯ï¼Œè¿™ä¸ªç‚¹æˆ‘ä»¬åœ¨åé¢çš„é¢˜ç›®ä¼šé‡ä¸Šçš„ã€‚

â­ 2ï¼‰**ç¬¬äºŒç§ï¼šåŸåœ°åè½¬**

ä¸»è¦æ˜¯åˆ©ç”¨ä¸¤ä¸ªè¾…åŠ©çš„ç»“ç‚¹ï¼Œä¸æ–­åœ°å¾ªç¯æ›´æ”¹æŒ‡é’ˆçš„æŒ‡å‘ï¼š

- preNode å’Œ next åˆ†åˆ«ä»£è¡¨å½“å‰è¦å¤„ç†çš„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹å’Œåä¸€ä¸ªç»“ç‚¹
- é€šè¿‡æ”¹å˜ç»“ç‚¹çš„ next åŸŸçš„æŒ‡å‘æ¥åè½¬æ•´ä¸ªé“¾è¡¨ï¼Œé€šè¿‡å¾ªç¯å¤„ç†ï¼Œæ¯æ¬¡åè½¬ä¸€ä¸ªä¹‹åï¼ŒpreNode æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯ headï¼Œhead æ›´æ”¹ä¸º head çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯ nextï¼Œè¿™æ ·ç›´åˆ° head ä¸ºç©ºï¼Œè¿”å› preNode å°±åè½¬äº†æ•´ä¸ªå•é“¾è¡¨

```java
public static ListNode reverseList(ListNode head){
      ListNode preNode = null;
      while(head != null) {
            ListNode next = head.next;
          
            head.next = preNode;
            preNode = head;
          
            head = next;
      }
      return pre;
}
```

ã€å…·ä½“ä»£ç ã€‘ï¼šè¿™é‡Œå¯¹äºå•é“¾è¡¨æˆ‘é‡‡ç”¨æ–°é“¾è¡¨ + å¤´æ’æ³•çš„æ–¹å¼ï¼Œå¯¹äºåŒé“¾è¡¨é‡‡ç”¨åŸåœ°åè½¬çš„æ–¹å¼ã€‚

```java
import java.util.Scanner;

public class CD107 {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        int n = sc.nextInt(); // å•é“¾è¡¨çš„é•¿åº¦
        ListNode head1 = new ListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹
        ListNode p = head1;
        for (int i = 1; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        int m = sc.nextInt(); // åŒé“¾è¡¨çš„é•¿åº¦
        DoubleListNode head2 = new DoubleListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹
        DoubleListNode q = head2;
        for (int i = 1; i < m; i ++) {
            DoubleListNode node = new DoubleListNode(sc.nextInt());
            q.next = node;
            node.pre = q;

            q = q.next;
        }

        // åè½¬å•é“¾è¡¨
        ListNode newHead1 = reverseList(head1);
        ListNode cur1 = newHead1;
        while (cur1 != null) {
            System.out.print(cur1.val + " ");
            cur1 = cur1.next;
        }

        System.out.println();

        // åè½¬åŒé“¾è¡¨
        DoubleListNode newHead2 = reverseDoubleList(head2);
        DoubleListNode cur2 = newHead2;
        while (cur2 != null) {
            System.out.print(cur2.val + " ");
            cur2 = cur2.next;
        }

    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }

    // å®šä¹‰åŒé“¾è¡¨ç»“æ„
    public static class DoubleListNode {
        private int val;
        private DoubleListNode next;
        private DoubleListNode pre;

        public DoubleListNode(int val) {
            this.val = val;
        }
    }

    // åè½¬å•é“¾è¡¨ (ä½¿ç”¨å¤´èŠ‚ç‚¹+æ–°é“¾è¡¨çš„æ–¹å¼)
    private static ListNode reverseList(ListNode head) {
        if (head == null || head.next == null) {
            return head;
        }

        ListNode newHead = new ListNode(-1); // æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹
        newHead.next = null;

        // ä¸æ–­åœ°æŠŠåŸé“¾è¡¨çš„èŠ‚ç‚¹æ‘˜ä¸‹æ¥å¤´æ’åˆ°æ–°é“¾è¡¨ä¸Š
        while (head != null) {
            ListNode temp = head.next; // é˜²æ­¢æ–­é“¾

            // å¤´æ’æ³•
            head.next = newHead.next;
            newHead.next = head;

            head = temp;
        }

        return newHead.next;
    }

    // åè½¬åŒé“¾è¡¨(é‡‡ç”¨åŸåœ°åè½¬çš„æ–¹å¼)
    private static DoubleListNode reverseDoubleList(DoubleListNode head) {
        if (head == null || head.next == null) {
            return head;
        }

        DoubleListNode preNode = null; // å½“å‰æ­£åœ¨å¤„ç†èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
        while (head != null) {
            DoubleListNode temp = head.next; // é˜²æ­¢æ–­é“¾

            head.next = preNode;
            head.pre = temp;

            preNode = head;
            head = temp;
        }

        return preNode;
    }

}
```

## CD108/LC92. åè½¬éƒ¨åˆ†å•å‘é“¾è¡¨

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[åè½¬éƒ¨åˆ†å•å‘é“¾è¡¨](https://www.nowcoder.com/practice/f11155006f154419b0bef6de8918aea2?tpId=101&tqId=33176&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)
- LeetCodeï¼š[92. åè½¬é“¾è¡¨ II](https://leetcode-cn.com/problems/reverse-linked-list-ii/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªå•é“¾è¡¨ï¼Œåœ¨é“¾è¡¨ä¸­æŠŠç¬¬ L ä¸ªèŠ‚ç‚¹åˆ°ç¬¬ R ä¸ªèŠ‚ç‚¹è¿™ä¸€éƒ¨åˆ†è¿›è¡Œåè½¬ã€‚

è¾“å…¥æè¿°:

```
n è¡¨ç¤ºå•é“¾è¡¨çš„é•¿åº¦ã€‚

val è¡¨ç¤ºå•é“¾è¡¨å„ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚

L è¡¨ç¤ºç¿»è½¬åŒºé—´çš„å·¦ç«¯ç‚¹ã€‚

R è¡¨ç¤ºç¿»è½¬åŒºé—´çš„å³ç«¯ç‚¹ã€‚
```

è¾“å‡ºæè¿°:

```
åœ¨ç»™å®šçš„å‡½æ•°ä¸­è¿”å›æŒ‡å®šé“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5
1 2 3 4 5
1 3

è¾“å‡º
3 2 1 4 5
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

- å¯¹äºéœ€è¦åè½¬çš„éƒ¨åˆ†ï¼Œç”¨å¤´æ’æ³•è¿›è¡Œåè½¬
- å¯¹ä¸éœ€è¦åè½¬çš„éƒ¨åˆ†ï¼Œä¸æ“ä½œ

å…·ä½“åšæ³•ï¼š

é¦–å…ˆæ–°å»º newHead èŠ‚ç‚¹é“¾æ¥åˆ°åŸé“¾è¡¨çš„ head ä¸Šï¼Œå› ä¸ºè‹¥ L = 1ï¼Œéœ€è¦ newHead ä½œä¸ºä¸­ä»‹è¿›è¡Œå¤´æ’ï¼Œç›¸å½“äºæˆ‘ä»¬æ‰‹åŠ¨ä¸ºè¿™ä¸ªé“¾è¡¨åŠ ä¸Šäº†ä¸€ä¸ªå¤´èŠ‚ç‚¹ã€‚

æ ¸å¿ƒæ€æƒ³ï¼šä»¥ L-1 ä¸ºå¤´èŠ‚ç‚¹ï¼Œ L ä¸ºå°¾èŠ‚ç‚¹ï¼Œå°† L åé¢çš„ R-L ä¸ªå…ƒç´ ä¾æ¬¡æ‘˜ä¸‹å¤´æ’åˆ° L å‰é¢

![](https://gitee.com/veal98/images/raw/master/img/20210409181531.png)

ğŸš¨ **æ³¨æ„æœ€åéœ€è¦å°† R è¿™ä¸ªèŠ‚ç‚¹é“¾æ¥åˆ° L åé¢é‚£ä¸ªèŠ‚ç‚¹ï¼Œé˜²æ­¢å‡ºç°ç¯**

æœ€åè¿”å› newHead.next å³å¯ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        int n = sc.nextInt(); // å•é“¾è¡¨çš„é•¿åº¦
        ListNode head = new ListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹
        ListNode p = head;
        for (int i = 1; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        int L = sc.nextInt(); // å·¦ç«¯ç‚¹
        int R = sc.nextInt(); // å³ç«¯ç‚¹

        ListNode head2 = reversePart(head, L, R);

        ListNode temp = head2;
        while (temp != null) {
            System.out.print(temp.val + " ");
            temp = temp.next;
        }

    }

    private static ListNode reversePart(ListNode head, int L, int R) {
        if (L >= R) {
            return head;
        }

        // æ·»åŠ å¤´èŠ‚ç‚¹ï¼Œæ–¹ä¾¿å¤„ç† L æ˜¯ head çš„æƒ…å†µ
        ListNode newHead = new ListNode(-1);
        newHead.next = head;


        // æ‰¾åˆ° L çš„å‰é©±èŠ‚ç‚¹
        ListNode lPreNode = newHead;
        for (int i = 0; i < L-1; i ++) {
            lPreNode = lPreNode.next;
        }
        ListNode lNode = lPreNode.next; // ç¬¬ L ä¸ªèŠ‚ç‚¹

        // ä»ç¬¬ L+1 ä¸ªèŠ‚ç‚¹å¼€å§‹å¤´æ’
        ListNode p = lNode.next; // ç¬¬ L+1 ä¸ªèŠ‚ç‚¹
        ListNode temp = p; // p çš„åç»§èŠ‚ç‚¹ï¼Œé˜²æ­¢æ–­é“¾
        for (int i = 0; i < R-L; i ++) {
            temp = p.next; // é˜²æ­¢æ–­é“¾

            p.next = lPreNode.next;
            lPreNode.next = p;

            p = temp; // ç»§ç»­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¤„ç†
        }

        // é˜²æ­¢å‡ºç°ç¯
        lNode.next = temp;

        return newHead.next;
    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }
}
```

## CD109. ç¯å½¢é“¾è¡¨çš„çº¦ç‘Ÿå¤«é—®é¢˜

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD109. ç¯å½¢é“¾è¡¨çš„çº¦ç‘Ÿå¤«é—®é¢˜](https://www.nowcoder.com/practice/c3b34059faf546d3a7ee28f2b0154286?tpId=101&tqId=33177&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

æ®è¯´è‘—åçŠ¹å¤ªå†å²å­¦å®¶ Josephus æœ‰è¿‡ä»¥ä¸‹æ•…äº‹ï¼šåœ¨ç½—é©¬äººå é¢†ä¹”å¡”å¸•ç‰¹åï¼Œ39 ä¸ªçŠ¹å¤ªäººä¸ Josephus åŠä»–çš„æœ‹å‹èº²åˆ°ä¸€ä¸ªæ´ä¸­ï¼Œ39 ä¸ªçŠ¹å¤ªäººå†³å®šå®æ„¿æ­»ä¹Ÿä¸è¦è¢«æ•ŒäººæŠ“åˆ°ï¼Œäºæ˜¯å†³å®šäº†ä¸€ç§è‡ªæ€æ–¹å¼ï¼Œ41 ä¸ªäººæ’æˆä¸€ä¸ªåœ†åœˆï¼Œç”±ç¬¬ 1 ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼ŒæŠ¥æ•°åˆ° 3 çš„äººå°±è‡ªæ€ï¼Œç„¶åå†ç”±ä¸‹ä¸€ä¸ªäººé‡æ–°æŠ¥ 1ï¼ŒæŠ¥æ•°åˆ° 3 çš„äººå†è‡ªæ€ï¼Œè¿™æ ·ä¾æ¬¡ä¸‹å»ï¼Œç›´åˆ°å‰©ä¸‹æœ€åä¸€ä¸ªäººæ—¶ï¼Œé‚£ä¸ªäººå¯ä»¥è‡ªç”±é€‰æ‹©è‡ªå·±çš„å‘½è¿ã€‚è¿™å°±æ˜¯è‘—åçš„çº¦ç‘Ÿå¤«é—®é¢˜ã€‚ç°åœ¨è¯·ç”¨å•å‘ç¯å½¢é“¾è¡¨å¾—å‡ºæœ€ç»ˆå­˜æ´»çš„äººçš„ç¼–å·ã€‚

è¾“å…¥æè¿°:

```
ä¸€è¡Œä¸¤ä¸ªæ•´æ•° n å’Œ mï¼Œ n è¡¨ç¤ºç¯å½¢é“¾è¡¨çš„é•¿åº¦ï¼Œ m è¡¨ç¤ºæ¯æ¬¡æŠ¥æ•°åˆ° m å°±è‡ªæ€ã€‚
```

è¾“å‡ºæè¿°:

```
è¾“å‡ºæœ€åå­˜æ´»ä¸‹æ¥çš„äººç¼–å·(ç¼–å·ä»1å¼€å§‹åˆ°n)
```

ç¤ºä¾‹1

```
è¾“å…¥
5 2

è¾“å‡º
3
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨ï¼ˆåˆå§‹å€¼èµ‹ä¸º 1ï¼‰ï¼Œç„¶åç›´æ¥å¾ªç¯éå†å°±å¥½äº†ã€‚å…¶ä¸­åˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™éœ€è¦å‰é©±èŠ‚ç‚¹ï¼Œå•å‘å¾ªç¯é“¾è¡¨é‡Œçš„æœ€åä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯å¤©ç„¶çš„å‰é©±èŠ‚ç‚¹ï¼ˆhead çš„å‰é©±èŠ‚ç‚¹ï¼‰ï¼Œç›´æ¥ç”¨å®ƒå°±è¡Œï¼š

- å¦‚æœé“¾è¡¨ä¸ºç©ºæˆ–è€…é“¾è¡¨èŠ‚ç‚¹æ•°ä¸º 1ï¼Œæˆ–è€… m çš„å€¼å°äº 1ï¼Œåˆ™ä¸ç”¨è°ƒæ•´å°±ç›´æ¥è¿”å›ã€‚
- åœ¨ç¯å½¢é“¾è¡¨ä¸­éå†æ¯ä¸ªèŠ‚ç‚¹ï¼Œä¸æ–­è½¬åœˆï¼Œä¸æ–­è®©æ¯ä¸ªèŠ‚ç‚¹æŠ¥æ•°ï¼ˆcount ++ï¼‰
- å½“æŠ¥æ•°åˆ°è¾¾ m æ—¶ï¼Œå°±åˆ é™¤å½“å‰æŠ¥æ•°çš„èŠ‚ç‚¹ã€‚å¹¶å°† count å½’ 1
- ä¸åœåœ°åˆ é™¤ï¼Œç›´åˆ°ç¯å½¢é“¾è¡¨ä¸­åªå‰©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿‡ç¨‹ç»“æŸã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // ç¯å½¢é“¾è¡¨é•¿åº¦
        int m = sc.nextInt(); // æŠ¥æ•°

        // æ„é€ ç¯å½¢é“¾è¡¨
        ListNode head = new ListNode(1); // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        ListNode p = head; // å·¥ä½œæŒ‡é’ˆ
        for (int i = 2; i <= n; i ++) {
            p.next = new ListNode(i);
            p = p.next;
        }
        p.next = head; // æˆç¯

        System.out.println(josephusKill(head, m).val);
    }

    // è¿”å›æœ€åå­˜æ´»çš„èŠ‚ç‚¹
    private static ListNode josephusKill(ListNode head, int m) {
        if (head == null || head.next == head || m < 1) {
            return head;
        }

        // æ‰¾åˆ°é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¤©ç„¶çš„å‰é©±èŠ‚ç‚¹ï¼‰
        ListNode last = head;
        while (last.next != head) {
            last = last.next;
        }

        // å¾ªç¯æŠ¥æ•°
        int count = 1;
        while (head != last) {
            // åˆ é™¤å½“å‰èŠ‚ç‚¹
            if (count == m) {
                last.next = head.next;
                head = last.next;
                count = 1;
            }
            else {
                last = last.next;
                head = head.next;
                count ++;
            }
        }

        return head;
    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }
}
```

ã€æ—¶é—´å¤æ‚åº¦ã€‘ï¼š

æ¯åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéƒ½éœ€è¦éå† m æ¬¡ï¼Œä¸€å…±éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹æ•°ä¸º n-1ï¼Œæ‰€ä»¥ä¸Šè¿°è§£æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(nÃ—m)

## CD113. å°†å•å‘é“¾è¡¨æŒ‰æŸå€¼åˆ’åˆ†ä¸ºå·¦è¾¹å°ï¼Œä¸­é—´ç›¸ç­‰ï¼Œå³è¾¹å¤§çš„å½¢å¼

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD113. å°†å•å‘é“¾è¡¨æŒ‰æŸå€¼åˆ’åˆ†ä¸ºå·¦è¾¹å°ï¼Œä¸­é—´ç›¸ç­‰ï¼Œå³è¾¹å¤§çš„å½¢å¼](https://www.nowcoder.com/practice/04fcabc5d76e428c8100dbd855761778?tpId=101&tqId=33181&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œå†ç»™å®šä¸€ä¸ªæ•´æ•° pivotï¼Œè¯·å°†é“¾è¡¨è°ƒæ•´ä¸ºå·¦éƒ¨åˆ†éƒ½æ˜¯å€¼å°äº pivot çš„èŠ‚ç‚¹ï¼Œä¸­é—´éƒ¨åˆ†éƒ½æ˜¯å€¼ç­‰äº pivot çš„èŠ‚ç‚¹ï¼Œ å³è¾¹éƒ¨åˆ†éƒ½æ˜¯å¤§äº pivot çš„èŠ‚ç‚¹ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹è°ƒæ•´åçš„èŠ‚ç‚¹é¡ºåºæ²¡æœ‰æ›´å¤šè¦æ±‚ã€‚

ä¾‹å¦‚ï¼šé“¾è¡¨ 9->0->4->5->1ï¼Œpivot=3ã€‚

è°ƒæ•´åé“¾è¡¨å¯ä»¥æ˜¯ 1->0->4->9->5ï¼Œä¹Ÿå¯ä»¥æ˜¯ 0->1->9->5->4ã€‚æ€»ä¹‹ï¼Œæ»¡è¶³å·¦éƒ¨åˆ†éƒ½æ˜¯å°äº 3çš„èŠ‚ç‚¹ï¼Œä¸­é—´éƒ¨åˆ†éƒ½æ˜¯ç­‰äº 3 çš„èŠ‚ç‚¹ï¼ˆæœ¬ä¾‹ä¸­è¿™ä¸ªéƒ¨åˆ†ä¸ºç©ºï¼‰ï¼Œå³éƒ¨åˆ†éƒ½æ˜¯å¤§äº 3 çš„èŠ‚ç‚¹å³å¯ã€‚å¯¹æŸéƒ¨åˆ†å†…éƒ¨çš„èŠ‚ç‚¹é¡ºåºä¸åšè¦æ±‚ã€‚

è¾“å…¥æè¿°:

```
ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•° n å’Œ pivotï¼Œn è¡¨ç¤ºé“¾è¡¨çš„é•¿åº¦ã€‚

ç¬¬äºŒè¡Œ n ä¸ªæ•´æ•° ai è¡¨ç¤ºé“¾è¡¨çš„èŠ‚ç‚¹ã€‚
```

è¾“å‡ºæè¿°:

```
è¯·åœ¨ç»™å®šçš„å‡½æ•°å†…è¿”å›é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5 3
9 0 4 5 1

è¾“å‡º
1 0 4 5 9
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

æ€è·¯å…¶å®ä¹Ÿä¸éš¾ï¼Œå°±æ˜¯å°†åŸé“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¾æ¬¡åˆ’åˆ†è¿›ä¸‰ä¸ªé“¾è¡¨ï¼Œä¸‰ä¸ªé“¾è¡¨åˆ†åˆ«ä¸º small ä»£è¡¨å·¦éƒ¨åˆ†ï¼Œequalä»£è¡¨ä¸­é—´éƒ¨åˆ†ï¼Œbig ä»£è¡¨å³éƒ¨åˆ†ã€‚

ä¾‹å¦‚ï¼Œé“¾è¡¨ 7->9->1->8->5->2->5ï¼Œpivot=5ã€‚åœ¨åˆ’åˆ†ä¹‹åï¼Œsmallã€equalã€big åˆ†åˆ«ä¸ºï¼š

- smallï¼š1->2->null
- equalï¼š5->5->null 
- bigï¼š7->9->8->null

å°† smallã€equal å’Œ big ä¸‰ä¸ªé“¾è¡¨é‡æ–°ä¸²èµ·æ¥å³å¯ã€‚æ•´ä¸ªè¿‡ç¨‹éœ€è¦ç‰¹åˆ«æ³¨æ„å¯¹ null èŠ‚ç‚¹çš„åˆ¤æ–­å’Œå¤„ç†ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.List;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // é“¾è¡¨é•¿åº¦
        int pivot = sc.nextInt();

        // æ„é€ é“¾è¡¨
        ListNode head = new ListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        ListNode p = head; // å·¥ä½œæŒ‡é’ˆ
        for (int i = 1; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        ListNode head2 = listPartition(head, pivot);
        ListNode cur = head2;
        while (cur != null) {
            System.out.print(cur.val + " ");
            cur = cur.next;
        }

    }

    private static ListNode listPartition(ListNode head, int pivot) {
        if (head == null) {
            return head;
        }

        ListNode sH = null; // å°çš„å¤´
        ListNode sT = null; // å°çš„å°¾
        ListNode eH = null; // ç›¸ç­‰çš„å¤´
        ListNode eT = null; // ç›¸ç­‰çš„å°¾
        ListNode bH = null; // å¤§çš„å¤´
        ListNode bT = null; // å¤§çš„å°¾

        while (head != null) {
            ListNode temp = head.next; // é˜²æ­¢æ–­é“¾
            head.next = null; // é˜²æ­¢å‡ºç°ç¯

            // æ”¾å…¥å°é“¾è¡¨
            if (head.val < pivot) {
                if (sH == null) {
                    // åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ªå­˜å…¥çš„å…ƒç´ 
                    sH = head;
                    sT = head;
                }
                else {
                    sT.next = head;
                    sT = sT.next;
                }
            }
            // æ”¾å…¥ç›¸ç­‰çš„é“¾è¡¨
            else if (head.val == pivot) {
                if (eH == null) {
                    eH = head;
                    eT = head;
                }
                else {
                    eT.next = head;
                    eT = eT.next;
                }
            }
            // æ”¾å…¥å¤§é“¾è¡¨
            else {
                if (bH == null) {
                    bH = head;
                    bT = head;
                }
                else {
                    bT.next = head;
                    bT = bT.next;
                }
            }

            head = temp;
        }


        // å°é“¾è¡¨å’Œç›¸ç­‰çš„é“¾è¡¨è¿æ¥
        if (sT != null) {
            sT.next = eH;
            eT = (eT == null) ? sT : eT;
        }
        // ç›¸ç­‰çš„é“¾è¡¨å’Œå¤§é“¾è¡¨è¿æ¥
        if (eT != null) {
            eT.next = bH;
        }

        return (sH != null) ? sH : (eH != null) ? eH : bH;
    }


    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
        }
    }
}
```

æ³¨æ„è¿™è¡Œä»£ç ï¼Œé˜²æ­¢æˆç¯

![](https://gitee.com/veal98/images/raw/master/img/20210409223018.png)

## CD/LC138. å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[LC138. å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨](https://leetcode-cn.com/problems/copy-list-with-random-pointer/)
- Nowcoderï¼šä¹¦ä¸­æœ‰è¿™ä¸ªé¢˜ç›®ï¼Œä½†æ˜¯ç‰›å®¢ç½‘ä¸Šæ²¡æœ‰

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªé¢å¤–å¢åŠ çš„éšæœºæŒ‡é’ˆ random ï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŒ‡å‘é“¾è¡¨ä¸­çš„ä»»ä½•èŠ‚ç‚¹æˆ–ç©ºèŠ‚ç‚¹ã€‚

æ„é€ è¿™ä¸ªé“¾è¡¨çš„ æ·±æ‹·è´ã€‚ æ·±æ‹·è´åº”è¯¥æ­£å¥½ç”± n ä¸ª å…¨æ–°èŠ‚ç‚¹ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªæ–°èŠ‚ç‚¹çš„å€¼éƒ½è®¾ä¸ºå…¶å¯¹åº”çš„åŸèŠ‚ç‚¹çš„å€¼ã€‚æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆå’Œ random æŒ‡é’ˆä¹Ÿéƒ½åº”æŒ‡å‘å¤åˆ¶é“¾è¡¨ä¸­çš„æ–°èŠ‚ç‚¹ï¼Œå¹¶ä½¿åŸé“¾è¡¨å’Œå¤åˆ¶é“¾è¡¨ä¸­çš„è¿™äº›æŒ‡é’ˆèƒ½å¤Ÿè¡¨ç¤ºç›¸åŒçš„é“¾è¡¨çŠ¶æ€ã€‚å¤åˆ¶é“¾è¡¨ä¸­çš„æŒ‡é’ˆéƒ½ä¸åº”æŒ‡å‘åŸé“¾è¡¨ä¸­çš„èŠ‚ç‚¹ ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœåŸé“¾è¡¨ä¸­æœ‰ X å’Œ Y ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ X.random --> Y ã€‚é‚£ä¹ˆåœ¨å¤åˆ¶é“¾è¡¨ä¸­å¯¹åº”çš„ä¸¤ä¸ªèŠ‚ç‚¹ x å’Œ y ï¼ŒåŒæ ·æœ‰ x.random --> y ã€‚

è¿”å›å¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚

ç”¨ä¸€ä¸ªç”± n ä¸ªèŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æ¥è¡¨ç¤ºè¾“å…¥/è¾“å‡ºä¸­çš„é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ª [val, random_index] è¡¨ç¤ºï¼š

- valï¼šä¸€ä¸ªè¡¨ç¤º Node.val çš„æ•´æ•°ã€‚
- random_indexï¼šéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ç´¢å¼•ï¼ˆèŒƒå›´ä» 0 åˆ° n-1ï¼‰ï¼›å¦‚æœä¸æŒ‡å‘ä»»ä½•èŠ‚ç‚¹ï¼Œåˆ™ä¸º  null ã€‚

ä½ çš„ä»£ç  åª æ¥å—åŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ä½œä¸ºä¼ å…¥å‚æ•°ã€‚

ç¤ºä¾‹ 1ï¼š

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/01/09/e1.png)

```
è¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]
è¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]
```

ç¤ºä¾‹ 2ï¼š

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/01/09/e2.png)

```
è¾“å…¥ï¼šhead = [[1,1],[2,1]]
è¾“å‡ºï¼š[[1,1],[2,1]]
```

ç¤ºä¾‹ 3ï¼š

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/01/09/e3.png)

```
è¾“å…¥ï¼šhead = [[3,null],[3,0],[3,null]]
è¾“å‡ºï¼š[[3,null],[3,0],[3,null]]
```


ç¤ºä¾‹ 4ï¼š

```
è¾“å…¥ï¼šhead = []
è¾“å‡ºï¼š[]
è§£é‡Šï¼šç»™å®šçš„é“¾è¡¨ä¸ºç©ºï¼ˆç©ºæŒ‡é’ˆï¼‰ï¼Œå› æ­¤è¿”å› nullã€‚
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

æ–¹æ³•ä¸€ï¼šå…ˆéå†ä¸€éé“¾è¡¨ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨ä¿å­˜åŸèŠ‚ç‚¹å’Œå‰¯æœ¬èŠ‚ç‚¹çš„å¯¹åº”å…³ç³»ï¼Œç„¶åå†éå†ä¸€éèŠ‚ç‚¹ï¼Œå¤„ç†ä¸€ä¸‹ random æŒ‡é’ˆã€‚

![](https://gitee.com/veal98/images/raw/master/img/20210411215037.png)

å“ˆå¸Œè¡¨å¢åˆ æ”¹æŸ¥çš„æ“ä½œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ï¼Œæ™®é€šæ–¹æ³•ä¸€å…±åªéå†é“¾è¡¨ä¸¤éï¼Œæ‰€ä»¥ä¸Šè¿°è§£æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ã€‚å› ä¸ºä½¿ç”¨äº†å“ˆå¸Œè¡¨ï¼Œæ‰€ä»¥é¢å¤–ç©ºé—´å¤æ‚åº¦ä¸º O(N)ã€‚

```java
/*
// Definition for a Node.
class Node {
    int val;
    Node next;
    Node random;

    public Node(int val) {
        this.val = val;
        this.next = null;
        this.random = null;
    }
}
*/

class Solution {
    public Node copyRandomList(Node head) {
        if (head == null) {
            return null;
        }
        // ä½¿ç”¨å“ˆå¸Œè¡¨ä¿å­˜åŸèŠ‚ç‚¹å’Œå‰¯æœ¬èŠ‚ç‚¹çš„å…³ç³»
        Map<Node, Node> map = new HashMap<>();
        Node cur = head;
        while (cur != null) {
            map.put(cur, new Node(cur.val));
            cur = cur.next;
        }
        
        // å†éå†ä¸€éé“¾è¡¨å¤„ç† random æŒ‡é’ˆ
        cur = head;
        while (cur != null) {
            map.get(cur).next = map.get(cur.next);
            map.get(cur).random = map.get(cur.random);
            cur = cur.next;
        }
        
        return map.get(head);
    }
}
```

æ–¹æ³•äºŒï¼š

![](https://gitee.com/veal98/images/raw/master/img/20210411220953.png)

```java
class Solution {
    public Node copyRandomList(Node head) {
        if (head == null) {
            return null;
        }
        
        // åˆ›å»ºå‰¯æœ¬èŠ‚ç‚¹å¹¶å°†å…¶è¿æ¥åœ¨å¯¹åº”çš„åŸèŠ‚ç‚¹åé¢
        Node cur = head;
        while (cur != null) {
            Node copy = new Node(cur.val);
            copy.next = cur.next;
            cur.next = copy;
            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¤„ç†
            cur = copy.next;
        }
        
        // å†éå†ä¸€éèŠ‚ç‚¹ï¼Œå¤„ç† random æŒ‡é’ˆ
        cur = head;
        while (cur != null) {
            Node copy = cur.next; // å‰¯æœ¬èŠ‚ç‚¹
            copy.random = cur.random != null ? cur.random.next : null;
            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¤„ç†
            cur = copy.next;
        }
        
        // åˆ†ç¦»åŸèŠ‚ç‚¹å’Œå‰¯æœ¬èŠ‚ç‚¹
        Node res = head.next;
        cur = head;
        while (cur != null) {
            Node temp = cur.next.next; // ä¸‹ä¸€ä¸ªåŸèŠ‚ç‚¹
            Node copy = cur.next;
            cur.next = temp;
            copy.next = temp != null ? temp.next : null;
            
            cur = temp;
        }
        
        return res;
    }
}
```

## CD114/LC2. ä¸¤ä¸ªé“¾è¡¨ç”Ÿæˆç›¸åŠ é“¾è¡¨

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD114. ä¸¤ä¸ªé“¾è¡¨ç”Ÿæˆç›¸åŠ é“¾è¡¨](https://www.nowcoder.com/practice/2d4ae9ef94c8412ebe49118f8e1da2df?tpId=101&tqId=33182&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)
- LeetCodeï¼š[2. ä¸¤æ•°ç›¸åŠ  - Medium](https://leetcode-cn.com/problems/add-two-numbers/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

å‡è®¾é“¾è¡¨ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½åœ¨ 0 - 9 ä¹‹é—´ï¼Œé‚£ä¹ˆé“¾è¡¨æ•´ä½“å°±å¯ä»¥ä»£è¡¨ä¸€ä¸ªæ•´æ•°ã€‚

ç»™å®šä¸¤ä¸ªè¿™ç§é“¾è¡¨ï¼Œè¯·ç”Ÿæˆä»£è¡¨ä¸¤ä¸ªæ•´æ•°ç›¸åŠ å€¼çš„ç»“æœé“¾è¡¨ã€‚

ä¾‹å¦‚ï¼šé“¾è¡¨ 1 ä¸º 9->3->7ï¼Œé“¾è¡¨ 2 ä¸º 6->3ï¼Œæœ€åç”Ÿæˆæ–°çš„ç»“æœé“¾è¡¨ä¸º 1->0->0->0ã€‚

è¾“å…¥æè¿°:

```
ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•° n å’Œ mï¼Œåˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦ã€‚

ç¬¬äºŒè¡Œ n ä¸ªæ•´æ•° ai è¡¨ç¤ºç¬¬ä¸€ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹ã€‚

ç¬¬ä¸‰è¡Œ m ä¸ªæ•´æ•° bi è¡¨ç¤ºç¬¬äºŒä¸ªé“¾è¡¨çš„èŠ‚ç‚¹ã€‚
```

è¾“å‡ºæè¿°:

```
è¾“å‡ºä¸€è¡Œæ•´æ•°è¡¨ç¤ºç»“æœé“¾è¡¨ã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
3 2
9 3 7
6 3

è¾“å‡º
1 0 0 0
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

- å°†ä¸¤ä¸ªé“¾è¡¨é€†åºï¼Œè¿™æ ·å°±å¯ä»¥ä¾æ¬¡å¾—åˆ°ä»ä½ä½åˆ°é«˜ä½çš„æ•°å­—
- åŒæ­¥éå†ä¸¤ä¸ªé€†åºåçš„é“¾è¡¨ï¼Œè¿™æ ·å°±ä¾æ¬¡å¾—åˆ°ä¸¤ä¸ªé“¾è¡¨ä»ä½ä½åˆ°é«˜ä½çš„æ•°å­—ï¼Œç„¶åé€ä¸€è®¡ç®—ä¸¤ä¸ªé“¾è¡¨çš„ä¸¤æ•°ä¹‹å’Œï¼Œå°†å…¶æ’å…¥æ–°é“¾è¡¨ï¼ŒåŒæ—¶éœ€è¦å…³æ³¨æ¯ä¸€æ­¥æ˜¯å¦æœ‰è¿›ä½
- å½“ä¸¤ä¸ªé“¾è¡¨éƒ½éå†å®Œæˆåï¼Œè¿˜è¦å…³æ³¨æœ€åä¸€æ¬¡çš„è¿›ä½ä¿¡æ¯æ˜¯å¦ä¸º 1ï¼Œå¦‚æœä¸º 1ï¼Œè¿˜è¦ç”Ÿæˆä¸€ä¸ªèŠ‚ç‚¹
  å€¼ä¸º 1 çš„æ–°èŠ‚ç‚¹ã€‚ï¼ˆæ¯”å¦‚ 9 + 1 = 10ï¼Œä¸¤ä¸ªä¸€ä½æ•°ç›¸åŠ ï¼Œä½†æ˜¯ç»“æœæ˜¯ä¸¤ä½æ•°ï¼Œå› ä¸ºæœ€åä¸€æ¬¡çš„è¿›ä½æ˜¯ 1ï¼‰
- æœ€åï¼Œé€†åºæ–°é“¾è¡¨ï¼Œè¿”å›æ–°é“¾è¡¨çš„è¡¨å¤´èŠ‚ç‚¹å³å¯ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.List;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // ç¬¬ä¸€ä¸ªé“¾è¡¨çš„é•¿åº¦
        int m = sc.nextInt(); // ç¬¬äºŒä¸ªé“¾è¡¨çš„é•¿åº¦
        // æ„é€ ç¬¬ä¸€ä¸ªé“¾è¡¨
        ListNode head1 = new ListNode(sc.nextInt());
        ListNode cur = head1;
        for (int i = 1; i < n; i ++) {
            cur.next = new ListNode(sc.nextInt());
            cur = cur.next;
        }
        // æ„é€ ç¬¬äºŒä¸ªé“¾è¡¨
        ListNode head2 = new ListNode(sc.nextInt());
        cur = head2;
        for (int i = 1; i < m; i ++) {
            cur.next = new ListNode(sc.nextInt());
            cur = cur.next;
        }

        ListNode res = addList(head1, head2);
        cur = res;
        while (cur != null) {
        	System.out.println(cur.val + " ");
            cur = cur.next;
        }
    }

    // ä¸¤ä¸ªé“¾è¡¨ç›¸åŠ 
    private static ListNode addList(ListNode head1, ListNode head2) {
        if (head1 == null || head2 == null) {
            return (head1 == null) ? head2 : head1;
        }
        head1 = reverseList(head1);
        head2 = reverseList(head2);
        ListNode res = new ListNode(-1);
        ListNode p = res;

        ListNode cur1 = head1;
        ListNode cur2 = head2;
        int carry = 0; // è¿›ä½
        while (cur1 != null || cur2 != null) {
            int n1 = (cur1 == null) ? 0 : cur1.val;
            int n2 = (cur2 == null) ? 0 : cur2.val;
            int sum = n1 + n2 + carry;
            if (sum > 9) {
                p.next = new ListNode(sum - 10);
                p = p.next;
                carry = 1;
            }
            else {
                p.next = new ListNode(sum);
                p = p.next;
                carry = 0;
            }

            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ç›¸åŠ 
            cur1 = (cur1 == null) ? null : cur1.next;
            cur2 = (cur2 == null) ? null : cur2.next;
        }

        // æ³¨æ„æœ€åä¸€ä½è¿›ä½çš„åˆ¤æ–­
        if (carry == 1) {
            p.next = new ListNode(1);
        }

        return reverseList(res.next);
    }

    // åŸåœ°åè½¬å•é“¾è¡¨
    private static ListNode reverseList(ListNode head) {
        ListNode preNode = null; // å‰é©±èŠ‚ç‚¹
        while (head != null) {
            ListNode temp = head.next;

            head.next = preNode;
            preNode = head;

            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åˆ¤æ–­
            head = temp;
        }
        return preNode;
    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }
}
```

ä¸Šè¿°ä»£ç åªèƒ½é€šè¿‡ 80% çš„æ¡ˆä¾‹ï¼Œä¹‹å‰æ ˆå’Œé˜Ÿåˆ—ç« èŠ‚ - CD188 é¢˜å•è°ƒæ ˆè¿›é˜¶é‚£é“é¢˜ç›®ä¹Ÿå‡ºç°äº†è¿™ç§æƒ…å†µã€‚è½»è½¦ç†Ÿè·¯ï¼Œè€ƒè™‘æ˜¯ IO æ¬¡æ•°å¤ªå¤šå¯¼è‡´çš„ï¼Œç”¨ StringBuilder ä¿å­˜ç»“æœï¼Œç„¶åä¸€æ¬¡æ€§è¾“å‡ºï¼š

```java
ListNode res = addList(head1, head2);
cur = res;
StringBuilder sb = new StringBuilder();
while (cur != null) {
    sb.append(cur.val);
    sb.append(" ");
    cur = cur.next;
}
System.out.println(sb);
```

## CD/LC141. åˆ¤å®šé“¾è¡¨æ˜¯å¦æœ‰ç¯

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- LeetCodeï¼š[141. ç¯å½¢é“¾è¡¨ â€” Easy](https://leetcode-cn.com/problems/linked-list-cycle/)
- Nowcoderï¼šä¹¦ä¸­æœ‰è¿™ä¸ªé¢˜ç›®ï¼Œä½†æ˜¯ç‰›å®¢ç½‘ä¸Šæ²¡æœ‰

ã€é¢˜ç›®æè¿°ã€‘ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚

å¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª next æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬<u>ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯</u>ã€‚æ³¨æ„ï¼špos ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚

å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™è¿”å› true ã€‚ å¦åˆ™ï¼Œè¿”å› false ã€‚

ç¤ºä¾‹ 1ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20201113213046.png)

```
è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1
è¾“å‡ºï¼štrue
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼šç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªè·‘å¾—å¿«ï¼Œä¸€ä¸ªè·‘å¾—æ…¢ã€‚å¦‚æœä¸å«æœ‰ç¯ï¼Œè·‘å¾—å¿«çš„é‚£ä¸ªæŒ‡é’ˆæœ€ç»ˆä¼šé‡åˆ° `null`ï¼›<u>å¦‚æœå«æœ‰ç¯ï¼Œå¿«æŒ‡é’ˆæœ€ç»ˆä¼šè¶…æ…¢æŒ‡é’ˆä¸€åœˆï¼Œå’Œæ…¢æŒ‡é’ˆç›¸é‡</u>ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
/**
 * Definition for singly-linked list.
 * class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) {
 *         val = x;
 *         next = null;
 *     }
 * }
 */
public class Solution {
    public boolean hasCycle(ListNode head) {
        ListNode fast = head;
        ListNode slow = head;
        while(fast != null && fast.next != null){
            fast = fast.next.next;
            slow = slow.next;
            
            // å¿«æŒ‡é’ˆè¿½ä¸Šæ…¢æŒ‡é’ˆï¼Œå­˜åœ¨ç¯
            if(fast == slow)
                return true;
        }
        return false;
    }
}
```

## CD/LC142. å·²çŸ¥é“¾è¡¨ä¸­å«æœ‰ç¯ï¼Œè¿”å›å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- LeetCodeï¼š[142. ç¯å½¢é“¾è¡¨ II â€” Medium](https://leetcode-cn.com/problems/linked-list-cycle-ii/)
- Nowcoderï¼šä¹¦ä¸­æœ‰è¿™ä¸ªé¢˜ç›®ï¼Œä½†æ˜¯ç‰›å®¢ç½‘ä¸Šæ²¡æœ‰

ã€é¢˜ç›®æè¿°ã€‘ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ <u>å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› null</u>ã€‚

ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚ å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼Œpos ä»…ä»…æ˜¯ç”¨äºæ ‡è¯†ç¯çš„æƒ…å†µï¼Œå¹¶ä¸ä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°å‡½æ•°ä¸­ã€‚

è¯´æ˜ï¼šä¸å…è®¸ä¿®æ”¹ç»™å®šçš„é“¾è¡¨ã€‚

ç¤ºä¾‹ 1ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20201113213046.png)

```
è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1
è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼šæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œfast ä¸slowã€‚å®ƒä»¬èµ·å§‹éƒ½ä½äºé“¾è¡¨çš„å¤´éƒ¨ã€‚éšåï¼Œslow æŒ‡é’ˆæ¯æ¬¡å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œè€Œ fast æŒ‡é’ˆå‘åç§»åŠ¨ä¸¤ä¸ªä½ç½®ã€‚å¦‚æœé“¾è¡¨ä¸­å­˜åœ¨ç¯ï¼Œåˆ™ fast æŒ‡é’ˆæœ€ç»ˆå°†å†æ¬¡ä¸ \slow æŒ‡é’ˆåœ¨ç¯ä¸­ç›¸é‡ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè®¾é“¾è¡¨ä¸­ç¯å¤–éƒ¨åˆ†çš„é•¿åº¦ä¸º aã€‚slow æŒ‡é’ˆè¿›å…¥ç¯åï¼Œåˆèµ°äº† b çš„è·ç¦»ä¸ fast ç›¸é‡ã€‚æ­¤æ—¶ï¼Œfast æŒ‡é’ˆå·²ç»èµ°å®Œäº†ç¯çš„ n åœˆï¼Œå› æ­¤å®ƒèµ°è¿‡çš„æ€»è·ç¦»ä¸º a+n(b+c)+b=a+(n+1)b+nc

<img src="https://gitee.com/veal98/images/raw/master/img/20201113214440.png" style="zoom: 67%;" />

ä»»æ„æ—¶åˆ»ï¼Œfast æŒ‡é’ˆèµ°è¿‡çš„è·ç¦»éƒ½ä¸º slow æŒ‡é’ˆçš„ 2 å€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœ‰

a+(n+1)b+nc=2(a+b)âŸ¹a=c+(nâˆ’1)(b+c)

æœ‰äº† a=c+(n-1)(b+c) çš„ç­‰é‡å…³ç³»ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼š**ä»ç›¸é‡ç‚¹åˆ°å…¥ç¯ç‚¹çš„è·ç¦»åŠ ä¸Š n-1 åœˆçš„ç¯é•¿ï¼Œæ°å¥½ç­‰äºä»é“¾è¡¨å¤´éƒ¨åˆ°å…¥ç¯ç‚¹çš„è·ç¦»**ã€‚

å› æ­¤ï¼Œå½“å‘ç°slow ä¸ fast ç›¸é‡æ—¶ï¼Œæˆ‘ä»¬å†é¢å¤–ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆ ptrã€‚èµ·å§‹ï¼Œå®ƒæŒ‡å‘é“¾è¡¨å¤´éƒ¨ï¼›éšåï¼Œå°† ptr å’Œ slow åŒæ—¶æ¯æ¬¡å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚æœ€ç»ˆï¼Œå®ƒä»¬ä¼šåœ¨å…¥ç¯ç‚¹ç›¸é‡ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
/**
 * Definition for singly-linked list.
 * class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) {
 *         val = x;
 *         next = null;
 *     }
 * }
 */
public class Solution {
    public ListNode detectCycle(ListNode head) {
        ListNode fast = head;
        ListNode slow = head;
        ListNode ptr = head;
        while(fast != null && fast.next != null){
            fast = fast.next.next;
            slow = slow.next;
            
            // å¿«æŒ‡é’ˆè¿½ä¸Šæ…¢æŒ‡é’ˆï¼Œå­˜åœ¨ç¯
            if(fast == slow){
                while(slow != ptr){
                    slow = slow.next;
                    ptr = ptr.next;
                }
                return ptr;
            }
                
        }
        return null;
    }
}
```

## CD/LC160. ä¸¤ä¸ªæ— ç¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- LeetCodeï¼š[160. ç›¸äº¤é“¾è¡¨ â€” Easy](https://leetcode-cn.com/problems/intersection-of-two-linked-lists/)
- Nowcoderï¼šä¹¦ä¸­æœ‰è¿™ä¸ªé¢˜ç›®ï¼Œä½†æ˜¯ç‰›å®¢ç½‘ä¸Šæ²¡æœ‰

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ‰¾åˆ°ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚

å¦‚ä¸‹é¢çš„ä¸¤ä¸ªé“¾è¡¨ï¼š

<img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_statement.png" alt="img" style="zoom:67%;" />

åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤ã€‚

ç¤ºä¾‹ 1ï¼š

<img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_example_1.png" alt="img" style="zoom:67%;" />

```
è¾“å…¥ï¼šintersectVal = 8, listA = [4,1,8,4,5], listB = [5,0,1,8,4,5], skipA = 2, skipB = 3
è¾“å‡ºï¼šReference of the node with value = 8
è¾“å…¥è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 8 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [4,1,8,4,5]ï¼Œé“¾è¡¨ B ä¸º [5,0,1,8,4,5]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ã€‚
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

å…ˆèµ°å®Œé•¿é“¾è¡¨å¤šå‡ºæ¥çš„éƒ¨åˆ†ï¼Œç„¶åå†ä¸€åŒéå†ä¸¤ä¸ªé“¾è¡¨ï¼Œç›´åˆ°æ‰¾åˆ°æŸä¸ªç›¸åŒèŠ‚ç‚¹

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode(int x) {
 *         val = x;
 *         next = null;
 *     }
 * }
 */
public class Solution {
    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {
        if (headA == null || headB == null) {
            return null;
        }   
        
        // è®¡ç®—ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦
        ListNode cur1 = headA;
        ListNode cur2 = headB;
        int len1 = 0;
        int len2 = 0;
        while (cur1 != null) {
            len1 ++;
            cur1 = cur1.next;
        }
        while (cur2 != null) {
            len2 ++;
            cur2 = cur2.next;
        }
        
        // å¦‚æœåˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹äº†ä»–ä¿©ä»ç„¶ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±è¯´æ˜è¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤
        if (cur1 != cur2) {
            return null;
        }
        
        ListNode longer = headA;
        ListNode shorter = headB;
        if (len1 < len2) {
            longer = headB;
            shorter = headA;
        }
        
        // å…ˆèµ°å®Œé•¿é“¾è¡¨å¤šå‡ºæ¥çš„éƒ¨åˆ†
        for (int i = 0; i < Math.abs(len1-len2); i ++) {
            longer = longer.next;
        }
        
        // æŸ¥æ‰¾å…¬ä¼—èŠ‚ç‚¹
        while (longer != null && shorter != null) {
            if (longer == shorter) {
                return longer;
            }
            longer = longer.next;
            shorter = shorter.next;
        }
        
        return null;
    }
}
```

## CD. ä¸¤ä¸ªæœ‰ç¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- Nowcoderï¼šä¹¦ä¸­æœ‰è¿™ä¸ªé¢˜ç›®ï¼Œä½†æ˜¯ç‰›å®¢ç½‘ä¸Šæ²¡æœ‰

ã€é¢˜ç›®æè¿°ã€‘ï¼š

è¿™ä¸ªé¢˜ç›®å…¶å®æ˜¯ã€Šç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—ã€‹ä¸€ä¹¦ä¸­ä¸€ä¸ªå¤§é¢˜ç›®æ‹†åˆ†çš„ä¸€ä¸ªå°é—®é¢˜ï¼ŒåŸé¢˜æè¿°æ˜¯è¿™æ ·çš„ï¼š

åœ¨æœ¬é¢˜ä¸­ï¼Œå•é“¾è¡¨å¯èƒ½æœ‰ç¯ï¼Œä¹Ÿå¯èƒ½æ— ç¯ã€‚ç»™å®šä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head1 å’Œ head2ï¼Œè¿™ä¸¤ä¸ªé“¾è¡¨å¯èƒ½ç›¸äº¤ï¼Œä¹Ÿå¯èƒ½ä¸ç›¸äº¤ã€‚è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤ï¼Œè¯·è¿”å›ç›¸äº¤çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼›å¦‚æœä¸ç›¸äº¤ï¼Œè¿”å› null å³å¯ã€‚

è¦æ±‚ï¼šå¦‚æœé“¾è¡¨ 1 çš„é•¿åº¦ä¸º Nï¼Œé“¾è¡¨ 2 çš„é•¿åº¦ä¸º Mï¼Œæ—¶é—´å¤æ‚åº¦è¯·è¾¾åˆ° O(N+M)ï¼Œé¢å¤–ç©ºé—´å¤æ‚åº¦è¯·è¾¾åˆ° O(1)ã€‚

æ˜¾ç„¶ï¼Œè¿™ä¸ªé¢˜ç›®åˆ†ä¸¤ç§æƒ…å†µï¼šä¸¤ä¸ªæœ‰ç¯é“¾è¡¨ç›¸äº¤ã€ä¸¤ä¸ªæ— ç¯é“¾è¡¨ç›¸äº¤ï¼ˆä¸Šé¢˜å·²å®Œæˆï¼‰ï¼Œ**ä¸€ä¸ªæœ‰ç¯ä¸€ä¸ªæ— ç¯æ˜¯ä¸å¯èƒ½ç›¸äº¤çš„**ã€‚

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

å‡è®¾é“¾è¡¨ 1 çš„ç¬¬ä¸€ä¸ªå…¥ç¯èŠ‚ç‚¹è®°ä¸º loop1ï¼Œé“¾è¡¨ 2 çš„ç¬¬ä¸€ä¸ªå…¥ç¯èŠ‚ç‚¹è®°ä¸º loop2ã€‚

1ï¼‰å¦‚æœ loop1==loop2ï¼Œé‚£ä¹ˆä¸¤ä¸ªé“¾è¡¨çš„æ‹“æ‰‘ç»“æ„å¦‚å›¾ 2-8 æ‰€ç¤ºã€‚

![](https://gitee.com/veal98/images/raw/master/img/20210412215430.png)

è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªè¦è€ƒè™‘é“¾è¡¨ 1 ä»å¤´å¼€å§‹åˆ° loop1 è¿™ä¸€æ®µä¸é“¾è¡¨ 2 ä»å¤´å¼€å§‹åˆ° loop2 è¿™ä¸€æ®µï¼Œåœ¨é‚£é‡Œç¬¬ä¸€æ¬¡ç›¸äº¤å³å¯ï¼Œè€Œä¸ç”¨è€ƒè™‘è¿›ç¯è¯¥æ€ä¹ˆå¤„ç†ï¼Œè¿™å°±ä¸å¯»æ‰¾ä¸¤ä¸ªæ— ç¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒæ˜¯æŠŠ null ä½œä¸ºä¸€ä¸ªé“¾è¡¨çš„ç»ˆç‚¹ï¼Œè€Œç°åœ¨è¿™ä¸ªé—®é¢˜æ˜¯æŠŠ loop1(loop2)ä½œä¸ºé“¾è¡¨çš„ç»ˆç‚¹ã€‚ä½†æ˜¯åˆ¤æ–­çš„ä¸»è¦è¿‡ç¨‹æ˜¯ç›¸åŒçš„ã€‚

2ï¼‰å¦‚æœ loop1!=loop2ï¼Œä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤çš„æ‹“æ‰‘ç»“æ„å¦‚å›¾ 2-9 æ‰€ç¤ºã€‚ä¸¤ä¸ªé“¾è¡¨ç›¸äº¤çš„æ‹“æ‰‘ç»“æ„å¦‚å›¾ 2-10 æ‰€ç¤ºã€‚

![](https://gitee.com/veal98/images/raw/master/img/20210412215456.png)

å¦‚ä½•åˆ†è¾¨æ˜¯è¿™ä¸¤ç§æ‹“æ‰‘ç»“æ„çš„å“ªä¸€ç§å‘¢ï¼Ÿ

è®©é“¾è¡¨ 1 ä» loop1 å‡ºå‘ï¼Œå› ä¸º loop1 å’Œä¹‹åçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½åœ¨ç¯ä¸Šï¼Œæ‰€ä»¥å°†æ¥ä¸€å®šèƒ½å›åˆ° loop1ï¼š

- å¦‚æœå›åˆ° loop1 ä¹‹å‰å¹¶æ²¡æœ‰é‡åˆ° loop2ï¼Œè¯´æ˜ä¸¤ä¸ªé“¾è¡¨çš„æ‹“æ‰‘ç»“æ„å¦‚å›¾ 2-9 æ‰€ç¤ºï¼Œä¹Ÿå°±æ˜¯ä¸ç›¸äº¤ï¼Œç›´æ¥è¿”å› nullï¼›
- å¦‚æœå›åˆ° loop1 ä¹‹å‰é‡åˆ°äº† loop2ï¼Œè¯´æ˜ä¸¤ä¸ªé“¾è¡¨çš„æ‹“æ‰‘ç»“æ„å¦‚å›¾ 2-10æ‰€ç¤ºï¼Œä¹Ÿå°±æ˜¯ç›¸äº¤ã€‚å› ä¸º loop1 å’Œ loop2 éƒ½åœ¨ä¸¤æ¡é“¾è¡¨ä¸Šï¼Œåªä¸è¿‡ loop1 æ˜¯ç¦»é“¾è¡¨ 1 è¾ƒè¿‘çš„èŠ‚ç‚¹ï¼Œloop2 æ˜¯ç¦»é“¾è¡¨ 2 è¾ƒè¿‘çš„èŠ‚ç‚¹ã€‚æ‰€ä»¥ï¼Œæ­¤æ—¶è¿”å› loop1 æˆ– loop2 éƒ½å¯ä»¥ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.Scanner;

public class Main {

    // æ‰¾åˆ°ä¸¤ä¸ªæœ‰ç¯é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹
    private static ListNode bothLoop(ListNode head1, ListNode head2) {
        // æ‰¾åˆ°ä¸¤ä¸ªæœ‰ç¯é“¾è¡¨çš„å…¥ç¯èŠ‚ç‚¹
        ListNode loop1 = detectCycle(head1);
        ListNode loop2 = detectCycle(head2);

        // å¦‚æœå…¥ç¯ç‚¹æ˜¯åŒä¸€ä¸ª
        if (loop1 == loop2) {
            // åˆ¤æ–­åˆ° loop1/loop2 ä¹‹å‰è¿™ä¸¤ä¸ªé“¾è¡¨æœ‰æ²¡æœ‰ç›¸äº¤
            ListNode cur1 = head1;
            ListNode cur2 = head2;

            int len1 = 0;
            int len2 = 0;
            while (cur1 != loop1) {
                len1 ++;
                cur1 = cur1.next;
            }
            while (cur2 != loop1) {
                len2 ++;
                cur2 = cur2.next;
            }

            if (cur1 != cur2) {
                return loop1;
            }

            ListNode longer = head1;
            ListNode shorter = head2;
            if (len1 < len2) {
                longer = head2;
                shorter = head1;
            }

            // å…ˆèµ°å®Œè¾ƒé•¿çš„éƒ¨åˆ†
            for (int i = 0; i < Math.abs(len1-len2); i ++) {
                longer = longer.next;
                shorter = shorter.next;
            }

            while (longer != loop1 && shorter != loop1) {
                if (longer == shorter) {
                    return longer;
                }
                longer = longer.next;
                shorter = shorter.next;
            }
        }
        // å¦‚æœä¸æ˜¯åŒä¸€ä¸ªå…¥ç¯ç‚¹
        else {
            ListNode cur = loop1.next;
            while (cur != loop1) {
                if (cur == loop2) {
                    return loop1;
                }
                cur = cur.next;
            }
            // è‹¥ loop1 é‡ä¸ä¸Š loop2, è¯´æ˜è¿™ä¸¤ä¸ªæœ‰ç¯é“¾è¡¨ä¸ç›¸äº¤
            return null;
        }

        return null;
    }

    // è¿”å›æœ‰ç¯é“¾è¡¨çš„å…¥ç¯èŠ‚ç‚¹
    private static ListNode detectCycle(ListNode head) {
        // è§ LC142
    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    private static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }
}
```

## CD119/LC20. å°†å•é“¾è¡¨çš„æ¯ K ä¸ªèŠ‚ç‚¹ä¹‹é—´é€†åº

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD119. å°†å•é“¾è¡¨çš„æ¯Kä¸ªèŠ‚ç‚¹ä¹‹é—´é€†åº](https://www.nowcoder.com/practice/66285653d28b4ed6a15613477670e936?tpId=101&tqId=33187&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)
- LeetCodeï¼š[25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ â€” hard](https://leetcode-cn.com/problems/reverse-nodes-in-k-group/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªå•é“¾è¡¨ï¼Œå®ç°ä¸€ä¸ªè°ƒæ•´å•é“¾è¡¨çš„å‡½æ•°ï¼Œä½¿å¾—æ¯ K ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„å€¼é€†åºï¼Œå¦‚æœæœ€åä¸å¤Ÿ K ä¸ªèŠ‚ç‚¹ä¸€ç»„ï¼Œåˆ™ä¸è°ƒæ•´æœ€åå‡ ä¸ªèŠ‚ç‚¹ã€‚

è¾“å…¥æè¿°:

```
ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° nï¼Œn è¡¨ç¤ºå•é“¾è¡¨çš„èŠ‚ç‚¹æ•°é‡ã€‚

ç¬¬äºŒè¡Œ n ä¸ªæ•´æ•° val è¡¨ç¤ºé“¾è¡¨çš„å„ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚

ç¬¬ä¸‰è¡Œä¸€ä¸ªæ•´æ•° Kã€‚
```

è¾“å‡ºæè¿°:

```
åœ¨ç»™å®šçš„å‡½æ•°å†…è¿”å›é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5
1 2 3 4 5
3

è¾“å‡º
3 2 1 4 5
```

<img src="https://gitee.com/veal98/images/raw/master/img/20210317174628.png" style="zoom:67%;" />

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

1ï¼‰è§£æ³•ä¸€ï¼šåˆ©ç”¨æ ˆ

![](https://gitee.com/veal98/images/raw/master/img/20210412225131.png)

å¯ä»¥è¿™ä¹ˆç†è§£ï¼šæˆ‘ä»¬ç”¨ä¸¤ä¸ªå˜é‡ä¿å­˜è¦è¢«é€†åºçš„è¿™æ®µ K ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹ï¼Œè€Œè¿™ K ä¸ªèŠ‚ç‚¹å­˜åœ¨æ ˆä¸­ï¼Œæˆ‘ä»¬å°†è¿™ K ä¸ªèŠ‚ç‚¹ä¾æ¬¡å‡ºæ ˆæ’å…¥åˆ°å‰é©±èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹ä¹‹é—´å°±è¡Œäº†ã€‚

```java
import java.util.Scanner;
import java.util.Stack;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // é“¾è¡¨é•¿åº¦

        // æ„é€ é“¾è¡¨
        ListNode head = new ListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        ListNode p = head; // å·¥ä½œæŒ‡é’ˆ
        for (int i = 1; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        int K = sc.nextInt(); // æ•´æ•° K

        ListNode res = reverseKNodes1(head, K);
        ListNode cur = res;
        while (cur != null) {
            System.out.print(cur.val + " ");
            cur = cur.next;
        }
    }

    // æ¯ K ä¸ªèŠ‚ç‚¹ä¸€ç»„é€†åºé“¾è¡¨
    private static ListNode reverseKNodes1(ListNode head, int K) {
        if (K <= 1) {
            return head;
        }

        Stack<ListNode> stack = new Stack<>();
        ListNode cur = head;
        ListNode newHead = head;
        ListNode pre = null;
        ListNode next = null;
        while (cur != null) {
            next = cur.next;
            stack.push(cur);
            if (stack.size() == K) {
                // å·¦å¼€å³å¼€ï¼Œä¸åŒ…å« pre å’Œ next èŠ‚ç‚¹
                // pre æ˜¯æœ¬æ¬¡é€†åºçš„ K ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
                // next æ˜¯æœ¬æ¬¡é€†åºçš„ K ä¸ªèŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹
                pre = resign1(stack, pre, next);
                // ç¬¬ä¸€ç»„é€†åºå®Œéœ€è¦æ›´æ–°ä¸‹å¤´èŠ‚ç‚¹ï¼Œåé¢ç»„ä¿æŒç¬¬ä¸€ç»„å·²ç»æ›´æ–°å¥½çš„å¤´èŠ‚ç‚¹çš„å€¼å°±è¡Œäº†
                // ç¬¬ä¸€ç»„é€†åºå®Œ newHead ä»ç„¶ç­‰äº head
                newHead = (newHead == head) ? cur : newHead;
            }
            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åˆ¤æ–­
            cur = next;
        }
        return newHead;
    }

    // é€†åºé“¾è¡¨ (left,right) ä¹‹é—´çš„èŠ‚ç‚¹ (å·¦å¼€å³å¼€)
    // æ ˆä¸­å­˜å‚¨çš„è‡ªåº•å‘ä¸Šå°±æ˜¯ (left,right) ä¹‹é—´çš„èŠ‚ç‚¹ (ä¸åŒ…å«left å’Œ right)
    private static ListNode resign1(Stack<ListNode> stack, ListNode left, ListNode right) {
        ListNode cur = stack.pop();
        if (left != null) {
            left.next = cur;
        }

        while (!stack.isEmpty()) {
            cur.next = stack.pop();
            cur = cur.next;
        }

        cur.next = right;

        // è¿”å›é€†åºçš„è¿™ K ä¸ªèŠ‚ç‚¹çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ ·æ–¹ä¾¿ç”¨æ¥ä½œä¸‹ä¸€æ®µ K ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
        return cur;

    }


    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    private static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }

}
```

2ï¼‰è§£æ³•äºŒï¼š

ä¸ç”¨æ ˆï¼Œç›´æ¥åœ¨åŸé“¾è¡¨ä¸Šè¿›è¡Œé€†åºï¼Œä¸è¿‡æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œç”¨ä¸¤ä¸ªå˜é‡ä¿å­˜è¦è¢«é€†åºçš„è¿™æ®µ K ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹ï¼Œç„¶åé€†åºè¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„ K ä¸ªèŠ‚ç‚¹å°±è¡Œäº†ã€‚

```java
	private static ListNode reverseKNodes2(ListNode head, int K) {
        if (K <= 1) {
            return head;
        }

        ListNode cur = head;
        ListNode pre = null;
        ListNode start = null;
        ListNode end = null;
        ListNode next = null;
        int count = 1;
        while (cur != null) {
            next = cur.next;
            if (count == K) {
                start = (pre == null) ? head : pre.next;
                // ç¬¬ä¸€ç»„é€†åºå®Œéœ€è¦æ›´æ–°ä¸‹å¤´èŠ‚ç‚¹ï¼Œåé¢ç»„ä¿æŒç¬¬ä¸€ç»„å·²ç»æ›´æ–°å¥½çš„å¤´èŠ‚ç‚¹çš„å€¼å°±è¡Œäº†
                // ç¬¬ä¸€ç»„é€†åºå®Œ pre ä»ç„¶æ˜¯ null
                head = (pre == null) ? cur : head;
                pre = resign2(pre, start, cur, next);
                count = 0;
            }
            count ++;
            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åˆ¤æ–­
            cur = next;
        }
        return head;
    }

    // é€†åº [start, end] ä¹‹é—´çš„èŠ‚ç‚¹ï¼Œleft æ˜¯è¿™æ®µèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ï¼Œright æ˜¯è¿™æ®µèŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹
    private static ListNode resign2(ListNode left, ListNode start, ListNode end, ListNode right) {
        ListNode cur = start.next; // ç¬¬ä¸€ä¸ªè¿›è¡Œå¤´æ’çš„èŠ‚ç‚¹
        // è¿™é‡Œæ²¡åŠæ³•ç”¨å¤´æ’æ³•ï¼ˆå› ä¸ºç¬¬ä¸€ä¸ªå‰é©±èŠ‚ç‚¹æ˜¯ nullï¼‰ï¼Œé‡‡ç”¨åŸåœ°åè½¬çš„æ–¹å¼
        ListNode pre = start;
        while (cur != right) {
            ListNode next = cur.next; // é˜²æ­¢æ–­é“¾

            cur.next = pre;
            pre = cur;

            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¤´æ’
            cur = next;
        }
        if (left != null) {
            left.next = end;
        }
        start.next = right;

        // è¿”å›é€†åºçš„è¿™ K ä¸ªèŠ‚ç‚¹çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ ·æ–¹ä¾¿ç”¨æ¥ä½œä¸‹ä¸€æ®µ K ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
        return start;
    }
```

## CD137. åˆ é™¤æ— åºé“¾è¡¨ä¸­å€¼é‡å¤å‡ºç°çš„èŠ‚ç‚¹

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD137. åˆ é™¤æ— åºé“¾è¡¨ä¸­å€¼é‡å¤å‡ºç°çš„èŠ‚ç‚¹](https://www.nowcoder.com/practice/fb3105d036344c6a8ecbef996e0b23a0?tpId=101&tqId=33205&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªæ— åºé“¾è¡¨ï¼Œåˆ é™¤å…¶ä¸­å€¼é‡å¤å‡ºç°çš„èŠ‚ç‚¹(ä¿ç•™å½“ä¸­é¡ºåºéå†ç¬¬ä¸€ä¸ªå‡ºç°çš„èŠ‚ç‚¹)ã€‚

è¾“å…¥æè¿°:

```
ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºå•é“¾è¡¨çš„èŠ‚ç‚¹æ•°é‡ã€‚
ç¬¬äºŒè¡Œ n ä¸ªæ•´æ•°è¡¨ç¤ºå•é“¾è¡¨çš„èŠ‚ç‚¹çš„å€¼ã€‚
```

è¾“å‡ºæè¿°:

```
é¡ºåºè¾“å‡ºå•é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5
1 3 2 3 1

è¾“å‡º
1 3 2
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

1ï¼‰è§£æ³•ä¸€ï¼šç›´æ¥æš´åŠ›è§£ï¼Œæ—¶é—´å¤æ‚åº¦ O(N^2)ï¼Œæ²¡æ³• ACã€‚å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼ˆæ¯”å¦‚å€¼ä¸º 1ï¼‰ï¼Œå¾€åæ£€æŸ¥æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¹¶åˆ é™¤å€¼ä¸º 1 çš„èŠ‚ç‚¹ã€‚

```java
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // é“¾è¡¨é•¿åº¦

        // æ„é€ é“¾è¡¨
        ListNode head = new ListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        ListNode p = head; // å·¥ä½œæŒ‡é’ˆ
        for (int i = 1; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        ListNode res = removeRepeatElements(head);
        ListNode cur = res;
        while (cur != null) {
            System.out.print(cur.val + " ");
            cur = cur.next;
        }
    }

    // æš´åŠ›è§£æ³•
    private static ListNode removeRepeatElements1(ListNode head) {
        if (head == null || head.next == null) {
            return head;
        }

        ListNode cur = head;
        while (cur != null) {
            ListNode pre = cur; // å‰é©±èŠ‚ç‚¹
            ListNode temp = cur.next; // å¾…åˆ¤æ–­èŠ‚ç‚¹ï¼ˆæ˜¯å¦éœ€è¦è¢«åˆ é™¤ï¼‰
            while (temp != null) {
                ListNode next = temp.next; // é˜²æ­¢æ–­é“¾

                if (temp.val == cur.val) {
                    pre.next = temp.next;
                }
                else {
                    pre = temp;
                }
                // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åˆ¤æ–­
                temp = next;
            }
            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åˆ¤æ–­
            cur = cur.next;
        }

        return head;
    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    private static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
            this.next = null;
        }
    }

}
```

2ï¼‰è§£æ³•äºŒï¼šä½¿ç”¨ HashSetï¼Œå› ä¸ºå¤´èŠ‚ç‚¹æ˜¯ä¸ç”¨åˆ é™¤çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥é¦–å…ˆå°†å¤´èŠ‚ç‚¹çš„å€¼æ”¾å…¥å“ˆå¸Œè¡¨ã€‚

ä»å¤´èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å¾€åéå†èŠ‚ç‚¹ï¼Œå‡è®¾å½“å‰éå†åˆ° cur èŠ‚ç‚¹ï¼Œå…ˆæ£€æŸ¥ cur çš„å€¼æ˜¯å¦åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œå¦‚æœåœ¨ï¼Œåˆ™è¯´æ˜ cur èŠ‚ç‚¹çš„å€¼æ˜¯ä¹‹å‰å‡ºç°è¿‡çš„ï¼Œå°±å°† cur èŠ‚ç‚¹åˆ é™¤ï¼›å¦‚æœä¸åœ¨ï¼Œå°† cur èŠ‚ç‚¹çš„å€¼åŠ å…¥å“ˆå¸Œè¡¨ã€‚

åªéœ€ä¸€æ¬¡éå†å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦ O(N)

```java
	private static ListNode removeRepeatElements2(ListNode head) {
        if (head == null || head.next == null) {
            return head;
        }

        Set<Integer> set = new HashSet<>();

        set.add(head.val); // å¤´èŠ‚ç‚¹è‚¯å®šä¸ä¼šè¢«åˆ é™¤

        ListNode cur = head.next;
        ListNode pre = cur; // å‰é©±èŠ‚ç‚¹
        while (cur != null) {
            ListNode next = cur.next; // é˜²æ­¢æ–­é“¾

            // è‹¥ set ä¸­å·²å­˜åœ¨è¯¥å€¼ï¼Œåˆ™åˆ é™¤è¯¥èŠ‚ç‚¹
            if (set.contains(cur.val)) {
                pre.next = cur.next;
            }
            else {
                set.add(cur.val);
                pre = cur;
            }

            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åˆ¤æ–­
            cur = next;
        }

        return head;
    }
```

## LC83. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ 

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- [83. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  â€” Easy](https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚

ç¤ºä¾‹ 1:

```
è¾“å…¥: 1->1->2
è¾“å‡º: 1->2
```


ç¤ºä¾‹ 2:

```
è¾“å…¥: 1->1->2->3->3
è¾“å‡º: 1->2->3
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

1ï¼‰æ–¹æ³•ä¸€ï¼š<u>CD137. åˆ é™¤æ— åºé“¾è¡¨ä¸­å€¼é‡å¤å‡ºç°çš„èŠ‚ç‚¹</u> ä½¿ç”¨çš„ä¸¤ä¸ªæ–¹æ³•å®Œå…¨é€‚ç”¨äºè¿™ä¸ªé¢˜ç›®ã€‚åªæ˜¯æ•ˆç‡ä¸é«˜ï¼Œé’ˆå¯¹æœ‰åºçš„é“¾è¡¨æˆ‘ä»¬å¯ä»¥æœ‰æ›´ä¼˜çš„æ‰‹æ®µã€‚

2ï¼‰æ–¹æ³•äºŒï¼šå½“ cur.val å’Œ cur.next.val ç›¸ç­‰æ—¶è¯´æ˜éœ€è¦å»é‡ï¼Œåˆ™å°† cur çš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªçš„ä¸‹ä¸€ä¸ªï¼Œè¿™æ ·å°±èƒ½è¾¾åˆ°å»é‡å¤çš„æ•ˆæœï¼›å¦‚æœä¸ç›¸ç­‰åˆ™ cur ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä½ç½®ç»§ç»­å¾ªç¯

æ—¶é—´å¤æ‚åº¦ O(N)

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode() {}
 *     ListNode(int val) { this.val = val; }
 *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }
 * }
 */
class Solution {
    public ListNode deleteDuplicates(ListNode head) {
        
        if (head == null || head.next == null) {
            return head;
        }
        
        ListNode cur = head;
        while (cur != null && cur.next != null) {
            if (cur.val == cur.next.val) {
                cur.next = cur.next.next;
            }
            else {
                cur = cur.next;
            }
        }
        
        return head;
    }
}
```

3ï¼‰æ–¹æ³•ä¸‰ï¼š

ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆ `slow` æŒ‡å‘æŸæ®µé‡å¤å…ƒç´ çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆç”¨æ¥æ‰«æé‡å¤å…ƒç´ ã€‚

æ‰¾åˆ°ä¸€ä¸ªä¸é‡å¤çš„å…ƒç´ å°±å‘Šè¯‰ `slow` å¹¶è®© `slow` è¿æ¥åˆ° `fast`ï¼Œå¹¶è®© `slow` å‘å‰ä¸€æ­¥ã€‚è¿™æ ·å½“ `fast` æŒ‡é’ˆéå†å®Œæ•´ä¸ªæ•°ç»„ `nums` åï¼Œ`[0..slow]` å°±æ˜¯ä¸é‡å¤å…ƒç´ ã€‚

æ—¶é—´å¤æ‚åº¦ O(N)

```java
class Solution {
    public ListNode deleteDuplicates(ListNode head) {
        if (head == null) {
            return null;
        }
        
        ListNode slow = head; // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è‚¯å®šä¸ä¼šè¢«åˆ é™¤
        ListNode fast = head; // ç”¨æ¥æ‰«æé‡å¤èŠ‚ç‚¹
        
        while (fast != null) {
            if (fast.val != slow.val) {
                slow.next = fast;
                slow = slow.next;
            }
            fast = fast.next;
        }
        // æ–­å¼€ä¸åé¢é‡å¤å…ƒç´ çš„è¿æ¥
        slow.next = null;
        return head;
    }
}
```

## LC82. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- LeetCodeï¼š[82. åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´  II â€” Medium](https://leetcode-cn.com/problems/remove-duplicates-from-sorted-list-ii/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰å«æœ‰é‡å¤æ•°å­—çš„èŠ‚ç‚¹ï¼Œåªä¿ç•™åŸå§‹é“¾è¡¨ä¸­ æ²¡æœ‰é‡å¤å‡ºç° çš„æ•°å­—ã€‚

ç¤ºä¾‹ 1:

```
è¾“å…¥: 1->2->3->3->4->4->5
è¾“å‡º: 1->2->5
```


ç¤ºä¾‹ 2:

```
è¾“å…¥: 1->1->1->2->3
è¾“å‡º: 2->3
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

å’Œä¸Šé¢˜æ€è·¯å·®ä¸å¤šï¼Œä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æŸæ®µé‡å¤å…ƒç´ çš„å‰é©±èŠ‚ç‚¹ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆç”¨æ¥æ‰«æé‡å¤å…ƒç´ ã€‚ä¸è¿‡è¿™é‡Œç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹ä¹Ÿæœ‰è¢«åˆ é™¤çš„å¯èƒ½æ€§ï¼Œæ‰€æœ‰å¼•å…¥ä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œæ–¹ä¾¿ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹å¤„ç†ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
/**
 * Definition for singly-linked list.
 * public class ListNode {
 *     int val;
 *     ListNode next;
 *     ListNode() {}
 *     ListNode(int val) { this.val = val; }
 *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }
 * }
 */
class Solution {
    public ListNode deleteDuplicates(ListNode head) {
        
        if (head == null) {
            return null;
        }
        
        // åˆ›å»ºå¤´èŠ‚ç‚¹
        ListNode newHead = new ListNode();
        newHead.next = head;
        
        ListNode pre = newHead; // é‡å¤èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
        ListNode cur = head; // æ‰«æé‡å¤èŠ‚ç‚¹
        
        while (cur != null) {
            // é‡åˆ°é‡å¤å‡ºç°çš„ç»“ç‚¹
            if (cur.next != null && cur.val == cur.next.val) {
                // å¾ªç¯éå†åˆ°è¯¥ç»“ç‚¹é‡å¤å‡ºç°çš„æœ«å°¾
                while (cur.next != null && cur.val == cur.next.val) {
                    cur = cur.next;
                }
                // åˆ é™¤è¿™äº›é‡å¤èŠ‚ç‚¹
                pre.next = cur.next;
                
            }
            // æ²¡é‡åˆ°é‡å¤å‡ºç°çš„ç»“ç‚¹,ç§»åŠ¨ pre
            else {
                pre = cur;
            }
            // ä¸ç®¡é‡æ²¡é‡åˆ°é‡å¤ç»“ç‚¹ï¼Œcuréƒ½æ˜¯ä¸€ç›´å‘å‰çš„
            cur = cur.next;  
        }
        
        return newHead.next;
    }
}
```


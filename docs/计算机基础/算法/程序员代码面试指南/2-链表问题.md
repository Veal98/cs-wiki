# é“¾è¡¨é—®é¢˜

---

## CD48. æ‰“å°ä¸¤ä¸ªå‡åºé“¾è¡¨å…·æœ‰ç›¸åŒå€¼çš„éƒ¨åˆ†

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD48. æ‰“å°ä¸¤ä¸ªå‡åºé“¾è¡¨çš„å…¬å…±éƒ¨åˆ†](https://www.nowcoder.com/practice/8943eea40dbb4185b187d80fd050fee9?tpId=101&tqId=33116&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸¤ä¸ªå‡åºé“¾è¡¨ï¼Œæ‰“å°ä¸¤ä¸ªå‡åºé“¾è¡¨çš„å…¬å…±éƒ¨åˆ†ã€‚ï¼ˆé¢˜æ„è¡¨è¿°çš„ä¸æ¸…æ¥šï¼Œå…¶å®æ˜¯æ‰“å°å‡ºä¸¤ä¸ªå‡åºé“¾è¡¨å…·æœ‰ç›¸åŒå€¼çš„éƒ¨åˆ†ï¼‰

è¾“å…¥æè¿°:

```
ç¬¬ä¸€ä¸ªé“¾è¡¨çš„é•¿åº¦ä¸º nã€‚

ç¬¬äºŒä¸ªé“¾è¡¨çš„é•¿åº¦ä¸º mã€‚

é“¾è¡¨ç»“ç‚¹çš„å€¼ä¸º valã€‚
```

è¾“å‡ºæè¿°:

```
è¾“å‡ºä¸€è¡Œæ•´æ•°è¡¨ç¤ºä¸¤ä¸ªå‡åºé“¾è¡¨çš„å…¬å…±éƒ¨åˆ†çš„å€¼ (æŒ‰å‡åºè¾“å‡º)ã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
4
1 2 3 4
5
1 2 3 5 6

è¾“å‡º
1 2 3
```

ç¤ºä¾‹2

```
è¾“å…¥
3
1 3 6
3
3 4 6

è¾“å‡º
3 6
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

å¾ˆç®€å•å§ï¼Œè·å–ä¸¤ä¸ªå‡åºé“¾è¡¨ä¸­å…·æœ‰ç›¸åŒå€¼å¾—å…ƒç´ ï¼Œä½¿ç”¨**å½’å¹¶**æ€æƒ³ï¼Œä»ä¸¤ä¸ªé“¾è¡¨çš„å¤´å¼€å§‹è¿›è¡Œå¦‚ä¸‹åˆ¤æ–­ï¼š

- å¦‚æœ head1 çš„å€¼å°äº head2ï¼Œåˆ™ head1 å¾€ä¸‹ç§»åŠ¨ã€‚
- å¦‚æœ head2 çš„å€¼å°äº head1ï¼Œåˆ™ head2 å¾€ä¸‹ç§»åŠ¨ã€‚
- å¦‚æœ head1 çš„å€¼ä¸ head2 çš„å€¼ç›¸ç­‰ï¼Œåˆ™æ‰“å°è¿™ä¸ªå€¼ï¼Œç„¶å head1 ä¸ head2 éƒ½å¾€ä¸‹ç§»åŠ¨ã€‚
- head1 æˆ– head2 æœ‰ä»»ä½•ä¸€ä¸ªç§»åŠ¨åˆ° nullï¼Œåˆ™æ•´ä¸ªè¿‡ç¨‹åœæ­¢ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // ç¬¬ä¸€ä¸ªé“¾è¡¨çš„é•¿åº¦
        ListNode head1 = new ListNode(-1); // ç¬¬ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹
        ListNode p = head1;
        for (int i = 0; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;

        }
        int m = sc.nextInt(); // ç¬¬äºŒä¸ªé“¾è¡¨çš„é•¿åº¦
        ListNode head2 = new ListNode(-1); // ç¬¬äºŒä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹
        ListNode q = head2;
        for (int i = 0; i < m; i ++) {
            q.next = new ListNode(sc.nextInt());
            q = q.next;
        }

        List<Integer> res = getCommonPart(head1.next, head2.next);
        for (int num : res) {
            System.out.print(num + " ");
        }
    }
    
    // å®šä¹‰é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
        }
    }

    private static List<Integer> getCommonPart(ListNode head1, ListNode head2) {
        List<Integer> res = new ArrayList<>();
        ListNode p = head1;
        ListNode q = head2;

        while (p != null && q != null) {
            if (p.val == q.val) {
                res.add(p.val);
                p = p.next;
                q = q.next;
            }
            else if (p.val < q.val) {
                p = p.next;
            }
            else { // p.val >= q.val
                q = q.next;
            }
        }

        return res;
    }
}
```

## CD106. åˆ é™¤é“¾è¡¨çš„ç¬¬ K ä¸ªèŠ‚ç‚¹

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[åˆ é™¤é“¾è¡¨çš„ç¬¬ K ä¸ªèŠ‚ç‚¹](https://www.nowcoder.com/practice/0796dbf0eb054716937b0b82e0671c5f?tpId=101&tqId=33174&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œå®ç°åˆ é™¤é“¾è¡¨ç¬¬ K ä¸ªèŠ‚ç‚¹çš„å‡½æ•°ã€‚

è¾“å…¥æè¿°:

```
n è¡¨ç¤ºé“¾è¡¨çš„é•¿åº¦ã€‚

m è¡¨ç¤ºåˆ é™¤é“¾è¡¨ç¬¬å‡ ä¸ªèŠ‚ç‚¹ã€‚

val è¡¨ç¤ºé“¾è¡¨èŠ‚ç‚¹çš„å€¼ã€‚
```

è¾“å‡ºæè¿°:

```
åœ¨ç»™å®šçš„å‡½æ•°ä¸­è¿”å›é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5 3
1 2 3 4 5

è¾“å‡º
1 2 4 5
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

æ²¡å•¥éš¾åº¦ï¼Œæ‰¾åˆ°ç¬¬ k ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹å°±è¡Œäº†

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // é“¾è¡¨çš„é•¿åº¦
        int k = sc.nextInt(); // ç¬¬ k ä¸ªèŠ‚ç‚¹
        ListNode head = new ListNode(-1); // å¤´èŠ‚ç‚¹
        ListNode p = head;
        for (int i = 0; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        removeKthNode(head.next, k);

        ListNode q = head.next;
        while (q != null) {
            System.out.print(q.val + " ");
            q = q.next;
        }
    }

    // å®šä¹‰é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
        }
    }

    // åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªå…ƒç´ 
    private static ListNode removeKthNode(ListNode head, int k) {
        ListNode p = head;
        ListNode pre = head; // å‰é©±èŠ‚ç‚¹

        for (int i = 1; i < k; i ++) {
            pre = p;
            p = p.next;
        }

        // åˆ é™¤ç¬¬ k ä¸ªèŠ‚ç‚¹
        pre.next = p.next;

        return head;
    }
}
```



## CD49/LC19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ K ä¸ªèŠ‚ç‚¹

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD49. åœ¨é“¾è¡¨ä¸­åˆ é™¤å€’æ•°ç¬¬ K ä¸ªèŠ‚ç‚¹](https://www.nowcoder.com/practice/e5d90aac4c8b4628aa70d9b6597c0560?tpId=101&tqId=33117&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)
- LeetCodeï¼š[19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªèŠ‚ç‚¹ â€” Meidum](https://leetcode-cn.com/problems/remove-nth-node-from-end-of-list/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å‡ºä¸€ä¸ªå•é“¾è¡¨ï¼Œè¿”å›åˆ é™¤å•é“¾è¡¨çš„å€’æ•°ç¬¬ K ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨ã€‚

è¾“å…¥æè¿°:

```
n è¡¨ç¤ºé“¾è¡¨çš„é•¿åº¦ã€‚
val è¡¨ç¤ºé“¾è¡¨ä¸­èŠ‚ç‚¹çš„å€¼ã€‚
```

è¾“å‡ºæè¿°:

```
åœ¨ç»™å®šçš„å‡½æ•°å†…è¿”å›é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5 4
1 2 3 4 5

è¾“å‡º
1 3 4 5
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

**å¿«æ…¢æŒ‡é’ˆ**ã€‚è®©å¿«æŒ‡é’ˆå…ˆèµ° `n` æ­¥ï¼Œç„¶åå¿«æ…¢æŒ‡é’ˆå¼€å§‹åŒé€Ÿå‰è¿›ã€‚è¿™æ ·å½“å¿«æŒ‡é’ˆèµ°åˆ°é“¾è¡¨æœ€åä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ…¢æŒ‡é’ˆæ‰€åœ¨çš„ä½ç½®å°±æ˜¯å€’æ•°ç¬¬ `n` ä¸ªé“¾è¡¨èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // é“¾è¡¨çš„é•¿åº¦
        int k = sc.nextInt(); // å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹
        ListNode head = new ListNode(-1); // å¤´èŠ‚ç‚¹
        ListNode p = head;
        for (int i = 0; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        removeLastKthNode(head.next, k);

        ListNode q = head.next;
        while (q != null) {
            System.out.print(q.val + " ");
            q = q.next;
        }
    }

    // å®šä¹‰é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
        }
    }

    // åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªå…ƒç´ 
    private static ListNode removeLastKthNode(ListNode head, int k) {
        ListNode fast = head;
        ListNode slow = head;

        while (k > 0) {
            fast = fast.next;
            k --;
        }

        while (fast.next != null) {
            fast = fast.next;
            slow = slow.next;
        }
        // æ‰¾åˆ°äº†å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
        ListNode kNode = slow.next;
        // åˆ é™¤ç¬¬ k ä¸ªèŠ‚ç‚¹
        slow.next = kNode.next;

        return head;
    }
}
```

## CD107. åè½¬å•å‘é“¾è¡¨å’ŒåŒå‘é“¾è¡¨

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD107. åè½¬å•å‘é“¾è¡¨å’ŒåŒå‘é“¾è¡¨](https://www.nowcoder.com/practice/b66a251dec8847f386bbe6cd96b7e9c8?tpId=101&tqId=33175&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

å®ç°åè½¬å•å‘é“¾è¡¨å’ŒåŒå‘é“¾è¡¨çš„å‡½æ•°ã€‚

å¦‚ 1->2->3 åè½¬åå˜æˆ 3->2->1ã€‚

è¾“å…¥æè¿°:

```
ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºå•é“¾è¡¨çš„é•¿åº¦ã€‚

ç¬¬äºŒè¡Œ n ä¸ªæ•´æ•° val è¡¨ç¤ºå•é“¾è¡¨çš„å„ä¸ªèŠ‚ç‚¹ã€‚

ç¬¬ä¸‰è¡Œä¸€ä¸ªæ•´æ•° mï¼Œè¡¨ç¤ºåŒé“¾è¡¨çš„é•¿åº¦ã€‚

ç¬¬å››è¡Œ m ä¸ªæ•´æ•° val è¡¨ç¤ºåŒé“¾è¡¨çš„å„ä¸ªèŠ‚ç‚¹ã€‚
```

è¾“å‡ºæè¿°:

```
åœ¨ç»™å®šçš„å‡½æ•°å†…è¿”å›ç›¸åº”é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
3
1 2 3
4
1 2 3 4

è¾“å‡º
3 2 1
4 3 2 1
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

åè½¬å•å‘é“¾è¡¨å’Œåè½¬åŒå‘é“¾è¡¨çš„æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡åŒå‘é“¾è¡¨å¤šå¤„ç†ä¸€ä¸‹ pre æŒ‡é’ˆç½¢äº†ã€‚

è¿™é‡Œä»¥å•å‘é“¾è¡¨ä¸ºä¾‹ï¼Œè®²è§£ä¸€ä¸‹åè½¬é“¾è¡¨çš„ä¸¤ç§æ–¹æ³•ï¼š

1ï¼‰**ç¬¬ä¸€ç§ï¼šæ–°é“¾è¡¨ + å¤´æ’æ³•**

é¦–å…ˆæ–°å»º newHead èŠ‚ç‚¹ä½œä¸ºæ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼›ç„¶åä½¿ç”¨å¤´æ’æ³•ä¾æ¬¡ä»åŸé“¾è¡¨å–ä¸‹èŠ‚ç‚¹æ’å…¥ newHead çš„åé¢ã€‚æœ€åè¿”å› newHead.next å³å¯

![](https://gitee.com/veal98/images/raw/master/img/20210224233624.png)

```java
// åè½¬å•é“¾è¡¨ (ä½¿ç”¨å¤´èŠ‚ç‚¹+æ–°é“¾è¡¨çš„æ–¹å¼)
private static ListNode reverseList(ListNode head) {
    if (head == null || head.next == null) {
        return head;
    }

    ListNode newHead = new ListNode(-1); // æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹
    newHead.next = null;

    // ä¸æ–­åœ°æŠŠåŸé“¾è¡¨çš„èŠ‚ç‚¹æ‘˜ä¸‹æ¥å¤´æ’åˆ°æ–°é“¾è¡¨ä¸Š
    while (head != null) {
        ListNode temp = head.next; // é˜²æ­¢æ–­é“¾

        // å¤´æ’æ³•
        head.next = newHead.next;
        newHead.next = head;

        // å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯
        head = temp;
    }

    return newHead.next;
}
```

2ï¼‰**ç¬¬äºŒç§ï¼šåŸåœ°åè½¬**

ä¸»è¦æ˜¯åˆ©ç”¨ä¸¤ä¸ªè¾…åŠ©çš„ç»“ç‚¹ï¼Œä¸æ–­åœ°å¾ªç¯æ›´æ”¹æŒ‡é’ˆçš„æŒ‡å‘ï¼š

- preNode å’Œ next åˆ†åˆ«ä»£è¡¨å½“å‰è¦å¤„ç†çš„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹å’Œåä¸€ä¸ªç»“ç‚¹
- é€šè¿‡æ”¹å˜ç»“ç‚¹çš„ next åŸŸçš„æŒ‡å‘æ¥åè½¬æ•´ä¸ªé“¾è¡¨ï¼Œé€šè¿‡å¾ªç¯å¤„ç†ï¼Œæ¯æ¬¡åè½¬ä¸€ä¸ªä¹‹åï¼ŒpreNode æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯ headï¼Œhead æ›´æ”¹ä¸º head çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯ nextï¼Œè¿™æ ·ç›´åˆ° head ä¸ºç©ºï¼Œè¿”å› preNode å°±åè½¬äº†æ•´ä¸ªå•é“¾è¡¨

```java
public static ListNode reverseList(ListNode head){
      ListNode preNode = null;
      while(head != null) {
            ListNode next = head.next;
          
            head.next = preNode;
            preNode = head;
            head = next;
      }
      return pre;
}
```

ã€å…·ä½“ä»£ç ã€‘ï¼šè¿™é‡Œå¯¹äºå•é“¾è¡¨æˆ‘é‡‡ç”¨æ–°é“¾è¡¨ + å¤´æ’æ³•çš„æ–¹å¼ï¼Œå¯¹äºåŒé“¾è¡¨é‡‡ç”¨åŸåœ°åè½¬çš„æ–¹å¼ã€‚

```java
import java.util.Scanner;

public class CD107 {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        int n = sc.nextInt(); // å•é“¾è¡¨çš„é•¿åº¦
        ListNode head1 = new ListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹
        ListNode p = head1;
        for (int i = 1; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        int m = sc.nextInt(); // åŒé“¾è¡¨çš„é•¿åº¦
        DoubleListNode head2 = new DoubleListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹
        DoubleListNode q = head2;
        for (int i = 1; i < m; i ++) {
            DoubleListNode node = new DoubleListNode(sc.nextInt());
            q.next = node;
            node.pre = q;

            q = q.next;
        }

        // åè½¬å•é“¾è¡¨
        ListNode newHead1 = reverseList(head1);
        ListNode cur1 = newHead1;
        while (cur1 != null) {
            System.out.print(cur1.val + " ");
            cur1 = cur1.next;
        }

        System.out.println();

        // åè½¬åŒé“¾è¡¨
        DoubleListNode newHead2 = reverseDoubleList(head2);
        DoubleListNode cur2 = newHead2;
        while (cur2 != null) {
            System.out.print(cur2.val + " ");
            cur2 = cur2.next;
        }

    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
        }
    }

    // å®šä¹‰åŒé“¾è¡¨ç»“æ„
    public static class DoubleListNode {
        private int val;
        private DoubleListNode next;
        private DoubleListNode pre;

        public DoubleListNode(int val) {
            this.val = val;
        }
    }

    // åè½¬å•é“¾è¡¨ (ä½¿ç”¨å¤´èŠ‚ç‚¹+æ–°é“¾è¡¨çš„æ–¹å¼)
    private static ListNode reverseList(ListNode head) {
        if (head == null || head.next == null) {
            return head;
        }

        ListNode newHead = new ListNode(-1); // æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹
        newHead.next = null;

        // ä¸æ–­åœ°æŠŠåŸé“¾è¡¨çš„èŠ‚ç‚¹æ‘˜ä¸‹æ¥å¤´æ’åˆ°æ–°é“¾è¡¨ä¸Š
        while (head != null) {
            ListNode temp = head.next; // é˜²æ­¢æ–­é“¾

            // å¤´æ’æ³•
            head.next = newHead.next;
            newHead.next = head;

            head = temp;
        }

        return newHead.next;
    }

    // åè½¬åŒé“¾è¡¨(é‡‡ç”¨åŸåœ°åè½¬çš„æ–¹å¼)
    private static DoubleListNode reverseDoubleList(DoubleListNode head) {
        if (head == null || head.next == null) {
            return head;
        }

        DoubleListNode preNode = null; // å½“å‰æ­£åœ¨å¤„ç†èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹
        while (head != null) {
            DoubleListNode temp = head.next; // é˜²æ­¢æ–­é“¾

            head.next = preNode;
            head.pre = temp;

            preNode = head;
            head = temp;
        }

        return preNode;
    }

}
```

## CD108/LC92. åè½¬éƒ¨åˆ†å•å‘é“¾è¡¨

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[åè½¬éƒ¨åˆ†å•å‘é“¾è¡¨](https://www.nowcoder.com/practice/f11155006f154419b0bef6de8918aea2?tpId=101&tqId=33176&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)
- LeetCodeï¼š[92. åè½¬é“¾è¡¨ II](https://leetcode-cn.com/problems/reverse-linked-list-ii/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªå•é“¾è¡¨ï¼Œåœ¨é“¾è¡¨ä¸­æŠŠç¬¬ L ä¸ªèŠ‚ç‚¹åˆ°ç¬¬ R ä¸ªèŠ‚ç‚¹è¿™ä¸€éƒ¨åˆ†è¿›è¡Œåè½¬ã€‚

è¾“å…¥æè¿°:

```
n è¡¨ç¤ºå•é“¾è¡¨çš„é•¿åº¦ã€‚

val è¡¨ç¤ºå•é“¾è¡¨å„ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚

L è¡¨ç¤ºç¿»è½¬åŒºé—´çš„å·¦ç«¯ç‚¹ã€‚

R è¡¨ç¤ºç¿»è½¬åŒºé—´çš„å³ç«¯ç‚¹ã€‚
```

è¾“å‡ºæè¿°:

```
åœ¨ç»™å®šçš„å‡½æ•°ä¸­è¿”å›æŒ‡å®šé“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5
1 2 3 4 5
1 3

è¾“å‡º
3 2 1 4 5
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

- å¯¹äºéœ€è¦åè½¬çš„éƒ¨åˆ†ï¼Œç”¨å¤´æ’æ³•è¿›è¡Œåè½¬
- å¯¹ä¸éœ€è¦åè½¬çš„éƒ¨åˆ†ï¼Œä¸æ“ä½œ

å…·ä½“åšæ³•ï¼š

é¦–å…ˆæ–°å»º newHead èŠ‚ç‚¹é“¾æ¥åˆ°åŸé“¾è¡¨çš„ head ä¸Šï¼Œå› ä¸ºè‹¥ L = 1ï¼Œéœ€è¦ newHead ä½œä¸ºä¸­ä»‹è¿›è¡Œå¤´æ’ï¼Œç›¸å½“äºæˆ‘ä»¬æ‰‹åŠ¨ä¸ºè¿™ä¸ªé“¾è¡¨åŠ ä¸Šäº†ä¸€ä¸ªå¤´èŠ‚ç‚¹ã€‚

æ ¸å¿ƒæ€æƒ³ï¼šä»¥ L-1 ä¸ºå¤´èŠ‚ç‚¹ï¼Œ L ä¸ºå°¾èŠ‚ç‚¹ï¼Œå°† L åé¢çš„ R-L ä¸ªå…ƒç´ ä¾æ¬¡æ‘˜ä¸‹å¤´æ’åˆ° L å‰é¢

![](https://gitee.com/veal98/images/raw/master/img/20210409181531.png)

ğŸš¨ **æ³¨æ„æœ€åéœ€è¦å°† R è¿™ä¸ªèŠ‚ç‚¹é“¾æ¥åˆ° L åé¢é‚£ä¸ªèŠ‚ç‚¹ï¼Œé˜²æ­¢å‡ºç°ç¯**

æœ€åè¿”å› newHead.next å³å¯ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        int n = sc.nextInt(); // å•é“¾è¡¨çš„é•¿åº¦
        ListNode head = new ListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹
        ListNode p = head;
        for (int i = 1; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        int L = sc.nextInt(); // å·¦ç«¯ç‚¹
        int R = sc.nextInt(); // å³ç«¯ç‚¹

        ListNode head2 = reversePart(head, L, R);

        ListNode temp = head2;
        while (temp != null) {
            System.out.print(temp.val + " ");
            temp = temp.next;
        }

    }

    private static ListNode reversePart(ListNode head, int L, int R) {
        if (L >= R) {
            return head;
        }

        // æ·»åŠ å¤´èŠ‚ç‚¹ï¼Œæ–¹ä¾¿å¤„ç† L æ˜¯ head çš„æƒ…å†µ
        ListNode newHead = new ListNode(-1);
        newHead.next = head;


        // æ‰¾åˆ° L çš„å‰é©±èŠ‚ç‚¹
        ListNode lPreNode = newHead;
        for (int i = 0; i < L-1; i ++) {
            lPreNode = lPreNode.next;
        }
        ListNode lNode = lPreNode.next; // ç¬¬ L ä¸ªèŠ‚ç‚¹

        // ä»ç¬¬ L+1 ä¸ªèŠ‚ç‚¹å¼€å§‹å¤´æ’
        ListNode p = lNode.next; // ç¬¬ L+1 ä¸ªèŠ‚ç‚¹
        ListNode temp = p; // p çš„åç»§èŠ‚ç‚¹ï¼Œé˜²æ­¢æ–­é“¾
        for (int i = 0; i < R-L; i ++) {
            temp = p.next; // é˜²æ­¢æ–­é“¾

            p.next = lPreNode.next;
            lPreNode.next = p;

            p = temp; // ç»§ç»­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¤„ç†
        }

        // é˜²æ­¢å‡ºç°ç¯
        lNode.next = temp;

        return newHead.next;
    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
        }
    }
}
```

## CD109. ç¯å½¢é“¾è¡¨çš„çº¦ç‘Ÿå¤«é—®é¢˜

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD109. ç¯å½¢é“¾è¡¨çš„çº¦ç‘Ÿå¤«é—®é¢˜](https://www.nowcoder.com/practice/c3b34059faf546d3a7ee28f2b0154286?tpId=101&tqId=33177&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

æ®è¯´è‘—åçŠ¹å¤ªå†å²å­¦å®¶ Josephus æœ‰è¿‡ä»¥ä¸‹æ•…äº‹ï¼šåœ¨ç½—é©¬äººå é¢†ä¹”å¡”å¸•ç‰¹åï¼Œ39 ä¸ªçŠ¹å¤ªäººä¸ Josephus åŠä»–çš„æœ‹å‹èº²åˆ°ä¸€ä¸ªæ´ä¸­ï¼Œ39 ä¸ªçŠ¹å¤ªäººå†³å®šå®æ„¿æ­»ä¹Ÿä¸è¦è¢«æ•ŒäººæŠ“åˆ°ï¼Œäºæ˜¯å†³å®šäº†ä¸€ç§è‡ªæ€æ–¹å¼ï¼Œ41 ä¸ªäººæ’æˆä¸€ä¸ªåœ†åœˆï¼Œç”±ç¬¬ 1 ä¸ªäººå¼€å§‹æŠ¥æ•°ï¼ŒæŠ¥æ•°åˆ° 3 çš„äººå°±è‡ªæ€ï¼Œç„¶åå†ç”±ä¸‹ä¸€ä¸ªäººé‡æ–°æŠ¥ 1ï¼ŒæŠ¥æ•°åˆ° 3 çš„äººå†è‡ªæ€ï¼Œè¿™æ ·ä¾æ¬¡ä¸‹å»ï¼Œç›´åˆ°å‰©ä¸‹æœ€åä¸€ä¸ªäººæ—¶ï¼Œé‚£ä¸ªäººå¯ä»¥è‡ªç”±é€‰æ‹©è‡ªå·±çš„å‘½è¿ã€‚è¿™å°±æ˜¯è‘—åçš„çº¦ç‘Ÿå¤«é—®é¢˜ã€‚ç°åœ¨è¯·ç”¨å•å‘ç¯å½¢é“¾è¡¨å¾—å‡ºæœ€ç»ˆå­˜æ´»çš„äººçš„ç¼–å·ã€‚

è¾“å…¥æè¿°:

```
ä¸€è¡Œä¸¤ä¸ªæ•´æ•° n å’Œ mï¼Œ n è¡¨ç¤ºç¯å½¢é“¾è¡¨çš„é•¿åº¦ï¼Œ m è¡¨ç¤ºæ¯æ¬¡æŠ¥æ•°åˆ° m å°±è‡ªæ€ã€‚
```

è¾“å‡ºæè¿°:

```
è¾“å‡ºæœ€åå­˜æ´»ä¸‹æ¥çš„äººç¼–å·(ç¼–å·ä»1å¼€å§‹åˆ°n)
```

ç¤ºä¾‹1

```
è¾“å…¥
5 2

è¾“å‡º
3
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å™¨ï¼ˆåˆå§‹å€¼èµ‹ä¸º 1ï¼‰ï¼Œç„¶åç›´æ¥å¾ªç¯éå†å°±å¥½äº†ã€‚å…¶ä¸­åˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™éœ€è¦å‰é©±èŠ‚ç‚¹ï¼Œå•å‘å¾ªç¯é“¾è¡¨é‡Œçš„æœ€åä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯å¤©ç„¶çš„å‰é©±èŠ‚ç‚¹ï¼ˆhead çš„å‰é©±èŠ‚ç‚¹ï¼‰ï¼Œç›´æ¥ç”¨å®ƒå°±è¡Œï¼š

- å¦‚æœé“¾è¡¨ä¸ºç©ºæˆ–è€…é“¾è¡¨èŠ‚ç‚¹æ•°ä¸º 1ï¼Œæˆ–è€… m çš„å€¼å°äº 1ï¼Œåˆ™ä¸ç”¨è°ƒæ•´å°±ç›´æ¥è¿”å›ã€‚
- åœ¨ç¯å½¢é“¾è¡¨ä¸­éå†æ¯ä¸ªèŠ‚ç‚¹ï¼Œä¸æ–­è½¬åœˆï¼Œä¸æ–­è®©æ¯ä¸ªèŠ‚ç‚¹æŠ¥æ•°ï¼ˆcount ++ï¼‰
- å½“æŠ¥æ•°åˆ°è¾¾ m æ—¶ï¼Œå°±åˆ é™¤å½“å‰æŠ¥æ•°çš„èŠ‚ç‚¹ã€‚å¹¶å°† count å½’ 1
- ä¸åœåœ°åˆ é™¤ï¼Œç›´åˆ°ç¯å½¢é“¾è¡¨ä¸­åªå‰©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿‡ç¨‹ç»“æŸã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // ç¯å½¢é“¾è¡¨é•¿åº¦
        int m = sc.nextInt(); // æŠ¥æ•°

        // æ„é€ ç¯å½¢é“¾è¡¨
        ListNode head = new ListNode(1); // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        ListNode p = head; // å·¥ä½œæŒ‡é’ˆ
        for (int i = 2; i <= n; i ++) {
            p.next = new ListNode(i);
            p = p.next;
        }
        p.next = head; // æˆç¯

        System.out.println(josephusKill(head, m).val);
    }

    // è¿”å›æœ€åå­˜æ´»çš„èŠ‚ç‚¹
    private static ListNode josephusKill(ListNode head, int m) {
        if (head == null || head.next == head || m < 1) {
            return head;
        }

        // æ‰¾åˆ°é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¤©ç„¶çš„å‰é©±èŠ‚ç‚¹ï¼‰
        ListNode last = head;
        while (last.next != head) {
            last = last.next;
        }

        // å¾ªç¯æŠ¥æ•°
        int count = 1;
        while (head != last) {
            // åˆ é™¤å½“å‰èŠ‚ç‚¹
            if (count == m) {
                last.next = head.next;
                head = last.next;
                count = 1;
            }
            else {
                last = last.next;
                head = head.next;
                count ++;
            }
        }

        return head;
    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
        }
    }
}
```

ã€æ—¶é—´å¤æ‚åº¦ã€‘ï¼š

æ¯åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéƒ½éœ€è¦éå† m æ¬¡ï¼Œä¸€å…±éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹æ•°ä¸º n-1ï¼Œæ‰€ä»¥ä¸Šè¿°è§£æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(nÃ—m)

## CD113. å°†å•å‘é“¾è¡¨æŒ‰æŸå€¼åˆ’åˆ†ä¸ºå·¦è¾¹å°ï¼Œä¸­é—´ç›¸ç­‰ï¼Œå³è¾¹å¤§çš„å½¢å¼

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD113. å°†å•å‘é“¾è¡¨æŒ‰æŸå€¼åˆ’åˆ†ä¸ºå·¦è¾¹å°ï¼Œä¸­é—´ç›¸ç­‰ï¼Œå³è¾¹å¤§çš„å½¢å¼](https://www.nowcoder.com/practice/04fcabc5d76e428c8100dbd855761778?tpId=101&tqId=33181&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œå†ç»™å®šä¸€ä¸ªæ•´æ•° pivotï¼Œè¯·å°†é“¾è¡¨è°ƒæ•´ä¸ºå·¦éƒ¨åˆ†éƒ½æ˜¯å€¼å°äº pivot çš„èŠ‚ç‚¹ï¼Œä¸­é—´éƒ¨åˆ†éƒ½æ˜¯å€¼ç­‰äº pivot çš„èŠ‚ç‚¹ï¼Œ å³è¾¹éƒ¨åˆ†éƒ½æ˜¯å¤§äº pivot çš„èŠ‚ç‚¹ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹è°ƒæ•´åçš„èŠ‚ç‚¹é¡ºåºæ²¡æœ‰æ›´å¤šè¦æ±‚ã€‚

ä¾‹å¦‚ï¼šé“¾è¡¨ 9->0->4->5->1ï¼Œpivot=3ã€‚

è°ƒæ•´åé“¾è¡¨å¯ä»¥æ˜¯ 1->0->4->9->5ï¼Œä¹Ÿå¯ä»¥æ˜¯ 0->1->9->5->4ã€‚æ€»ä¹‹ï¼Œæ»¡è¶³å·¦éƒ¨åˆ†éƒ½æ˜¯å°äº 3çš„èŠ‚ç‚¹ï¼Œä¸­é—´éƒ¨åˆ†éƒ½æ˜¯ç­‰äº 3 çš„èŠ‚ç‚¹ï¼ˆæœ¬ä¾‹ä¸­è¿™ä¸ªéƒ¨åˆ†ä¸ºç©ºï¼‰ï¼Œå³éƒ¨åˆ†éƒ½æ˜¯å¤§äº 3 çš„èŠ‚ç‚¹å³å¯ã€‚å¯¹æŸéƒ¨åˆ†å†…éƒ¨çš„èŠ‚ç‚¹é¡ºåºä¸åšè¦æ±‚ã€‚

è¾“å…¥æè¿°:

```
ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•° n å’Œ pivotï¼Œn è¡¨ç¤ºé“¾è¡¨çš„é•¿åº¦ã€‚

ç¬¬äºŒè¡Œ n ä¸ªæ•´æ•° ai è¡¨ç¤ºé“¾è¡¨çš„èŠ‚ç‚¹ã€‚
```

è¾“å‡ºæè¿°:

```
è¯·åœ¨ç»™å®šçš„å‡½æ•°å†…è¿”å›é“¾è¡¨çš„å¤´æŒ‡é’ˆã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
5 3
9 0 4 5 1

è¾“å‡º
1 0 4 5 9
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

æ€è·¯å…¶å®ä¹Ÿä¸éš¾ï¼Œå°±æ˜¯å°†åŸé“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¾æ¬¡åˆ’åˆ†è¿›ä¸‰ä¸ªé“¾è¡¨ï¼Œä¸‰ä¸ªé“¾è¡¨åˆ†åˆ«ä¸º small ä»£è¡¨å·¦éƒ¨åˆ†ï¼Œequalä»£è¡¨ä¸­é—´éƒ¨åˆ†ï¼Œbig ä»£è¡¨å³éƒ¨åˆ†ã€‚

ä¾‹å¦‚ï¼Œé“¾è¡¨ 7->9->1->8->5->2->5ï¼Œpivot=5ã€‚åœ¨åˆ’åˆ†ä¹‹åï¼Œsmallã€equalã€big åˆ†åˆ«ä¸ºï¼š

- smallï¼š1->2->null
- equalï¼š5->5->null 
- bigï¼š7->9->8->null

å°† smallã€equal å’Œ big ä¸‰ä¸ªé“¾è¡¨é‡æ–°ä¸²èµ·æ¥å³å¯ã€‚æ•´ä¸ªè¿‡ç¨‹éœ€è¦ç‰¹åˆ«æ³¨æ„å¯¹ null èŠ‚ç‚¹çš„åˆ¤æ–­å’Œå¤„ç†ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.List;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // é“¾è¡¨é•¿åº¦
        int pivot = sc.nextInt();

        // æ„é€ é“¾è¡¨
        ListNode head = new ListNode(sc.nextInt()); // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        ListNode p = head; // å·¥ä½œæŒ‡é’ˆ
        for (int i = 1; i < n; i ++) {
            p.next = new ListNode(sc.nextInt());
            p = p.next;
        }

        ListNode head2 = listPartition(head, pivot);
        ListNode cur = head2;
        while (cur != null) {
            System.out.print(cur.val + " ");
            cur = cur.next;
        }

    }

    private static ListNode listPartition(ListNode head, int pivot) {
        if (head == null) {
            return head;
        }

        ListNode sH = null; // å°çš„å¤´
        ListNode sT = null; // å°çš„å°¾
        ListNode eH = null; // ç›¸ç­‰çš„å¤´
        ListNode eT = null; // ç›¸ç­‰çš„å°¾
        ListNode bH = null; // å¤§çš„å¤´
        ListNode bT = null; // å¤§çš„å°¾

        while (head != null) {
            ListNode temp = head.next; // é˜²æ­¢æ–­é“¾
            head.next = null; // é˜²æ­¢å‡ºç°ç¯

            // æ”¾å…¥å°é“¾è¡¨
            if (head.val < pivot) {
                if (sH == null) {
                    // åˆ¤æ–­æ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ªå­˜å…¥çš„å…ƒç´ 
                    sH = head;
                    sT = head;
                }
                else {
                    sT.next = head;
                    sT = sT.next;
                }
            }
            // æ”¾å…¥ç›¸ç­‰çš„é“¾è¡¨
            else if (head.val == pivot) {
                if (eH == null) {
                    eH = head;
                    eT = head;
                }
                else {
                    eT.next = head;
                    eT = eT.next;
                }
            }
            // æ”¾å…¥å¤§é“¾è¡¨
            else {
                if (bH == null) {
                    bH = head;
                    bT = head;
                }
                else {
                    bT.next = head;
                    bT = bT.next;
                }
            }

            head = temp;
        }


        // å°é“¾è¡¨å’Œç›¸ç­‰çš„é“¾è¡¨è¿æ¥
        if (sT != null) {
            sT.next = eH;
            eT = (eT == null) ? sT : eT;
        }
        // ç›¸ç­‰çš„é“¾è¡¨å’Œå¤§é“¾è¡¨è¿æ¥
        if (eT != null) {
            eT.next = bH;
        }

        return (sH != null) ? sH : (eH != null) ? eH : bH;
    }


    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
        }
    }
}
```

æ³¨æ„è¿™è¡Œä»£ç ï¼Œé˜²æ­¢æˆç¯

![](https://gitee.com/veal98/images/raw/master/img/20210409223018.png)

## LC138. å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[LC138. å¤åˆ¶å¸¦éšæœºæŒ‡é’ˆçš„é“¾è¡¨](https://leetcode-cn.com/problems/copy-list-with-random-pointer/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªé¢å¤–å¢åŠ çš„éšæœºæŒ‡é’ˆ random ï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŒ‡å‘é“¾è¡¨ä¸­çš„ä»»ä½•èŠ‚ç‚¹æˆ–ç©ºèŠ‚ç‚¹ã€‚

æ„é€ è¿™ä¸ªé“¾è¡¨çš„ æ·±æ‹·è´ã€‚ æ·±æ‹·è´åº”è¯¥æ­£å¥½ç”± n ä¸ª å…¨æ–°èŠ‚ç‚¹ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªæ–°èŠ‚ç‚¹çš„å€¼éƒ½è®¾ä¸ºå…¶å¯¹åº”çš„åŸèŠ‚ç‚¹çš„å€¼ã€‚æ–°èŠ‚ç‚¹çš„ next æŒ‡é’ˆå’Œ random æŒ‡é’ˆä¹Ÿéƒ½åº”æŒ‡å‘å¤åˆ¶é“¾è¡¨ä¸­çš„æ–°èŠ‚ç‚¹ï¼Œå¹¶ä½¿åŸé“¾è¡¨å’Œå¤åˆ¶é“¾è¡¨ä¸­çš„è¿™äº›æŒ‡é’ˆèƒ½å¤Ÿè¡¨ç¤ºç›¸åŒçš„é“¾è¡¨çŠ¶æ€ã€‚å¤åˆ¶é“¾è¡¨ä¸­çš„æŒ‡é’ˆéƒ½ä¸åº”æŒ‡å‘åŸé“¾è¡¨ä¸­çš„èŠ‚ç‚¹ ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœåŸé“¾è¡¨ä¸­æœ‰ X å’Œ Y ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ X.random --> Y ã€‚é‚£ä¹ˆåœ¨å¤åˆ¶é“¾è¡¨ä¸­å¯¹åº”çš„ä¸¤ä¸ªèŠ‚ç‚¹ x å’Œ y ï¼ŒåŒæ ·æœ‰ x.random --> y ã€‚

è¿”å›å¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚

ç”¨ä¸€ä¸ªç”± n ä¸ªèŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æ¥è¡¨ç¤ºè¾“å…¥/è¾“å‡ºä¸­çš„é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ª [val, random_index] è¡¨ç¤ºï¼š

- valï¼šä¸€ä¸ªè¡¨ç¤º Node.val çš„æ•´æ•°ã€‚
- random_indexï¼šéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ç´¢å¼•ï¼ˆèŒƒå›´ä» 0 åˆ° n-1ï¼‰ï¼›å¦‚æœä¸æŒ‡å‘ä»»ä½•èŠ‚ç‚¹ï¼Œåˆ™ä¸º  null ã€‚

ä½ çš„ä»£ç  åª æ¥å—åŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ä½œä¸ºä¼ å…¥å‚æ•°ã€‚

ç¤ºä¾‹ 1ï¼š

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/01/09/e1.png)

```
è¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]
è¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]
```

ç¤ºä¾‹ 2ï¼š

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/01/09/e2.png)

```
è¾“å…¥ï¼šhead = [[1,1],[2,1]]
è¾“å‡ºï¼š[[1,1],[2,1]]
```

ç¤ºä¾‹ 3ï¼š

![img](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2020/01/09/e3.png)

```
è¾“å…¥ï¼šhead = [[3,null],[3,0],[3,null]]
è¾“å‡ºï¼š[[3,null],[3,0],[3,null]]
```


ç¤ºä¾‹ 4ï¼š

```
è¾“å…¥ï¼šhead = []
è¾“å‡ºï¼š[]
è§£é‡Šï¼šç»™å®šçš„é“¾è¡¨ä¸ºç©ºï¼ˆç©ºæŒ‡é’ˆï¼‰ï¼Œå› æ­¤è¿”å› nullã€‚
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

æ–¹æ³•ä¸€ï¼šå…ˆéå†ä¸€éé“¾è¡¨ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨ä¿å­˜åŸèŠ‚ç‚¹å’Œå‰¯æœ¬èŠ‚ç‚¹çš„å¯¹åº”å…³ç³»ï¼Œç„¶åå†éå†ä¸€éèŠ‚ç‚¹ï¼Œå¤„ç†ä¸€ä¸‹ random æŒ‡é’ˆã€‚

![](https://gitee.com/veal98/images/raw/master/img/20210411215037.png)

å“ˆå¸Œè¡¨å¢åˆ æ”¹æŸ¥çš„æ“ä½œæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ï¼Œæ™®é€šæ–¹æ³•ä¸€å…±åªéå†é“¾è¡¨ä¸¤éï¼Œæ‰€ä»¥ä¸Šè¿°è§£æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ã€‚å› ä¸ºä½¿ç”¨äº†å“ˆå¸Œè¡¨ï¼Œæ‰€ä»¥é¢å¤–ç©ºé—´å¤æ‚åº¦ä¸º O(N)ã€‚

```java
/*
// Definition for a Node.
class Node {
    int val;
    Node next;
    Node random;

    public Node(int val) {
        this.val = val;
        this.next = null;
        this.random = null;
    }
}
*/

class Solution {
    public Node copyRandomList(Node head) {
        if (head == null) {
            return null;
        }
        // ä½¿ç”¨å“ˆå¸Œè¡¨ä¿å­˜åŸèŠ‚ç‚¹å’Œå‰¯æœ¬èŠ‚ç‚¹çš„å…³ç³»
        Map<Node, Node> map = new HashMap<>();
        Node cur = head;
        while (cur != null) {
            map.put(cur, new Node(cur.val));
            cur = cur.next;
        }
        
        // å†éå†ä¸€éé“¾è¡¨å¤„ç† random æŒ‡é’ˆ
        cur = head;
        while (cur != null) {
            map.get(cur).next = map.get(cur.next);
            map.get(cur).random = map.get(cur.random);
            cur = cur.next;
        }
        
        return map.get(head);
    }
}
```

æ–¹æ³•äºŒï¼š

![](https://gitee.com/veal98/images/raw/master/img/20210411220953.png)

```java
class Solution {
    public Node copyRandomList(Node head) {
        if (head == null) {
            return null;
        }
        
        // åˆ›å»ºå‰¯æœ¬èŠ‚ç‚¹å¹¶å°†å…¶è¿æ¥åœ¨å¯¹åº”çš„åŸèŠ‚ç‚¹åé¢
        Node cur = head;
        while (cur != null) {
            Node copy = new Node(cur.val);
            copy.next = cur.next;
            cur.next = copy;
            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¤„ç†
            cur = copy.next;
        }
        
        // å†éå†ä¸€éèŠ‚ç‚¹ï¼Œå¤„ç† random æŒ‡é’ˆ
        cur = head;
        while (cur != null) {
            Node copy = cur.next; // å‰¯æœ¬èŠ‚ç‚¹
            copy.random = cur.random != null ? cur.random.next : null;
            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å¤„ç†
            cur = copy.next;
        }
        
        // åˆ†ç¦»åŸèŠ‚ç‚¹å’Œå‰¯æœ¬èŠ‚ç‚¹
        Node res = head.next;
        cur = head;
        while (cur != null) {
            Node temp = cur.next.next; // ä¸‹ä¸€ä¸ªåŸèŠ‚ç‚¹
            Node copy = cur.next;
            cur.next = temp;
            copy.next = temp != null ? temp.next : null;
            
            cur = temp;
        }
        
        return res;
    }
}
```

## CD114/LC2. ä¸¤ä¸ªé“¾è¡¨ç”Ÿæˆç›¸åŠ é“¾è¡¨

ã€é¢˜ç›®é“¾æ¥ã€‘ï¼š

- NowCoderï¼š[CD114. ä¸¤ä¸ªé“¾è¡¨ç”Ÿæˆç›¸åŠ é“¾è¡¨](https://www.nowcoder.com/practice/2d4ae9ef94c8412ebe49118f8e1da2df?tpId=101&tqId=33182&rp=1&ru=%2Fta%2Fprogrammer-code-interview-guide&qru=%2Fta%2Fprogrammer-code-interview-guide%2Fquestion-ranking&tab=answerKey)
- LeetCodeï¼š[2. ä¸¤æ•°ç›¸åŠ  - Medium](https://leetcode-cn.com/problems/add-two-numbers/)

ã€é¢˜ç›®æè¿°ã€‘ï¼š

å‡è®¾é“¾è¡¨ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½åœ¨ 0 - 9 ä¹‹é—´ï¼Œé‚£ä¹ˆé“¾è¡¨æ•´ä½“å°±å¯ä»¥ä»£è¡¨ä¸€ä¸ªæ•´æ•°ã€‚

ç»™å®šä¸¤ä¸ªè¿™ç§é“¾è¡¨ï¼Œè¯·ç”Ÿæˆä»£è¡¨ä¸¤ä¸ªæ•´æ•°ç›¸åŠ å€¼çš„ç»“æœé“¾è¡¨ã€‚

ä¾‹å¦‚ï¼šé“¾è¡¨ 1 ä¸º 9->3->7ï¼Œé“¾è¡¨ 2 ä¸º 6->3ï¼Œæœ€åç”Ÿæˆæ–°çš„ç»“æœé“¾è¡¨ä¸º 1->0->0->0ã€‚

è¾“å…¥æè¿°:

```
ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•° n å’Œ mï¼Œåˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦ã€‚

ç¬¬äºŒè¡Œ n ä¸ªæ•´æ•° ai è¡¨ç¤ºç¬¬ä¸€ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹ã€‚

ç¬¬ä¸‰è¡Œ m ä¸ªæ•´æ•° bi è¡¨ç¤ºç¬¬äºŒä¸ªé“¾è¡¨çš„èŠ‚ç‚¹ã€‚
```

è¾“å‡ºæè¿°:

```
è¾“å‡ºä¸€è¡Œæ•´æ•°è¡¨ç¤ºç»“æœé“¾è¡¨ã€‚
```

ç¤ºä¾‹1

```
è¾“å…¥
3 2
9 3 7
6 3

è¾“å‡º
1 0 0 0
```

ã€è§£é¢˜æ€è·¯ã€‘ï¼š

- å°†ä¸¤ä¸ªé“¾è¡¨é€†åºï¼Œè¿™æ ·å°±å¯ä»¥ä¾æ¬¡å¾—åˆ°ä»ä½ä½åˆ°é«˜ä½çš„æ•°å­—
- åŒæ­¥éå†ä¸¤ä¸ªé€†åºåçš„é“¾è¡¨ï¼Œè¿™æ ·å°±ä¾æ¬¡å¾—åˆ°ä¸¤ä¸ªé“¾è¡¨ä»ä½ä½åˆ°é«˜ä½çš„æ•°å­—ï¼Œç„¶åé€ä¸€è®¡ç®—ä¸¤ä¸ªé“¾è¡¨çš„ä¸¤æ•°ä¹‹å’Œï¼Œå°†å…¶æ’å…¥æ–°é“¾è¡¨ï¼ŒåŒæ—¶éœ€è¦å…³æ³¨æ¯ä¸€æ­¥æ˜¯å¦æœ‰è¿›ä½
- å½“ä¸¤ä¸ªé“¾è¡¨éƒ½éå†å®Œæˆåï¼Œè¿˜è¦å…³æ³¨æœ€åä¸€æ¬¡çš„è¿›ä½ä¿¡æ¯æ˜¯å¦ä¸º 1ï¼Œå¦‚æœä¸º 1ï¼Œè¿˜è¦ç”Ÿæˆä¸€ä¸ªèŠ‚ç‚¹
  å€¼ä¸º 1 çš„æ–°èŠ‚ç‚¹ã€‚ï¼ˆæ¯”å¦‚ 9 + 1 = 10ï¼Œä¸¤ä¸ªä¸€ä½æ•°ç›¸åŠ ï¼Œä½†æ˜¯ç»“æœæ˜¯ä¸¤ä½æ•°ï¼Œå› ä¸ºæœ€åä¸€æ¬¡çš„è¿›ä½æ˜¯ 1ï¼‰
- æœ€åï¼Œé€†åºæ–°é“¾è¡¨ï¼Œè¿”å›æ–°é“¾è¡¨çš„è¡¨å¤´èŠ‚ç‚¹å³å¯ã€‚

ã€å…·ä½“ä»£ç ã€‘ï¼š

```java
import java.util.List;
import java.util.Scanner;

public class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int n = sc.nextInt(); // ç¬¬ä¸€ä¸ªé“¾è¡¨çš„é•¿åº¦
        int m = sc.nextInt(); // ç¬¬äºŒä¸ªé“¾è¡¨çš„é•¿åº¦
        // æ„é€ ç¬¬ä¸€ä¸ªé“¾è¡¨
        ListNode head1 = new ListNode(sc.nextInt());
        ListNode cur = head1;
        for (int i = 1; i < n; i ++) {
            cur.next = new ListNode(sc.nextInt());
            cur = cur.next;
        }
        // æ„é€ ç¬¬äºŒä¸ªé“¾è¡¨
        ListNode head2 = new ListNode(sc.nextInt());
        cur = head2;
        for (int i = 1; i < m; i ++) {
            cur.next = new ListNode(sc.nextInt());
            cur = cur.next;
        }

        ListNode res = addList(head1, head2);
        cur = res;
        while (cur != null) {
        	System.out.println(cur.val + " ");
            cur = cur.next;
        }
    }

    // ä¸¤ä¸ªé“¾è¡¨ç›¸åŠ 
    private static ListNode addList(ListNode head1, ListNode head2) {
        if (head1 == null || head2 == null) {
            return (head1 == null) ? head2 : head1;
        }
        head1 = reverseList(head1);
        head2 = reverseList(head2);
        ListNode res = new ListNode(-1);
        ListNode p = res;

        ListNode cur1 = head1;
        ListNode cur2 = head2;
        int carry = 0; // è¿›ä½
        while (cur1 != null || cur2 != null) {
            int n1 = (cur1 == null) ? 0 : cur1.val;
            int n2 = (cur2 == null) ? 0 : cur2.val;
            int sum = n1 + n2 + carry;
            if (sum > 9) {
                p.next = new ListNode(sum - 10);
                p = p.next;
                carry = 1;
            }
            else {
                p.next = new ListNode(sum);
                p = p.next;
                carry = 0;
            }

            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ç›¸åŠ 
            cur1 = (cur1 == null) ? null : cur1.next;
            cur2 = (cur2 == null) ? null : cur2.next;
        }

        // æ³¨æ„æœ€åä¸€ä½è¿›ä½çš„åˆ¤æ–­
        if (carry == 1) {
            p.next = new ListNode(1);
        }

        return reverseList(res.next);
    }

    // åŸåœ°åè½¬å•é“¾è¡¨
    private static ListNode reverseList(ListNode head) {
        ListNode preNode = null; // å‰é©±èŠ‚ç‚¹
        while (head != null) {
            ListNode temp = head.next;

            head.next = preNode;
            preNode = head;

            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åˆ¤æ–­
            head = temp;
        }
        return preNode;
    }

    // å®šä¹‰å•é“¾è¡¨ç»“æ„
    public static class ListNode {
        private int val;
        private ListNode next;

        public ListNode(int val) {
            this.val = val;
        }
    }
}
```

ä¸Šè¿°ä»£ç åªèƒ½é€šè¿‡ 80% çš„æ¡ˆä¾‹ï¼Œä¹‹å‰æ ˆå’Œé˜Ÿåˆ—ç« èŠ‚ - CD188 é¢˜å•è°ƒæ ˆè¿›é˜¶é‚£é“é¢˜ç›®ä¹Ÿå‡ºç°äº†è¿™ç§æƒ…å†µã€‚è½»è½¦ç†Ÿè·¯ï¼Œè€ƒè™‘æ˜¯ IO æ¬¡æ•°å¤ªå¤šå¯¼è‡´çš„ï¼Œç”¨ StringBuilder ä¿å­˜ç»“æœï¼Œç„¶åä¸€æ¬¡æ€§è¾“å‡ºï¼š

```java
ListNode res = addList(head1, head2);
cur = res;
StringBuilder sb = new StringBuilder();
while (cur != null) {
    sb.append(cur.val);
    sb.append(" ");
    cur = cur.next;
}
System.out.println(sb);
```


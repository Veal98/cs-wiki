# âœ‚ åˆ†æ²»æ³• Divide and Conquer

---

## 169. å¤šæ•°å…ƒç´  

ğŸ‘‰ [169. Majority Element â€” Easy](https://leetcode-cn.com/problems/majority-element/)

- ğŸ“œ ã€ é¢˜ç›®æè¿° ã€‘ï¼š

    Given an array of size n, **find the majority element**. The majority element is the element that appears **more than âŒŠ n/2 âŒ‹** times.

    You may assume that the array is non-empty and the majority element always exist in the array.

    **Example 1**:

    ```
    Input: [3,2,3]
    Output: 3
    ```

    **Example 2**:

    ```
    Input: [2,2,1,1,1,2,2]
    Output: 2
    ```

- ğŸ’¡ ã€ è§£é¢˜æ€è·¯ ã€‘ï¼š

  æœ¬é¢˜é¢˜é¢ä¸­æ²¡æœ‰ç»™å‡ºæ•°æ®èŒƒå›´ï¼Œä½†æœ€ç®€å•çš„æš´åŠ›æ–¹æ³•ï¼ˆå³æšä¸¾æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå†éå†ä¸€éæ•°ç»„ç»Ÿè®¡å…¶å‡ºç°æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(N^2)$ çš„ç®—æ³•ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰¾å‡ºæ—¶é—´å¤æ‚åº¦å°äº $O(N^2)$ çš„å…¶ä»–åšæ³•ã€‚

  é‡‡ç”¨**åˆ†æ²»æ³•**ï¼š

  å‡è®¾æ•° a æ˜¯æ•°ç»„ nums çš„ä¼—æ•°ï¼Œ**å¦‚æœæˆ‘ä»¬å°† nums åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œé‚£ä¹ˆ a å¿…å®šæ˜¯è‡³å°‘ä¸€éƒ¨åˆ†çš„ä¼—æ•°**ã€‚

  è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åˆ†æ²»æ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼šå°†æ•°ç»„åˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«æ±‚å‡ºå·¦åŠéƒ¨åˆ†çš„ä¼—æ•° a1 ä»¥åŠå³åŠéƒ¨åˆ†çš„ä¼—æ•° a2ï¼Œå¦‚æœ a1 å’Œ a2 ç›¸åŒï¼Œé‚£ä¹ˆæ˜¾ç„¶è¿™ä¸€æ®µåŒºé—´çš„ä¼—æ•°æ˜¯å®ƒä»¬ç›¸åŒçš„å€¼ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬éœ€è¦æ¯”è¾ƒä¸¤ä¸ªä¼—æ•°åœ¨**æ•´ä¸ªåŒºé—´å†…**å‡ºç°çš„æ¬¡æ•°æ¥å†³å®šè¯¥åŒºé—´çš„ä¼—æ•°ã€‚

- âœ… ã€ å…·ä½“ä»£ç  ã€‘ï¼š

  ä½¿ç”¨ç»å…¸çš„**åˆ†æ²»ç®—æ³•é€’å½’æ±‚è§£**ï¼Œç›´åˆ°æ‰€æœ‰çš„å­é—®é¢˜éƒ½æ˜¯é•¿åº¦ä¸º 1 çš„æ•°ç»„ã€‚é•¿åº¦ä¸º 1 çš„å­æ•°ç»„ä¸­å”¯ä¸€çš„æ•°æ˜¾ç„¶æ˜¯ä¼—æ•°ï¼Œç›´æ¥è¿”å›å³å¯ã€‚å¦‚æœå›æº¯åæŸåŒºé—´çš„é•¿åº¦å¤§äº 1ï¼Œæˆ‘ä»¬å¿…é¡»å°†å·¦å³å­åŒºé—´çš„å€¼åˆå¹¶ã€‚

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917145152.png" style="zoom: 50%;" />

  

  ```java
  class Solution {
  
      // æŸ¥æ‰¾æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ï¼ˆä¼—æ•°ï¼‰
      private int majorityElementRec(int[] nums, int low, int high) {
          // å¦‚æœè¯¥æ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªæ•°ï¼Œè¿”å›è¯¥æ•°ï¼ˆé€’å½’å‡ºå£)
          if(low == high)
              return nums[low];
  
          // åˆ†æ²»é€’å½’
          int mid = (high - low) / 2 + low;
          int left = majorityElementRec(nums, low, mid); // é€’å½’å¯»æ‰¾å·¦åŠéƒ¨åˆ†çš„ä¼—æ•°
          int right = majorityElementRec(nums, mid + 1, high); // é€’å½’å¯»æ‰¾å³åŠéƒ¨åˆ†çš„ä¼—æ•°
  
          // å¦‚æœå·¦å³ä¸¤éƒ¨åˆ†çš„ä¼—æ•°ç›¸åŒï¼Œåˆ™è¯¥æ•°å°±æ˜¯æœ€ç»ˆç»“æœ
          if(left == right)
              return left;
  
          // å¦‚æœå·¦å³ä¸¤éƒ¨åˆ†çš„ä¼—æ•°ä¸ç›¸åŒï¼Œåˆ™é€‰æ‹©åœ¨æ•´ä¸ªæ•°ç»„ä¸­ä¸¤è€…å‡ºç°æ¬¡æ•°è¾ƒå¤šçš„é‚£ä¸ª
          int leftCount = countInRange(nums, left, low, high);
          int rightCount = countInRange(nums, right, low, high);
  
          return leftCount > rightCount ? left : right;
      }
  
      // æŸ¥æ‰¾åœ¨ nums æ•°ç»„ä¸­ï¼Œä»ä¸‹æ ‡ low åˆ° highï¼Œ num çš„å‡ºç°æ¬¡æ•°
      private int countInRange(int[] nums, int num, int low, int high){
          int count = 0;
          for(int i = low; i <= high; i ++){
              if(nums[i] == num)
                  count ++;
          }
          return count;
  
      }
  
      public int majorityElement(int[] nums){
          return majorityElementRec(nums, 0, nums.length - 1);
      }
  }
  ```

- ğŸ†š ã€å¤æ‚åº¦åˆ†æ ã€‘ï¼š

  **æ—¶é—´å¤æ‚åº¦**ï¼š$O(nlogn)$ï¼š

  å‡½æ•° `majorityElementRec` ä¼šæ±‚è§£ 2 ä¸ªé•¿åº¦ä¸º $\dfrac{n}{2}$ çš„å­é—®é¢˜ï¼Œå¹¶åšä¸¤éé•¿åº¦ä¸º n çš„çº¿æ€§æ‰«æã€‚å› æ­¤ï¼Œåˆ†æ²»ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è¡¨ç¤ºä¸ºï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917150918.png" style="zoom: 80%;" />

  æ ¹æ® **ä¸»å®šç†**ï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200916143502.png" style="zoom: 67%;" />

  $a = 2, b = 2, f(n) = 2n, n^{log_b^a} = n$ï¼Œæ˜¾ç„¶ï¼Œ$f(n)$ å’Œ $n^{log_b^a}$ å¤„äºåŒä¸€ä¸ªé‡çº§ï¼Œæ»¡è¶³ç¬¬ 2 ä¸­æƒ…å†µï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦å¯ä»¥è¡¨ç¤ºä¸ºï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917151151.png" style="zoom:80%;" />

  **ç©ºé—´å¤æ‚åº¦**ï¼š$O(\log n)$ï¼š

  å°½ç®¡åˆ†æ²»ç®—æ³•æ²¡æœ‰ç›´æ¥åˆ†é…é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½†<u>åœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ä½¿ç”¨äº†é¢å¤–çš„æ ˆç©ºé—´</u>ã€‚ç®—æ³•æ¯æ¬¡å°†æ•°ç»„ä»ä¸­é—´åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œæ‰€ä»¥æ•°ç»„é•¿åº¦å˜ä¸º 1 ä¹‹å‰éœ€è¦è¿›è¡Œ $O(\log n)$ æ¬¡é€’å½’ï¼Œå³ç©ºé—´å¤æ‚åº¦ä¸º $O(\log n)$ã€‚

  

## 53. æœ€å¤§è¿ç»­å­åºåˆ—å’Œ

ğŸ‘‰ [53. Maximum Subarray â€” Easy](https://leetcode-cn.com/problems/maximum-subarray/)

- ğŸ“œ ã€ é¢˜ç›®æè¿° ã€‘ï¼š

  Given an integer array nums, find the **contiguous (ç›¸é‚»çš„) subarray (containing at least one number) which has the largest sum** and return its sum.

  Follow up: If you have figured out the O(n) solution, try coding another solution using the **divide and conquer** approach, which is more subtle
  
  **Example 1**:
  
    ```
    Input: nums = [-2,1,-3,4,-1,2,1,-5,4]
    Output: 6
    Explanation: [4,-1,2,1] has the largest sum = 6.
    ```
  
    **Example 2**:
  
    ```
    Input: nums = [1]
    Output: 1
    ```
  
    **Example 3**:
  
    ```
    Input: nums = [0]
    Output: 0
    ```
  
    **Example 4**:
  
    ```
    Input: nums = [-1]
    Output: -1
    ```
  
    **Example 5**:
  
    ```
    Input: nums = [-2147483647]
    Output: -2147483647
    ```
  
    **Constraints**:
  
    ```
    1 <= nums.length <= 2 * 104
    -231 <= nums[i] <= 231 - 1
    ```


- ğŸ’¡ ã€ è§£é¢˜æ€è·¯ ã€‘ï¼š

  æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ“ä½œ `get(a, l, r)` è¡¨ç¤ºæŸ¥è¯¢ a åºåˆ— `[l, r`] åŒºé—´å†…çš„æœ€å¤§å­æ®µå’Œï¼Œé‚£ä¹ˆæœ€ç»ˆæˆ‘ä»¬è¦æ±‚çš„ç­”æ¡ˆå°±æ˜¯ `get(nums, 0, nums.size() - 1)`ã€‚å¦‚ä½•åˆ†æ²»å®ç°è¿™ä¸ªæ“ä½œå‘¢ï¼Ÿå¯¹äºä¸€ä¸ªåŒºé—´ `[l, r]`ï¼Œæˆ‘ä»¬å– $m = \lfloor \frac{l + r}{2} \rfloor$
  	
  å¯¹åŒºé—´ `[l, m]` å’Œ `[m + 1, r]` åˆ†æ²»æ±‚è§£ã€‚å½“é€’å½’é€å±‚æ·±å…¥ç›´åˆ°åŒºé—´é•¿åº¦ç¼©å°ä¸º 1 çš„æ—¶å€™ï¼Œé€’å½’ã€Œå¼€å§‹å›å‡ã€å³è¿›è¡Œåˆå¹¶æ“ä½œã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è€ƒè™‘å¦‚ä½•é€šè¿‡ `[l, m]`  åŒºé—´çš„ä¿¡æ¯å’Œ `[m + 1, r]`  åŒºé—´çš„ä¿¡æ¯åˆå¹¶æˆåŒºé—´ `[l, r]` çš„ä¿¡æ¯ã€‚æœ€å…³é”®çš„ä¸¤ä¸ªé—®é¢˜æ˜¯ï¼š

  - æˆ‘ä»¬è¦ç»´æŠ¤åŒºé—´çš„å“ªäº›ä¿¡æ¯å‘¢ï¼Ÿ

  - æˆ‘ä»¬å¦‚ä½•åˆå¹¶è¿™äº›ä¿¡æ¯å‘¢ï¼Ÿ

  å¯¹äºä¸€ä¸ªåŒºé—´ `[l, r]`ï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤å››ä¸ªé‡ï¼š

  - `lSum` è¡¨ç¤º `[l, r]`å†…ä»¥ l ä¸ºå·¦ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œ
  - `rSum `è¡¨ç¤º `[l, r]` å†…ä»¥ r ä¸ºå³ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œ
  - `mSum `è¡¨ç¤º `[l, r]` å†…çš„æœ€å¤§å­æ®µå’Œ
  - `iSum `è¡¨ç¤º `[l, r]` çš„åŒºé—´å’Œ

  ä¸¾ä¸ªä¾‹å­ï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917154358.png" style="zoom:67%;" />

  ä»¥ä¸‹ç®€ç§° `[l, m]` ä¸º `[l, r]` çš„ã€Œå·¦å­åŒºé—´ã€ï¼Œ`[m + 1, r]` ä¸º `[l, r]` çš„ã€Œå³å­åŒºé—´ã€ã€‚

  - å¯¹äºé•¿åº¦ä¸º 1 çš„åŒºé—´` [i, i]`ï¼Œå››ä¸ªé‡çš„å€¼éƒ½å’Œ $a_i$ ç›¸ç­‰ã€‚

  - å¯¹äºé•¿åº¦å¤§äº 1 çš„åŒºé—´ï¼š

  - é¦–å…ˆæœ€å¥½ç»´æŠ¤çš„æ˜¯ `iSum`ï¼ŒåŒºé—´ `[l, r]` çš„ `iSum `å°±ç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ `iSum `åŠ ä¸Šã€Œå³å­åŒºé—´ã€çš„ `iSum`ã€‚

    å¯¹äº` [l, r]` çš„ `lSum`ï¼Œå­˜åœ¨ä¸¤ç§å¯èƒ½ï¼Œå®ƒè¦ä¹ˆç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ `lSum`ï¼Œè¦ä¹ˆç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ iSum åŠ ä¸Šã€Œå³å­åŒºé—´ã€çš„ `lSum`ï¼ŒäºŒè€…å–å¤§ã€‚

    <img src="https://gitee.com/veal98/images/raw/master/img/20200917154629.png" style="zoom:67%;" />

    å¯¹äº ` [l, r]`  çš„ `rSum`ï¼ŒåŒç†ï¼Œå®ƒè¦ä¹ˆç­‰äºã€Œå³å­åŒºé—´ã€çš„ `rSum`ï¼Œè¦ä¹ˆç­‰äºã€Œå³å­åŒºé—´ã€çš„ iSum åŠ ä¸Šã€Œå·¦å­åŒºé—´ã€çš„ `rSum`ï¼ŒäºŒè€…å–å¤§ã€‚

    <img src="https://gitee.com/veal98/images/raw/master/img/20200917154706.png" style="zoom:67%;" />

  

  å½“è®¡ç®—å¥½ä¸Šé¢çš„ä¸‰ä¸ªé‡ä¹‹åï¼Œå°±å¾ˆå¥½è®¡ç®— ` [l, r]`  çš„ mSum äº†ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘ ` [l, r]`  çš„ mSum å¯¹åº”çš„åŒºé—´æ˜¯å¦è·¨è¶Š mï¼š

  - å®ƒå¯èƒ½ä¸è·¨è¶Š mï¼Œä¹Ÿå°±æ˜¯è¯´ ` [l, r]`  çš„ `mSum `å¯èƒ½æ˜¯ã€Œå·¦å­åŒºé—´ã€çš„ `mSum `å’Œ ã€Œå³å­åŒºé—´ã€çš„ `mSum `ä¸­çš„ä¸€ä¸ªï¼›

  - å®ƒä¹Ÿå¯èƒ½è·¨è¶Š mï¼Œå¯èƒ½æ˜¯ã€Œå·¦å­åŒºé—´ã€çš„ `rSum `å’Œ ã€Œå³å­åŒºé—´ã€çš„ `lSum `æ±‚å’Œã€‚ä¸‰è€…å–å¤§ã€‚

    <img src="https://gitee.com/veal98/images/raw/master/img/20200917155138.png" style="zoom:67%;" />

  

- âœ… ã€ å…·ä½“ä»£ç  ã€‘ï¼š

  ```java
  class Solution {
  
      // åŒºé—´çŠ¶æ€ï¼ˆå››ä¸ªå€¼)
      public class Status {
          public int lSum, rSum, mSum, iSum;
  
          public Status(int lSum, int rSum, int mSum, int iSum) {
              this.lSum = lSum;
              this.rSum = rSum;
              this.mSum = mSum;
              this.iSum = iSum;
          }
      }   
  
      // åˆ†æ²»é€’å½’è·å–å„ä¸ªå­åŒºé—´çš„çŠ¶æ€ï¼ˆå››ä¸ªå€¼ï¼‰
      public Status getInfo(int[] a, int l, int r){
          if(l == r){ // é€’å½’å‡ºå£
              return new Status(a[l], a[l], a[l], a[l]);
          }
          int m = (l + r) >> 1; // ä½è¿ç®—æ¯” ï¼ˆl+r)/2 é€Ÿåº¦å¿«
          Status lSub = getInfo(a, l, m);
          Status rSub = getInfo(a, m + 1, r);
          return pushUp(lSub, rSub); // æ ¹æ®å·¦å³å­åŒºé—´çš„çŠ¶æ€è·å–æ•´ä¸ªåŒºé—´çš„çŠ¶æ€
      }
  
      // è·å–æ•´ä¸ªåŒºé—´çš„çŠ¶æ€ï¼ˆå››ä¸ªå€¼ï¼‰
      public Status pushUp(Status l, Status r){
          int iSum = l.iSum + r.iSum;
          int lSum = Math.max(l.lSum, l.iSum + r.lSum);
          int rSum = Math.max(r.rSum, r.iSum + l.rSum);
          // è·å–æœ€å¤§è¿ç»­å­åºåˆ—å’Œï¼ˆä¸‰ç§æƒ…å†µä¸­çš„æœ€å¤§å€¼ï¼‰
          int mSum = Math.max(Math.max(l.mSum, r.mSum), l.rSum + r.lSum);
          return new Status(lSum, rSum, mSum, iSum);
      }
  
      public int maxSubArray(int[] nums) {
          return getInfo(nums, 0, nums.length - 1).mSum;
      }
  }
  ```

  

- ğŸ†š ã€å¤æ‚åº¦åˆ†æ ã€‘ï¼š

  å‡è®¾åºåˆ— a çš„é•¿åº¦ä¸º nã€‚

  **æ—¶é—´å¤æ‚åº¦**ï¼š$O(n)$

  å‡è®¾æˆ‘ä»¬<u>æŠŠé€’å½’çš„è¿‡ç¨‹çœ‹ä½œæ˜¯ä¸€é¢—äºŒå‰æ ‘çš„å…ˆåºéå†</u>ï¼Œé‚£ä¹ˆè¿™é¢—äºŒå‰æ ‘çš„æ·±åº¦çš„æ¸è¿›ä¸Šç•Œä¸º $O(logn)$ï¼Œè¿™é‡Œçš„æ€»æ—¶é—´ç›¸å½“äºéå†è¿™é¢—äºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ•…æ€»æ—¶é—´çš„æ¸è¿›ä¸Šç•Œæ˜¯ $O(\sum_{i = 1}^{\log n} 2^{i - 1}) = O(n)$ï¼Œæ•…æ¸è¿›æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚

  **ç©ºé—´å¤æ‚åº¦**ï¼š$O(logn)$

  é€’å½’ä¼šä½¿ç”¨ O(logn) çš„æ ˆç©ºé—´ï¼Œæ•…æ¸è¿›ç©ºé—´å¤æ‚åº¦ä¸º O(logn)ã€‚


## 241. ä¸ºè¿ç®—ç¬¦è¡¨è¾¾å¼è®¾è®¡ä¼˜å…ˆçº§

ğŸ‘‰ [241. Different Ways to Add Parentheses(æ’å…¥è¯­) â€” Medium](https://leetcode-cn.com/problems/different-ways-to-add-parentheses/)

- ğŸ“œ ã€ é¢˜ç›®æè¿° ã€‘ï¼š

  Given a string of numbers and operators, return all possible results from computing all the **different possible ways to group numbers and operators**. The valid operators are `+`, `-` and `*`.

  å…¶å®å°±æ˜¯ä¸ºè¡¨è¾¾å¼æ·»åŠ æ‹¬å·ï¼Œæ”¹å˜å…¶è¿ç®—ä¼˜å…ˆçº§ä»¥æ±‚å‡ºä¸åŒçš„ç»“æœ

  **Example 1**:

  ```
  Input: "2-1-1"
  Output: [0, 2]
  Explanation: 
  ((2-1)-1) = 0 
  (2-(1-1)) = 2
  ```

  **Example 2**:

  ```
  Input: "2*3-4*5"
  Output: [-34, -14, -10, -10, 10]
  Explanation: 
  (2*(3-(4*5))) = -34 
  ((2*3)-(4*5)) = -14 
  ((2*(3-4))*5) = -10 
  (2*((3-4)*5)) = -10 
  (((2*3)-4)*5) = 10
  ```

  

- ğŸ’¡ ã€ è§£é¢˜æ€è·¯ ã€‘ï¼š

  å¯¹äºä¸€ä¸ªå½¢å¦‚ `x op y`ï¼ˆop ä¸ºè¿ç®—ç¬¦ï¼Œx å’Œ y ä¸ºæ•°ï¼‰ çš„ç®—å¼è€Œè¨€ï¼Œå®ƒçš„ç»“æœç»„åˆå–å†³äº x å’Œ y çš„ç»“æœç»„åˆæ•°ã€‚å› æ­¤ï¼Œè¯¥é—®é¢˜çš„å­é—®é¢˜å°±æ˜¯ `x op y` ä¸­çš„ `x1 op x2` å’Œ `y1 op y2`ï¼š**ä»¥è¿ç®—ç¬¦åˆ†éš”**çš„å·¦å³ä¸¤ä¾§ç®—å¼è§£ã€‚

  ç„¶åæˆ‘ä»¬æ¥è¿›è¡Œ åˆ†æ²»ç®—æ³•ä¸‰æ­¥èµ°ï¼š

  - åˆ†è§£ï¼šæŒ‰è¿ç®—ç¬¦åˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«æ±‚è§£

  - è§£å†³ï¼šå®ç°ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œè¾“å…¥ç®—å¼ï¼Œè¿”å›ç®—å¼è§£

  - åˆå¹¶ï¼šæ ¹æ®è¿ç®—ç¬¦åˆå¹¶å·¦å³ä¸¤éƒ¨åˆ†çš„è§£ï¼Œå¾—å‡ºæœ€ç»ˆè§£

  ğŸ’¬ ä»¥ `2-1-1` ä¸ºä¾‹ï¼š

  é‡è§ç¬¬ä¸€ä¸ªè¿ç®—ç¬¦ `-` è¿›è¡Œç¬¬ä¸€æ¬¡åˆ†æ²»ï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200919152820.png" style="zoom:55%;" />

  é‡è§ç¬¬äºŒä¸ªè¿ç®—ç¬¦ `-` è¿›è¡Œç¬¬äºŒæ¬¡åˆ†æ²»ï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200919152751.png" style="zoom:55%;" />

- âœ… ã€ å…·ä½“ä»£ç  ã€‘ï¼š

  ```java
  class Solution {
  
      // å­˜å‚¨å„ä¸ªå­—ç¬¦ä¸²å¯¹åº”çš„ä¸åŒè¿ç®—ç»“æœçš„ä¸ªæ•°
      public Map<String,List<Integer>> resultMap = new HashMap<>();
  
      // å­˜å‚¨è¾“å…¥çš„inputå­—ç¬¦ä¸²å¯¹åº”çš„ä¸åŒè¿ç®—ç»“æœï¼Œè¿”å›è¯¥ç»“æœçš„é›†åˆ
      public List<Integer> diffWaysToCompute(String input) {
          // å» map ä¸­æŸ¥æ‰¾è¯¥è¾“å…¥inputæ˜¯å¦å·²ç»è®¡ç®—å­˜å‚¨è¿‡ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚
          if(resultMap.containsKey(input))
              return resultMap.get(input);
  
          List<Integer> resultList = new ArrayList<>(); // å­˜å‚¨è¿ç®—ç»“æœ
  
          int len = input.length();
          for(int i = 0; i < len; i++){
              char c = input.charAt(i); 
              // å¦‚æœæ˜¯è¿ç®—ç¬¦å·ï¼Œåˆ™é€’å½’æ±‚è§£å…¶å‰åŠæ®µå’ŒååŠæ®µã€‚
              if(c == '+' || c == '-' || c == '*'){
                  List<Integer> left = diffWaysToCompute(input.substring(0,i));
                  List<Integer> right = diffWaysToCompute(input.substring(i+1, input.length()));
              
                  // å¯¹å·¦å³ä¸¤ä¾§çš„ç»“æœè¿›è¡Œåˆå¹¶
                  for(int l : left) {
                      for(int r : right){
                          switch(c){
                              case '+':
                                  resultList.add(l + r);
                                  break;
                              case '-':
                                  resultList.add(l - r);
                                  break;
                              case '*':
                                  resultList.add(l * r);
                                  break;
                          }
                      }
                  }
              } // if End
          } // for End
  
          // æ²¡æœ‰è¿ç®—ç¬¦çš„æƒ…å†µ(åªæœ‰æ•°å­—)ï¼Œç›´æ¥å­˜å‚¨è¯¥æ•°å­—å³å¯
          if(resultList.size() == 0)
              resultList.add(Integer.valueOf(input));
  
          resultMap.put(input, resultList);
  
          return resultList;
          
      }
  }
  ```

## 215. æ•°ç»„ä¸­ç¬¬ K å¤§çš„å…ƒç´ 

ğŸ‘‰ [215. Kth Largest Element in an Array â€” Medium](https://leetcode-cn.com/problems/kth-largest-element-in-an-array/)

- ğŸ“œ ã€ é¢˜ç›®æè¿° ã€‘ï¼š

  Find **the kth largest element** in an unsorted array. Note that it is the kth largest element in the sorted order, not the kth distinct element.

  Example 1:

  ```
  Input: [3,2,1,5,6,4] and k = 2
  Output: 5
  ```


  Example 2:

  ```
  Input: [3,2,3,1,2,4,5,5,6] and k = 4
  Output: 4
  ```

  Note:

  You may assume k is always valid, 1 â‰¤ k â‰¤ array's length.

  

- ğŸ’¡ ã€ è§£é¢˜æ€è·¯ ã€‘ï¼š

  <u>åŸºäºå¿«é€Ÿæ’åºçš„åˆ†æ²»ç®—æ³•</u>ï¼š

  å¿«é€Ÿæ’åºæ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ†æ²»ç®—æ³•ï¼Œå¿«æ’çš„æ ¸å¿ƒåœ¨äº `partition`ï¼ˆåˆ‡åˆ†ï¼‰æ“ä½œï¼Œå³æ¯ä¸€æ¬¡æ’åºåéƒ½ä¼šç¡®å®šä¸€ä¸ªå…ƒç´ çš„æœ€ç»ˆä½ç½®ï¼Œå³ x çš„æœ€ç»ˆä½ç½®ä¸º jï¼Œå¹¶ä¸”ä¿è¯ $a[l \cdots j - 1]$ ä¸­çš„æ¯ä¸ªå…ƒç´ å°äºç­‰äº a[j]ï¼Œä¸” a[j] å°äºç­‰äº $a[j + 1 \cdots r]$ ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚

  æ‰€ä»¥**åªè¦æŸæ¬¡åˆ’åˆ†çš„ j ä¸ºå€’æ•°ç¬¬ kä¸ªä¸‹æ ‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å·²ç»æ‰¾åˆ°äº†ç­”æ¡ˆ**ã€‚ æˆ‘ä»¬åªå…³å¿ƒè¿™ä¸€ç‚¹ï¼Œè‡³äº $a[l \cdots j - 1]$ å’Œ $a[j+1 \cdots r]$ æ˜¯å¦æ˜¯æœ‰åºçš„ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒã€‚

  **å¦‚æœ j æ¯”ç›®æ ‡ä¸‹æ ‡å°ï¼Œå°±é€’å½’å³å­åŒºé—´ï¼Œå¦åˆ™é€’å½’å·¦å­åŒºé—´**ã€‚

  è¿™æ ·å°±å¯ä»¥æŠŠåŸæ¥é€’å½’ä¸¤ä¸ªåŒºé—´å˜æˆåªé€’å½’ä¸€ä¸ªåŒºé—´ï¼Œæé«˜äº†æ—¶é—´æ•ˆç‡ã€‚è¿™å°±æ˜¯ã€Œå¿«é€Ÿé€‰æ‹©ã€ç®—æ³•ã€‚

  <img src="https://gitee.com/veal98/images/raw/master/img/20200921103938.png" style="zoom: 45%;" />

  

- âœ… ã€ å…·ä½“ä»£ç  ã€‘ï¼š

  ```java
  class Solution {
      public int findKthLargest(int[] nums, int k) {
          int len = nums.length;
          int left = 0;
          int right = len - 1;
  
          int target = len - k; // ç¬¬ K å¤§å…ƒç´ ç»è¿‡æ’åºåçš„ä¸‹æ ‡
  
          while(true){
              int pivot = partition(nums, left, right);
              if(pivot == target)
                  return nums[pivot];
              else if(pivot < target){
                  left = pivot + 1;
              }
              else
                  right = pivot - 1;
          }
      }
  
      // åœ¨æ•°ç»„ nums çš„å­åŒºé—´ [left, right] æ‰§è¡Œ partition æ“ä½œï¼Œè¿”å› pivot æ’åºä»¥ååº”è¯¥åœ¨çš„ä½ç½®
      private int partition(int[] nums, int left, int right){
          int pivot = nums[left]; // é€‰æ‹© pivot ä¸ºæœ€å·¦è¾¹çš„æ•°
          int j = left;
          for(int i = left + 1; i <= right; i ++){
              if(nums[i] < pivot){
                  // å°äº pivot çš„å…ƒç´ éƒ½è¢«äº¤æ¢åˆ°å‰é¢
                  j ++;
                  swap(nums, j, i);
              }
          }
          // éå†ä¸€éåå°† pivot ç½®äºæœ€ç»ˆä½ç½® j
          swap(nums, j, left);
          return j;
      }
  
      private void swap(int[] nums, int a, int b){
          int temp = nums[a];
          nums[a] = nums[b];
          nums[b] = temp;
      }
  }
  ```

  ä¸è¿‡ä¸Šé¢çš„ä»£ç æ˜¯æœ‰ç¼ºé™·çš„ï¼šæˆ‘ä»¬çŸ¥é“å¿«é€Ÿæ’åºçš„æ€§èƒ½å’Œã€Œåˆ’åˆ†ã€å‡ºçš„å­æ•°ç»„çš„é•¿åº¦å¯†åˆ‡ç›¸å…³ã€‚ç›´è§‚åœ°ç†è§£å¦‚æœæ¯æ¬¡è§„æ¨¡ä¸º n çš„é—®é¢˜æˆ‘ä»¬éƒ½åˆ’åˆ†æˆ 1 å’Œ n - 1ï¼Œæ¯æ¬¡é€’å½’çš„æ—¶å€™åˆå‘ n - 1 çš„é›†åˆä¸­é€’å½’ï¼Œè¿™ç§æƒ…å†µæ˜¯æœ€åçš„ï¼ˆ**é¡ºåºæ•°ç»„æˆ–è€…é€†åºæ•°ç»„**ï¼‰ï¼Œæ—¶é—´ä»£ä»·æ˜¯ $O(n ^ 2)$ï¼Œæ ¹æœ¬è¾¾ä¸åˆ°å‡æ²»çš„æ•ˆæœã€‚

  <img src="https://gitee.com/veal98/images/raw/master/img/20200921110958.png" style="zoom: 80%;" />

  æˆ‘ä»¬å¯ä»¥å¼•å…¥**éšæœºåŒ–**æ¥åŠ é€Ÿè¿™ä¸ªè¿‡ç¨‹ï¼Œå®ƒçš„æ—¶é—´ä»£ä»·çš„æœŸæœ›æ˜¯ $O(n)$ã€‚

  æ‰€è°“éšæœºåŒ–å°±æ˜¯éšæœº pivot çš„å–å€¼ï¼ˆå¹¶éå›ºå®šçš„æœ€å·¦è¾¹çš„æ•°ï¼‰ï¼Œå¯ä»¥åœ¨å¾ªç¯ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œéšæœºäº¤æ¢ç¬¬ 1 ä¸ªå…ƒç´ ï¼ˆæœ€å·¦è¾¹çš„å…ƒç´ ï¼‰ä¸å®ƒåé¢çš„ä»»æ„ 1 ä¸ªå…ƒç´ çš„ä½ç½®ï¼š

  ```java
  import java.util.Random;
  
  class Solution {
  
      private static Random random = new Random(System.currentTimeMillis());
  
      public int findKthLargest(int[] nums, int k) {
          int len = nums.length;
          int left = 0;
          int right = len - 1;
  
          int target = len - k; // ç¬¬ K å¤§å…ƒç´ ç»è¿‡æ’åºåçš„ä¸‹æ ‡
  
          while(true){
              int pivot = partition(nums, left, right);
              if(pivot == target)
                  return nums[pivot];
              else if(pivot < target){
                  left = pivot + 1;
              }
              else
                  right = pivot - 1;
          }
      }
  
      // åœ¨æ•°ç»„ nums çš„å­åŒºé—´ [left, right] æ‰§è¡Œ partition æ“ä½œï¼Œè¿”å› pivot æ’åºä»¥ååº”è¯¥åœ¨çš„ä½ç½®
      private int partition(int[] nums, int left, int right){
          // åœ¨åŒºé—´éšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´ ä½œä¸ºæ ‡å®šç‚¹
          if(right > left){
              int randomIndex = left + 1 + random.nextInt(right - left);
              swap(nums, left, randomIndex);
          }
  
          int pivot = nums[left]; // é€‰æ‹© pivot ä¸ºæœ€å·¦è¾¹çš„æ•°
          int j = left;
          for(int i = left + 1; i <= right; i ++){
              if(nums[i] < pivot){
                  // å°äº pivot çš„å…ƒç´ éƒ½è¢«äº¤æ¢åˆ°å‰é¢
                  j ++;
                  swap(nums, j, i);
              }
          }
          // éå†ä¸€éåå°† pivot ç½®äºæœ€ç»ˆä½ç½® j
          swap(nums, j, left);
          return j;
      }
  
      private void swap(int[] nums, int a, int b){
          int temp = nums[a];
          nums[a] = nums[b];
          nums[b] = temp;
      }
  }
  ```

  OKï¼Œæ—¶é—´å¤æ‚åº¦å¤§å¤§é™ä½äº†ï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200921111033.png" style="zoom:80%;" />

## ğŸ“š References

- [LeetCode](https://leetcode-cn.com/problemset/algorithms/)
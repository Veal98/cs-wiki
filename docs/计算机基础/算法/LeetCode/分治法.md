# âœ‚ åˆ†æ²»æ³• Divide and Conquer

---

## 169. å¤šæ•°å…ƒç´ 

ğŸ‘‰ [169. Majority Element](https://leetcode-cn.com/problems/majority-element/)

- ğŸ“œ ã€ é¢˜ç›®æè¿° ã€‘ï¼š

    Given an array of size n, **find the majority element**. The majority element is the element that appears **more than âŒŠ n/2 âŒ‹** times.

    You may assume that the array is non-empty and the majority element always exist in the array.

    **Example 1**:

    ```
    Input: [3,2,3]
    Output: 3
    ```

    **Example 2**:

    ```
    Input: [2,2,1,1,1,2,2]
    Output: 2
    ```

- ğŸ’¡ ã€ è§£é¢˜æ€è·¯ ã€‘ï¼š

  æœ¬é¢˜é¢˜é¢ä¸­æ²¡æœ‰ç»™å‡ºæ•°æ®èŒƒå›´ï¼Œä½†æœ€ç®€å•çš„æš´åŠ›æ–¹æ³•ï¼ˆå³æšä¸¾æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå†éå†ä¸€éæ•°ç»„ç»Ÿè®¡å…¶å‡ºç°æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $O(N^2)$ çš„ç®—æ³•ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ‰¾å‡ºæ—¶é—´å¤æ‚åº¦å°äº $O(N^2)$ çš„å…¶ä»–åšæ³•ã€‚

  é‡‡ç”¨**åˆ†æ²»æ³•**ï¼š

  å‡è®¾æ•° a æ˜¯æ•°ç»„ nums çš„ä¼—æ•°ï¼Œ**å¦‚æœæˆ‘ä»¬å°† nums åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œé‚£ä¹ˆ a å¿…å®šæ˜¯è‡³å°‘ä¸€éƒ¨åˆ†çš„ä¼—æ•°**ã€‚

  è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨åˆ†æ²»æ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼šå°†æ•°ç»„åˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«æ±‚å‡ºå·¦åŠéƒ¨åˆ†çš„ä¼—æ•° a1 ä»¥åŠå³åŠéƒ¨åˆ†çš„ä¼—æ•° a2ï¼Œå¦‚æœ a1 å’Œ a2 ç›¸åŒï¼Œé‚£ä¹ˆæ˜¾ç„¶è¿™ä¸€æ®µåŒºé—´çš„ä¼—æ•°æ˜¯å®ƒä»¬ç›¸åŒçš„å€¼ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬éœ€è¦æ¯”è¾ƒä¸¤ä¸ªä¼—æ•°åœ¨**æ•´ä¸ªåŒºé—´å†…**å‡ºç°çš„æ¬¡æ•°æ¥å†³å®šè¯¥åŒºé—´çš„ä¼—æ•°ã€‚

- âœ… ã€ å…·ä½“ä»£ç  ã€‘ï¼š

  ä½¿ç”¨ç»å…¸çš„**åˆ†æ²»ç®—æ³•é€’å½’æ±‚è§£**ï¼Œç›´åˆ°æ‰€æœ‰çš„å­é—®é¢˜éƒ½æ˜¯é•¿åº¦ä¸º 1 çš„æ•°ç»„ã€‚é•¿åº¦ä¸º 1 çš„å­æ•°ç»„ä¸­å”¯ä¸€çš„æ•°æ˜¾ç„¶æ˜¯ä¼—æ•°ï¼Œç›´æ¥è¿”å›å³å¯ã€‚å¦‚æœå›æº¯åæŸåŒºé—´çš„é•¿åº¦å¤§äº 1ï¼Œæˆ‘ä»¬å¿…é¡»å°†å·¦å³å­åŒºé—´çš„å€¼åˆå¹¶ã€‚

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917145152.png" style="zoom: 50%;" />

  

  ```java
  class Solution {
  
      // æŸ¥æ‰¾æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ï¼ˆä¼—æ•°ï¼‰
      private int majorityElementRec(int[] nums, int low, int high) {
          // å¦‚æœè¯¥æ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªæ•°ï¼Œè¿”å›è¯¥æ•°ï¼ˆé€’å½’å‡ºå£)
          if(low == high)
              return nums[low];
  
          // åˆ†æ²»é€’å½’
          int mid = (high - low) / 2 + low;
          int left = majorityElementRec(nums, low, mid); // é€’å½’å¯»æ‰¾å·¦åŠéƒ¨åˆ†çš„ä¼—æ•°
          int right = majorityElementRec(nums, mid + 1, high); // é€’å½’å¯»æ‰¾å³åŠéƒ¨åˆ†çš„ä¼—æ•°
  
          // å¦‚æœå·¦å³ä¸¤éƒ¨åˆ†çš„ä¼—æ•°ç›¸åŒï¼Œåˆ™è¯¥æ•°å°±æ˜¯æœ€ç»ˆç»“æœ
          if(left == right)
              return left;
  
          // å¦‚æœå·¦å³ä¸¤éƒ¨åˆ†çš„ä¼—æ•°ä¸ç›¸åŒï¼Œåˆ™é€‰æ‹©åœ¨æ•´ä¸ªæ•°ç»„ä¸­ä¸¤è€…å‡ºç°æ¬¡æ•°è¾ƒå¤šçš„é‚£ä¸ª
          int leftCount = countInRange(nums, left, low, high);
          int rightCount = countInRange(nums, right, low, high);
  
          return leftCount > rightCount ? left : right;
      }
  
      // æŸ¥æ‰¾åœ¨ nums æ•°ç»„ä¸­ï¼Œä»ä¸‹æ ‡ low åˆ° highï¼Œ num çš„å‡ºç°æ¬¡æ•°
      private int countInRange(int[] nums, int num, int low, int high){
          int count = 0;
          for(int i = low; i <= high; i ++){
              if(nums[i] == num)
                  count ++;
          }
          return count;
  
      }
  
      public int majorityElement(int[] nums){
          return majorityElementRec(nums, 0, nums.length - 1);
      }
  }
  ```

- ğŸ†š ã€å¤æ‚åº¦åˆ†æ ã€‘ï¼š

  **æ—¶é—´å¤æ‚åº¦**ï¼š$O(nlogn)$ï¼š

  å‡½æ•° `majorityElementRec` ä¼šæ±‚è§£ 2 ä¸ªé•¿åº¦ä¸º $\dfrac{n}{2}$ çš„å­é—®é¢˜ï¼Œå¹¶åšä¸¤éé•¿åº¦ä¸º n çš„çº¿æ€§æ‰«æã€‚å› æ­¤ï¼Œåˆ†æ²»ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥è¡¨ç¤ºä¸ºï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917150918.png" style="zoom: 80%;" />

  æ ¹æ® **ä¸»å®šç†**ï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200916143502.png" style="zoom: 67%;" />

  $a = 2, b = 2, f(n) = 2n, n^{log_b^a} = n$ï¼Œæ˜¾ç„¶ï¼Œ$f(n)$ å’Œ $n^{log_b^a}$ å¤„äºåŒä¸€ä¸ªé‡çº§ï¼Œæ»¡è¶³ç¬¬ 2 ä¸­æƒ…å†µï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦å¯ä»¥è¡¨ç¤ºä¸ºï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917151151.png" style="zoom:80%;" />

  **ç©ºé—´å¤æ‚åº¦**ï¼š$O(\log n)$ï¼š

  å°½ç®¡åˆ†æ²»ç®—æ³•æ²¡æœ‰ç›´æ¥åˆ†é…é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½†<u>åœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ä½¿ç”¨äº†é¢å¤–çš„æ ˆç©ºé—´</u>ã€‚ç®—æ³•æ¯æ¬¡å°†æ•°ç»„ä»ä¸­é—´åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œæ‰€ä»¥æ•°ç»„é•¿åº¦å˜ä¸º 1 ä¹‹å‰éœ€è¦è¿›è¡Œ $O(\log n)$ æ¬¡é€’å½’ï¼Œå³ç©ºé—´å¤æ‚åº¦ä¸º $O(\log n)$ã€‚

  

## 53. æœ€å¤§è¿ç»­å­åºåˆ—å’Œ

ğŸ‘‰ [53. Maximum Subarray](https://leetcode-cn.com/problems/maximum-subarray/)

- ğŸ“œ ã€ é¢˜ç›®æè¿° ã€‘ï¼š

  Given an integer array nums, find the **contiguous (ç›¸é‚»çš„) subarray (containing at least one number) which has the largest sum** and return its sum.

  Follow up: If you have figured out the O(n) solution, try coding another solution using the **divide and conquer** approach, which is more subtle.

   

  **Example 1**:

  ```
  Input: nums = [-2,1,-3,4,-1,2,1,-5,4]
  Output: 6
  Explanation: [4,-1,2,1] has the largest sum = 6.
  ```

  **Example 2**:

  ```
  Input: nums = [1]
  Output: 1
  ```

  **Example 3**:

  ```
  Input: nums = [0]
  Output: 0
  ```

  **Example 4**:

  ```
  Input: nums = [-1]
  Output: -1
  ```

  **Example 5**:

  ```
  Input: nums = [-2147483647]
  Output: -2147483647
  ```

  **Constraints**:

  ```
  1 <= nums.length <= 2 * 104
  -231 <= nums[i] <= 231 - 1
  ```

  

- ğŸ’¡ ã€ è§£é¢˜æ€è·¯ ã€‘ï¼š

  æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ“ä½œ `get(a, l, r)` è¡¨ç¤ºæŸ¥è¯¢ a åºåˆ— `[l, r`] åŒºé—´å†…çš„æœ€å¤§å­æ®µå’Œï¼Œé‚£ä¹ˆæœ€ç»ˆæˆ‘ä»¬è¦æ±‚çš„ç­”æ¡ˆå°±æ˜¯ `get(nums, 0, nums.size() - 1)`ã€‚å¦‚ä½•åˆ†æ²»å®ç°è¿™ä¸ªæ“ä½œå‘¢ï¼Ÿå¯¹äºä¸€ä¸ªåŒºé—´ `[l, r]`ï¼Œæˆ‘ä»¬å– $m = \lfloor \frac{l + r}{2} \rfloor$
  	
  å¯¹åŒºé—´ `[l, m]` å’Œ `[m + 1, r]` åˆ†æ²»æ±‚è§£ã€‚å½“é€’å½’é€å±‚æ·±å…¥ç›´åˆ°åŒºé—´é•¿åº¦ç¼©å°ä¸º 1 çš„æ—¶å€™ï¼Œé€’å½’ã€Œå¼€å§‹å›å‡ã€å³è¿›è¡Œåˆå¹¶æ“ä½œã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è€ƒè™‘å¦‚ä½•é€šè¿‡ `[l, m]`  åŒºé—´çš„ä¿¡æ¯å’Œ `[m + 1, r]`  åŒºé—´çš„ä¿¡æ¯åˆå¹¶æˆåŒºé—´ `[l, r]` çš„ä¿¡æ¯ã€‚æœ€å…³é”®çš„ä¸¤ä¸ªé—®é¢˜æ˜¯ï¼š

  - æˆ‘ä»¬è¦ç»´æŠ¤åŒºé—´çš„å“ªäº›ä¿¡æ¯å‘¢ï¼Ÿ

  - æˆ‘ä»¬å¦‚ä½•åˆå¹¶è¿™äº›ä¿¡æ¯å‘¢ï¼Ÿ

  å¯¹äºä¸€ä¸ªåŒºé—´ `[l, r]`ï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤å››ä¸ªé‡ï¼š

  - `lSum` è¡¨ç¤º `[l, r]`å†…ä»¥ l ä¸ºå·¦ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œ
  - `rSum `è¡¨ç¤º `[l, r]` å†…ä»¥ r ä¸ºå³ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œ
  - `mSum `è¡¨ç¤º `[l, r]` å†…çš„æœ€å¤§å­æ®µå’Œ
  - `iSum `è¡¨ç¤º `[l, r]` çš„åŒºé—´å’Œ

  ä¸¾ä¸ªä¾‹å­ï¼š

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917154358.png" style="zoom:67%;" />

  ä»¥ä¸‹ç®€ç§° `[l, m]` ä¸º `[l, r]` çš„ã€Œå·¦å­åŒºé—´ã€ï¼Œ`[m + 1, r]` ä¸º `[l, r]` çš„ã€Œå³å­åŒºé—´ã€ã€‚

  - å¯¹äºé•¿åº¦ä¸º 1 çš„åŒºé—´` [i, i]`ï¼Œå››ä¸ªé‡çš„å€¼éƒ½å’Œ $a_i$ ç›¸ç­‰ã€‚

  - å¯¹äºé•¿åº¦å¤§äº 1 çš„åŒºé—´ï¼š

  - é¦–å…ˆæœ€å¥½ç»´æŠ¤çš„æ˜¯ `iSum`ï¼ŒåŒºé—´ `[l, r]` çš„ `iSum `å°±ç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ `iSum `åŠ ä¸Šã€Œå³å­åŒºé—´ã€çš„ `iSum`ã€‚

    å¯¹äº` [l, r]` çš„ `lSum`ï¼Œå­˜åœ¨ä¸¤ç§å¯èƒ½ï¼Œå®ƒè¦ä¹ˆç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ `lSum`ï¼Œè¦ä¹ˆç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ iSum åŠ ä¸Šã€Œå³å­åŒºé—´ã€çš„ `lSum`ï¼ŒäºŒè€…å–å¤§ã€‚

    <img src="https://gitee.com/veal98/images/raw/master/img/20200917154629.png" style="zoom:67%;" />

    å¯¹äº ` [l, r]`  çš„ `rSum`ï¼ŒåŒç†ï¼Œå®ƒè¦ä¹ˆç­‰äºã€Œå³å­åŒºé—´ã€çš„ `rSum`ï¼Œè¦ä¹ˆç­‰äºã€Œå³å­åŒºé—´ã€çš„ iSum åŠ ä¸Šã€Œå·¦å­åŒºé—´ã€çš„ `rSum`ï¼ŒäºŒè€…å–å¤§ã€‚

    <img src="https://gitee.com/veal98/images/raw/master/img/20200917154706.png" style="zoom:67%;" />

  

  å½“è®¡ç®—å¥½ä¸Šé¢çš„ä¸‰ä¸ªé‡ä¹‹åï¼Œå°±å¾ˆå¥½è®¡ç®— ` [l, r]`  çš„ mSum äº†ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘ ` [l, r]`  çš„ mSum å¯¹åº”çš„åŒºé—´æ˜¯å¦è·¨è¶Š mï¼š

  - å®ƒå¯èƒ½ä¸è·¨è¶Š mï¼Œä¹Ÿå°±æ˜¯è¯´ ` [l, r]`  çš„ `mSum `å¯èƒ½æ˜¯ã€Œå·¦å­åŒºé—´ã€çš„ `mSum `å’Œ ã€Œå³å­åŒºé—´ã€çš„ `mSum `ä¸­çš„ä¸€ä¸ªï¼›

  - å®ƒä¹Ÿå¯èƒ½è·¨è¶Š mï¼Œå¯èƒ½æ˜¯ã€Œå·¦å­åŒºé—´ã€çš„ `rSum `å’Œ ã€Œå³å­åŒºé—´ã€çš„ `lSum `æ±‚å’Œã€‚ä¸‰è€…å–å¤§ã€‚

    <img src="https://gitee.com/veal98/images/raw/master/img/20200917155138.png" style="zoom:67%;" />

  

- âœ… ã€ å…·ä½“ä»£ç  ã€‘ï¼š

  ```java
  class Solution {
  
      // åŒºé—´çŠ¶æ€ï¼ˆå››ä¸ªå€¼)
      public class Status {
          public int lSum, rSum, mSum, iSum;
  
          public Status(int lSum, int rSum, int mSum, int iSum) {
              this.lSum = lSum;
              this.rSum = rSum;
              this.mSum = mSum;
              this.iSum = iSum;
          }
      }   
  
      // åˆ†æ²»é€’å½’è·å–å„ä¸ªå­åŒºé—´çš„çŠ¶æ€ï¼ˆå››ä¸ªå€¼ï¼‰
      public Status getInfo(int[] a, int l, int r){
          if(l == r){ // é€’å½’å‡ºå£
              return new Status(a[l], a[l], a[l], a[l]);
          }
          int m = (l + r) >> 1; // ä½è¿ç®—æ¯” ï¼ˆl+r)/2 é€Ÿåº¦å¿«
          Status lSub = getInfo(a, l, m);
          Status rSub = getInfo(a, m + 1, r);
          return pushUp(lSub, rSub); // æ ¹æ®å·¦å³å­åŒºé—´çš„çŠ¶æ€è·å–æ•´ä¸ªåŒºé—´çš„çŠ¶æ€
      }
  
      // è·å–æ•´ä¸ªåŒºé—´çš„çŠ¶æ€ï¼ˆå››ä¸ªå€¼ï¼‰
      public Status pushUp(Status l, Status r){
          int iSum = l.iSum + r.iSum;
          int lSum = Math.max(l.lSum, l.iSum + r.lSum);
          int rSum = Math.max(r.rSum, r.iSum + l.rSum);
          // è·å–æœ€å¤§è¿ç»­å­åºåˆ—å’Œï¼ˆä¸‰ç§æƒ…å†µä¸­çš„æœ€å¤§å€¼ï¼‰
          int mSum = Math.max(Math.max(l.mSum, r.mSum), l.rSum + r.lSum);
          return new Status(lSum, rSum, mSum, iSum);
      }
  
      public int maxSubArray(int[] nums) {
          return getInfo(nums, 0, nums.length - 1).mSum;
      }
  }
  ```

  

- ğŸ†š ã€å¤æ‚åº¦åˆ†æ ã€‘ï¼š

  å‡è®¾åºåˆ— a çš„é•¿åº¦ä¸º nã€‚

  **æ—¶é—´å¤æ‚åº¦**ï¼š$O(n)$

  å‡è®¾æˆ‘ä»¬<u>æŠŠé€’å½’çš„è¿‡ç¨‹çœ‹ä½œæ˜¯ä¸€é¢—äºŒå‰æ ‘çš„å…ˆåºéå†</u>ï¼Œé‚£ä¹ˆè¿™é¢—äºŒå‰æ ‘çš„æ·±åº¦çš„æ¸è¿›ä¸Šç•Œä¸º $O(logn)$ï¼Œè¿™é‡Œçš„æ€»æ—¶é—´ç›¸å½“äºéå†è¿™é¢—äºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ•…æ€»æ—¶é—´çš„æ¸è¿›ä¸Šç•Œæ˜¯ $O(\sum_{i = 1}^{\log n} 2^{i - 1}) = O(n)$ï¼Œæ•…æ¸è¿›æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚

  **ç©ºé—´å¤æ‚åº¦**ï¼š$O(logn)$

  é€’å½’ä¼šä½¿ç”¨ O(logn) çš„æ ˆç©ºé—´ï¼Œæ•…æ¸è¿›ç©ºé—´å¤æ‚åº¦ä¸º O(logn)ã€‚

  
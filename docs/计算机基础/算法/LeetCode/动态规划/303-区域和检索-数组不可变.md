# 303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜

---

ğŸ‘‰ [303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜](https://leetcode-cn.com/problems/range-sum-query-immutable/)

## ğŸ“œ é¢˜ç›®æè¿°

Given an integer array nums, find the sum of the elements between indices i and j (i â‰¤ j), inclusive.

**Example**:

```
Given nums = [-2, 0, 3, -5, 2, -1]

sumRange(0, 2) -> 1

sumRange(2, 5) -> -1

sumRange(0, 5) -> -3
```

**Constraints**:

You may assume that the array does not change.

There are many calls to sumRange function.

0 <= nums.length <= 10^4

-10^5 <= nums[i] <= 10^5

0 <= i <= j < nums.length

## ğŸ’¡ è§£é¢˜æ€è·¯

ğŸ”¹ **ã€æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•ã€‘ï¼š**

æ¯æ¬¡è°ƒç”¨ `sumrange` æ—¶ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨ for å¾ªç¯å°†ç´¢å¼• i åˆ° j ä¹‹é—´çš„æ¯ä¸ªå…ƒç´ ç›¸åŠ ã€‚

ğŸ”¹ **ã€æ–¹æ³•äºŒï¼šå¤‡å¿˜å½•æ³•ã€‘ï¼š**

é€šè¿‡é¢„å…ˆè®¡ç®—æ‰€æœ‰çš„èŒƒå›´å’Œå¯èƒ½æ€§å¹¶å°†å…¶ç»“æœå­˜å‚¨åœ¨å“ˆå¸Œè¡¨ï¼ˆå¤‡å¿˜å½•ï¼‰ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸ¥è¯¢åŠ é€Ÿåˆ°å¸¸é‡æ—¶é—´ã€‚

ğŸ”¹ **ã€æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’ã€‘ï¼š**

å‡è®¾æˆ‘ä»¬é¢„å…ˆè®¡ç®—äº†ä»æ•°å­— 0 åˆ° k çš„ç´¯ç§¯å’Œã€‚æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªä¿¡æ¯å¾—å‡º `sum(iï¼Œj)` å—ï¼Ÿ
è®©æˆ‘ä»¬å°†è¾…åŠ©è¡¨ `sum[k]` å®šä¹‰ä¸º $nums[0\cdots k-1]$   çš„ç´¯ç§¯å’Œï¼ˆåŒ…æ‹¬è¿™ä¸¤ä¸ªå€¼ï¼‰ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20201006220436.png" style="zoom:67%;" />

<img src="https://gitee.com/veal98/images/raw/master/img/20201006222516.png" style="zoom:45%;" />

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®— `sumrange` å¦‚ä¸‹ï¼ˆçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼‰ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20201006220504.png" style="zoom:67%;" />

## âœ… å…·ä½“ä»£ç 

### â‘  æš´åŠ›è§£æ³•


```java
class NumArray {

    private int[] data;

    // æ„é€ å‡½æ•°ï¼Œæ„é€ æ•°åˆ—
    public NumArray(int[] nums) {
        data = nums;
    }
    
    public int sumRange(int i, int j) {
        int sum = 0;
        for(int k = i; k <= j; k++)
            sum += data[k];
        return sum;
    }
}
```

æ—¶é—´å¤æ‚åº¦ï¼šO(N)

ç©ºé—´å¤æ‚åº¦ï¼šO(1)

<img src="https://gitee.com/veal98/images/raw/master/img/20201006213656.png" style="zoom:67%;" />

### â‘¡ å¤‡å¿˜å½•æ³•

```java
import java.util.Map;
import java.util.HashMap;

class NumArray {
    private Map<Pair<Integer,Integer>,Integer> map = new HashMap<>();

    // æ„é€ å‡½æ•°
    public NumArray(int[] nums) {
        for(int i = 0; i < nums.length; i ++){
            int sum = 0;
            for(int j = i; j < nums.length; j ++){
                sum += nums[j];
                map.put(new Pair<Integer,Integer>(i,j), sum);
            }
        }
    }
    
    public int sumRange(int i, int j) {
        return map.get(new Pair<Integer,Integer>(i,j));
    }
}

```

**æ—¶é—´å¤æ‚åº¦**ï¼š<u>æ¯æ¬¡æŸ¥è¯¢çš„æ—¶é—´ O(1)ã€‚åœ¨æ„é€ å‡½æ•°ä¸­å®Œæˆçš„é¢„è®¡ç®—éœ€è¦ $O(n^2)$ æ—¶é—´</u>ã€‚æ¯ä¸ª sumrange æŸ¥è¯¢çš„æ—¶é—´å¤æ‚æ€§æ˜¯  å› ä¸ºå“ˆå¸Œè¡¨çš„æŸ¥æ‰¾æ“ä½œæ˜¯å¸¸é‡æ—¶é—´ã€‚

**ç©ºé—´å¤æ‚åº¦**ï¼š$O(n^2)$ ï¼Œæ‰€éœ€çš„é¢å¤–ç©ºé—´ä¸º $O(n^2)$ï¼Œå› ä¸º i å’Œ j éƒ½æœ‰ n ä¸ªå€™é€‰ç©ºé—´ã€‚

å¾ˆä¸å¹¸ï¼Œæµ‹è¯•ç»“æœè¶…å‡ºæ—¶é—´é™åˆ¶ ğŸ˜’

### â‘¢ åŠ¨æ€è§„åˆ’

```java
class NumArray {

    private int[] sum;

    // æ„é€ å‡½æ•°ï¼Œé¢„å…ˆè®¡ç®—ä¸‹æ ‡ 0 åˆ° k(0,1...n-1) çš„å’Œ
    public NumArray(int[] nums) {
        sum = new int[nums.length + 1];
        for(int i = 1; i <= nums.length; i ++)
            sum[i] += sum[i-1] + nums[i-1];
    }
    
    public int sumRange(int i, int j) {
        return sum[j+1] - sum[i];
    }
}
```

æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ’å…¥äº†ä¸€ä¸ªè™šæ‹Ÿ 0 ä½œä¸º sum æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆç»“åˆä¸Šå›¾ç†è§£ï¼‰ã€‚è¿™ä¸ªæŠ€å·§å¯ä»¥é¿å…åœ¨ `sumrange` å‡½æ•°ä¸­è¿›è¡Œé¢å¤–çš„æ¡ä»¶æ£€æŸ¥ï¼ˆ**åŠ¨æ€è§„åˆ’ç®—æ³•ä¸­ä¸€èˆ¬éƒ½ä¼šæ’å…¥ä¸€åœˆ 0 ç”¨æ¥é¿å…é¢å¤–çš„æ¡ä»¶æ£€æŸ¥**ï¼Œå…¶å®è¯´ç™½äº†å°±æ˜¯åœ¨å¼€è¾Ÿè¾…åŠ©æ•°ç»„ç©ºé—´çš„æ—¶å€™å¤šåŠ  1 ä¸ªï¼Œå¾ªç¯çš„æ—¶å€™ä¸‹æ ‡ä» 1 å¼€å§‹è®¡ç®—å³å¯ï¼‰ã€‚

**æ—¶é—´å¤æ‚åº¦**ï¼šæ¯æ¬¡æŸ¥è¯¢çš„æ—¶é—´ O(1)ï¼ŒO(N) é¢„è®¡ç®—æ—¶é—´ã€‚ç”±äºç´¯ç§¯å’Œè¢«ç¼“å­˜ï¼Œæ¯ä¸ª `sumrange` æŸ¥è¯¢éƒ½å¯ä»¥ç”¨ O(1) æ—¶é—´è®¡ç®—ã€‚

**ç©ºé—´å¤æ‚åº¦**ï¼šO(N)



<img src="https://gitee.com/veal98/images/raw/master/img/20201006221058.png" style="zoom:67%;" />


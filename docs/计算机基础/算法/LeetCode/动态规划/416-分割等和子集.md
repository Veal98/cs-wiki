# 416. åˆ†å‰²ç­‰å’Œå­é›†

---

ğŸ‘‰ [416. Partition Equal Subset Sum â€” Medium](https://leetcode-cn.com/problems/partition-equal-subset-sum/)

## ğŸ“œ é¢˜ç›®æè¿°

Given a non-empty array nums containing **only positive integers**, find if the array can be partitioned into two subsets such that the sum of elements in both subsets is equal.

Example 1:

```
Input: nums = [1,5,11,5]
Output: true
Explanation: The array can be partitioned as [1, 5, 5] and [11].
```


Example 2:

```
Input: nums = [1,2,3,5]
Output: false
Explanation: The array cannot be partitioned into equal sum subsets.
```


Constraints:

1 <= nums.length <= 200

1 <= nums[i] <= 100

## ğŸ’¡ è§£é¢˜æ€è·¯

**ã€åŠ¨æ€è§„åˆ’ã€‘**ï¼šç±»ä¼¼äº 0-1 èƒŒåŒ…é—®é¢˜ï¼šç»™ä½ ä¸€ä¸ªå¯è£…è½½é‡é‡ä¸º `W` çš„èƒŒåŒ…å’Œ `N` ä¸ªç‰©å“ï¼Œæ¯ä¸ªç‰©å“æœ‰é‡é‡å’Œä»·å€¼ä¸¤ä¸ªå±æ€§ï¼Œä¸”æ¯ä¸ªç‰©å“åªæœ‰ä¸€ä»¶ã€‚å…¶ä¸­ç¬¬ `i` ä¸ªç‰©å“çš„é‡é‡ä¸º `w[i]`ï¼Œä»·å€¼ä¸º `v[i]`ï¼Œç°åœ¨è®©ä½ ç”¨è¿™ä¸ªèƒŒåŒ…è£…ç‰©å“ï¼Œä»¥è·å¾—æœ€å¤§ä»·å€¼ï¼Œä¸”æ¯ä¸ªç‰©å“åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚

æœ¬é¢˜è¦æ±‚å°†ä¸€ä¸ªæ•°ç»„åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†çš„å’Œç›¸ç­‰ï¼Œä»¤æ•°ç»„æ‰€æœ‰æ•°çš„å’Œä¸º `sum`ï¼Œåˆ™æ¯ä¸ªéƒ¨åˆ†çš„å’Œä¸º `sum/2`ã€‚OKï¼Œå°†è¿™ä¸ªé—®é¢˜è½¬æ¢æˆ 0-1 èƒŒåŒ…é—®é¢˜ï¼šç»™ä¸€ä¸ªå¯è£…è½½æ•°å€¼ä¸º sum/2 ï¼ˆç±»æ¯”äºèƒŒåŒ…é—®é¢˜çš„å¯è£…è½½é‡é‡ï¼‰çš„èƒŒåŒ…å’Œ N ä¸ªæ•°å­—ï¼ˆç±»æ¯”äºèƒŒåŒ…é—®é¢˜çš„ N ä¸ªç‰©å“ï¼‰ï¼Œæ¯ä¸ªç‰©å“çš„æ•°å€¼ä¸º `nums[i]`ï¼ˆç±»æ¯”äºèƒŒåŒ…é—®é¢˜çš„æ¯ä¸ªç‰©å“çš„é‡é‡ï¼‰ã€‚ä¸”æ¯ä¸ªæ•°å­—åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚ç°åœ¨å¼€å§‹ç”¨è¿™ä¸ªèƒŒåŒ…è£…ç‰©å“ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤Ÿæ­£å¥½å°†èƒŒåŒ…è£…æ»¡ï¼ˆå³å­˜åœ¨ä¸€ç§åˆ’åˆ†æ–¹æ³•ï¼Œä½¿å¾—å·¦(å³)éƒ¨åˆ†çš„å’Œç­‰äº `sum/2`ï¼‰

æ˜¾ç„¶ï¼Œæœ¬é¢˜å”¯ä¸€çš„æœ€å¤§ä¸åŒç‚¹å°±åœ¨äºï¼š

- 0-1 èƒŒåŒ…é—®é¢˜é€‰å–çš„ç‰©å“çš„å®¹ç§¯æ€»é‡ **ä¸èƒ½è¶…è¿‡** è§„å®šçš„æ€»é‡ï¼›
- æœ¬é¢˜é€‰å–çš„æ•°å­—ä¹‹å’Œéœ€è¦ **æ°å¥½ç­‰äº** è§„å®šçš„å’Œçš„ä¸€åŠã€‚

æŒ‰ç…§ 0-1 èƒŒåŒ…é—®é¢˜çš„å¥—è·¯ï¼ŒçŠ¶æ€å°±æ˜¯ã€Œå­é›†ä¹‹å’Œã€å’Œã€Œå¯é€‰æ‹©çš„æ•°å­—ã€ï¼Œé€‰æ‹©å°±æ˜¯ã€ŒåŠ å…¥å­é›†ã€æˆ–è€…ã€Œä¸åŠ å…¥å­é›†ã€ã€‚å¯ä»¥ç»™å‡ºå¦‚ä¸‹å®šä¹‰ï¼š

**`dp[i][j] = true/false` è¡¨ç¤ºï¼Œå¯¹äºå‰ `i` ä¸ªæ•°å­—ï¼Œèƒ½å¦ä½¿å¾—å®ƒä»¬çš„å’Œæ°å¥½ç­‰äº `j`ã€‚**æ¯”å¦‚è¯´ï¼Œå¦‚æœ `dp[4][9] = true`ï¼Œå…¶å«ä¹‰ä¸ºï¼šå¯¹äºç»™å®šçš„é›†åˆä¸­ï¼Œè‹¥åªå¯¹å‰ 4 ä¸ªæ•°å­—è¿›è¡Œé€‰æ‹©ï¼Œå­˜åœ¨ä¸€ä¸ªå­é›†çš„å’Œå¯ä»¥æ°å¥½å‡‘å‡º 9ã€‚æ ¹æ®è¿™ä¸ªå®šä¹‰ï¼Œ**æˆ‘ä»¬æƒ³æ±‚çš„æœ€ç»ˆç­”æ¡ˆå°±æ˜¯ `dp[N][sum/2]`**ã€‚

**base case** å°±æ˜¯ `dp[..][0] = true` å’Œ `dp[0][..] = false`ï¼Œå› ä¸ºèƒŒåŒ…æ²¡æœ‰ç©ºé—´ (æ‰€éœ€è¦çš„æ•°å€¼å’Œè¾¾åˆ°äº†) çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºè£…æ»¡äº†ï¼Œè€Œå½“æ²¡æœ‰ç‰©å“ï¼ˆæ•°å­—ï¼‰å¯é€‰æ‹©çš„æ—¶å€™ï¼Œè‚¯å®šæ²¡åŠæ³•è£…æ»¡èƒŒåŒ…ã€‚

ä¸‹é¢å¼€å§‹å†™çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

- é¦–å…ˆï¼Œå¦‚æœèƒŒåŒ…å®¹é‡ä¸è¶³ï¼Œä¸èƒ½è£…å…¥ç¬¬ `i` ä¸ªç‰©å“ï¼ˆå¯¹åº” `nums `æ•°ç»„ä¸‹æ ‡ `i - 1`)ï¼Œå³ `nums[i-1] > j`ã€‚é‚£ä¹ˆæ˜¯å¦èƒ½å¤Ÿæ°å¥½è£…æ»¡èƒŒåŒ…ï¼Œå–å†³äºä¸Šä¸€ä¸ªçŠ¶æ€ `dp[i-1][j]`ï¼Œç»§æ‰¿ä¹‹å‰çš„ç»“æœã€‚å³ `dp[i][j] = dp[i-1][j]`

- å¦‚æœèƒŒåŒ…å®¹é‡è¶³å¤Ÿï¼Œå¯ä»¥è€ƒè™‘è£…å…¥ç¬¬ `i` ä¸ªç‰©å“ï¼Œå³  `nums[i-1] <= j`ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è£…å…¥å’Œä¸è£…å…¥ä¹‹é—´é€‰å–æœ€ä¼˜å€¼ï¼š

  - å¦‚æœä¸æŠŠç¬¬ `i ` ä¸ªæ•°ç®—å…¥å­é›†ï¼Œ**æˆ–è€…è¯´ä½ ä¸æŠŠè¿™ç¬¬** **`i`** **ä¸ªç‰©å“è£…å…¥èƒŒåŒ…**ï¼Œé‚£ä¹ˆæ˜¯å¦èƒ½å¤Ÿæ°å¥½è£…æ»¡èƒŒåŒ…ï¼Œå–å†³äºä¸Šä¸€ä¸ªçŠ¶æ€ `dp[i-1][j]`ï¼Œç»§æ‰¿ä¹‹å‰çš„ç»“æœã€‚å³ `dp[i][j] = dp[i-1][j]`

  - å¦‚æœæŠŠç¬¬ `i` ä¸ªæ•°ç®—å…¥å­é›†ï¼Œ**æˆ–è€…è¯´ä½ æŠŠè¿™ç¬¬** **`i`** **ä¸ªç‰©å“è£…å…¥äº†èƒŒåŒ…ä½¿å¾—é‡é‡æ°å¥½ä¸º `j`**ï¼Œé‚£å°±æ„å‘³ç€åœ¨ `[0, i - 1]` è¿™ä¸ªå­åŒºé—´å†…å¾—æ‰¾åˆ°ä¸€éƒ¨åˆ†å…ƒç´ ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œä¸º `j - nums[i-1]`ã€‚ å³ `dp[i][j] = dp[i-1][j-nums[i-1]]`ã€‚

> ğŸ’¡ æ³¨æ„ï¼Œç”±äºè®¡ç®— `dp[i]` ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆè®¡ç®— `dp[i-1]`ï¼Œæ‰€ä»¥æˆ‘ä»¬å°† `i` ä» `1` å¼€å§‹è®¡ç®—ï¼Œåœ¨è¾…åŠ©è¡¨çš„å¤–å›´åŠ ä¸€åœˆ 0 ï¼ˆä¹Ÿå°±æ˜¯è¯´ `i = 0` ä¸ä½œä¸ºè¾…åŠ©è¡¨çš„æ­£å¼è®¡ç®—ä½¿ç”¨ï¼Œ**è¾…åŠ©è¡¨çš„æœ‰æ•ˆä¸‹æ ‡ä» 1 å¼€å§‹**ï¼‰ã€‚**ä½†æ˜¯ç¬¬ `i` ä¸ªæ•°å¯¹åº”æ•°ç»„çš„ä¸‹æ ‡çš„ä¸‹æ ‡æ˜¯ `i - 1`**ã€‚ä¸è¦ææ··äº†

## âœ…  å…·ä½“ä»£ç  

### â‘  åŠ¨æ€è§„åˆ’åŸºç¡€è§£æ³•


```java
class Solution {
    public boolean canPartition(int[] nums) {
        int len = nums.length;
        int sum = 0; // æ•°ç»„å’Œ
        for(int num : nums){
            sum += num;
        }
        // å’Œä¸ºå¥‡æ•°æ—¶ï¼Œä¸å¯èƒ½åˆ’åˆ†æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„é›†åˆ
        if (sum % 2 != 0) return false;

        boolean[][] dp = new boolean[len + 1][sum/2 + 1];

        // base case 
        for(int i = 0; i <= len; i ++)
            dp[i][0] = true;
        /**
        * å¯ä¸å†™ï¼Œå› ä¸º new boolean çš„æ—¶å€™å·²ç»å…¨éƒ¨åˆå§‹åŒ–æˆ false äº†
        * for(int i = 0; i <= sum/2; i ++){
        *     dp[0][i] = false;
        * }
        **/

        for(int i = 1; i <= len; i++){
            // æ•°ç»„åªåŒ…å«æ­£æ•´æ•°ï¼Œæ‰€ä»¥ j ä¹Ÿä» 1 å¼€å§‹
            for(int j = 1; j <= sum/2; j ++){
                if(nums[i-1] > j){
                    // ç¬¬ i ä¸ªæ•°å¤§äºå‰©ä½™å’Œ jï¼Œä¸èƒ½å°†ç¬¬ i ä¸ªæ•°è£…å…¥å­é›†
                    dp[i][j] = dp[i-1][j];
                }
                else{
                    // è½¬å…¥æˆ–ä¸è£…å…¥å­é›†ï¼Œæ‹©ä¼˜
                    dp[i][j] = dp[i-1][j] || dp[i-1][j-nums[i-1]];
                }
            }
        }
        return dp[len][sum/2];
    }
}
```

<img src="https://gitee.com/veal98/images/raw/master/img/20201010215839.png" style="zoom:67%;" />

### â‘¡ çŠ¶æ€å‹ç¼©

ä»ä¸Šé¢ä»£ç ä¸­ï¼Œæ³¨æ„åˆ° **`dp[i][j]` åªéœ€è¦ä¸Šä¸€è¡Œçš„æ•°æ®  `dp[i-1][..]`** ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡ŒçŠ¶æ€å‹ç¼©ï¼Œå°†äºŒç»´ `dp` æ•°ç»„å‹ç¼©ä¸ºä¸€ç»´ä¿å­˜ä¸Šä¸€æ¬¡è®¡ç®—çš„ç»“æœï¼ˆå»é™¤ç¬¬ä¸€ç»´å³ `dp[i]` çš„é‚£ä¸€ç»´ï¼‰ï¼ŒèŠ‚çº¦ç©ºé—´å¤æ‚åº¦ã€‚å¹¶ä¸”ç”±åˆ¤æ–­æ¡ä»¶å¯çŸ¥åªæœ‰åœ¨ `nums[i-1] <= j` æ—¶ï¼Œæ‰ä¼šè€ƒè™‘æ˜¯å¦å°†è¯¥æ•°å­—åŠ å…¥å­é›†ã€‚ğŸ’¡ æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ä¸€ä¸‹åˆ¤æ–­æ¡ä»¶ï¼Œ**å°† `j`  ä» `sum/2` å¼€å§‹ä¾æ¬¡é€’å‡ï¼Œç±»ä¼¼äºé€’å½’çš„æ–¹å¼ï¼Œè¿™æ ·å°±å¯ä»¥ä¿å­˜ä¸Šä¸€æ¬¡è®¡ç®—çš„ç»“æœï¼ˆå­ç»“æœï¼‰**ï¼š

```java
class Solution {
    public boolean canPartition(int[] nums) {
        int len = nums.length;
        int sum = 0; // æ•°ç»„å’Œ
        for(int num : nums){
            sum += num;
        }
        // å’Œä¸ºå¥‡æ•°æ—¶ï¼Œä¸å¯èƒ½åˆ’åˆ†æˆä¸¤ä¸ªå’Œç›¸ç­‰çš„é›†åˆ
        if (sum % 2 != 0) return false;

        boolean[] dp = new boolean[sum/2 + 1];

        // base case 
        dp[0] = true;

        for(int i = 1; i <= len; i ++){
            for(int j = sum/2; nums[i-1] <= j; j --){
                dp[j] = dp[j] || dp[j-nums[i-1]];
            }
        }
        
        return dp[sum/2];
    }
}
```

<img src="https://gitee.com/veal98/images/raw/master/img/20201010220438.png" style="zoom:67%;" />
# 53. æœ€å¤§è¿ç»­å­åºåˆ—å’Œ

---

ğŸ‘‰ [53. Maximum Subarray â€” Easy](https://leetcode-cn.com/problems/maximum-subarray/)

## ğŸ“œ é¢˜ç›®æè¿° 

Given an integer array nums, find the **contiguous (ç›¸é‚»çš„) subarray (containing at least one number) which has the largest sum** and return its sum.

Follow up: If you have figured out the O(n) solution, try coding another solution using the **divide and conquer** approach, which is more subtle

**Example 1**:

```
  Input: nums = [-2,1,-3,4,-1,2,1,-5,4]
  Output: 6
  Explanation: [4,-1,2,1] has the largest sum = 6.
```

  **Example 2**:

```
  Input: nums = [1]
  Output: 1
```

  **Example 3**:

```
  Input: nums = [0]
  Output: 0
```

  **Example 4**:

```
  Input: nums = [-1]
  Output: -1
```

  **Constraints**:

```
  1 <= nums.length <= 2 * 104
  -231 <= nums[i] <= 231 - 1
```

## ğŸ’¡ è§£é¢˜æ€è·¯

æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ“ä½œ `get(a, l, r)` è¡¨ç¤ºæŸ¥è¯¢ a åºåˆ— `[l, r`] åŒºé—´å†…çš„æœ€å¤§å­æ®µå’Œï¼Œé‚£ä¹ˆæœ€ç»ˆæˆ‘ä»¬è¦æ±‚çš„ç­”æ¡ˆå°±æ˜¯ `get(nums, 0, nums.size() - 1)`ã€‚å¦‚ä½•åˆ†æ²»å®ç°è¿™ä¸ªæ“ä½œå‘¢ï¼Ÿå¯¹äºä¸€ä¸ªåŒºé—´ `[l, r]`ï¼Œæˆ‘ä»¬å– $m = \lfloor \frac{l + r}{2} \rfloor$
	
å¯¹åŒºé—´ `[l, m]` å’Œ `[m + 1, r]` åˆ†æ²»æ±‚è§£ã€‚å½“é€’å½’é€å±‚æ·±å…¥ç›´åˆ°åŒºé—´é•¿åº¦ç¼©å°ä¸º 1 çš„æ—¶å€™ï¼Œé€’å½’ã€Œå¼€å§‹å›å‡ã€å³è¿›è¡Œåˆå¹¶æ“ä½œã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è€ƒè™‘å¦‚ä½•é€šè¿‡ `[l, m]`  åŒºé—´çš„ä¿¡æ¯å’Œ `[m + 1, r]`  åŒºé—´çš„ä¿¡æ¯åˆå¹¶æˆåŒºé—´ `[l, r]` çš„ä¿¡æ¯ã€‚æœ€å…³é”®çš„ä¸¤ä¸ªé—®é¢˜æ˜¯ï¼š

- æˆ‘ä»¬è¦ç»´æŠ¤åŒºé—´çš„å“ªäº›ä¿¡æ¯å‘¢ï¼Ÿ

- æˆ‘ä»¬å¦‚ä½•åˆå¹¶è¿™äº›ä¿¡æ¯å‘¢ï¼Ÿ

å¯¹äºä¸€ä¸ªåŒºé—´ `[l, r]`ï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤å››ä¸ªé‡ï¼š

- `lSum` è¡¨ç¤º `[l, r]`å†…ä»¥ l ä¸ºå·¦ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œ
- `rSum `è¡¨ç¤º `[l, r]` å†…ä»¥ r ä¸ºå³ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œ
- `mSum `è¡¨ç¤º `[l, r]` å†…çš„æœ€å¤§å­æ®µå’Œ
- `iSum `è¡¨ç¤º `[l, r]` çš„åŒºé—´å’Œ

ä¸¾ä¸ªä¾‹å­ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200917154358.png" style="zoom:67%;" />

ä»¥ä¸‹ç®€ç§° `[l, m]` ä¸º `[l, r]` çš„ã€Œå·¦å­åŒºé—´ã€ï¼Œ`[m + 1, r]` ä¸º `[l, r]` çš„ã€Œå³å­åŒºé—´ã€ã€‚

- å¯¹äºé•¿åº¦ä¸º 1 çš„åŒºé—´` [i, i]`ï¼Œå››ä¸ªé‡çš„å€¼éƒ½å’Œ $a_i$ ç›¸ç­‰ã€‚

- å¯¹äºé•¿åº¦å¤§äº 1 çš„åŒºé—´ï¼š

- é¦–å…ˆæœ€å¥½ç»´æŠ¤çš„æ˜¯ `iSum`ï¼ŒåŒºé—´ `[l, r]` çš„ `iSum `å°±ç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ `iSum `åŠ ä¸Šã€Œå³å­åŒºé—´ã€çš„ `iSum`ã€‚

  <u>å¯¹äº` [l, r]` çš„ `lSum`ï¼Œå­˜åœ¨ä¸¤ç§å¯èƒ½ï¼Œå®ƒè¦ä¹ˆç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ `lSum`ï¼Œè¦ä¹ˆç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ iSum åŠ ä¸Šã€Œå³å­åŒºé—´ã€çš„ `lSum`ï¼ŒäºŒè€…å–å¤§ã€‚</u>

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917154629.png" style="zoom:67%;" />

  <u>å¯¹äº ` [l, r]`  çš„ `rSum`ï¼ŒåŒç†ï¼Œå®ƒè¦ä¹ˆç­‰äºã€Œå³å­åŒºé—´ã€çš„ `rSum`ï¼Œè¦ä¹ˆç­‰äºã€Œå³å­åŒºé—´ã€çš„ iSum åŠ ä¸Šã€Œå·¦å­åŒºé—´ã€çš„ `rSum`ï¼ŒäºŒè€…å–å¤§ã€‚</u>

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917154706.png" style="zoom:67%;" />



å½“è®¡ç®—å¥½ä¸Šé¢çš„ä¸‰ä¸ªé‡ä¹‹åï¼Œå°±å¾ˆå¥½è®¡ç®— ` [l, r]`  çš„ mSum äº†ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘ ` [l, r]`  çš„ mSum å¯¹åº”çš„åŒºé—´æ˜¯å¦è·¨è¶Š mï¼š

- å®ƒå¯èƒ½ä¸è·¨è¶Š mï¼Œä¹Ÿå°±æ˜¯è¯´ ` [l, r]`  çš„ `mSum `å¯èƒ½æ˜¯ã€Œå·¦å­åŒºé—´ã€çš„ `mSum `å’Œ ã€Œå³å­åŒºé—´ã€çš„ `mSum `ä¸­çš„ä¸€ä¸ªï¼›

- å®ƒä¹Ÿå¯èƒ½è·¨è¶Š mï¼Œå¯èƒ½æ˜¯ã€Œå·¦å­åŒºé—´ã€çš„ `rSum `å’Œ ã€Œå³å­åŒºé—´ã€çš„ `lSum `æ±‚å’Œã€‚ä¸‰è€…å–å¤§ã€‚

  <img src="https://gitee.com/veal98/images/raw/master/img/20200917155138.png" style="zoom:67%;" />



## âœ… å…·ä½“ä»£ç 

```java
class Solution {

    // åŒºé—´çŠ¶æ€ï¼ˆå››ä¸ªå€¼)
    public class Status {
        public int lSum, rSum, mSum, iSum;

        public Status(int lSum, int rSum, int mSum, int iSum) {
            this.lSum = lSum;
            this.rSum = rSum;
            this.mSum = mSum;
            this.iSum = iSum;
        }
    }   

    // åˆ†æ²»é€’å½’è·å–å„ä¸ªå­åŒºé—´çš„çŠ¶æ€ï¼ˆå››ä¸ªå€¼ï¼‰
    public Status getInfo(int[] a, int l, int r){
        if(l == r){ // é€’å½’å‡ºå£
            return new Status(a[l], a[l], a[l], a[l]);
        }
        int m = (l + r) >> 1; // ä½è¿ç®—æ¯” ï¼ˆl+r)/2 é€Ÿåº¦å¿«
        Status lSub = getInfo(a, l, m);
        Status rSub = getInfo(a, m + 1, r);
        return pushUp(lSub, rSub); // æ ¹æ®å·¦å³å­åŒºé—´çš„çŠ¶æ€è·å–æ•´ä¸ªåŒºé—´çš„çŠ¶æ€
    }

    // è·å–æ•´ä¸ªåŒºé—´çš„çŠ¶æ€ï¼ˆå››ä¸ªå€¼ï¼‰
    public Status pushUp(Status l, Status r){
        int iSum = l.iSum + r.iSum;
        int lSum = Math.max(l.lSum, l.iSum + r.lSum);
        int rSum = Math.max(r.rSum, r.iSum + l.rSum);
        // è·å–æœ€å¤§è¿ç»­å­åºåˆ—å’Œï¼ˆä¸‰ç§æƒ…å†µä¸­çš„æœ€å¤§å€¼ï¼‰
        int mSum = Math.max(Math.max(l.mSum, r.mSum), l.rSum + r.lSum);
        return new Status(lSum, rSum, mSum, iSum);
    }

    public int maxSubArray(int[] nums) {
        return getInfo(nums, 0, nums.length - 1).mSum;
    }
}
```

## ğŸ†š å¤æ‚åº¦åˆ†æ

å‡è®¾åºåˆ— a çš„é•¿åº¦ä¸º nã€‚

**æ—¶é—´å¤æ‚åº¦**ï¼š$O(n)$

å‡è®¾æˆ‘ä»¬<u>æŠŠé€’å½’çš„è¿‡ç¨‹çœ‹ä½œæ˜¯ä¸€é¢—äºŒå‰æ ‘çš„å…ˆåºéå†</u>ï¼Œé‚£ä¹ˆè¿™é¢—äºŒå‰æ ‘çš„æ·±åº¦çš„æ¸è¿›ä¸Šç•Œä¸º $O(logn)$ï¼Œè¿™é‡Œçš„æ€»æ—¶é—´ç›¸å½“äºéå†è¿™é¢—äºŒå‰æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ•…æ€»æ—¶é—´çš„æ¸è¿›ä¸Šç•Œæ˜¯ $O(\sum_{i = 1}^{\log n} 2^{i - 1}) = O(n)$ï¼Œæ•…æ¸è¿›æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚

**ç©ºé—´å¤æ‚åº¦**ï¼š$O(logn)$

é€’å½’ä¼šä½¿ç”¨ O(logn) çš„æ ˆç©ºé—´ï¼Œæ•…æ¸è¿›ç©ºé—´å¤æ‚åº¦ä¸º O(logn)ã€‚
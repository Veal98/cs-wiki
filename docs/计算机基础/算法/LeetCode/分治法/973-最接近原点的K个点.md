# 973. æœ€æ¥è¿‘åŸç‚¹çš„ K ä¸ªç‚¹

---

ğŸ‘‰ [932. Beautiful Array â€” Medium](https://leetcode-cn.com/problems/beautiful-array/)

## ğŸ“œ é¢˜ç›®æè¿°

We have a list of points on the plane.  **Find the K closest points to the origin (0, 0)**.

(Here, the distance between two points on a plane is the Euclidean distance.)

You may return the answer in any order.  The answer is guaranteed to be unique (except for the order that it is in.)

**Example 1**:

```
Input: points = [[1,3],[-2,2]], K = 1
Output: [[-2,2]]
```

**Explanation**: 

The distance between (1, 3) and the origin is sqrt(10).

The distance between (-2, 2) and the origin is sqrt(8).

Since sqrt(8) < sqrt(10), (-2, 2) is closer to the origin.

We only want the closest K = 1 points from the origin, so the answer is just [[-2,2]].

**Example 2**:

```
Input: points = [[3,3],[5,-1],[-2,4]], K = 2
Output: [[3,3],[-2,4]]
(The answer [[-2,4],[3,3]] would also be accepted.)
```

**Note**:

1 <= K <= points.length <= 10000

-10000 < `points[i][0]` < 10000

-10000 < `points[i][1]` < 10000



## ğŸ’¡ è§£é¢˜æ€è·¯

â‘  é¦–å…ˆæƒ³åˆ°çš„è‡ªç„¶æ˜¯**æš´åŠ›è§£æ³•**ï¼Œéå†ä¸€éæ•°ç»„è®¡ç®—å‡ºå„ä¸ªç‚¹è·ç¦»åŸç‚¹çš„è·ç¦»ï¼Œæ’åºæ‰¾åˆ°ç¬¬ K å¤§çš„è·ç¦»ï¼Œç„¶åå†éå†ä¸€éæ•°ç»„è¿”å›è·ç¦»å°äºç­‰äºè¿™ä¸ªç¬¬ K å¤§è·ç¦»çš„ K ä¸ªç‚¹ã€‚è¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚æ˜¯ O(NlogN)ï¼Œå…¶ä¸­ N æ˜¯ç»™å®šç‚¹çš„æ•°é‡ã€‚

æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªå¤æ‚åº¦æ¯” NlogN æ›´ä½çš„ç®—æ³•ã€‚ æ˜¾ç„¶ï¼Œåšåˆ°è¿™ä»¶äº‹æƒ…çš„å”¯ä¸€åŠæ³•å°±æ˜¯åˆ©ç”¨é¢˜ç›®ä¸­å¯ä»¥æŒ‰ç…§ä»»ä½•é¡ºåºè¿”å› K ä¸ªç‚¹çš„æ¡ä»¶ï¼Œå¦åˆ™çš„è¯ï¼Œå¿…è¦çš„æ’åºå°†ä¼šèŠ±è´¹æˆ‘ä»¬ NlogN çš„æ—¶é—´ã€‚

â‘¡ <u>åˆ©ç”¨**åˆ†æ²»æ³•**ï¼šæˆ‘ä»¬éšæœºåœ°é€‰æ‹©ä¸€ä¸ªå…ƒç´  x = A[i]ï¼Œåˆ©ç”¨å¿«é€Ÿæ’åºçš„ `partition`ï¼ˆåˆ‡åˆ†ï¼‰ æ“ä½œå°†æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š ä¸€éƒ¨åˆ†æ˜¯åˆ°åŸç‚¹è·ç¦»å°äº x çš„ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯åˆ°åŸç‚¹è·ç¦»å¤§äºç­‰äº x çš„ã€‚ ï¼ˆåŒç¬¬ 215 é¢˜ï¼Œæ³¨æ„**éšæœºåˆå§‹åŒ–**ï¼‰</u>

ğŸ’¬ è¿™æ ·ï¼Œå‡è®¾å·¦è¾¹éƒ¨åˆ†æœ‰ 10 ä¸ªå…ƒç´ ï¼Œå³è¾¹éƒ¨åˆ†æœ‰15 ä¸ªå…ƒç´ ï¼š

- å¦‚æœ K = 5 ï¼Œæˆ‘ä»¬åªéœ€è¦é€‰æ‹©å·¦è¾¹éƒ¨åˆ†çš„å‰ 5 ä¸ªæœ€å°è·ç¦»ç‚¹å°± OKã€‚
- å¦‚æœ K = 17ï¼Œé‚£ä¹ˆå·¦è¾¹éƒ¨åˆ†çš„ 10 ä¸ªå…ƒç´ åº”è¯¥éƒ½éœ€è¦è¢«é€‰æ‹©ï¼Œæˆ‘ä»¬åªéœ€è¦é€‰æ‹©å³è¾¹éƒ¨åˆ†çš„å‰ 7 ä¸ªæœ€å°è·ç¦»ç‚¹å°±è¡Œäº†ã€‚

## âœ… å…·ä½“ä»£ç 

### â‘  æš´åŠ›è§£æ³•

```java
// æš´åŠ›è§£æ³• â€” æ’åº
class Solution {
    public int[][] kClosest(int[][] points, int K) {
        int N = points.length;
        int[] dists = new int[N]; // å­˜å‚¨å„ä¸ªç‚¹è·ç¦»åŸç‚¹çš„è·ç¦»
        for(int i = 0; i < N; i ++){
            dists[i] = dist(points[i]); 
        }

        Arrays.sort(dists); // æ•°ç»„æ’åº

        int distK = dists[K - 1]; // ç¬¬ K å¤§è·ç¦»

        int[][] ans = new int[K][2]; // å­˜å‚¨æœ€ç»ˆ K ä¸ªç‚¹
        int t = 0;
        // éå†æ•°ç»„ï¼Œè¿”å›è·ç¦»å°äºç­‰äºç¬¬ K å¤§è·ç¦»çš„ K ä¸ªç‚¹
        for(int i = 0; i < N; i ++){
            if(dist(points[i]) <= distK){
                ans[t] = points[i];
                t ++;
            }
        }
        return ans;
    }

    private int dist(int[] point){
        return point[0] * point[0] + point[1] * point[1];
    }
}
```

æ¶‰åŠåˆ° Java çš„å¤šç»´æ•°ç»„ï¼Œè¯»è€…å¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™å¼ å›¾ç†è§£ä¸€ä¸‹ ğŸ‘‡

**Java å®é™…ä¸Šæ²¡æœ‰å¤šç»´æ•°ç»„ï¼Œåªæœ‰ä¸€ç»´æ•°ç»„**ã€‚å¤šç»´æ•°ç»„è¢«è§£é‡Šä¸ºâ€œ **æ•°ç»„çš„æ•°ç»„**â€ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200617153937.png" style="zoom: 67%;" />

### â‘¡ åˆ†æ²»æ³•

æ¥ä¸‹æ¥**åˆ†æ²»æ³•**ï¼Œç¨å¾®åšä¸€äº›è§£é‡Šï¼š

æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•° `work(points[][], i, j, K)`ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯éƒ¨åˆ†æ’åº (points[i], points[i+1], ..., points[j]) ä½¿å¾—æœ€å°çš„ K ä¸ªå…ƒç´ å‡ºç°åœ¨æ•°ç»„çš„é¦–éƒ¨ï¼Œä¹Ÿå°±æ˜¯ (i, i+1, ..., i+K-1)ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬ä»æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªéšæœºçš„å…ƒç´ ä½œä¸ºå…³é”®å…ƒç´ ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªå…ƒç´ å°†æ•°ç»„åˆ†ä¸ºä¸Šè¿°çš„ä¸¤éƒ¨åˆ†ã€‚ä¸ºäº†èƒ½ä½¿ç”¨çº¿æ€§æ—¶é—´çš„å®Œæˆè¿™ä»¶äº‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæŒ‡é’ˆ i ä¸ j ç”¨äºäº¤æ¢å…ƒç´ ã€‚

ç„¶åï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸¤ä¸ªéƒ¨åˆ† `[oi, i]` ä¸ `[i+1, oj]`ï¼Œå…¶ä¸­ (oi, oj) æ˜¯åŸæ¥è°ƒç”¨` work(i, j, K) `æ—¶å€™ (i, j) çš„å€¼ã€‚å‡è®¾ç¬¬ä¸€éƒ¨åˆ†æœ‰ 10 ä¸ªå…ƒç´ ï¼Œç¬¬äºŒéƒ¨åˆ†æœ‰15 ä¸ªå…ƒç´ ã€‚å¦‚æœ K = 5 çš„è¯ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹ç¬¬ä¸€éƒ¨åˆ†è°ƒç”¨ `work(oi, i, 5)`ã€‚å‡å¦‚ K = 17ï¼Œé‚£ä¹ˆç¬¬ä¸€éƒ¨åˆ†çš„ 10 ä¸ªå…ƒç´ åº”è¯¥éƒ½éœ€è¦è¢«é€‰æ‹©ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹ç¬¬äºŒéƒ¨åˆ†è°ƒç”¨ `work(i+1, oj, 7)` å°±è¡Œäº†ã€‚

```java
// åˆ†æ²»æ³•
import java.util.concurrent.ThreadLocalRandom;

class Solution {

    int[][] points;

    public int[][] kClosest(int[][] points, int K) {
        this.points = points;
        work(0, points.length - 1, K);
        return Arrays.copyOfRange(points, 0, K);
    }

    // å¯¹ points[i]~points[j] ä¹‹é—´çš„æ•°è¿›è¡Œæ’åºï¼Œä½¿å¾—ä½¿å¾—æœ€å°çš„ K ä¸ªå…ƒç´ å‡ºç°åœ¨æ•°ç»„çš„é¦–éƒ¨
    public void work(int i, int j, int K){
        if(i >= j)
            return;
        int oi = i;
        int oj = j;
        int pivot = dist(ThreadLocalRandom.current().nextInt(i, j)); // åœ¨æ•°ç»„ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªè·ç¦»
        // å¿«é€Ÿæ’åºçš„åˆ‡åˆ†æ“ä½œ
        while(i < j){
            // è·³å‡ºå¾ªç¯ï¼Œä¸ç„¶é‡åˆ° dist[i] dist[j] éƒ½ç­‰äº pivot æ—¶ä¼šå¯¼è‡´æ— é™å¾ªç¯
            if(dist(i) == pivot && dist(j) == pivot)
                break;
            while(i < j && dist(i) < pivot)
                i ++;
            while(i < j && dist(j) > pivot)
                j --;
            swap(i, j); // äº¤æ¢å…ƒç´ 
        }

        if(K <= (i - oi + 1))
            work(oi, i, K);
        else
            work(i + 1, oj, K - (i - oi + 1));
    }

    private int dist(int i) {
        return points[i][0] * points[i][0] + points[i][1] * points[i][1];
    }

    private void swap(int i, int j){
        int t0 = points[i][0];
        int t1 = points[i][1];
        points[i][0] = points[j][0];
        points[i][1] = points[j][1];
        points[j][0] = t0;
        points[j][1] = t1;
    }

}
```

æ—¶é—´å¤æ‚åº¦é™åˆ°äº† O(N)
# ğŸ¤ 35 - æ•°ç»„ä¸­çš„é€†åºå¯¹

---

### é¢˜ç›®æè¿°

åœ¨æ•°ç»„ä¸­çš„ä¸¤ä¸ªæ•°å­—ï¼Œå¦‚æœå‰é¢ä¸€ä¸ªæ•°å­—å¤§äºåé¢çš„æ•°å­—ï¼Œåˆ™è¿™ä¸¤ä¸ªæ•°å­—ç»„æˆä¸€ä¸ªé€†åºå¯¹ã€‚è¾“å…¥ä¸€ä¸ªæ•°ç»„,æ±‚å‡ºè¿™ä¸ªæ•°ç»„ä¸­çš„é€†åºå¯¹çš„æ€»æ•°Pã€‚å¹¶å°†På¯¹1000000007å–æ¨¡çš„ç»“æœè¾“å‡ºã€‚ å³è¾“å‡ºP%1000000007

**è¾“å…¥æè¿°:**

```
é¢˜ç›®ä¿è¯è¾“å…¥çš„æ•°ç»„ä¸­æ²¡æœ‰çš„ç›¸åŒçš„æ•°å­—
æ•°æ®èŒƒå›´ï¼š	
å¯¹äº%50çš„æ•°æ®,size<=10^4	
å¯¹äº%75çš„æ•°æ®,size<=10^5	
å¯¹äº%100çš„æ•°æ®,size<=2*10^5
```

**ç¤ºä¾‹1**

è¾“å…¥

```
1,2,3,4,5,6,7,0
```

è¾“å‡º

```
7
é€†åºå¯¹ï¼š(1,0) (2,0) (3,0) (4,0) (5,0) (6,0) (7,0)
```

### è§£é¢˜æ€è·¯

è®¡ç®—é€†åºå¯¹çš„æ€»æ•°å…¶å®å°±æ˜¯è®¡ç®—äº¤æ¢çš„æ¬¡æ•°ã€‚é€†åºæ˜¯è¯´a[i] > a[j]ï¼Œi < jã€‚é‚£ä¹ˆåœ¨æ’åºçš„è¿‡ç¨‹ä¸­ï¼Œä¼šæŠŠ a[i] å’Œ a[j] äº¤æ¢è¿‡æ¥ï¼Œè¿™ä¸ªäº¤æ¢çš„è¿‡ç¨‹ï¼Œæ¯äº¤æ¢ä¸€æ¬¡ï¼Œå°±æ˜¯ä¸€ä¸ªé€†åºå¯¹çš„â€œæ­£åºâ€è¿‡ç¨‹ã€‚

ä¹Ÿå°±æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ’åºç®—æ³•ï¼Œæ¯å‘ç”Ÿä¸€æ¬¡äº¤æ¢ï¼Œé€†åºå¯¹çš„æ€»æ•°å°± +1ã€‚

æ­¤å¤„æˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨å†’æ³¡æ’åºï¼ˆC++ï¼‰å’Œå½’å¹¶æ’åºï¼ˆJavaï¼‰æ¥å®ç°ä¸€ä¸‹

<br>

### å…·ä½“ä»£ç 

- âŒ **C++**

  å®é™…ä¸Šå†’æ³¡æ’åºçš„åœ¨é‡åˆ°æ•°ç»„å‡ ä¹æ— åºçš„æƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦é«˜è¾¾O(n^2)ï¼Œæ‰€ä»¥å¹¶ä¸å¯å–

  ![](https://gitee.com/veal98/images/raw/master/img/20200419203554.png)

```cpp
// ä½¿ç”¨å†’æ³¡æ’åºå®ç°
class Solution {
public:
    int InversePairs(vector<int> data) {
        if(data.size() <= 0)
            return -1;
        return BubbleSort(data);
    }
    
    int BubbleSort(vector<int> data){
        int count = 0; //è®¡ç®—å¾ªç¯æ¬¡æ•°
        for(int i = 0; i < data.size()-1; i ++){
            bool flag = false; //æœ¬æ¬¡å¾ªç¯æ˜¯å¦å‘ç”Ÿäº¤æ¢
            for(int j = 0; j < data.size()-i-1; j ++){
                if(data[j] > data[j+1]){
                    int temp = data[j+1];
                    data[j+1] = data[j];
                    data[j] = temp;
                    flag = true;
                    count = (count + 1) % 1000000007;
                }
            }
            if(flag == false)
                break;
        }
        return count;
    }
};
```

- âœ… **Java**

```java
// ä½¿ç”¨å½’å¹¶æ’åºå®ç°
public class Solution {
    private int count;
    public int InversePairs(int [] array) {
        MergeSort(array, 0, array.length-1);
        return count;
    }
    public void MergeSort(int [] array, int start, int end){
        if(start >= end)
            return;
        int mid = (start + end) / 2;
        MergeSort(array, start, mid); //å½’å¹¶å·¦åŠè¾¹
        MergeSort(array, mid+1, end); //å½’å¹¶å³åŠè¾¹
        MergeOne(array, start, mid, end); //å½’å¹¶å·¦å³ä¸¤è¾¹
        
    }
    // åˆå¹¶ä¸‹æ ‡ä» start-mid å’Œä¸‹æ ‡ä» mid+1 - end çš„ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„
    public void MergeOne(int [] array, int start, int mid, int end){
        int [] result = new int[end-start+1]; // æœ€ç»ˆæœ‰åºæ•°ç»„
        int k = 0; // resultæ•°ç»„çš„ä¸‹æ ‡
        int i = start; //å·¦åŠè¾¹æ•°ç»„çš„ä¸‹æ ‡
        int j = mid + 1; //å³åŠè¾¹æ•°ç»„çš„ä¸‹æ ‡
        while(i <= mid && j <= end){
            // å¦‚æœå‰é¢çš„å…ƒç´  < åé¢çš„å…ƒç´ ï¼Œä¸æ„æˆé€†åºå¯¹
            if(array[i] <= array[j])
                result[k++] = array[i++];
             // å¦‚æœå‰é¢çš„å…ƒç´ A > åé¢çš„å…ƒç´ Bï¼Œé‚£ä¹ˆå…ƒç´ Aä¹‹åçš„å…ƒç´ éƒ½å’Œå…ƒç´ Bæ„æˆé€†åºå¯¹ï¼Œ
             // å› ä¸ºå·¦å³åŠè¾¹æœ¬èº«å°±æ˜¯å·²ç»æ’å¥½åºçš„æ•°ç»„
            else{
                result[k++] = array[j++];
                count = (count + (mid - i + 1)) % 1000000007;
            }
        }
        // å¦‚æœå·¦è¾¹æ•°ç»„è¾ƒé•¿
        while(i <= mid)
            result[k++] = array[i++];
        // å¦‚æœå³è¾¹æ•°ç»„è¾ƒé•¿
        while(j <= end)
            result[k++] = array[j++];
        
        //å°†ç»“æœæ•°ç»„èµ‹ç»™åŸæ¥çš„ä¹±åºæ•°ç»„
        for(int p = 0; p < k; p++)
            array[start+p] = result[p];
    }
}
```


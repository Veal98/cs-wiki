
# ä¸€ã€é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„åŸºæœ¬ç‰¹ç‚¹

<img src="https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153038205-fca6cc67-00ed-459f-b2f4-269275510718.png#align=left&amp;display=inline&amp;height=669&amp;originHeight=669&amp;originWidth=747&amp;size=0&amp;status=done&amp;style=none&amp;width=747" style="zoom: 80%;" /><br />


# äºŒã€ç±»æˆå‘˜çš„è®¿é—®æ§åˆ¶

## public

ç±»å¤–(main()å‡½æ•°)ä¸èƒ½è®¿é—® private å’Œ protected ç±»å‹ï¼Œåªèƒ½è®¿é—®å£°æ˜ public çš„å¯¹å¤–æ¥å£

## private

ç±»å¼€å¤´è‹¥ä¸åŠ è®¿é—®æƒé™ï¼Œåˆ™é»˜è®¤ä¸ºprivateç±»å‹

- å¯è¢«åŸºç±»çš„æˆå‘˜å‡½æ•°è®¿é—®
- å¯è¢«åŸºç±»çš„å‹å…ƒå‡½æ•°è®¿é—®

## protected


- å¯è¢«åŸºç±»çš„æˆå‘˜å‡½æ•°è®¿é—®
- å¯è¢«åŸºç±»çš„å‹å…ƒå‡½æ•°è®¿é—®
- æ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°å¯ä»¥è®¿é—® **å½“å‰å¯¹è±¡** åŸºç±»çš„protectedæˆå‘˜


ä¸¾ä¾‹å¦‚ä¸‹ï¼š

```c++
class A{
    public: int c;
    private: int b;
    protected: int a;
};
class B: public A{
    void func(){
        c = 1; //right
        b = 1; //wrong
        a = 1; //right
        B f;
        f.a = 1 //wrong fæ˜¯æ–°æ„é€ çš„å¯¹è±¡ï¼Œä¸æ˜¯func()é¢å‘çš„å½“å‰å¯¹è±¡
    }
}
int main(){
    B boo;
    A aoo;
    
    aoo.b = 1 ; //worng
    aoo.a = 1; //wrong
    boo.b = 1; //wrong
    boo.a = 1; //wrong
    aoo.c = 1; //right
    boo.c = 1; //right
    return 0;
}
```


<a name="2a118a6c"></a>
# ä¸‰ã€æ„é€ å‡½æ•°/ææ„å‡½æ•°/å¤åˆ¶æ„é€ å‡½æ•°

## 1. æ„é€ å‡½æ•°ï¼š

<br />æ„é€ å‡½æ•°çš„ä½œç”¨ï¼šåœ¨å¯¹è±¡è¢«åˆ›å»ºæ—¶ä½¿ç”¨ç‰¹å®šçš„å€¼æ„é€ å¯¹è±¡ï¼Œå°†å¯¹è±¡åˆå§‹åŒ–ä¸ºä¸€ä¸ªç‰¹å®šçš„åˆå§‹çŠ¶æ€ã€‚<br /><img src="https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153038404-0a6e8b3d-9918-4b3e-bce6-e10cc3112dcb.png#align=left&amp;display=inline&amp;height=478&amp;originHeight=478&amp;originWidth=666&amp;size=0&amp;status=done&amp;style=none&amp;width=666" style="zoom:80%;" /><br />

```c++
class Complex{
    public:
        Complex(double r, double i = 0);
};
Complex c1; //é”™è¯¯ï¼Œç¼ºä¹ä¸å¸¦å‚æ•°çš„æ„é€ å‡½æ•°
//è‹¥Complex(double r = 0, double i = 0);åˆ™å¯ä»¥æ‰§è¡Œï¼Œå³ç¼ºçœå‡½æ•°
Complex(2,1); //right
```

<br />**å¯ä»¥æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼ˆå‚æ•°ç±»å‹/ä¸ªæ•°ä¸åŒ),ä½†åªèƒ½æœ‰ä¸€ä¸ªææ„å‡½æ•°**ï¼ˆå¯æŠŠdeleteè¯­å¥æ”¾åœ¨ææ„å‡½æ•°ä¸­ï¼Œå…ˆè¢«æ„é€ çš„å¯¹è±¡æœ€åè¢«ææ„æ‰ï¼‰ã€‚<br />

```c++
Test *pArray[3] = {new Test(4), new Test(1,2)};
//new Test()è¿”å› Test* ç±»å‹ï¼Œå³ç”¨åœ°å€åˆå§‹åŒ–æŒ‡é’ˆæ•°ç»„ï¼›
//åªç”Ÿæˆä¸¤ä¸ªå¯¹è±¡ï¼Œè°ƒç”¨ä¸¤ä¸ªæ„é€ å‡½æ•°
//è‹¥æ— new,åˆ™ä¸ä¼šè°ƒç”¨ç›¸åº”çš„æ„é€ å‡½æ•°ï¼ŒæŒ‡é’ˆä¸ä¼šå¼•å‘å¯¹è±¡ç”Ÿæˆ
```



ğŸš© **æ³¨ ï¼š æ„é€ å‡½æ•° ä¸èƒ½è¢«æ´¾ç”Ÿç±»ç»§æ‰¿**



## 2. ææ„å‡½æ•°:

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153038329-4f84160c-7d47-4bed-8499-f37c90b4c5d0.png#align=left&display=inline&height=118&originHeight=118&originWidth=668&size=0&status=done&style=none&width=668)<br />


### ææ„å‡½æ•°å’Œæ„é€ å‡½æ•°çš„è°ƒç”¨é¡ºåº

<br />éµå¾ªåŸåˆ™ï¼šå…ˆè¢«æ„é€ çš„å‡½æ•°åè¢«ææ„æ‰<br />

```c++
class Demo
{
    int id;
public:
    Demo(int i)
    {
        id = i;
        cout << "id=" << id << " Constructor" << endl;
    }
    ~Demo()
    {
        cout << "id=" << id << " Destructor" << endl;
    }
};

Demo d1(1); //ç‡å…ˆåˆ›å»º

void Func()
{
    static Demo d2(2);
    Demo d3(3);
    cout << "Func" << endl;
}
int main()
{
    Demo d4(4);
    d4 = 6; //6è¢«è‡ªåŠ¨è½¬æ¢æˆä¸€ä¸ªDemoçš„*ä¸´æ—¶å¯¹è±¡*ï¼ŒåŒæ—¶è°ƒç”¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°
    cout << "main" << endl;
    {
        Demo d5(5);
    } //ä½œç”¨åŸŸ
    Func();
    cout << "main ends" << endl;
    return 0;
}
```

<br />è¿è¡Œç»“æœï¼š<br />

> id=1 Constructor
> id=4 Constructor
> id=6 Constructor
> id=6 Destructor //d4 = 6ä¸´æ—¶å¯¹è±¡çš„æ¶ˆäº¡
> main
> id=5 Constructor
> id=5 Destructor
> id=2 Constructor
> id=3 Constructor
> Func
> id=3 Destructor
> main ends
> id=6 Destructor //Demo d4å¯¹è±¡çš„æ¶ˆäº¡
> id=2 Destructor
> id=1 Destructor



## 3. å¤åˆ¶æ„é€ å‡½æ•°ï¼š

å¤åˆ¶æ„é€ å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå…¶å½¢å‚ä¸ºæœ¬ç±»çš„å¯¹è±¡å¼•ç”¨ã€‚ä½œç”¨æ˜¯ç”¨ä¸€ä¸ª**å·²å­˜åœ¨çš„å¯¹è±¡**å»åˆå§‹åŒ–åŒç±»å‹çš„æ–°å¯¹è±¡ã€‚<br />![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153038293-b75fb243-7f4e-46ad-8a0c-0af57f1943a1.png#align=left&display=inline&height=155&originHeight=155&originWidth=700&size=0&status=done&style=none&width=700)<br />

<a name="eda3385c"></a>
### å¤åˆ¶æ„é€ å‡½æ•°è¢«è°ƒç”¨çš„ä¸‰ç§æƒ…å†µï¼š


- ç”¨ç±»çš„ä¸€ä¸ªå¯¹è±¡å–åˆå§‹åŒ–å¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼›
- å‡½æ•°çš„è¿”å›å€¼æ˜¯ç±»çš„å¯¹è±¡ï¼Œå‡½æ•°æ‰§è¡Œå®Œæˆè¿”å›è°ƒç”¨è€…æ—¶ï¼›



```c++
Point g(){
	 Point a(1,2);
	 return a; 
}
int main(){
	Point b;
	b = g();
	return 0;
}
```

<br />**aæ˜¯g( )çš„å±€éƒ¨å¯¹è±¡ï¼Œç¦»å¼€g( )ä¹‹åå°±æ¶ˆäº¡äº†ï¼Œä¸å¯èƒ½å†è¿”å›ä¸»å‡½æ•°åç»§ç»­ç”Ÿå­˜**ã€‚<br />æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ª**ä¸´æ—¶æ— åå¯¹è±¡**ï¼Œè¯¥ä¸´æ—¶å¯¹è±¡çš„ç”Ÿå­˜æœŸåªå­˜åœ¨äºå‡½æ•°è°ƒç”¨æ‰€å¤„çš„è¡¨è¾¾å¼ä¸­ï¼Œå³ b = g( )ä¸­ã€‚<br />
<br />æ‰§è¡Œè¯­å¥ `return a` ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°å°†açš„å€¼å¤åˆ¶åˆ°ä¸´æ—¶å¯¹è±¡ä¸­ï¼Œå‡½æ•°g( )è¿è¡Œç»“æŸæ—¶å¯¹è±¡aæ¶ˆäº¡ï¼Œä½†ä¸´æ—¶å¯¹è±¡ä¼šå­˜åœ¨äºè¡¨è¾¾å¼ b = g( ) ä¸­ï¼Œè®¡ç®—å®Œè¿™ä¸ªè¡¨è¾¾å¼ï¼Œä¸´æ—¶å¯¹è±¡ä¹Ÿå°±è‡ªåŠ¨æ¶ˆäº¡äº†ã€‚<br />

- å‡½æ•°çš„å½¢å‚æ˜¯ç±»çš„å¯¹è±¡ï¼Œè°ƒç”¨å‡½æ•°è¿›è¡Œå½¢å‚å’Œå®å‚ç»“åˆæ—¶ï¼›

<br />
**ä¸¾ä¾‹å¦‚ä¸‹ï¼š**<br />

```c++
class Point
{ //Point ç±»çš„å®šä¹‰
public:
    Point(int xx = 0, int yy = 0) //æ„é€ å‡½æ•°ï¼Œå†…è”
    {
        x = xx;
        y = yy;
    }
    Point(const Point &p); //å¤åˆ¶æ„é€ å‡½æ•°
    void setX(int xx) { x = xx; }
    void setY(int yy) { y = yy; }
    int getX() const { return x; } //å¸¸å‡½æ•°ï¼ˆç¬¬5ç« ï¼‰
    int getY() const { return y; } //å¸¸å‡½æ•°ï¼ˆç¬¬5ç« ï¼‰
private:
    int x, y; //ç§æœ‰æ•°æ®
};

//å¤åˆ¶æ„é€ å‡½æ•°çš„å®ç°
Point::Point(const Point &p)
{
    x = p.x;
    y = p.y;
    cout << "Calling the copy constructor " << endl;
}
//å½¢å‚ä¸ºPointç±»å¯¹è±¡
void fun1(Point p)
{
    cout << p.getX() << endl;
}
//è¿”å›å€¼ä¸ºPointç±»å¯¹è±¡
Point fun2()
{
    Point a(1, 2);
    return a;
}

int main()
{
    Point a(4, 5);
    Point b(a); //ç”¨aåˆå§‹åŒ–bã€‚
    cout << b.getX() << endl;
    fun1(b);    //å¯¹è±¡bä½œä¸ºfun1çš„å®å‚
    b = fun2(); //å‡½æ•°çš„è¿”å›å€¼æ˜¯ç±»å¯¹è±¡
    cout << b.getX() << endl;
    return 0;
}
```


<a name="ffc106f9"></a>
### æ‹·è´æ„é€ å‡½æ•°å’Œèµ‹å€¼è¿ç®—ç¬¦ï¼ˆ=ï¼‰æœ‰å•¥ä¸åŒï¼Ÿ


- èµ‹å€¼è¿ç®—ç¬¦ä½œç”¨äºä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡ï¼›
- æ‹·è´æ„é€ å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚

# å››ã€ç±»çš„ç»„åˆ

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153038496-5dd2fc45-081b-4b4f-beb0-53dc16b54c40.png#align=left&display=inline&height=388&originHeight=388&originWidth=704&size=0&status=done&style=none&width=704)<br />
<br />æ³¨æ„ä»¥ä¸‹ä»£ç çš„æ„é€ å‡½æ•°å’Œå¤åˆ¶æ„é€ å‡½æ•°çš„è°ƒç”¨é¡ºåºï¼ˆåŸåˆ™ï¼šå†…åµŒç±»å…ˆæ„é€ ï¼‰<br />

```c++
class Point
{ //Pointç±»å®šä¹‰
public:
    Point(int xx = 0, int yy = 0)
    {
        x = xx;
        y = yy;
        cout<<"constructor of Point!"<<endl;
    }
    Point(Point &p);
    int getX() { return x; }   //ç”¨äºè®©å…¶ä»–ç±»è·å¾—ç§æœ‰æˆå‘˜çš„å€¼
    int getY() { return y; }
private:
    int x, y;
};
//å¤åˆ¶æ„é€ å‡½æ•°çš„å®ç°
Point::Point(Point &p)
{ 
    x = p.x;
    y = p.y;
    cout << "Calling the copy constructor of Point" << endl;
}

//ç±»çš„ç»„åˆ
class Line{ //Lineç±»çš„å®šä¹‰
public:
    //å¤–éƒ¨æ¥å£
    Line(Point xp1, Point xp2);
    Line(Line &l);
    double getLen() { return len; }
private:          //ç§æœ‰æ•°æ®æˆå‘˜
    Point p1, p2; //æŒ‰ç…§æ­¤é¡ºåºè°ƒç”¨æ„é€ å‡½æ•°
    double len;
};

//ç»„åˆç±»çš„æ„é€ å‡½æ•°
Line::Line(Point xp1, Point xp2) : p2(xp2), p1(xp1) //ä»ç„¶æŒ‰ç…§p1,p2çš„é¡ºåºè°ƒç”¨æ„é€ å‡½æ•°
{
    cout << "Calling constructor of Line" << endl;
    double x = static_cast<double>(p1.getX() - p2.getX());
    double y = static_cast<double>(p1.getY() - p2.getY());
    len = sqrt(x * x + y * y);
}
//ç»„åˆç±»çš„å¤åˆ¶æ„é€ å‡½æ•°
Line::Line(Line &l) : p1(l.p1), p2(l.p2)
{
    cout << "Calling the copy constructor of Line" << endl;
    len = l.len;
}
//ä¸»å‡½æ•°
int main()
{
    Point myp1(1, 1), myp2(4, 5);
    //å»ºç«‹Pointç±»çš„å¯¹è±¡
    Line line(myp1, myp2); //å»ºç«‹Lineç±»çš„å¯¹è±¡
    Line line2(line);      //åˆ©ç”¨å¤åˆ¶æ„é€ å‡½æ•°å»ºç«‹ä¸€ä¸ªæ–°å¯¹è±¡
    cout << "The length of the line is: ";
    cout << line.getLen() << endl;
    cout << "The length of the line2 is: ";
    cout << line2.getLen() << endl;
    return 0;
}
```

<br />![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153038366-d16dd536-fb12-4c80-9040-0810424673ce.png#align=left&display=inline&height=262&originHeight=262&originWidth=683&size=0&status=done&style=none&width=683)<br />


# äº”ã€ç»“æ„ä½“å’Œè”åˆä½“

## struct

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153038430-bf8bb6af-f135-43ab-8494-0b37928e6c2b.png#align=left&display=inline&height=807&originHeight=807&originWidth=703&size=0&status=done&style=none&width=703)<br />


## union

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153038417-f9fc4aa0-a760-4231-999d-13d0b7e5f4c5.png)<br />
<br />ä¾‹å¦‚ï¼šä½¿ç”¨è”åˆä½“ä¿å­˜æˆç»©ä¿¡æ¯ï¼Œå¹¶ä¸”è¾“å‡ºã€‚<br />

```c++
#include <string>
#include <iostream>
using namespace std;
class ExamInfo
{
private:
    string name; //è¯¾ç¨‹åç§°
    enum
    {
        GRADE,
        PASS,
        PERCENTAGE
    } mode; //è®¡åˆ†æ–¹å¼
    union {
        char grade;  //ç­‰çº§åˆ¶çš„æˆç»©
        bool pass;   //åªè®°æ˜¯å¦é€šè¿‡è¯¾ç¨‹çš„æˆç»©
        int percent; //ç™¾åˆ†åˆ¶çš„æˆç»©
    };
public: //ä¸‰ç§æ„é€ å‡½æ•°ï¼Œåˆ†åˆ«ç”¨ç­‰çº§ã€æ˜¯å¦é€šè¿‡å’Œç™¾åˆ†åˆå§‹åŒ–
    ExamInfo(string name, char grade) : name(name), mode(GRADE), grade(grade) {}
    ExamInfo(string name, bool pass) : name(name), mode(PASS), pass(pass) {}
    ExamInfo(string name, int percent) : name(name), mode(PERCENTAGE), percent(percent) {}
    void show();
};

void ExamInfo::show()
{
    cout << name << ": ";
    switch (mode)
    {
    case GRADE:
        cout << grade;
        break;
    case PASS:
        cout << (pass ? "PASS" : "FAIL");
        break;
    case PERCENTAGE:
        cout << percent;
        break;
    }
    cout << endl;
}

int main()
{
    ExamInfo course1("English", 'B');
    ExamInfo course2("Calculus", true);
    ExamInfo course3("C++ Programming", 85);
    course1.show();
    course2.show();
    course3.show();
    return 0;
}
```

<br />![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153038344-ebf316ef-bb4c-4aa7-8534-84b3a62debf8.png#align=left&display=inline&height=99&originHeight=99&originWidth=201&size=0&status=done&style=none&width=201)<br />


# å…­ã€C++ä¸­çš„ . æ“ä½œç¬¦ä¸ -> æ“ä½œç¬¦


```c++
struct Person
{
    String name;
    String born;
    double money;
};

Person A;
Person *B = new Person;

A.name = "Dr.nothing";
B->name = "Dr.something"; //B->name = (*B).name
A.money = 300.0;
(*B).money = 30;
```


- è‹¥æ˜¯ä½¿ç”¨åˆ° `->` æ“ä½œç¬¦åˆ™å·¦è¾¹çš„å˜é‡å¿…é¡»æ˜¯æŒ‡é’ˆå˜é‡ï¼›
- è‹¥æ˜¯ä½¿ç”¨åˆ° `.` æ“ä½œç¬¦é‚£ä¹ˆå·¦è¾¹çš„å˜é‡ä¸èƒ½ä¸ºæŒ‡é’ˆï¼ŒæŒ‡é’ˆå˜é‡éœ€è¦ä½¿ç”¨ `*` æ“ä½œç¬¦è®¿é—®åˆ°è¯¥åœ°å€çš„å†…å®¹

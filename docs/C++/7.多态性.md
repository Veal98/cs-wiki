
# ä¸€ã€å¤šæ€çš„å®ç°


- ç»‘å®šæœºåˆ¶ï¼š<br />
ç»‘å®šæ˜¯å°†ä¸€ä¸ªæ ‡è¯†ç¬¦åå’Œä¸€ä¸ªå­˜å‚¨åœ°å€è”ç³»åœ¨ä¸€èµ·çš„è¿‡ç¨‹
- ç¼–è¯‘æ—¶çš„å¤šæ€é€šè¿‡**é™æ€ç»‘å®š**å®ç°<br />
ç»‘å®šå·¥ä½œåœ¨ç¨‹åºç¼–è¯‘è¿æ¥é˜¶æ®µè¿è¡Œ
- è¿è¡Œæ—¶çš„å¤šæ€é€šè¿‡**åŠ¨æ€ç»‘å®š**å®ç°<br />
ç»‘å®šå·¥ä½œåœ¨ç¨‹åºè¿è¡Œé˜¶æ®µè¿è¡Œ



# äºŒã€è¿ç®—ç¬¦é‡è½½ï¼ˆé™æ€ç»‘å®šï¼‰

å‡½æ•°é‡è½½åŒæ ·ä¹Ÿæ˜¯é™æ€ç»‘å®š<br />

## 1. é‡è½½ä¸ºç±»æˆå‘˜å‡½æ•°


```c++
å‡½æ•°ç±»å‹  operator è¿ç®—ç¬¦ï¼ˆå½¢å‚ï¼‰ {        
		...... 
}
```

<br />å‚æ•°ä¸ªæ•°=åŸæ“ä½œæ•°ä¸ªæ•°-1 ï¼ˆåç½®++ï¼Œ-- é™¤å¤–ï¼‰<br />


### åŒç›®è¿ç®—ç¬¦é‡è½½è§„åˆ™ ï¼ˆ1ä¸ªå‚æ•° å¯¹è±¡ï¼‰

<br />**é‡è½½Bä¸ºç±»æˆå‘˜å‡½æ•°ï¼Œä½¿ä¹‹èƒ½å¤Ÿå®ç° oprd1 B oprd2;**<br />
<br />ä»¥ `+` ä¸¾ä¾‹<br />ç»é‡è½½åï¼Œè¡¨è¾¾å¼ `a + b` ç›¸å½“äº `a.operator +(b)`<br />

```c++
Complex operator + (const Complex &c2) const;

Complex Complex::operator+(const Complex &c2){
	//åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ— åå¯¹è±¡ä½œä¸ºè¿”å›å€¼
	return Complex(real + c2.real, imag + c2.imag);
```



### å‰ç½®å•ç›®è¿ç®—ç¬¦é‡è½½è§„åˆ™ï¼ˆæ— å‚ï¼‰

**é‡è½½Bä¸ºç±»æˆå‘˜å‡½æ•°ï¼Œä½¿ä¹‹èƒ½å®ç° B oprdï¼Œæ— å½¢å‚**<br />
<br />ä»¥ `å‰ç½®++` ä¸ºä¾‹ï¼š<br />ç»é‡è½½åï¼Œ`++ a` ç›¸å½“äº `a.operaotr ++()`<br />

```c++
Point &operator++();   //å‰ç½®++

Point &Point::operator++(){
	x++;
	y++;
	//++a = b; => å·¦è¾¹çš„å€¼å…ˆå¢åŠ å†åšè¿ç®—ï¼Œæ‰€ä»¥è¿”å›ä¿®æ”¹åçš„å€¼
	return *this;
}
```



### åç½®å•ç›®è¿ç®—ç¬¦++å’Œ--é‡è½½è§„åˆ™ ï¼ˆ1ä¸ªå‚æ•° int)

å¦‚æœè¦é‡è½½ ++ æˆ–è€… -- ä¸ºç±»æˆå‘˜å‡½æ•°ï¼Œä½¿ä¹‹èƒ½å¤Ÿå®ç°è¡¨è¾¾å¼ oprd ++ æˆ– oprd --ï¼Œå…¶ä¸­oprdä¸ºAç±»å¯¹è±¡ï¼Œåˆ™ ++ Huon -- åº”è¯¥è¢«é‡è½½ä¸ºAç±»çš„æˆå‘˜å‡½æ•°ï¼Œ**ä¸”å…·æœ‰ä¸€ä¸ª int å½¢å‚**<br />
<br />ä»¥ `åç½®++` ä¸ºä¾‹ï¼š

ç»é‡è½½åï¼Œ`a ++` Â ç›¸å½“äº `a.operaotr ++(0)`<br />

```c++
Point operator++(int); //åç½®++

//åç½®è¿ç®—ç¬¦ä¸èƒ½ä½œä¸ºå·¦å€¼ a++ = bå¾—åˆ°çš„açš„å€¼ä¸ºa++çš„ç»“æœ
Point Point::operator++(int)
{
    Point temp = *this;
    ++*this; //è°ƒç”¨å‰ç½®++
    //a++ = b; => å·¦è¾¹çš„å€¼å…ˆåšè¿ç®—å†å¢åŠ ï¼Œæ‰€ä»¥è¿”å›å¢åŠ å‰çš„å€¼ï¼ˆæœ¬èº«ï¼‰
    return temp;
}
```



## 2. é‡è½½ä¸ºéæˆå‘˜å‡½æ•°

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153149687-4e9cbd7d-7259-407b-b3c7-742a06d0505b.png#align=left&display=inline&height=54&originHeight=54&originWidth=606&size=0&status=done&style=none&width=606)<br />
<br />å‚æ•°ä¸ªæ•°=åŸæ“ä½œæ•°ä¸ªæ•°ï¼ˆåç½®++ï¼Œ-- é™¤å¤–ï¼‰<br />


### åŒç›®è¿ç®—ç¬¦é‡è½½è§„åˆ™ï¼ˆ2ä¸ªå‚æ•° å¯¹è±¡ï¼‰

ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯ç±»çš„å¼•ç”¨<br />

```c++
friend Complex operator + (const Complex &c1, const Complex &c2);
```



### å‰ç½®å•ç›®è¿ç®—ç¬¦é‡è½½è§„åˆ™ (1ä¸ªå‚æ•° å¯¹è±¡ï¼‰


```c++
friend Complex operator ++(Complex &c1);
```



### åç½®å•ç›®è¿ç®—ç¬¦++å’Œ--é‡è½½è§„åˆ™ ï¼ˆ2ä¸ªå‚æ•° å¯¹è±¡ï¼Œ0ï¼‰


```c++
friend Complex operator ++(Complex &c1, 0);
```



# ä¸‰ã€è¿ç®—ç¬¦é‡è½½å®ä¾‹

â‘  **å¯¹Pointç±»é‡è½½++ï¼ˆè‡ªå¢ï¼‰ã€--ï¼ˆè‡ªå‡ï¼‰è¿ç®—ç¬¦ï¼ŒåŒæ—¶é‡è½½å‰ç¼€å’Œåç¼€å½¢å¼**

```c++
class Point
	{
	private:
	    int x, y;
	public:
	    Point(int a, int b)
	    {
	        x = a;
	        y = b;
	    }
	    Point &operator++();   //å‰ç½®++
	    Point operator++(int); //åç½®++
	    Point &operator--();   //å‰ç½®--
	    Point operator--(int); //åç½®--
	    int getx()
	    {
	        return x;
	    }
	    int gety()
	    {
	        return y;
	    }
	};
	Point &Point::operator++()
	{
	    x++;
	    y++;
	    //++a = b; => å·¦è¾¹çš„å€¼å…ˆå¢åŠ å†åšè¿ç®—ï¼Œæ‰€ä»¥è¿”å›ä¿®æ”¹åçš„å€¼
	    return *this;
	}
	//åç½®è¿ç®—ç¬¦ä¸èƒ½ä½œä¸ºå·¦å€¼ a++ = bå¾—åˆ°çš„açš„å€¼ä¸ºa++çš„ç»“æœ
	Point Point::operator++(int)
	{
	    Point temp = *this;
	    ++*this; //è°ƒç”¨å‰ç½®++
	    //a++ = b; => å·¦è¾¹çš„å€¼å…ˆåšè¿ç®—å†å¢åŠ ï¼Œæ‰€ä»¥è¿”å›å¢åŠ å‰çš„å€¼ï¼ˆæœ¬èº«ï¼‰
	    return temp;
	}
	Point &Point::operator--()
	{
	    x--;
	    y--;
	    return *this;
	}
	Point Point::operator--(int)
	{
	    Point temp = *this;
	    --*this; //è°ƒç”¨å‰ç½®--
	    return temp;
	}
```

â‘¡ **é«˜ç²¾åº¦ç®—æ³•**ï¼šå®šä¹‰HugeIntç±»èƒ½å¤„ç†20äº¿ä»¥ä¸Šçš„æ•´æ•°å¹¶é‡è½½+å’Œ<<

> 32ä½æ•´æ•°çš„æœºå™¨æ‰€èƒ½è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´å¤§æ¦‚æ˜¯-20äº¿~20äº¿

**æ€è·¯ï¼šå°†å¤§æ•°å­˜å…¥æ•°ç»„ï¼Œå†å¯¹æ•°ç»„è¿›è¡Œé€ä½æ“ä½œ**

ä»£ç å®ç°ï¼šğŸ‘‡ 


```c++
#include <cstring>
#include <string>
#include <iostream>
using std::ostream;

class HugeInt
{
public:
    HugeInt(long val = 0);            // longå‹æ•°è½¬æ¢æ„é€ ä¸ºHugeIntå‹
    HugeInt(const char *s);        // å­—ç¬¦å­˜å‚¨çš„å¤§æ•°è½¬æ¢æ„é€ ä¸ºHugeIntå‹
    HugeInt operator +(HugeInt &rhs);  // +é‡è½½
    friend ostream &operator <<(ostream &os, HugeInt &rhs); // <<é‡è½½
private:
    short integer[30];
};

// è½¬æ¢æ„é€ å‡½æ•°
HugeInt::HugeInt(long val)
{
    for (int i = 0; i <= 29; i++)
        integer[i] = 0; // å°†æ•°ç»„åˆå§‹åŒ–ä¸º0
    for (int i = 29; val != 0 && i >= 0; i --)
    {//ä»åå¾€å‰ä¾æ¬¡å¡«å…¥æ•°ç»„ï¼Œä¸æ»¡30ä½çš„å‰é¢è¡¥0
        integer[i] = val % 10;
        val /= 10;
    }
}
HugeInt::HugeInt(const char *s)
{
    for (int i = 0; i <= 29; i++)
        integer[i] = 0;
    for (int i = 30 - strlen(s), j = 0; i <= 29; i++, j++)
        integer[i] = s[j]-'0';
}
// å·¨å‹æ•´æ•°ç›¸åŠ 
HugeInt HugeInt::operator +(HugeInt &op2)
{
    HugeInt temp;
    int carry = 0; //è¿›ä½
    for (int i = 29; i >= 0; i--)
    {
        temp.integer[i] = integer[i] + op2.integer[i] + carry;
        if (temp.integer[i] > 9)
        {
            temp.integer[i] %= 10;
            carry = 1;
        }
        else
            carry = 0;
    }
    return temp;
}
ostream &operator <<(ostream &output, HugeInt &num)
{
    int i = 0;
    for (; (num.integer[i] == 0) && (i <= 29); i++)
        ; // è·³è¿‡å‰å¯¼0
    if (i == 30)
        output << 0;
    else
        for (; i <= 29; i++)
            output << num.integer[i];
    return output;
}

int  main()
{
    using std::cout;
    using std::endl;
    HugeInt n1(7654321),n2(1234567);  //æµ‹è¯•longå‹
    HugeInt n3("12345678987654321"), n4("12345678987654321"); //æµ‹è¯•å­—ç¬¦ä¸²å‹
    cout << "n1 is " << n1 << "\nn2 is " << n2 << "\nn3 is " << n3 << "\nn4 is " << n4 <<endl;
    HugeInt n5 = n1+n2;
    HugeInt n6 = n3+n4;
    HugeInt n7 = n3 + n1;
    cout<< "n1+n2="<<n5<<endl;  //æµ‹è¯•longå‹å¤§æ•°ç›¸åŠ 
    cout<< "n3+n4="<<n6<<endl;  //æµ‹è¯•å­—ç¬¦ä¸²å‹å¤§æ•°ç›¸åŠ 
    cout<< "n1+n3=" << n7 << endl;  //æµ‹è¯•longå‹å’Œå­—ç¬¦ä¸²å‹ç›¸åŠ 
}
```

<br>



# å››ã€è™šå‡½æ•°ï¼ˆåŠ¨æ€ç»‘å®šï¼‰

## åˆå§‹è™šå‡½æ•°

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153149725-dd968cb3-2be3-4faa-a838-e408f3c5acc0.png#align=left&display=inline&height=206&originHeight=206&originWidth=619&size=0&status=done&style=none&width=619)<br />å¤šæ€æ˜¯ä¸åŒå¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯æœ‰ä¸åŒçš„è¡Œä¸ºç‰¹æ€§ï¼Œè™šå‡½æ•°ä½œä¸ºè¿è¡Œè¿‡ç¨‹ä¸­å¤šæ€çš„åŸºç¡€ï¼Œä¸»è¦æ˜¯é’ˆå¯¹å¯¹è±¡çš„ï¼Œè€Œæ„é€ å‡½æ•°æ˜¯åœ¨å¯¹è±¡äº§ç”Ÿä¹‹å‰è¿è¡Œçš„ï¼Œ**å› æ­¤è™šæ„é€ å‡½æ•°æ²¡æœ‰æ„ä¹‰**ã€‚<br />

## ä¸€èˆ¬è™šå‡½æ•°æˆå‘˜

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153149706-0b258fcc-1088-4754-94ce-cdbc8c13012a.png#align=left&display=inline&height=163&originHeight=163&originWidth=611&size=0&status=done&style=none&width=611)

## virtual å…³é”®å­—

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153149803-7cfc1028-b534-44b6-bd26-ab6206c8631f.png#align=left&display=inline&height=245&originHeight=245&originWidth=625&size=0&status=done&style=none&width=625)<br />

## è™šè¡¨ä¸åŠ¨æ€ç»‘å®š

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153149800-79adf856-b2a9-48fa-b98a-6673e31fe510.png#align=left&display=inline&height=628&originHeight=628&originWidth=793&size=0&status=done&style=none&width=793)

## è™šå‡½æ•°å®ä¾‹

å®šä¹‰ä¸€ä¸ªåŸºç±»BaseClassï¼Œä»å®ƒæ´¾ç”Ÿå‡ºç±»DerivedClassï¼ŒBaseClassæœ‰æˆå‘˜å‡½æ•°fn1()ã€fn2()ï¼Œfn1()æ˜¯è™šå‡½æ•°ï¼ŒDerivedClassä¹Ÿæœ‰æˆå‘˜å‡½æ•°fn1()ã€fn2()ï¼Œåœ¨ä¸»ç¨‹åºä¸­å®šä¹‰ä¸€ä¸ªDerivedClassçš„å¯¹è±¡ï¼Œåˆ†åˆ«ç”¨BaseClasså’ŒDerivedClassçš„æŒ‡é’ˆæ¥è°ƒç”¨fn1()ã€fn2()ï¼Œè§‚å¯Ÿè¿è¡Œç»“æœã€‚

```c++
class BaseClass
{
public:
    virtual void fn1();
    void fn2();
};
void BaseClass::fn1()
{
    cout << "è°ƒç”¨åŸºç±»çš„è™šå‡½æ•°fn1()" << endl;
}
void BaseClass::fn2()
{
    cout << "è°ƒç”¨åŸºç±»çš„éè™šå‡½æ•°fn2()" << endl;
}
class DerivedClass : public BaseClass
{
public:
    void fn1();
    void fn2();
};
void DerivedClass::fn1()
{
    cout << "è°ƒç”¨æ´¾ç”Ÿç±»çš„å‡½æ•°fn1()" << endl;
}
void DerivedClass::fn2()
{
    cout << "è°ƒç”¨æ´¾ç”Ÿç±»çš„å‡½æ•°fn2()" << endl;
}
int main()
{
    DerivedClass aDerivedClass;
    DerivedClass *pDerivedClass = &aDerivedClass;
    BaseClass *pBaseClass = &aDerivedClass;
    pBaseClass->fn1();
    pBaseClass->fn2(); 
    pDerivedClass->fn1();
    pDerivedClass->fn2();
}
```

<br />![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153149724-5050f457-d64f-401b-911f-cd87d7cef7ba.png#align=left&display=inline&height=108&originHeight=108&originWidth=247&size=0&status=done&style=none&width=247)

<br>



# äº”ã€çº¯è™šå‡½æ•°ä¸æŠ½è±¡ç±»

![](https://cdn.nlark.com/yuque/0/2020/png/1237282/1586153149829-2dcc81c7-0043-4e4b-86ee-bdc37db3ff30.png#align=left&display=inline&height=518&originHeight=518&originWidth=679&size=0&status=done&style=none&width=679)

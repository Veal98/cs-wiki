# âš¡ å¸¸ç”¨å†…å»ºæ¨¡å—

---

Pythonä¹‹æ‰€ä»¥è‡ªç§°â€œbatteries includedâ€ï¼Œå°±æ˜¯å› ä¸ºå†…ç½®äº†è®¸å¤šéå¸¸æœ‰ç”¨çš„æ¨¡å—ï¼Œæ— éœ€é¢å¤–å®‰è£…å’Œé…ç½®ï¼Œå³å¯ç›´æ¥ä½¿ç”¨ã€‚

æœ¬ç« å°†ä»‹ç»ä¸€äº›å¸¸ç”¨çš„å†…å»ºæ¨¡å—ã€‚

## 1. datetime

datetimeæ˜¯Pythonå¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ ‡å‡†åº“ã€‚

### â‘  è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´

æˆ‘ä»¬å…ˆçœ‹å¦‚ä½•è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´ï¼š

```python
from datetime import datetime

now = datetime.now() # è·å–å½“å‰datetime
print(now)
# 2020-05-18 16:28:07.198690

print(type(now))
# <class 'datetime.datetime'>
```

æ³¨æ„åˆ°`datetime`æ˜¯æ¨¡å—ï¼Œ`datetime`æ¨¡å—è¿˜åŒ…å«ä¸€ä¸ª`datetime`ç±»ï¼Œé€šè¿‡`from datetime import datetime`å¯¼å…¥çš„æ‰æ˜¯`datetime`è¿™ä¸ªç±»ã€‚

å¦‚æœä»…å¯¼å…¥`import datetime`ï¼Œåˆ™å¿…é¡»å¼•ç”¨å…¨å`datetime.datetime`ã€‚

`datetime.now()`è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´ï¼Œå…¶ç±»å‹æ˜¯`datetime`ã€‚

### â‘¡ è·å–æŒ‡å®šæ—¥æœŸå’Œæ—¶é—´

è¦æŒ‡å®šæŸä¸ªæ—¥æœŸå’Œæ—¶é—´ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨å‚æ•°æ„é€ ä¸€ä¸ª`datetime`ï¼š

```python
from datetime import datetime

dt = datetime(2020, 4, 19, 12, 20) # ç”¨æŒ‡å®šæ—¥æœŸæ—¶é—´åˆ›å»ºdatetime
print(dt) # 2020-04-19 12:20:00
```

### â‘¢ datetime è½¬æ¢ä¸º timestamp æ—¶é—´æˆ³

åœ¨è®¡ç®—æœºä¸­ï¼Œæ—¶é—´å®é™…ä¸Šæ˜¯ç”¨æ•°å­—è¡¨ç¤ºçš„ã€‚ğŸš© **æˆ‘ä»¬æŠŠ1970å¹´1æœˆ1æ—¥ 00:00:00 UTC+00:00 æ—¶åŒºçš„æ—¶åˆ»ç§°ä¸º epoch timeï¼Œè®°ä¸º`0`ï¼ˆ1970å¹´ä»¥å‰çš„æ—¶é—´timestampä¸ºè´Ÿæ•°ï¼‰ï¼Œå½“å‰æ—¶é—´å°±æ˜¯ç›¸å¯¹äºepoch time çš„ç§’æ•°ï¼Œç§°ä¸ºtimestampã€‚**

ä½ å¯ä»¥è®¤ä¸ºï¼š

```python
timestamp = 0 = 1970-1-1 00:00:00 UTC+0:00
```

å¯¹åº”çš„åŒ—äº¬æ—¶é—´æ˜¯ï¼š

```python
timestamp = 0 = 1970-1-1 08:00:00 UTC+8:00
```

å¯è§ timestamp çš„å€¼ä¸æ—¶åŒºæ¯«æ— å…³ç³»ï¼Œå› ä¸º timestamp ä¸€æ—¦ç¡®å®šï¼Œå…¶UTCæ—¶é—´å°±ç¡®å®šäº†ï¼Œè½¬æ¢åˆ°ä»»æ„æ—¶åŒºçš„æ—¶é—´ä¹Ÿæ˜¯å®Œå…¨ç¡®å®šçš„ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè®¡ç®—æœºå­˜å‚¨çš„å½“å‰æ—¶é—´æ˜¯ä»¥ timestamp è¡¨ç¤ºçš„ï¼Œå› ä¸ºå…¨çƒå„åœ°çš„è®¡ç®—æœºåœ¨ä»»æ„æ—¶åˆ»çš„ timestamp éƒ½æ˜¯å®Œå…¨ç›¸åŒçš„ï¼ˆå‡å®šæ—¶é—´å·²æ ¡å‡†ï¼‰ã€‚

æŠŠä¸€ä¸ª`datetime`ç±»å‹è½¬æ¢ä¸ºtimestampåªéœ€è¦ç®€å•è°ƒç”¨`timestamp()`æ–¹æ³•ï¼š

```python
from datetime import datetime
dt = datetime(2015, 4, 19, 12, 20) # ç”¨æŒ‡å®šæ—¥æœŸæ—¶é—´åˆ›å»ºdatetime
dt.timestamp() # æŠŠdatetimeè½¬æ¢ä¸ºtimestamp
# 1429417200.0
```

æ³¨æ„Pythonçš„timestampæ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ã€‚å¦‚æœæœ‰å°æ•°ä½ï¼Œå°æ•°ä½è¡¨ç¤ºæ¯«ç§’æ•°ã€‚

æŸäº›ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚Javaå’ŒJavaScriptï¼‰çš„ timestamp ä½¿ç”¨æ•´æ•°è¡¨ç¤ºæ¯«ç§’æ•°ï¼Œè¿™ç§æƒ…å†µä¸‹åªéœ€è¦æŠŠ timestamp é™¤ä»¥1000å°±å¾—åˆ°Pythonçš„æµ®ç‚¹è¡¨ç¤ºæ–¹æ³•ã€‚

### â‘£ timestamp è½¬æ¢ä¸º datetime

è¦æŠŠ timestamp è½¬æ¢ä¸º`datetime`ï¼Œä½¿ç”¨`datetime`æä¾›çš„`fromtimestamp()`æ–¹æ³•ï¼š

```python
from datetime import datetime
t = 1429417200.0
print(datetime.fromtimestamp(t))
# 2020-04-19 12:20:00
```

æ³¨æ„åˆ° timestamp æ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œå®ƒæ²¡æœ‰æ—¶åŒºçš„æ¦‚å¿µï¼Œè€Œdatetimeæ˜¯æœ‰æ—¶åŒºçš„ã€‚ä¸Šè¿°è½¬æ¢æ˜¯åœ¨timestampå’Œæœ¬åœ°æ—¶é—´åšè½¬æ¢ã€‚

æœ¬åœ°æ—¶é—´æ˜¯æŒ‡å½“å‰æ“ä½œç³»ç»Ÿè®¾å®šçš„æ—¶åŒºã€‚ä¾‹å¦‚åŒ—äº¬æ—¶åŒºæ˜¯ä¸œ8åŒºï¼Œåˆ™æœ¬åœ°æ—¶é—´ï¼š

```python
2015-04-19 12:20:00
```

å®é™…ä¸Šå°±æ˜¯ UTC+8:00 æ—¶åŒºçš„æ—¶é—´ï¼š

```python
2015-04-19 12:20:00 UTC+8:00
```

è€Œæ­¤åˆ»çš„æ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´ä¸åŒ—äº¬æ—¶é—´å·®äº†8å°æ—¶ï¼Œä¹Ÿå°±æ˜¯UTC+0:00æ—¶åŒºçš„æ—¶é—´åº”è¯¥æ˜¯ï¼š

```python
2015-04-19 04:20:00 UTC+0:00
```

timestampä¹Ÿå¯ä»¥ç›´æ¥è¢«è½¬æ¢åˆ°UTCæ ‡å‡†æ—¶åŒºçš„æ—¶é—´ï¼š

```python
from datetime import datetime
t = 1429417200.0
print(datetime.fromtimestamp(t)) # æœ¬åœ°æ—¶é—´
# 2015-04-19 12:20:00
print(datetime.utcfromtimestamp(t)) # UTCæ—¶é—´
2015-04-19 04:20:00
```

### â‘¤ strè½¬æ¢ä¸ºdatetime

å¾ˆå¤šæ—¶å€™ï¼Œç”¨æˆ·è¾“å…¥çš„æ—¥æœŸå’Œæ—¶é—´æ˜¯å­—ç¬¦ä¸²ï¼Œè¦å¤„ç†æ—¥æœŸå’Œæ—¶é—´ï¼Œé¦–å…ˆå¿…é¡»æŠŠstrè½¬æ¢ä¸ºdatetimeã€‚è½¬æ¢æ–¹æ³•æ˜¯é€šè¿‡`datetime.strptime()`å®ç°ï¼Œéœ€è¦ä¸€ä¸ªæ—¥æœŸå’Œæ—¶é—´çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼š

```python
from datetime import datetime
cday = datetime.strptime('2015-6-1 18:19:59', '%Y-%m-%d %H:%M:%S')
print(cday)
# 2015-06-01 18:19:59
```

å­—ç¬¦ä¸²`'%Y-%m-%d %H:%M:%S'`è§„å®šäº†æ—¥æœŸå’Œæ—¶é—´éƒ¨åˆ†çš„æ ¼å¼ã€‚è¯¦ç»†çš„è¯´æ˜è¯·å‚è€ƒ[Pythonæ–‡æ¡£](https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior)ã€‚

æ³¨æ„è½¬æ¢åçš„datetimeæ˜¯æ²¡æœ‰æ—¶åŒºä¿¡æ¯çš„ã€‚

### â‘¥ datetimeè½¬æ¢ä¸ºstr

å¦‚æœå·²ç»æœ‰äº†datetimeå¯¹è±¡ï¼Œè¦æŠŠå®ƒæ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²æ˜¾ç¤ºç»™ç”¨æˆ·ï¼Œå°±éœ€è¦è½¬æ¢ä¸ºstrï¼Œè½¬æ¢æ–¹æ³•æ˜¯é€šè¿‡`strftime()`å®ç°çš„ï¼ŒåŒæ ·éœ€è¦ä¸€ä¸ªæ—¥æœŸå’Œæ—¶é—´çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼š

```python
from datetime import datetime
now = datetime.now()
print(now.strftime('%a, %b %d %H:%M'))
# Mon, May 05 16:28
```

### â‘¦ datetimeåŠ å‡

å¯¹æ—¥æœŸå’Œæ—¶é—´è¿›è¡ŒåŠ å‡å®é™…ä¸Šå°±æ˜¯æŠŠdatetimeå¾€åæˆ–å¾€å‰è®¡ç®—ï¼Œå¾—åˆ°æ–°çš„datetimeã€‚åŠ å‡å¯ä»¥ç›´æ¥ç”¨`+`å’Œ`-`è¿ç®—ç¬¦ï¼Œä¸è¿‡éœ€è¦å¯¼å…¥`timedelta`è¿™ä¸ªç±»ï¼š

```python
from datetime import datetime, timedelta
now = datetime.now()
print(now)
# datetime.datetime(2015, 5, 18, 16, 57, 3, 540997)

print(now + timedelta(hours=10))
# datetime.datetime(2015, 5, 19, 2, 57, 3, 540997)

print(now - timedelta(days=1))
datetime.datetime(2015, 5, 17, 16, 57, 3, 540997)

print(now + timedelta(days=2, hours=12))
datetime.datetime(2015, 5, 21, 4, 57, 3, 540997)
```

å¯è§ï¼Œä½¿ç”¨`timedelta`ä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç®—å‡ºå‰å‡ å¤©å’Œåå‡ å¤©çš„æ—¶åˆ»ã€‚

### â‘§ æœ¬åœ°æ—¶é—´è½¬æ¢ä¸ºUTCæ—¶é—´

æœ¬åœ°æ—¶é—´æ˜¯æŒ‡ç³»ç»Ÿè®¾å®šæ—¶åŒºçš„æ—¶é—´ï¼Œä¾‹å¦‚åŒ—äº¬æ—¶é—´æ˜¯UTC+8:00æ—¶åŒºçš„æ—¶é—´ï¼Œè€ŒUTCæ—¶é—´æŒ‡UTC+0:00æ—¶åŒºçš„æ—¶é—´ã€‚

ä¸€ä¸ª`datetime`ç±»å‹æœ‰ä¸€ä¸ªæ—¶åŒºå±æ€§`tzinfo`ï¼Œä½†æ˜¯é»˜è®¤ä¸º`None`ï¼Œæ‰€ä»¥æ— æ³•åŒºåˆ†è¿™ä¸ª`datetime`åˆ°åº•æ˜¯å“ªä¸ªæ—¶åŒºï¼Œé™¤éå¼ºè¡Œç»™`datetime`è®¾ç½®ä¸€ä¸ªæ—¶åŒºï¼š

```python
from datetime import datetime, timedelta, timezone
tz_utc_8 = timezone(timedelta(hours=8)) # åˆ›å»ºæ—¶åŒºUTC+8:00
now = datetime.now()
print(now)
# datetime.datetime(2015, 5, 18, 17, 2, 10, 871012)
dt = now.replace(tzinfo=tz_utc_8) # å¼ºåˆ¶è®¾ç½®ä¸ºUTC+8:00
print(dt)
# datetime.datetime(2015, 5, 18, 17, 2, 10, 871012, tzinfo=datetime.timezone(datetime.timedelta(0, 28800)))
```

å¦‚æœç³»ç»Ÿæ—¶åŒºæ°å¥½æ˜¯UTC+8:00ï¼Œé‚£ä¹ˆä¸Šè¿°ä»£ç å°±æ˜¯æ­£ç¡®çš„ï¼Œå¦åˆ™ï¼Œä¸èƒ½å¼ºåˆ¶è®¾ç½®ä¸ºUTC+8:00æ—¶åŒºã€‚

### â‘¨ æ—¶åŒºè½¬æ¢

æˆ‘ä»¬å¯ä»¥å…ˆé€šè¿‡`utcnow()`æ‹¿åˆ°å½“å‰çš„UTCæ—¶é—´ï¼Œå†è½¬æ¢ä¸ºä»»æ„æ—¶åŒºçš„æ—¶é—´ï¼š

```python
# æ‹¿åˆ°UTCæ—¶é—´ï¼Œå¹¶å¼ºåˆ¶è®¾ç½®æ—¶åŒºä¸ºUTC+0:00:
utc_dt = datetime.utcnow().replace(tzinfo=timezone.utc)
print(utc_dt)
# 2015-05-18 09:05:12.377316+00:00

# astimezone()å°†è½¬æ¢æ—¶åŒºä¸ºåŒ—äº¬æ—¶é—´:
bj_dt = utc_dt.astimezone(timezone(timedelta(hours=8)))
print(bj_dt)
# 2015-05-18 17:05:12.377316+08:00

# astimezone()å°†è½¬æ¢æ—¶åŒºä¸ºä¸œäº¬æ—¶é—´:
tokyo_dt = utc_dt.astimezone(timezone(timedelta(hours=9)))
print(tokyo_dt)
# 2015-05-18 18:05:12.377316+09:00

# astimezone()å°†bj_dtè½¬æ¢æ—¶åŒºä¸ºä¸œäº¬æ—¶é—´:
tokyo_dt2 = bj_dt.astimezone(timezone(timedelta(hours=9)))
print(tokyo_dt2)
# 2015-05-18 18:05:12.377316+09:00
```

æ—¶åŒºè½¬æ¢çš„å…³é”®åœ¨äºï¼Œæ‹¿åˆ°ä¸€ä¸ª`datetime`æ—¶ï¼Œè¦è·çŸ¥å…¶æ­£ç¡®çš„æ—¶åŒºï¼Œç„¶åå¼ºåˆ¶è®¾ç½®æ—¶åŒºï¼Œä½œä¸ºåŸºå‡†æ—¶é—´ã€‚

åˆ©ç”¨å¸¦æ—¶åŒºçš„`datetime`ï¼Œé€šè¿‡`astimezone()`æ–¹æ³•ï¼Œå¯ä»¥è½¬æ¢åˆ°ä»»æ„æ—¶åŒºã€‚

æ³¨ï¼šä¸æ˜¯å¿…é¡»ä»UTC+0:00æ—¶åŒºè½¬æ¢åˆ°å…¶ä»–æ—¶åŒºï¼Œä»»ä½•å¸¦æ—¶åŒºçš„`datetime`éƒ½å¯ä»¥æ­£ç¡®è½¬æ¢ï¼Œä¾‹å¦‚ä¸Šè¿°`bj_dt`åˆ°`tokyo_dt`çš„è½¬æ¢ã€‚

## 2. collections

## 3. base64

## 4. struct

## 5. hashlib
## 6. hmac
## 7. itertools
## 8. contextlib
## 9. urllib
## 10. XML
## 11. HTMLParser



---

# ğŸ“š References

<br>

- [å»–é›ªå³° - Python3.x æ•™ç¨‹](https://www.liaoxuefeng.com/wiki/1016959663602400/1016966022717728)
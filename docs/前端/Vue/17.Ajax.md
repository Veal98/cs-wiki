# ğŸ€ Vue.js Ajax(axios)

---

Vue.js 2.0 ç‰ˆæœ¬æ¨èä½¿ç”¨ `axios `æ¥å®Œæˆ ajax è¯·æ±‚ã€‚

Axios æ˜¯ä¸€ä¸ªåŸºäº Promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚

Github å¼€æºåœ°å€ï¼š https://github.com/axios/axios

## 1. å®‰è£…æ–¹æ³•

**ä½¿ç”¨ cdn:**

```js
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
```

æˆ–

```js
<script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
```

**ä½¿ç”¨ npm:**

```shell
$ npm install axios
```

## 2. GET æ–¹æ³•

æ¯”å¦‚æœ‰å¦‚ä¸‹æ‰€ç¤ºçš„jsonæ•°æ®

```json
{
    "name":"ç½‘ç«™",
    "num":3,
    "sites": [
        { "name":"Google", "info":[ "Android", "Google æœç´¢", "Google ç¿»è¯‘" ] },
        { "name":"Runoob", "info":[ "èœé¸Ÿæ•™ç¨‹", "èœé¸Ÿå·¥å…·", "èœé¸Ÿå¾®ä¿¡" ] },
        { "name":"Taobao", "info":[ "æ·˜å®", "ç½‘è´­" ] }
    ]
}
```

### ç®€å•è·å– json æ•°æ®

```html
<meta charset="utf-8">
<title>Vue</title>
<script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
<script src="https://cdn.staticfile.org/axios/0.18.0/axios.min.js"></script>
</head>
<body>
<div id="app">
  {{ info }}
</div>
<script type = "text/javascript">
new Vue({
  el: '#app',
  data () {
    return {
      info: null
    }
  },
  mounted () {
    axios
      .get('https://www.runoob.com/try/ajax/json_demo.json')
      .then(response => (this.info = response))
      .catch(function (error) { // è¯·æ±‚å¤±è´¥å¤„ç†
        console.log(error);
      });
  }
})
</script>
</body>
</html>
```

è¿è¡Œç»“æœ

```
{ "data": { "name": "ç½‘ç«™", "num": 3, "sites": [ { "name": "Google", "info": [ "Android", "Google æœç´¢", "Google ç¿»è¯‘" ] }, { "name": "Runoob", "info": [ "èœé¸Ÿæ•™ç¨‹", "èœé¸Ÿå·¥å…·", "èœé¸Ÿå¾®ä¿¡" ] }, { "name": "Taobao", "info": [ "æ·˜å®", "ç½‘è´­" ] } ] }, "status": 200, "statusText": "", "headers": { "accept-ranges": "bytes", "age": "151207", "ali-swift-global-savetime": "1585128585", "cache-control": "s-maxage=165125, max-age=165125", "content-length": "291", "content-type": "application/json", "date": "Mon, 20 Apr 2020 08:17:19 GMT", "eagleid": "b7d6a49515875218465887939e", "etag": "\"5ce7cb1c-123\"", "expires": "Wed, 22 Apr 2020 06:09:24 GMT", "last-modified": "Fri, 24 May 2019 10:44:44 GMT", "server": "Tengine", "status": "304", "timing-allow-origin": "*", "via": "cache1.l2cn2308[0,304-0,H], cache22.l2cn2308[0,0], cache9.cn828[0,304-0,H], cache1.cn828[1,0]", "x-cache": "HIT TCP_IMS_HIT dirn:0:324628806", "x-swift-cachetime": "86400", "x-swift-savetime": "Tue, 21 Apr 2020 06:09:24 GMT" }, "config": { "transformRequest": {}, "transformResponse": {}, "timeout": 0, "xsrfCookieName": "XSRF-TOKEN", "xsrfHeaderName": "X-XSRF-TOKEN", "maxContentLength": -1, "headers": { "Accept": "application/json, text/plain, */*" }, "method": "get", "url": "https://www.runoob.com/try/ajax/json_demo.json" }, "request": {} }
```

### response.data è·å– json æ•°æ®

ä½¿ç”¨ **`response.data`** è¯»å– JSON æ•°æ®ï¼š

```html
<body>
<div id="app">
  <h1>ç½‘ç«™åˆ—è¡¨</h1>
  <div
    v-for="site in info"
  >
    {{ site.name }}
  </div>
</div>
<script type = "text/javascript">
new Vue({
  el: '#app',
  data () {
    return {
      info: null
    }
  },
  mounted () {
    axios
      .get('https://www.runoob.com/try/ajax/json_demo.json')
      .then(response => (this.info = response.data.sites))
      .catch(function (error) { // è¯·æ±‚å¤±è´¥å¤„ç†
        console.log(error);
      });
  }
})
</script>
</body>
```

è¿è¡Œç»“æœï¼š

```
ç½‘ç«™åˆ—è¡¨
Google
Runoob
Taobao
```

### GET æ–¹æ³•ä¼ é€’å‚æ•°

```js
// ç›´æ¥åœ¨ URL ä¸Šæ·»åŠ å‚æ•° ID=12345
axios.get('/user?ID=12345')
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
 
// ä¹Ÿå¯ä»¥é€šè¿‡ params è®¾ç½®å‚æ•°ï¼š
axios.get('/user', {
    params: {
      ID: 12345
    }
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
```



## 3. POST æ–¹æ³•

### å®ä¾‹

```js
new Vue({
  el: '#app',
  data () {
    return {
      info: null
    }
  },
  mounted () {
    axios
      .post('https://www.runoob.com/try/ajax/demo_axios_post.php')
      .then(response => (this.info = response))
      .catch(function (error) { // è¯·æ±‚å¤±è´¥å¤„ç†
        console.log(error);
      });
  }
})
```

### POST æ–¹æ³•ä¼ é€’å‚æ•°

```js
axios.post('/user', {
    firstName: 'Fred',        // å‚æ•° firstName
    lastName: 'Flintstone'    // å‚æ•° lastName
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });
```


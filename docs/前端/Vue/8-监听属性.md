# ğŸ³ Vue.js ç›‘å¬å±æ€§ watch

---

å…³é”®å­—ï¼š`watch`

æˆ‘ä»¬å¯ä»¥é€šè¿‡ `watch `æ¥å“åº”æ•°æ®çš„å˜åŒ–ã€‚

è™½ç„¶è®¡ç®—å±æ€§åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ›´åˆé€‚ï¼Œä½†æœ‰æ—¶ä¹Ÿéœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰çš„ä¾¦å¬å™¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Vue é€šè¿‡ `watch` é€‰é¡¹æä¾›äº†ä¸€ä¸ªæ›´é€šç”¨çš„æ–¹æ³•ï¼Œæ¥å“åº”æ•°æ®çš„å˜åŒ–ã€‚å½“éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œè¿™ä¸ªæ–¹å¼æ˜¯æœ€æœ‰ç”¨çš„ã€‚

## å®ä¾‹ 1ï¼šä½¿ç”¨ watch å®ç°è®¡æ•°å™¨


```html
<body>
    <div id = "app">
     <p style = "font-size:25px;">è®¡æ•°å™¨: {{ counter }}</p>
     // ç»‘å®šç‚¹å‡»äº‹ä»¶
     <button @click = "counter++" style = "font-size:25px;">ç‚¹æˆ‘</button>
    </div>
    <script type = "text/javascript">
     var vm = new Vue({
        el: '#app',
        data: {
           counter: 1
        }
     });
      // ç›‘å¬ï¼šå¦‚æœcounterå‘ç”Ÿæ”¹å˜ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¿è¡Œ
     vm.$watch('counter', function(nval, oval) {
         // oval æ—§å€¼ï¼Œ nval æ–°å€¼
        alert('è®¡æ•°å™¨å€¼çš„å˜åŒ– :' + oval + ' å˜ä¸º ' + nval + '!');
     });
    </script>
</body>
```
ğŸƒâ€ è¿è¡Œç»“æœï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200804095512.png" style="zoom:80%;" />

![](https://gitee.com/veal98/images/raw/master/img/20200804095502.png)

## å®ä¾‹ 2ï¼šwatch ç›‘å¬ åƒç±³å’Œç±³äº’æ¢


```html
 <body>
    <div id = "computed_props">
    // v-modelåŒå‘ç»‘å®š
     åƒç±³ : <input type = "text" v-model = "kilometers">
     ç±³ : <input type = "text" v-model = "meters">
    </div>
    <p id="info"></p>
    <script type = "text/javascript">
     var vm = new Vue({
        el: '#computed_props',
        data: {
           kilometers : 0,
           meters:0
        },
         // ç›‘å¬ï¼šå¦‚æœkilometersæˆ–è€…meters å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¿®æ”¹å¦ä¸€ä¸ªä¸ºå¯¹åº”å€¼
        watch : {
           kilometers:function(val) {
              this.kilometers = val;
              this.meters = this.kilometers * 1000
           },
           meters : function (val) {
              this.meters = val;
              this.kilometers = val / 1000;
           }
        }
     });
     // $watch æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•
    vm.$watch('kilometers', function (newValue, oldValue) {
        // è¿™ä¸ªå›è°ƒå°†åœ¨ vm.kilometers æ”¹å˜åè°ƒç”¨
        document.getElementById ("info").innerHTML = "ä¿®æ”¹å‰å€¼ä¸º: " + oldValue + "ï¼Œä¿®æ”¹åå€¼ä¸º: " + newValue;
    })
    </script>
</body>
```
ğŸƒâ€ è¿è¡Œç»“æœï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200804100107.png)

`watch `å¯¹è±¡åˆ›å»ºäº†ä¸¤ä¸ªæ–¹æ³• `kilometers `å’Œ `meters`ã€‚å½“æˆ‘ä»¬åœ¨è¾“å…¥æ¡†è¾“å…¥æ•°æ®æ—¶ï¼Œ`watch` ä¼šå®æ—¶ç›‘å¬æ•°æ®å˜åŒ–å¹¶æ”¹å˜è‡ªèº«çš„å€¼

## ğŸ“š References

- ğŸ¦ [èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/vue2)

- ğŸ“˜ [Vue å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/v2/guide)
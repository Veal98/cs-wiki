# ğŸ¥Š JPA è¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»è¯¦è§£

---

## 1. ä¸€å¯¹ä¸€ @OneToOne

### â‘  å•å‘ä¸€å¯¹ä¸€æ˜ å°„

âšª **å•å‘ä¸€å¯¹ä¸€æ˜¯å…³è”å…³ç³»æ˜ å°„ä¸­æœ€ç®€å•çš„ä¸€ç§ï¼Œç®€å•åœ°è¯´å°±æ˜¯å¯ä»¥ä»å…³è”çš„ä¸€æ–¹å»æŸ¥è¯¢å¦ä¸€æ–¹ï¼Œå´ä¸èƒ½åå‘æŸ¥è¯¢**ã€‚

#### â…  é€šè¿‡å¤–é”®çš„æ–¹å¼çš„ä¿å­˜ä¸€å¯¹ä¸€å…³ç³»

æˆ‘ä»¬ç”¨ä¸‹é¢çš„ä¾‹å­æ¥ä¸¾ä¾‹è¯´æ˜ï¼Œ`Person` å®ä½“ç±»å’Œçš„ `Address` ç±»å°±æ˜¯è¿™ç§å•å‘çš„ä¸€å¯¹ä¸€å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥è¯¢ä¸€ä¸ª `Person` çš„å¯¹åº”çš„ `Address` çš„å†…å®¹ï¼Œä½†æ˜¯æˆ‘ä»¬å´ä¸èƒ½ç”±ä¸€ä¸ª `Address` çš„å€¼å»æŸ¥è¯¢è¿™ä¸ªå€¼å¯¹åº”çš„ `Person`ã€‚

**å•å‘ä¸€å¯¹ä¸€å…³ç³»çš„æ‹¥æœ‰ç«¯**ï¼š

```java
@Entity 
public class Person { 
   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private int age; 
    
   @OneToOne 
   private Address address; 
 
   // Getter And Setter
}
```

**å•å‘ä¸€å¯¹ä¸€å…³ç³»çš„åç«¯**ï¼š

```java
@Entity 
public class Address { 
   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String street; 
   private String city; 
   private String country; 
    
   // Getter And Setter
}
```

ğŸ¨ å•å‘ä¸€å¯¹ä¸€å…³ç³»å¯¹åº”çš„ ER å›¾ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200825122250.png" style="zoom:60%;" />

ä» ER å›¾ä¸Šå¯ä»¥çœ‹å‡ºï¼Œâ­ **è¿™ç§å•å‘çš„ä¸€å¯¹ä¸€å…³ç³»åœ¨æ•°æ®åº“ä¸­æ˜¯é»˜è®¤ä»¥å¤–é”®çš„å½¢å¼è¢«æ˜ å°„çš„**ï¼ˆä¸‹é¢æˆ‘ä»¬è¿˜ä¼šä»‹ç»ä¸€ç§é€šè¿‡å»ºç«‹å…³è”è¡¨çš„æ–¹å¼æ¥ä¿å­˜ä¸€å¯¹ä¸€çš„å…³ç³»ï¼‰ã€‚å…¶ä¸­å…³ç³»çš„å‘å‡ºç«¯å­˜å‚¨ä¸€ä¸ªæŒ‡å‘å…³ç³»çš„æ¥æ”¶ç«¯çš„ä¸€ä¸ªå¤–é”®ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ `Person` è¡¨ä¸­çš„ `ADDRESS_ID` å°±æ˜¯**æŒ‡å‘ `address` è¡¨ä¸»é”®çš„ä¸€ä¸ªå¤–é”®**ã€‚ç¼ºçœæƒ…å†µä¸‹è¿™ä¸ªå¤–é”®çš„å­—æ®µåç§°æ˜¯ä»¥å®ƒ**æŒ‡å‘çš„è¡¨çš„åç§°åŠ ä¸‹åˆ’çº¿â€œ_â€åŠ â€œIDâ€ç»„æˆçš„**ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®æˆ‘ä»¬çš„å–œå¥½æ¥ä¿®æ”¹è¿™ä¸ªå­—æ®µï¼Œä¿®æ”¹çš„åŠæ³•å°±æ˜¯ä½¿ç”¨ `@JoinColumn` è¿™ä¸ªæ³¨è§£ ğŸ‘‡

```java
@Entity 
public class Person { 
   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private int age; 
   @OneToOne 
   // è¡¨ç¤ºå°†è¡¨ addres çš„ä¸»é”®ä½œä¸º person è¡¨çš„å¤–é”®å¹¶å‘½åä¸º aid
   @JoinColumn(name="aid") 
   private Address address; 
 
   // Getter And Setter
}
```

**é»˜è®¤æƒ…å†µä¸‹æ˜¯å°†å…³è”å®ä½“çš„ä¸»é”®ä½œä¸ºå¤–é”®çš„**ã€‚ä½†å¦‚æœæƒ³æ›´æ¢å¤–é”®ï¼Œåˆ™éœ€è¦**è®¾ç½® `referencedColumnName` å±æ€§æŒ‡æ˜å°†å“ªä¸€åˆ—ä½œä¸ºå¤–é”®**ï¼š

```java
@OneToOne 
// è¡¨ç¤ºå°†è¡¨ addres çš„ street åˆ—ä½œä¸º person è¡¨çš„å¤–é”®å¹¶å‘½åä¸º astreet
@JoinColumn(name="astreet", referencedColumnName="street") 
private Address address; 
```

#### â…¡ é€šè¿‡å…³è”è¡¨çš„æ–¹å¼ä¿å­˜ä¸€å¯¹ä¸€å…³ç³»

```java
@Entity 
public class Person { 
   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private int age; 
   @OneToOne 
   // è¡¨ç¤ºå°†è¡¨ addres çš„ä¸»é”®ä½œä¸º person è¡¨çš„å¤–é”®å¹¶å‘½åä¸º aid
   @JoinTable(name="person_address", 
              joinColumns= @JoinColumn(name="pid"), 
              inverseJoinColumns = @JoinColumns(name="aid"))
   private Address address; 
 
   // Getter And Setter
}
```

â­ ä»¥ä¸Š `@JoinTable` æ³¨è§£è¡¨ç¤ºç”Ÿæˆä¸€ä¸ª person_address è¡¨ï¼Œè¯¥è¡¨åŒ…å« Person è¡¨çš„ä¸»é”®ï¼ˆid) å’Œ Adress è¡¨çš„ä¸»é”®ï¼ˆid)ï¼Œåˆ†åˆ«ä»¥ pid å’Œ aid ä½œä¸ºåˆ—åã€‚

### â‘¡ åŒå‘ä¸€å¯¹ä¸€æ˜ å°„

åŒå‘å…³ç³»æœ‰ä¸€æ–¹ä¸ºå…³ç³»çš„æ‹¥æœ‰ç«¯ï¼Œå¦ä¸€æ–¹æ˜¯å…³ç³»çš„åç«¯ï¼Œä¹Ÿå°±æ˜¯â€œInverseâ€ç«¯ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ `Person` æ‹¥æœ‰è¿™ä¸ªå…³ç³»ï¼Œè€Œ `Address` å°±æ˜¯å…³ç³»çš„â€œInverseâ€ç«¯ã€‚`Address` ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª `person` å±æ€§ï¼Œåœ¨è¿™ä¸ªå±æ€§ä¸Šæˆ‘ä»¬**ä½¿ç”¨äº† `@OneToOne` æ³¨è§£å¹¶ä¸”å®šä¹‰äº†ä»–çš„ `mappedBy` å±æ€§ï¼Œè¿™ä¸ªåœ¨åŒå‘å…³ç³»çš„ â€œInverseâ€ ç«¯æ˜¯å¿…éœ€çš„**ï¼š

**åŒå‘ä¸€å¯¹ä¸€å…³ç³»çš„æ‹¥æœ‰ç«¯**ï¼š

```java
@Entity 
public class Person { 
   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private int age; 
   @OneToOne 
   private Address address; 
 
   // Getter And Setter
}
```

**åŒå‘ä¸€å¯¹ä¸€å…³ç³»ä¸­çš„æ¥å—ï¼ˆInverseï¼‰ç«¯**ï¼š

```java
@Entity 
public class Address {
   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String street; 
   private String city; 
   private String country; 
    
   @OneToOne(mappedBy = "address") 
   private Person person; 
   
   // Getter And Setter
 
}
```

###  â‘¢ @OnetoOne å±æ€§è¯¦è§£

`@OnetoOne` æ³¨è§£å¯è®¾ç½®çš„å±æ€§æœ‰ 6 ä¸ªï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200825175919.png)

- `targetEntity`ï¼š**å®šä¹‰å…³è”ç±»çš„ç±»å‹**ï¼Œé»˜è®¤æ˜¯è¯¥æˆå‘˜å±æ€§å¯¹åº”çš„ç±»ç±»å‹ï¼Œæ‰€ä»¥é€šå¸¸ä¸éœ€è¦æä¾›å®šä¹‰ã€‚ 

- `cascade`ï¼š**å®šä¹‰ç±»å’Œç±»ä¹‹é—´çš„çº§è”å…³ç³»**ã€‚å®šä¹‰çš„çº§è”å…³ç³»å°†è¢«å®¹å™¨è§†ä¸ºå¯¹å½“å‰ç±»å¯¹è±¡åŠå…¶å…³è”ç±»å¯¹è±¡é‡‡å–ç›¸åŒçš„æ“ä½œï¼Œ è€Œä¸”è¿™ç§å…³ç³»æ˜¯é€’å½’è°ƒç”¨çš„ã€‚cascade çš„å–å€¼åªèƒ½ä»ä¸‹é¢ 4 ä¸ªä¸­é€‰å–ä¸€ä¸ªæˆ–å¤šä¸ªï¼š

  - `CascadeType.PERSIST`ï¼ˆçº§è”æ–°å»ºï¼‰
  - `CascadeType.REMOVE`ï¼ˆçº§è”åˆ é™¤ï¼‰
  - `CascadeType.REFRESH`ï¼ˆçº§è”åˆ·æ–°ï¼‰
  - `CascadeType.MERGE`ï¼ˆçº§è”æ›´æ–°ï¼‰ 

  è¿˜æœ‰ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ `CascadeType.ALL`ï¼Œè¡¨ç¤ºé€‰æ‹©å…¨éƒ¨å››é¡¹ã€‚ 

  ```java
  @Entity 
  public class Person { 
     @Id 
     @GeneratedValue(strategy = GenerationType.AUTO) 
     private Long id; 
     private String name; 
     private int age; 
      
     @OneToOne(cascade=CascadeType.ALL)
     private Address address; 
   
     // Getter And Setter
  }
  ```

- `fetchï¼š`FetchType ç±»å‹çš„å±æ€§ã€‚å¯é€‰æ‹©é¡¹åŒ…æ‹¬ï¼š`FetchType.EAGER` å’Œ `FetchType.LAZY`ã€‚ 
  - `FetchType.EAGER` è¡¨ç¤ºå…³è”ç±»åœ¨ä¸»ç±»åŠ è½½çš„æ—¶å€™åŒæ—¶åŠ è½½
  - `FetchType.LAZY` è¡¨ç¤ºå…³è”ç±»åœ¨è¢«è®¿é—®æ—¶æ‰åŠ è½½ã€‚é»˜è®¤å€¼æ˜¯ `FetchType.LAZY`ã€‚ 

- `mappedBy` ï¼šè¿™ä¸ªå±æ€§å·²ç»è¯´è¿‡äº†ï¼Œå°±æ˜¯ç”¨äºåŒå‘ä¸€å¯¹ä¸€æ˜ å°„ä¸­çš„ inverse ç«¯çš„

## 2. ä¸€å¯¹å¤š @OneToMany / å¤šå¯¹ä¸€ @ManyToOne

é€šä¿—æ¥è¯´ï¼Œ**ä¸€å¯¹å¤šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ä¸­åŒ…å«å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„é›†åˆï¼Œå¤šå¯¹ä¸€å°±æ˜¯å¤šä¸ªå¯¹è±¡å¯¹åº”å¦å¤–çš„åŒä¸€ä¸ªå¯¹è±¡**

è¿™ä¸¤ä¸ªæ³¨è§£ä½¿ç”¨æ–¹æ³•åŸºæœ¬ä¸€æœ¬ï¼Œä¸‹é¢ä»¥ ä¸€å¯¹å¤š `@OneToMany` ä¸¾ä¾‹ï¼š

### â‘  å•å‘ä¸€å¯¹å¤šæ˜ å°„

#### â…  é€šè¿‡å…³è”è¡¨çš„æ–¹å¼ä¿å­˜ä¸€å¯¹å¤šå…³ç³»

å•å‘å…³ç³»çš„ä¸€å¯¹å¤šæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹è¿°ä»£ç æ¥è¯´æ˜ã€‚åœ¨å…³ç³»çš„å‘å‡ºç«¯ `Person` ä¸­æˆ‘ä»¬ä½¿ç”¨ `@OneToMany` è¿™ä¸ªæ³¨è§£å¯¹ `cellPhones` è¿™ä¸ªå±æ€§è¿›è¡Œäº†æ³¨é‡Šï¼Œ`cellPhones` ä¸­å­˜å‚¨çš„æ˜¯ `CellPhone` çš„ä¸€ä¸ª `List` å¯¹è±¡ï¼ŒJPA å°±æ˜¯ç”¨è¿™ç§æ–¹å¼å®ç°ä¸€å¯¹å¤šçš„ï¼š

**å•å‘ä¸€å¯¹å¤šå…³ç³»çš„å‘å‡ºç«¯**ï¼š

```java
public class Person { 

   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private int age; 
    
   @OneToMany 
   private List<CellPhone> cellPhones; 
    
   // Getters and Setters 
}
```

**å•å‘ä¸€å¯¹å¤šå…³ç³»çš„æ¥æ”¶ç«¯**ï¼š

```java
@Entity 
public class CellPhone { 

   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String manufacture; 
   private String color; 
   private Long  phoneNo; 
    
   // Getters and Setters 
}
```

ğŸ¨ å•å‘ä¸€å¯¹å¤šå…³ç³»å¯¹åº”çš„ ER å›¾ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200825181831.png)

**åœ¨ä¸€å¯¹å¤šå…³è”å…³ç³»æ˜ å°„ä¸­ï¼Œé»˜è®¤æ˜¯ä»¥å…³è”è¡¨çš„æ–¹å¼æ¥æ˜ å°„è¿™ç§å…³ç³»çš„**ã€‚å¦‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä¸­é—´è¡¨ä¸º `person_cellphone`ï¼Œ<u>è¡¨çš„åç§°ä¸ºå…³ç³»çš„æ‹¥æœ‰ç«¯å’Œ Inverse ç«¯ä¸­é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥</u>ã€‚**ä¸­é—´è¡¨çš„å­—ä¸¤ä¸ªå­—æ®µåˆ†åˆ«ä¸ºä¸¤å¼ è¡¨çš„å¾—è¡¨ååŠ ä¸‹åˆ’çº¿â€œ_â€åŠ  ID ç»„æˆ**ã€‚

å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ”¹å˜è¿™ç§é»˜è®¤çš„ä¸­é—´è¡¨çš„æ˜ å°„æ–¹å¼ï¼Œ**æˆ‘ä»¬å¯ä»¥åœ¨å…³ç³»çš„æ‹¥æœ‰ç«¯ä½¿ç”¨ `@JoinClolum` æ¥ä½¿ç”¨å¤–é”®çš„æ–¹å¼æ˜ å°„è¿™ä¸ªå…³ç³»** ğŸ‘‡

#### â…¡ é€šè¿‡å¤–é”®çš„æ–¹å¼ä¿å­˜ä¸€å¯¹å¤šå…³ç³»

**åœ¨å…³ç³»çš„æ‹¥æœ‰ç«¯ä½¿ç”¨ `@JoinClolum` å³é€šè¿‡å¤–é”®çš„æ–¹å¼ä¿å­˜è¿™ä¸ªä¸€å¯¹å¤šå…³ç³»**ï¼š

```java
public class Person { 

   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private int age; 
    
   // å±æ€§åŒ @OneToOne
   @OneToMany(fetch=FetchType.LAZY,cascade=CascadeType.REMOVE) 
   // å°† cellPhone è¡¨çš„ä¸»é”®ä½œä¸º person è¡¨çš„å¤–é”®ï¼Œå¹¶å‘½åä¸º cellid
   @JoinColumn(name="cellid",) 
   private List<CellPhone> cellPhones; 
    
   // Getters and Setters 
}
```

æ­¤å¤„ ` @JoinColumn` çš„ç”¨æ³•åŒä¸Šé¢æˆ‘ä»¬åœ¨ä¸€å¯¹ä¸€æ˜ å°„æ—¶å€™è¯´çš„ï¼Œä¹Ÿå¯ä»¥è®¾ç½® `referencedColumnName` å±æ€§å°†å…¶ä»–åˆ—ä½œä¸ºå¤–é”®ã€‚

### â‘¡ åŒå‘ä¸€å¯¹å¤šæ˜ å°„

**åŒå‘ä¸€å¯¹å¤šå…³ç³»çš„æ¥å—ç«¯**ï¼š

```java
@Entity 
public class Person implements { 

   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private int age; 
  
   @OneToMany(mappedBy = "person") 
   private List<CellPhone> cellPhones; 
    
   // Getters and Setters 
}
```

**åŒå‘ä¸€å¯¹å¤šå…³ç³»çš„å‘å‡ºç«¯**ï¼š

```java
@Entity 
public class CellPhone { 
 
   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
    
   private String manufacture; 
   private String color; 
   private Long  phoneNo; 
    
   @ManyToOne 
   private Person person; 
    
   // Getters and Setters 
}
```

ğŸš¨ **ä¸€å¯¹å¤šçš„åŒå‘å…³ç³»ç”±å¤šç«¯(`CellPhone`)æ¥ç»´æŠ¤**ã€‚å°±æ˜¯è¯´å¤šç«¯(`CellPhone`)ä¸ºå…³ç³»ç»´æŠ¤ç«¯ï¼Œè´Ÿè´£å…³ç³»çš„å¢åˆ æ”¹æŸ¥ã€‚ä¸€ç«¯(`Person`)åˆ™ä¸ºå…³ç³»è¢«ç»´æŠ¤ç«¯ï¼Œä¸èƒ½ç»´æŠ¤å…³ç³»ã€‚

ğŸ’¬ çœ‹ä¸ªå®ä¾‹ï¼š

```java
@Entity
public class Author {
    @Id // ä¸»é”®
    @GeneratedValue(strategy = GenerationType.IDENTITY) // è‡ªå¢é•¿ç­–ç•¥
    private Long id; //id
    
    @Column(nullable = false, length = 20)
    private String name;//å§“å
    
    @OneToMany(mappedBy = "author",cascade=CascadeType.ALL,fetch=FetchType.LAZY)
    // çº§è”ä¿å­˜ã€æ›´æ–°ã€åˆ é™¤ã€åˆ·æ–°;å»¶è¿ŸåŠ è½½ã€‚å½“åˆ é™¤ç”¨æˆ·ï¼Œä¼šçº§è”åˆ é™¤è¯¥ç”¨æˆ·çš„æ‰€æœ‰æ–‡ç« 
    // æ‹¥æœ‰mappedByæ³¨è§£çš„å®ä½“ç±»ä¸ºå…³ç³»è¢«ç»´æŠ¤ç«¯
    // mappedBy="author"ä¸­çš„authoræ˜¯Articleä¸­çš„authorå±æ€§
    private List<Article> articleList; //æ–‡ç« åˆ—è¡¨
}
```

```java
@Entity
public class Article {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY) // è‡ªå¢é•¿ç­–ç•¥
    @Column(name = "id", nullable = false)
    private Long id;

    @Column(nullable = false, length = 50) 
    private String title;
    
    @Column(nullable = false) // æ˜ å°„ä¸ºå­—æ®µï¼Œå€¼ä¸èƒ½ä¸ºç©º
    private String content; //æ–‡ç« å…¨æ–‡å†…å®¹
    
    @ManyToOne(cascade={CascadeType.MERGE,CascadeType.REFRESH})
    //  å°† author è¡¨çš„ä¸»é”®ä½œä¸º article è¡¨çš„å¤–é”®ï¼Œå¹¶å‘½åä¸º author_id
    @JoinColumn(name="author_id") 
    private Author author;
}
```

## 3. å¤šå¯¹å¤š @ManyToMany

æ¯”å¦‚è¯´ç”¨æˆ·å’Œæƒé™å°±æ˜¯å¤šå¯¹å¤šçš„å…³ç³»ã€‚ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªæƒé™ï¼Œä¸€ä¸ªæƒé™ä¹Ÿå¯ä»¥è¢«å¾ˆå¤šç”¨æˆ·æ‹¥æœ‰ã€‚

â­ **å¤šå¯¹å¤šå…³è”å…³ç³»ä¸­åªèƒ½é€šè¿‡<u>å…³è”è¡¨</u>çš„æ–¹å¼è¿›è¡Œæ˜ å°„**

### â‘  å•å‘å¤šå¯¹å¤šæ˜ å°„

åœ¨ä¸‹é¢ä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨äº† `@ManyToMany` è¿™ä¸ªæ³¨è§£æ¥å¯¹ `Teacher` ä¸­çš„ `Students` è¿›è¡Œæ³¨é‡Šï¼Œå…¶ä¸­ `Teacher` å°±æ˜¯å…³ç³»çš„å‘å‡ºç«¯ã€‚è€Œåœ¨ `Student` ä¸­æˆ‘ä»¬å¹¶æ²¡æœ‰ä½œä»»ä½•å®šä¹‰ï¼Œè¿™æ˜¯å•å‘å¤šå¯¹å¤šçš„æ‰€è¦æ±‚çš„ã€‚

**å•å‘å¤šå¯¹å¤šå…³ç³»çš„å‘å‡ºç«¯**ï¼š

```java
@Entity 
public class Teacher { 

   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private Boolean gender; 
   private int age; 
   private int height; 
    
   @ManyToMany 
   private List<Student> students; 
    
   // Getters  and  Setters 
}
```

**å•å‘å¤šå¯¹å¤šå…³ç³»çš„ inverse ç«¯**ï¼š

```java
@Entity 
public class Student { 

   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private Boolean gender; 
   private int age; 
   private int height; 
    
   //Getters  and  Setters 
}
```

Teacher å¯¹åº”çš„æ•°æ®åº“è¡¨ï¼ˆæ²¡æœ‰ students å­—æ®µï¼‰ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200825185817.png)

Students å¯¹åº”çš„æ•°æ®åº“è¡¨ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200825185842.png)

ğŸ¨ ç”Ÿæˆçš„å…³è”è¡¨ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200825185918.png)

### â‘¡ åŒå‘å¤šå¯¹å¤šæ˜ å°„

åŒå‘å¤šå¯¹å¤šå…³ç³»çš„æ‹¥æœ‰ç«¯ï¼š

```java
@Entity 
public class Teacher { 
   
   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private Boolean gender; 
   private int age; 
   private int height; 
    
   @ManyToMany 
   private List<Student> students; 
    
   // Getters  and  Setters 
}
```

åŒå‘å¤šå¯¹å¤šå…³ç³»çš„ inverse ç«¯ï¼š

```java
@Entity 
public class Student { 

   @Id 
   @GeneratedValue(strategy = GenerationType.AUTO) 
   private Long id; 
   private String name; 
   private Boolean gender; 
   private int age; 
   private int height; 
    
   @ManyToMany(mappedBy = "students") 
   private List<Teacher> teachers; 
    
   //Getters  and  Setters 
}
```

ğŸ¨ åŒå‘å¤šå¯¹å¤šå…³ç³»å¯¹åº”çš„ ER å›¾ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200825190205.png)

## ğŸ“š References

- [W3Cschool â€” JPA æ•™ç¨‹](https://www.w3cschool.cn/java/jpa-onetoone-map.html)

- [å®ä½“å…³ç³»ä¹‹@OneToOne](https://www.iteye.com/blog/lym6520-311030)

- [Hibernateï¼ŒJPA å¯¹è±¡å…³ç³»æ˜ å°„ä¹‹å…³è”å…³ç³»æ˜ å°„ç­–ç•¥](https://www.ibm.com/developerworks/cn/java/j-lo-jparelated/index.html)

- [Spring Data JPA ä¹‹ ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šï¼Œå¤šå¯¹å¤š å…³ç³»æ˜ å°„](https://blog.csdn.net/johnf_nash/article/details/80642581)

  
# ğŸ›’ JPA å®ä½“ç±»æ˜ å°„åˆ°æ•°æ®åº“è¡¨çš„åŸºæœ¬æ³¨è§£

---

## 1. @Table

**å½“å®ä½“ç±»ä¸å…¶æ˜ å°„çš„æ•°æ®åº“è¡¨åä¸åŒåæ—¶éœ€è¦ä½¿ç”¨ `@Table` æ³¨è§£ç”¨äºæŒ‡æ˜æ•°æ®åº“è¡¨çš„è¡¨å**ï¼Œè¯¥æ³¨è§£ä¸ `@Entity` æ³¨è§£å¹¶åˆ—ä½¿ç”¨ã€‚

`@Table` å¸¸ç”¨é€‰é¡¹æ˜¯ `name`ï¼Œç”¨äºæŒ‡æ˜æ•°æ®åº“çš„è¡¨åï¼Œ**è‹¥ä¸æŒ‡å®šåˆ™ä»¥å®ä½“ç±»åç§°ä½œä¸ºè¡¨å**ï¼š

ğŸ’¬ ä¸æŒ‡å®š `name`ï¼š

```java
@Table // ä¸æŒ‡å®š nameï¼Œåˆ™æ•°æ®åº“è¡¨åä¸º customer
@Entity
public class Customer {
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Integer id;
    private String name;
    private String email;
    private int age;
    ......
}
```

ç”Ÿæˆçš„æ•°æ®åº“è¡¨ DDLï¼š

```sql
CREATE TABLE `customer` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Age` int(11) DEFAULT NULL,
  `Email` varchar(255) DEFAULT NULL,
  `Name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

ğŸ’¬ æŒ‡å®š `name`ï¼š

```java
@Table(name="hello") // å¯¹åº”æ•°æ®åº“è¡¨ hello
@Entity
public class Customer {
    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Integer id;
    private String name;
    private String email;
    private int age;
    ......
}
```

ç”Ÿæˆçš„æ•°æ®åº“è¡¨ DDLï¼š

```sql
CREATE TABLE `hello` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `Age` int(11) DEFAULT NULL,
  `Email` varchar(255) DEFAULT NULL,
  `Name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
```

> ğŸ’¡ æˆ‘ä¸ªäººä¹ æƒ¯ä¸ç®¡ç›¸ä¸ç›¸åŒï¼Œéƒ½å†™ä¸Š `@Table(name="xxx")`ï¼Œæ–¹ä¾¿é˜…è¯»~

å½“å°† Java Bean å­—æ®µæ˜ å°„åˆ°æ•°æ®åº“åˆ—æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®ä½“ç±»ä¸­é€šè¿‡æ³¨è§£æ¥è®¾ç½®æ•°æ®åº“è¡¨ä¸­çš„åˆ—å®šä¹‰ ğŸ‘‡

## 2. @Id

**`@Id` æ³¨è§£ç”¨äºå£°æ˜ä¸€ä¸ªå®ä½“ç±»çš„å±æ€§æ˜ å°„ä¸ºæ•°æ®åº“çš„ä¸»é”®åˆ—**ï¼š

```java
@Entity
@Table(name="professor")
public class Professor {
  @Id
  private int id;
  private String name;
  private long wage;

  // Getter And Setter
```

ä¸Šé¢çš„ä»£ç å°†æ¥è‡ª Professor ç±»çš„ id å­—æ®µä½œä¸ºæ•°æ®åº“ä¸­çš„è¡¨ professor ä¸­çš„ä¸»é”®åˆ—ã€‚

**è¯¥æ³¨è§£ä¹Ÿæ”¾åœ¨ä¸»é”®å±æ€§çš„ Getter æ–¹æ³•ä¸Š**ï¼š

```java
@Entity
@Table(name="professor")
public class Professor {
  private int id;
  private String name;
  private long wage;

  @Id
  public int getId() {
      return id;
  }
    
  ......
```

## 3. @GeneratedValue

**`@GeneratedValue` æ³¨è§£è¡¨ç¤ºå°† id å­—æ®µæ ‡è®°ä¸ºè‡ªåŠ¨ç”Ÿæˆçš„ä¸»é”®åˆ—**ã€‚ æ•°æ®åº“å°†åœ¨æ’å…¥æ—¶è‡ªåŠ¨ä¸º id å­—æ®µç”Ÿæˆä¸€ä¸ªå€¼åˆ°è¡¨ï¼š

```java
@Entity
@Table(name="professor")
public class Professor {
  @Id
  @GeneratedValue
  private int id;
  private String name;
  private long wage;

  // Getter And Setter
```

ä¸€èˆ¬ä¼šä¸º `@GeneratedValue` æŒ‡å®šä¸€ä¸ª**ç”Ÿæˆç­–ç•¥**ï¼š

- `IDENTITY`ï¼šé‡‡ç”¨æ•°æ®åº“ ID **è‡ªå¢é•¿**çš„æ–¹å¼æ¥è‡ªå¢ä¸»é”®å­—æ®µï¼ŒOracle ä¸æ”¯æŒè¿™ç§æ–¹å¼ï¼› 
- `AUTO`ï¼š JPA è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç­–ç•¥ï¼Œæ˜¯é»˜è®¤é€‰é¡¹ï¼› 
- `SEQUENCE`ï¼šé€šè¿‡åºåˆ—äº§ç”Ÿä¸»é”®ï¼Œé€šè¿‡ `@SequenceGenerator` æ³¨è§£æŒ‡å®šåºåˆ—åï¼ŒMySql ä¸æ”¯æŒè¿™ç§æ–¹å¼
- `TABLE`ï¼šé€šè¿‡è¡¨äº§ç”Ÿä¸»é”®ï¼Œæ¡†æ¶å€Ÿç”±è¡¨æ¨¡æ‹Ÿåºåˆ—äº§ç”Ÿä¸»é”®ï¼Œä½¿ç”¨è¯¥ç­–ç•¥å¯ä»¥ä½¿åº”ç”¨æ›´æ˜“äºæ•°æ®åº“ç§»æ¤ã€‚

```java
@Entity
@Table(name="professor")
public class Professor {
  @Id
  @GeneratedValue(strategy=GenerationType.IDENTITY)
  private int id;
  private String name;
  private long wage;

  // Getter And Setter
```

ä¸Šé¢çš„ä»£ç å°†æ¥è‡ª Professor ç±»çš„ id å­—æ®µä½œä¸ºæ•°æ®åº“ä¸­çš„è¡¨ professor ä¸­çš„ä¸»é”®åˆ—ï¼Œå¹¶ä¸” id è‡ªå¢é•¿ã€‚

**åŒæ ·çš„ï¼Œè¯¥æ³¨è§£ä¹Ÿå¯ä»¥æ”¾åœ¨ä¸»é”®å±æ€§çš„ Getter æ–¹æ³•ä¸Š**ï¼š

```java
@Entity
@Table(name="professor")
public class Professor {

  private int id;
  private String name;
  private long wage;
	
  @Id
  @GeneratedValue(strategy=GenerationType.IDENTITY)
  public int getId() {
      return id;
  }
  
  ......
}
```

ä½†æ˜¯**ä¸èƒ½**æŸä¸ªæ³¨è§£åœ¨å±æ€§ä¹‹ä¸Šï¼ŒæŸä¸ªæ³¨è§£åœ¨ Getter ä¹‹ä¸Šï¼Œå°†æŠ›å‡ºå¼‚å¸¸ï¼š

```java
/**
* é”™è¯¯ç¤ºä¾‹
**/
@Entity
@Table(name="professor")
public class Professor {
    
  @Id
  private int id;
  private String name;
  private long wage;
	
  
  @GeneratedValue(strategy=GenerationType.IDENTITY)
  public int getId() {
      return id;
  }
  
  ......
}
```

## 4. @Column

### â‘  è®¾ç½®åˆ—å

**é»˜è®¤æƒ…å†µä¸‹ï¼ŒJPA ä½¿ç”¨å­—æ®µåä½œä¸ºæ•°æ®åº“è¡¨åˆ—å**ã€‚æˆ‘ä»¬å¯ä»¥**ä½¿ç”¨ `@Column` æ³¨é‡Šæ¥æ›´æ”¹é»˜è®¤å€¼ã€‚**

ä»¥ä¸‹ä»£ç è®¾ç½® Java Bean ä¸­çš„ `salary` å­—æ®µå¯¹åº”æ•°æ®åº“è¡¨ä¸­çš„åˆ—  `sal`ï¼š

```java
@Column(name = "sal")
private int salary;
```

### â‘¡ è®¾ç½®åˆ—é•¿åº¦

ä¾‹å¦‚ï¼Œå½“å°†å­—ç¬¦ä¸²å­—æ®µæ˜ å°„åˆ° `VARCHAR` æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `@Column ` æ³¨é‡Šä¸­è®¾ç½® `VARCHAR` é•¿åº¦ï¼š

```java
@Column(length=40)
private String name;
```

### â‘¢ è®¾ç½®åˆ—ç²¾åº¦èŒƒå›´

å½“å°† `float` æˆ– `double` å€¼æ˜ å°„åˆ°æ•°æ®åº“è¡¨åˆ—æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æ•°å­—ç±»å‹åˆ—çš„ç²¾åº¦å’Œå°ºåº¦ã€‚

ä»¥ä¸‹ä»£ç å°†æµ®ç‚¹å€¼æ˜ å°„åˆ°å…·æœ‰ç²¾åº¦ 8 å’Œå°ºåº¦ 2 çš„æ•°æ®åº“è¡¨åˆ—ï¼š

```java
@Column(precision=8, scale=2) 
private float hourlyRate;
```

### â‘£ è®¾ç½®åˆ—å”¯ä¸€ / å¯ç©º

æˆ‘ä»¬å¯ä»¥è®¾ç½®æ˜ å°„åˆ—æ˜¯å¦å¯ä»¥å…·æœ‰ç©ºå€¼æˆ–è€…åˆ—æ˜¯å¦åº”è¯¥å…·æœ‰å”¯ä¸€å€¼ã€‚

```java
@Column(name="my_name", unique=true, nullable=false) 
private String name;
```

ä¸Šé¢çš„ä»£ç å°† name åˆ—è®¾ç½®ä¸ºå”¯ä¸€ä¸”ä¸èƒ½ä¸ºç©ºå€¼ã€‚

## 5. @Transient

**å¦‚æœæˆ‘ä»¬ä¸æƒ³å°†å±æ€§ä¿å­˜åˆ°æ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨ `@Transient` æ³¨é‡Šæ ‡è®°è¯¥å­—æ®µ**ã€‚

å¦‚æœä¸€ä¸ªå±æ€§å¹¶éæ•°æ®åº“è¡¨çš„å­—æ®µæ˜ å°„,å°±åŠ¡å¿…å°†å…¶æ ‡ç¤ºä¸º `@Transient`ï¼š

```java
@Entity
@Table(name="professor")
public class Professor {
  @Id
  @GeneratedValue(strategy=GenerationType.IDENTITY)
  private int id;
  private String name;
  private long salary;
  @Transient 
  private String convertedName;
```

## ğŸ“š References

- [W3Cschool â€” JPA æ•™ç¨‹](https://www.w3cschool.cn/java/jpa-onetoone-map.html)

- [JPA @Id @GeneratedValue è¯¦è§£](https://blog.csdn.net/coding1994/article/details/79597057)

- [JPA @Table æ³¨è§£è¯¦è§£](https://www.cnblogs.com/powerwu/articles/8258015.html)

- [JPAä¹‹@Transient](https://www.cnblogs.com/xuwenjin/p/8832118.html)

  
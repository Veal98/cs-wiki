# ğŸ“Š äº”å¤§æ•°æ®ç±»å‹

---

Redis æ˜¯ä¸€ä¸ªå¼€æºï¼ˆBSDè®¸å¯ï¼‰çš„ï¼Œå†…å­˜ä¸­çš„æ•°æ®ç»“æ„å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒå¯ä»¥ç”¨ä½œ**æ•°æ®åº“**ã€**ç¼“å­˜**å’Œ**æ¶ˆæ¯ä¸­é—´ä»¶MQ**ã€‚ å®ƒæ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œå¦‚ å­—ç¬¦ä¸²ï¼ˆstringsï¼‰ï¼Œ æ•£åˆ—ï¼ˆhashesï¼‰ï¼Œ åˆ—è¡¨ï¼ˆlistsï¼‰ï¼Œ é›†åˆï¼ˆsetsï¼‰ï¼Œ æœ‰åºé›†åˆï¼ˆsorted setsï¼‰ ä¸èŒƒå›´æŸ¥è¯¢ï¼Œ bitmapsï¼Œ hyperloglogs å’Œ åœ°ç†ç©ºé—´ï¼ˆgeospatialï¼‰ ç´¢å¼•åŠå¾„æŸ¥è¯¢ã€‚ Redis å†…ç½®äº† å¤åˆ¶ï¼ˆreplicationï¼‰ï¼ŒLUAè„šæœ¬ï¼ˆLua scriptingï¼‰ï¼Œ LRUé©±åŠ¨äº‹ä»¶ï¼ˆLRU evictionï¼‰ï¼Œäº‹åŠ¡ï¼ˆtransactionsï¼‰ å’Œä¸åŒçº§åˆ«çš„ ç£ç›˜æŒä¹…åŒ–ï¼ˆpersistenceï¼‰ï¼Œ å¹¶é€šè¿‡Rediså“¨å…µï¼ˆSentinelï¼‰å’Œè‡ªåŠ¨ åˆ†åŒºï¼ˆClusterï¼‰æä¾›é«˜å¯ç”¨æ€§ï¼ˆhigh availabilityï¼‰ã€‚

**Redis äº”å¤§åŸºæœ¬æ•°æ®ç±»å‹**ï¼š

- String
- List
- Set
- Hash
- Zset

## 1. Redis é”® (key) å‘½ä»¤

**Redis é”®å‘½ä»¤ç”¨äºç®¡ç† redis çš„é”®**ã€‚

ğŸ“œ Redis é”®å‘½ä»¤çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š

```powershell
127.0.0.1:6379 > select 1 # é€‰æ‹© 1 å·æ•°æ®åº“

127.0.0.1:6379[1]> keys * # æŸ¥çœ‹æ‰€æœ‰çš„key
(empty list or set)
127.0.0.1:6379[1]> set name smallbeef # set key
OK
127.0.0.1:6379[1]> keys *
1) "name"
127.0.0.1:6379[1]> set age 1
OK
127.0.0.1:6379[1]> keys *
1) "age"
2) "name"

127.0.0.1:6379[1]> EXISTS name # åˆ¤æ–­å½“å‰çš„keyæ˜¯å¦å­˜åœ¨
(integer) 1
127.0.0.1:6379[1]> EXISTS name1
(integer) 0

127.0.0.1:6379[1]> move name 2 # ç§»é™¤å½“å‰çš„key
(integer) 1
127.0.0.1:6379[1]> keys *
1) "age"

127.0.0.1:6379[1]> set name yjc
OK
127.0.0.1:6379[1]> keys *
1) "age"
2) "name"
```

å¯ä»¥é€šè¿‡ clear æ¸…ç©ºå±å¹•ï¼š

```powershell
127.0.0.1:6379> clear
```



```powershell
127.0.0.1:6379> keys *
1) "age"
2) "name"
127.0.0.1:6379> get name
"yjc"
127.0.0.1:6379> EXPIRE name 10 # è®¾ç½®keyçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½æ˜¯ç§’
(integer) 1
127.0.0.1:6379> ttl name # æŸ¥çœ‹å½“å‰keyçš„å‰©ä½™æ—¶é—´
(integer) 4
127.0.0.1:6379> ttl name
(integer) -2
127.0.0.1:6379> get name
(nil)
127.0.0.1:6379> type name # æŸ¥çœ‹å½“å‰keyçš„ä¸€ä¸ªç±»å‹ï¼
none
127.0.0.1:6379> type age
string
```

##  2.  String å­—ç¬¦ä¸²

> ğŸ˜³ 90% çš„ Java ç¨‹åºå‘˜ä½¿ç”¨ Redis åªä¼šä½¿ç”¨ä¸€ä¸ª String ç±»å‹

### â‘  set / get / append / strlen

âœ **å‘½ä»¤ `set`ã€`get`ã€`APPEND`ã€`STRLEN` ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> set key1 v1 # è®¾ç½®å€¼
OK
127.0.0.1:6379> get key1 # è·å¾—å€¼
"v1"
127.0.0.1:6379> keys * # è·å¾—æ‰€æœ‰çš„key
1) "key1"
127.0.0.1:6379> EXISTS key1 # åˆ¤æ–­æŸä¸€ä¸ªkeyæ˜¯å¦å­˜åœ¨
(integer) 1
127.0.0.1:6379> APPEND key1 "hello" # è¿½åŠ å­—ç¬¦ä¸²ï¼Œå¦‚æœå½“å‰keyä¸å­˜åœ¨ï¼Œå°±ç›¸å½“äºset key
(integer) 7
127.0.0.1:6379> get key1
"v1hello"
127.0.0.1:6379> STRLEN key1 # è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼
(integer) 7
127.0.0.1:6379> APPEND key1 ",smallbeef"
(integer) 17
127.0.0.1:6379> STRLEN key1
(integer) 17
127.0.0.1:6379> get key1
"v1hello,smallbeef"
```

### â‘¡ incr / decr / incrby / decrby

âœ **å‘½ä»¤ `incr`ã€`decr` ã€`INCRBY`ï¼Œ`DECRBY`ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> set views 0 # åˆå§‹æµè§ˆé‡ä¸º0
OK
127.0.0.1:6379> get views
"0"
127.0.0.1:6379> incr views # è‡ªå¢1 æµè§ˆé‡å˜ä¸º1
(integer) 1
127.0.0.1:6379> incr views
(integer) 2
127.0.0.1:6379> get views
"2"
127.0.0.1:6379> decr views # è‡ªå‡1 æµè§ˆé‡-1
(integer) 1
127.0.0.1:6379> decr views
(integer) 0
127.0.0.1:6379> decr views
(integer) -1
127.0.0.1:6379> get views
"-1"
127.0.0.1:6379> INCRBY views 10 # å¯ä»¥è®¾ç½®æ­¥é•¿ï¼ŒæŒ‡å®šå¢é‡ï¼
(integer) 9
127.0.0.1:6379> INCRBY views 10
(integer) 19
127.0.0.1:6379> DECRBY views 5
(integer) 14
```

### â‘¢ getrange / setrange

âœ **å‘½ä»¤ `GETRANGE`ã€`SETRANGE`  ç¤ºä¾‹**ï¼š

```powershell
# å­—ç¬¦ä¸²èŒƒå›´ range
127.0.0.1:6379> set key1 "hello,smallbeef" # è®¾ç½® key1 çš„å€¼
OK
127.0.0.1:6379> get key1
"hello,smallbeef"
127.0.0.1:6379> GETRANGE key1 0 3 # æˆªå–å­—ç¬¦ä¸² [0,3]
"hell"
127.0.0.1:6379> GETRANGE key1 0 -1 # è·å–å…¨éƒ¨çš„å­—ç¬¦ä¸²(ä»0å¼€å§‹ï¼Œåˆ°å€’æ•°ç¬¬1ä¸ª) å’Œ get keyæ˜¯ä¸€æ ·çš„
"hello,kuangshen"

# æ›¿æ¢
127.0.0.1:6379> set key2 abcdefg
OK
127.0.0.1:6379> get key2
"abcdefg"
127.0.0.1:6379> SETRANGE key2 1 QR # æ›¿æ¢ä»æŒ‡å®šä½ç½® 1 å¼€å§‹çš„å­—ç¬¦ä¸²ï¼
(integer) 7
127.0.0.1:6379> get key2
"aQRdefg"
```

### â‘£ setex / setnx

âœ **å‘½ä»¤ `setex`ã€`setnx`  ç¤ºä¾‹**ï¼š

```powershell
# setex (set with expire) # è®¾ç½®è¿‡æœŸæ—¶é—´
# setnx (set if not exist) # ä¸å­˜åœ¨åœ¨è®¾ç½® ï¼ˆåœ¨åˆ†å¸ƒå¼é”ä¸­ä¼šå¸¸å¸¸ä½¿ç”¨ï¼‰

127.0.0.1:6379> setex key3 30 "hello" # è®¾ç½®key3 çš„å€¼ä¸º hello,30ç§’åè¿‡æœŸ
OK
127.0.0.1:6379> ttl key3
(integer) 26

127.0.0.1:6379> setnx mykey "redis" # å¦‚æœmykey ä¸å­˜åœ¨ï¼Œåˆ›å»ºmykey
(integer) 1

127.0.0.1:6379> keys *
1) "key2"
2) "mykey"
3) "key1"

127.0.0.1:6379> setnx mykey "MongoDB" # å¦‚æœmykeyå­˜åœ¨ï¼Œåˆ›å»ºå¤±è´¥
(integer) 0
127.0.0.1:6379> get mykey
"redis"
```

### â‘¤ mset / mget / msetnx

âœ **å‘½ä»¤ `mset`ã€`mget`ï¼Œ`msetnx` ç¤ºä¾‹**ï¼š

```powershell
# mset
# mget

127.0.0.1:6379> mset k1 v1 k2 v2 k3 v3 # åŒæ—¶è®¾ç½®å¤šä¸ªå€¼
OK
127.0.0.1:6379> keys *
1) "k1"
2) "k2"
3) "k3"

127.0.0.1:6379> mget k1 k2 k3 # åŒæ—¶è·å–å¤šä¸ªå€¼
1) "v1"
2) "v2"
3) "v3"

127.0.0.1:6379> msetnx k1 v1 k4 v4 # msetnx æ˜¯ä¸€ä¸ªåŸå­æ€§çš„æ“ä½œï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥
(integer) 0
127.0.0.1:6379> get k4
(nil)

# å¯¹è±¡
set user:1 {name:zhangsan,age:3} # è®¾ç½®ä¸€ä¸ªuser:1 å¯¹è±¡ å€¼ä¸º jsonå­—ç¬¦æ¥ä¿å­˜ä¸€ä¸ªå¯¹è±¡ï¼
# è¿™é‡Œçš„keyæ˜¯ä¸€ä¸ªå·§å¦™çš„è®¾è®¡ï¼š user:{id}:{filed} , å¦‚æ­¤è®¾è®¡åœ¨Redisä¸­æ˜¯å®Œå…¨OKäº†ï¼

127.0.0.1:6379> mset user:1:name zhangsan user:1:age 2
OK
127.0.0.1:6379> mget user:1:name user:1:age
1) "zhangsan"
2) "2"
```

### â‘¥ getset

âœ **å‘½ä»¤ `getset`  ç¤ºä¾‹**ï¼š

```powershell
# getset å…ˆgetç„¶ååœ¨set

127.0.0.1:6379> getset db redis # å¦‚æœä¸å­˜åœ¨å€¼ï¼Œåˆ™è¿”å› nil
(nil)
127.0.0.1:6379> get db
"redis"

127.0.0.1:6379> getset db mongodb # å¦‚æœå­˜åœ¨å€¼ï¼Œè·å–åŸæ¥çš„å€¼ï¼Œå¹¶è®¾ç½®æ–°çš„å€¼
"redis"
127.0.0.1:6379> get db
"mongodb"

```

## 3. List åˆ—è¡¨

<img src="https://gitee.com/veal98/images/raw/master/img/20200717094052.png" style="zoom: 67%;" />

æ‰€æœ‰çš„ `list `å‘½ä»¤éƒ½æ˜¯ç”¨ `l` å¼€å¤´çš„ï¼ŒRedis ä¸åŒºåˆ†å¤§å°å†™å‘½ä»¤

### â‘  lpush / rpush / lrange

âœ **å‘½ä»¤ `lpush`ã€`rpush`ã€`lrange` ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> LPUSH list one # å°†ä¸€ä¸ªå€¼æˆ–è€…å¤šä¸ªå€¼ï¼Œæ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨ ï¼ˆå·¦ï¼‰
(integer) 1
127.0.0.1:6379> LPUSH list two
(integer) 2
127.0.0.1:6379> LPUSH list three
(integer) 3
127.0.0.1:6379> LRANGE list 0 -1 # è·å–listä¸­çš„å…¨éƒ¨å€¼
1) "three"
2) "two"
3) "one"
127.0.0.1:6379> LRANGE list 0 1 # é€šè¿‡åŒºé—´è·å–å…·ä½“çš„å€¼ï¼
1) "three"
2) "two"
127.0.0.1:6379> Rpush list righr # å°†ä¸€ä¸ªå€¼æˆ–è€…å¤šä¸ªå€¼ï¼Œæ’å…¥åˆ°åˆ—è¡¨ä½éƒ¨ ï¼ˆå³ï¼‰
(integer) 4
127.0.0.1:6379> LRANGE list 0 -1
1) "three"
2) "two"
3) "one"
4) "righr"
```

### â‘¡ lpop / rpop

âœ **å‘½ä»¤ `Lpop`ã€`Rpop`  ç¤ºä¾‹**ï¼š

```powershell
# LPOP
# RPOP

127.0.0.1:6379> LRANGE list 0 -1
1) "three"
2) "two"
3) "one"
4) "righr"
127.0.0.1:6379> Lpop list # ç§»é™¤listçš„ç¬¬ä¸€ä¸ªå…ƒç´ 
"three"
127.0.0.1:6379> Rpop list # ç§»é™¤listçš„æœ€åä¸€ä¸ªå…ƒç´ 
"righr"
127.0.0.1:6379> LRANGE list 0 -1
1) "two"
2) "one"
```

### â‘¢ lindex

âœ **å‘½ä»¤ `Lindex`  ç¤ºä¾‹**ï¼š

```powershell
# Lindex

127.0.0.1:6379> LRANGE list 0 -1
1) "two"
2) "one"
127.0.0.1:6379> lindex list 1 # é€šè¿‡ä¸‹æ ‡è·å¾— list ä¸­çš„æŸä¸€ä¸ªå€¼ï¼
"one"
127.0.0.1:6379> lindex list 0
"two"
```

### â‘£ Llen

âœ **å‘½ä»¤ `Llen`  ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> Llen list # è¿”å›åˆ—è¡¨çš„é•¿åº¦
(integer) 2
```

### â‘¤ lrem

âœ **å‘½ä»¤ `Lrem`  ç¤ºä¾‹**ï¼š

```powershell
# Lrem

127.0.0.1:6379> LRANGE list 0 -1
1) "three"
2) "three"
3) "two"
4) "one"
127.0.0.1:6379> lrem list 1 one # ç§»é™¤listé›†åˆä¸­æŒ‡å®šä¸ªæ•°çš„valueï¼Œç²¾ç¡®åŒ¹é…
(integer) 1
127.0.0.1:6379> LRANGE list 0 -1
1) "three"
2) "three"
3) "two"
127.0.0.1:6379> lrem list 1 three
(integer) 1
127.0.0.1:6379> LRANGE list 0 -1
1) "three"
2) "two"
127.0.0.1:6379> Lpush list three
(integer) 3
127.0.0.1:6379> lrem list 2 three
(integer) 2
127.0.0.1:6379> LRANGE list 0 -1
1) "two"
```

### â‘¥ ltrim

âœ **å‘½ä»¤ `ltrim`  ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> keys *
(empty list or set)
127.0.0.1:6379> Rpush mylist "hello"
(integer) 1
127.0.0.1:6379> Rpush mylist "hello1"
(integer) 2
127.0.0.1:6379> Rpush mylist "hello2"
(integer) 3
127.0.0.1:6379> Rpush mylist "hello3"
(integer) 4
127.0.0.1:6379> ltrim mylist 1 2 # é€šè¿‡ä¸‹æ ‡æˆªå–æŒ‡å®šçš„é•¿åº¦ï¼Œè¿™ä¸ªliståªå‰©ä¸‹è¢«æˆªå–çš„å…ƒç´ 
OK
127.0.0.1:6379> LRANGE mylist 0 -1
1) "hello1"
2) "hello2"
```

### â‘¦ rpoplpush

âœ **å‘½ä»¤ `rpoplpush`  ç¤ºä¾‹**ï¼š

```powershell
 # rpoplpush ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå°†ä»–ç§»åŠ¨åˆ°æ–°çš„åˆ—è¡¨ä¸­

127.0.0.1:6379> rpush mylist "hello"
(integer) 1
127.0.0.1:6379> rpush mylist "hello1"
(integer) 2
127.0.0.1:6379> rpush mylist "hello2"
(integer) 3
127.0.0.1:6379> rpoplpush mylist myotherlist # ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå°†ä»–ç§»åŠ¨åˆ°æ–°çš„åˆ—è¡¨ä¸­
"hello2"
127.0.0.1:6379> lrange mylist 0 -1 # æŸ¥çœ‹åŸæ¥çš„åˆ—è¡¨
1) "hello"
2) "hello1"
127.0.0.1:6379> lrange myotherlist 0 -1 # æŸ¥çœ‹ç›®æ ‡åˆ—è¡¨ä¸­ï¼Œç¡®å®å­˜åœ¨æ”¹å€¼ï¼
1) "hello2"
```

### â‘§ lset

âœ **å‘½ä»¤ `lset`  ç¤ºä¾‹**ï¼š

```powershell
# lset å°†åˆ—è¡¨ä¸­æŒ‡å®šä¸‹æ ‡çš„å€¼æ›¿æ¢ä¸ºå¦å¤–ä¸€ä¸ªå€¼ï¼Œæ›´æ–°æ“ä½œ

127.0.0.1:6379> EXISTS list # åˆ¤æ–­è¿™ä¸ªåˆ—è¡¨æ˜¯å¦å­˜åœ¨
(integer) 0
127.0.0.1:6379> lset list 0 item # å°†ä¸‹æ ‡0çš„å€¼æ›¿æ¢ä¸º itemï¼Œå¦‚æœä¸å­˜åœ¨è¯¥åˆ—è¡¨æ›´æ–°å°±ä¼šæŠ¥é”™
(error) ERR no such key
127.0.0.1:6379> lpush list value1
(integer) 1
127.0.0.1:6379> LRANGE list 0 0
1) "value1"
127.0.0.1:6379> lset list 0 item # å¦‚æœå­˜åœ¨ï¼Œæ›´æ–°å½“å‰ä¸‹æ ‡çš„å€¼
OK
127.0.0.1:6379> LRANGE list 0 0
1) "item"
127.0.0.1:6379> lset list 1 other # å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šæŠ¥é”™
(error) ERR index out of range
```

### â‘¨ linsert

âœ **å‘½ä»¤ `linsert`  ç¤ºä¾‹**ï¼š

```powershell
# linsert å°†æŸä¸ªå…·ä½“çš„valueæ’å…¥åˆ°åˆ—è¡¨ä¸­æŸä¸ªå…ƒç´ çš„å‰é¢æˆ–è€…åé¢ï¼
127.0.0.1:6379> Rpush mylist "hello"
(integer) 1
127.0.0.1:6379> Rpush mylist "world"
(integer) 2
127.0.0.1:6379> LINSERT mylist before "world" "other"
(integer) 3
127.0.0.1:6379> LRANGE mylist 0 -1
1) "hello"
2) "other"
3) "world"
127.0.0.1:6379> LINSERT mylist after world new
(integer) 4
127.0.0.1:6379> LRANGE mylist 0 -1
1) "hello"
2) "other"
3) "world"
4) "new"
```

ğŸš€ **å°ç»“**ï¼š

- **List å…¶å®æ˜¯ä¸€ä¸ªé“¾è¡¨**ã€‚å¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°çš„é“¾è¡¨ï¼›å¦‚æœ keyå­˜åœ¨ï¼Œåˆ™æ–°å¢å†…å®¹ã€‚
- å¦‚æœç§»é™¤äº†æ‰€æœ‰å€¼ï¼Œç©ºé“¾è¡¨ï¼Œä¹Ÿä»£è¡¨ä¸å­˜åœ¨
- åœ¨ä¸¤è¾¹æ’å…¥æˆ–è€…æ”¹åŠ¨å€¼ï¼Œæ•ˆç‡æœ€é«˜ã€‚ ä¸­é—´å…ƒç´ ï¼Œç›¸å¯¹æ¥è¯´æ•ˆç‡ä¼šä½ä¸€ç‚¹ã€‚

## 4. Set é›†åˆ

ğŸš¨ **set ä¸­çš„å€¼æ˜¯ä¸èƒ½é‡å¤çš„**ã€‚

### â‘  sadd / smembers / sismember

âœ **å‘½ä»¤ `sadd` ã€ `smembers`ã€`sismember` ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> sadd myset "hello" # seté›†åˆä¸­æ·»åŠ åŒ€é€Ÿ
(integer) 1
127.0.0.1:6379> sadd myset "yjc"
(integer) 1
127.0.0.1:6379> sadd myset "love"
(integer) 1
127.0.0.1:6379> SMEMBERS myset # æŸ¥çœ‹æŒ‡å®šsetçš„æ‰€æœ‰å€¼
1) "hello"
2) "love"
3) "yjc"
127.0.0.1:6379> SISMEMBER myset hello # åˆ¤æ–­æŸä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯åœ¨seté›†åˆä¸­
(integer) 1
127.0.0.1:6379> SISMEMBER myset world
(integer) 0
```

### â‘¡ scard

âœ **å‘½ä»¤ `scard`  ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> scard myset # è·å–seté›†åˆä¸­çš„å†…å®¹å…ƒç´ ä¸ªæ•°ï¼
(integer) 3
```

### â‘¢ srem

âœ **å‘½ä»¤ `srem`  ç¤ºä¾‹**ï¼š

```powershell
# srem

127.0.0.1:6379> srem myset hello # ç§»é™¤seté›†åˆä¸­çš„æŒ‡å®šå…ƒç´ 
(integer) 1
127.0.0.1:6379> scard myset
(integer) 2
127.0.0.1:6379> SMEMBERS myset
1) "love"
2) "yjc"
```

### â‘£ srandmember

âœ **å‘½ä»¤ `srandmember`  ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> SMEMBERS myset
1) "love"
2) "yjc"
127.0.0.1:6379> SRANDMEMBER myset # éšæœºæŠ½é€‰å‡ºä¸€ä¸ªå…ƒç´ 
"love"
127.0.0.1:6379> SRANDMEMBER myset 2 # éšæœºæŠ½é€‰å‡ºæŒ‡å®šä¸ªæ•°çš„å…ƒç´ 
1) "love"
2) "yjc"
```

### â‘¤ spop

âœ **å‘½ä»¤ `spop`  ç¤ºä¾‹**ï¼š

```powershell
# éšæœºåˆ é™¤ key
127.0.0.1:6379> SMEMBERS myset
1) "lovekuangshen2"
2) "lovekuangshen"
3) "kuangshen"
127.0.0.1:6379> spop myset # éšæœºåˆ é™¤ä¸€äº›seté›†åˆä¸­çš„å…ƒç´ ï¼
"lovekuangshen2"
127.0.0.1:6379> spop myset
"lovekuangshen"
127.0.0.1:6379> SMEMBERS myset
1) "kuangshen"
```

### â‘¥ smove

âœ **å‘½ä»¤ `smove`  ç¤ºä¾‹**ï¼š

```powershell
# å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ª set é›†åˆ

127.0.0.1:6379> sadd myset "hello"
(integer) 1
127.0.0.1:6379> sadd myset "world"
(integer) 1
127.0.0.1:6379> sadd myset "kuangshen"
(integer) 1
127.0.0.1:6379> sadd myset2 "set2"
(integer) 1
127.0.0.1:6379> smove myset myset2 "kuangshen" # å°†ä¸€ä¸ªæŒ‡å®šçš„å€¼ï¼Œç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªseté›†åˆ
(integer) 1
127.0.0.1:6379> SMEMBERS myset
1) "world"
2) "hello"
127.0.0.1:6379> SMEMBERS myset2
1) "kuangshen"
2) "set2"
```

### â‘¦ sdiff / sinter / sunion

âœ **å‘½ä»¤ `sdiff`ã€  `sinter`ã€ `sunion` ç¤ºä¾‹**ï¼š

- å·®é›†ï¼š`sdiff`
- äº¤é›†ï¼š`sinter`
- å¹¶é›†ï¼š`sunion`

<img src="https://gitee.com/veal98/images/raw/master/img/20200717110354.png" style="zoom:88%;" />

## 5. Hash å“ˆå¸Œ

### â‘  hset / hget / hmset / hmget / hgetall / hdel

âœ **å‘½ä»¤ `hset`ã€  `hget`ã€ `hmset`ã€`hmget` ã€`hgetall`ã€`hdel`ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> hset myhash field1 yjc # åˆ›å»ºä¸€ä¸ªhashåä¸º myhashï¼Œæ•°æ® field1:yjc
(integer) 1
127.0.0.1:6379> hget myhash field1 # è·å–field1 å­—æ®µå€¼
"yjc"
127.0.0.1:6379> hmset myhash field1 hello field2 world # setå¤šä¸ª key-vlaue
OK
127.0.0.1:6379> hmget myhash field1 field2 # è·å–å¤šä¸ªå­—æ®µå€¼
1) "hello"
2) "world"
127.0.0.1:6379> hgetall myhash # è·å–å…¨éƒ¨çš„æ•°æ®
1) "field1"
2) "hello"
3) "field2"
4) "world"
127.0.0.1:6379> hdel myhash field1 # åˆ é™¤hashæŒ‡å®škeyå­—æ®µï¼å¯¹åº”çš„valueå€¼ä¹Ÿå°±æ¶ˆå¤±äº†ï¼
(integer) 1
127.0.0.1:6379> hgetall myhash
1) "field2"
2) "world"
```

### â‘¡ hlen

âœ **å‘½ä»¤ `hlen` ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> hmset myhash field1 hello field2 world
OK
127.0.0.1:6379> hgetall myhash
1) "field2"
2) "world"
3) "field1"
4) "hello"
127.0.0.1:6379> hlen myhash # è·å–hashè¡¨çš„å­—æ®µæ•°é‡
(integer) 2
```

### â‘¢ hexists

âœ **å‘½ä»¤ `hexists` ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> HEXISTS myhash field1 # åˆ¤æ–­hashä¸­æŒ‡å®šå­—æ®µæ˜¯å¦å­˜åœ¨ï¼
(integer) 1
127.0.0.1:6379> HEXISTS myhash field3
(integer) 0
```

### â‘£ hkeys / hvals

âœ **å‘½ä»¤ `hkeys`ã€`hvals` ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> hkeys myhash # åªè·å¾—æ‰€æœ‰field
1) "field2"
2) "field1"

127.0.0.1:6379> hvals myhash # åªè·å¾—æ‰€æœ‰value
1) "world"
2) "hello"
```

### â‘¤ hincrby / hdecrby / hsetnx

âœ **å‘½ä»¤ `hincrby`ã€`hdecrby`ã€`hsetnx`ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> hset myhash field3 5 
(integer) 1
127.0.0.1:6379> HINCRBY myhash field3 1 # æŒ‡å®šå¢é‡
(integer) 6
127.0.0.1:6379> HINCRBY myhash field3 -1
(integer) 5
127.0.0.1:6379> hsetnx myhash field4 hello # å¦‚æœå­—æ®µä¸å­˜åœ¨åˆ™å¯ä»¥è®¾ç½®
(integer) 1
127.0.0.1:6379> hsetnx myhash field4 world # å¦‚æœå­—æ®µå­˜åœ¨åˆ™ä¸èƒ½è®¾ç½®
(integer) 0
```

## 6. Zset æœ‰åºé›†åˆ

Zset  åœ¨ set çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€ä¸ªå€¼

- **set**ï¼š `k1 v1 `

  ```powershell
  sadd myset "hello"
  ```

- **zset**ï¼š `k1 score1 v1`

  ```powershell
   zadd myset 1 one
  ```

### â‘  zdd / zrange

âœ **å‘½ä»¤ `zdd`ã€`zrange` ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> zadd myset 1 one # åˆ›å»ºä¸€ä¸ªZsetåä¸º musetï¼Œæ·»åŠ ä¸€ä¸ªå€¼
(integer) 1
127.0.0.1:6379> zadd myset 2 two 3 three # æ·»åŠ å¤šä¸ªå€¼
(integer) 2
127.0.0.1:6379> ZRANGE myset 0 -1
1) "one"
2) "two"
3) "three"

```

### â‘¡ zrangebyscore / zrevrange

âœ **å‘½ä»¤ `zrangebyscore`ã€`zrevrange` ç¤ºä¾‹**ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200717114044.png" style="zoom:88%;" />

### â‘¢ zrem / zcard

âœ **å‘½ä»¤ `zrem`ã€`zcard` ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> zrange salary 0 -1
1) "kaungshen"
2) "xiaohong"
3) "zhangsan"
127.0.0.1:6379> zrem salary xiaohong # ç§»é™¤æœ‰åºé›†åˆä¸­çš„æŒ‡å®šå…ƒç´ 
(integer) 1
127.0.0.1:6379> zrange salary 0 -1
1) "kaungshen"
2) "zhangsan"
127.0.0.1:6379> zcard salary # è·å–æœ‰åºé›†åˆä¸­çš„ä¸ªæ•°
(integer) 2
```

### â‘£ zcount

âœ **å‘½ä»¤ `zcount` ç¤ºä¾‹**ï¼š

```powershell
127.0.0.1:6379> zadd myset 101 hello
(integer) 1
127.0.0.1:6379> zadd myset 102 world 103 kuangshen
(integer) 2
127.0.0.1:6379> zcount myset 101 103 # è·å–æŒ‡å®š score åŒºé—´çš„æˆå‘˜æ•°é‡
(integer) 3
127.0.0.1:6379> zcount myset 101 102
(integer) 2
```

## ğŸ“š References

- [ã€ç‹‚ç¥è¯´Javaã€‘Redisæœ€æ–°è¶…è¯¦ç»†ç‰ˆæ•™ç¨‹é€šä¿—æ˜“æ‡‚](https://www.bilibili.com/video/BV1S54y1R7SB?from=search&seid=3325634079268895938)


# 	ğŸ‰ æ¥å£ interface

---

## 1. æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³• abstract

**æŠ½è±¡æ–¹æ³•å³æ²¡æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•**ï¼Œç”¨ `abstract`è¡¨æ˜ï¼Œ**åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ–¹æ³•çš„ç±»å³æŠ½è±¡ç±»**ã€‚æŠ½è±¡ç±»å¿…é¡»å£°æ˜ `abstract`ã€‚

ä¾‹å¦‚ï¼š

```java
public abstract class Person{
	public abstract String getDescription();
}
```

**é™¤äº†æŠ½è±¡æ–¹æ³•ä¹‹å¤–ï¼ŒæŠ½è±¡ç±»è¿˜å¯ä»¥åŒ…å«å…·ä½“æ•°æ®å’Œå…·ä½“æ–¹æ³•**ã€‚ä¾‹å¦‚ï¼Œ `Person `ç±»è¿˜ä¿å­˜ç€å§“åå’Œä¸€ä¸ªè¿”å›å§“åçš„å…·ä½“æ–¹æ³•ï¼š

```java
public abstract class Person{
    private String name;
    public Person(String name){
    	this.name = name ;
    }
    public abstract String getDescription();
    public String getName(){
    	return name;
    }
}
```

> ğŸš© è®¸å¤šç¨‹åºå‘˜è®¤ä¸ºï¼Œåœ¨æŠ½è±¡ç±»ä¸­ä¸èƒ½åŒ…å«å…·ä½“æ–¹æ³•ã€‚**å»ºè®®å°½é‡å°†é€šç”¨çš„åŸŸå’Œæ–¹æ³•ï¼ˆä¸ç®¡æ˜¯å¦æ˜¯æŠ½è±¡çš„ï¼‰æ”¾åœ¨è¶…ç±»ï¼ˆä¸ç®¡æ˜¯å¦æ˜¯æŠ½è±¡ç±»ï¼‰ä¸­**ã€‚

**æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå°†ä¸€ä¸ªç±»å£°æ˜ä¸º `abstract`, å°±ä¸èƒ½åˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡ã€‚**

```java
new Person("jack"); // error
```

å¯ä»¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»çš„å¯¹è±¡å˜é‡ï¼Œ ä½†æ˜¯å®ƒåªèƒ½å¼•ç”¨éæŠ½è±¡å­ç±»çš„å¯¹è±¡ã€‚ ä¾‹å¦‚:

```java
Person p = new Student("Jack"); 
```

è¿™é‡Œçš„ `p` æ˜¯ä¸€ä¸ªæŠ½è±¡ç±» `Person `çš„å˜é‡ï¼Œ`Person` å¼•ç”¨äº†ä¸€ä¸ªéæŠ½è±¡å­ç±» `Student `çš„å®ä¾‹ã€‚

> ğŸ“œ åœ¨ C++ ä¸­ï¼Œ æœ‰ä¸€ç§åœ¨å°¾éƒ¨ç”¨ `=0` æ ‡è®°çš„æŠ½è±¡æ–¹æ³•ï¼Œ ç§°ä¸º**çº¯è™šå‡½æ•°**ï¼Œ ä¾‹å¦‚ï¼š 
>
> ```java
> class Person{ 
>  public: 
>  	virtual string getDescriptionO = 0; 
> }
> ```
>
> åªè¦æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªç±»å°±æ˜¯æŠ½è±¡ç±»ã€‚åœ¨ C++ ä¸­ï¼Œ æ²¡æœ‰æä¾›ç”¨äºè¡¨ç¤ºæŠ½è±¡ç±»çš„ç‰¹æ®Šå…³é”®å­—ã€‚

ğŸ’¬ ä¸‹é¢å®šä¹‰ä¸€ä¸ªæ‰©å±•æŠ½è±¡ç±» `Person `çš„å…·ä½“å­ç±» `Student`ï¼š 

```java
public class Student extends Person { 
    private String major; 
    public Student(String name, String major) { 
        super(name); 
        this.major = major; 
    } 
    public String getDescription(){ // å®ç°çˆ¶ç±»æŠ½è±¡æ–¹æ³•
    	return "a student majoring in " + major; 
    } 
} 
```

åœ¨ `Student `ç±»ä¸­å®ç°äº†çˆ¶ç±»ä¸­çš„æŠ½è±¡æ–¹æ³• `getDescription` ã€‚å› æ­¤ï¼Œ**åœ¨ `Student `ç±»ä¸­çš„å…¨éƒ¨æ–¹æ³•éƒ½æ˜¯éæŠ½è±¡çš„ï¼Œ è¿™ä¸ªç±»ä¸å†æ˜¯æŠ½è±¡ç±»**ã€‚

ğŸ‘‡ è°ƒç”¨å¦‚ä¸‹ï¼š

```java
Person p = new Student("Jack","Computer Science");
p.getDescription();
```

<u>ç”±äºä¸èƒ½æ„é€ æŠ½è±¡ç±» `Person `çš„å¯¹è±¡ï¼Œ æ‰€ä»¥å˜é‡ `p` æ°¸è¿œä¸ä¼šå¼•ç”¨ `Person` å¯¹è±¡ï¼Œ è€Œæ˜¯å¼•ç”¨è¯¸å¦‚ `Student `è¿™æ ·çš„å…·ä½“å­ç±»å¯¹è±¡ï¼Œ è€Œè¿™äº›å¯¹è±¡ä¸­éƒ½å®šä¹‰äº† `getDescription `æ–¹æ³•ã€‚</u>

## 2. æ¥å£æ¦‚å¿µ

**åœ¨ Java ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ï¼Œ æ¥å£ä¸æ˜¯ç±»ï¼Œè€Œæ˜¯å¯¹ç±»çš„ä¸€ç»„éœ€æ±‚æè¿°ï¼Œè¿™äº›ç±»è¦éµä»æ¥å£æ è¿°çš„ç»Ÿä¸€æ ¼å¼è¿›è¡Œå®šä¹‰ã€‚**

ä¸‹é¢ç»™å‡ºä¸€ä¸ªå…·ä½“çš„ç¤ºä¾‹ã€‚`Arrays `ç±»ä¸­çš„ `sort `æ–¹æ³•å¯ä»¥å¯¹å¯¹è±¡æ•°ç»„è¿›è¡Œæ’åºï¼Œä½†è¦æ±‚æ»¡è¶³ä¸‹åˆ—å‰æï¼šå¯¹è±¡æ‰€å±çš„ç±»å¿…é¡»å®ç°äº† `Comparable` æ¥å£ã€‚ ä¸‹é¢æ˜¯ `Comparable `æ¥å£çš„ä»£ç ï¼š

```java
public interface Comparable{
	int compareTo(Object other);
}
```

è¿™å°±æ˜¯è¯´ï¼Œä»»ä½•å®ç° `Comparable` æ¥å£çš„ç±»éƒ½éœ€è¦åŒ…å« `compareTo` æ–¹æ³•ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•çš„å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ª `Object` å¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªæ•´å‹æ•°å€¼ã€‚

> ğŸ“œ **åœ¨ JavaSE 5.0 ä¸­ï¼Œ`Comparable` æ¥å£å·²ç»æ”¹è¿›ä¸ºæ³›å‹ç±»å‹**ã€‚ 
>
> ```java
> public interface Comparable { 
> 	int compareTo(T other) ; // parameter has type T 
> } 
> ```

ğŸ“ƒ **æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•è‡ªåŠ¨åœ°å±äº `public`ã€‚ å› æ­¤ï¼Œåœ¨æ¥å£ä¸­å£°æ˜æ–¹æ³•æ—¶ï¼Œä¸å¿…æä¾›å…³é”®å­— `public`**

ç°åœ¨ï¼Œ å‡è®¾å¸Œæœ›ä½¿ç”¨ `Arrays` ç±»çš„ `sort `æ–¹æ³•å¯¹` Employee` å¯¹è±¡æ•°ç»„è¿›è¡Œæ’åºï¼Œ `Employee` ç±»å°±å¿…é¡»å®ç° `Comparable` æ¥å£ã€‚ ä¸ºäº†è®©ç±»å®ç°ä¸€ä¸ªæ¥å£ï¼Œ é€šå¸¸éœ€è¦ä¸‹é¢ä¸¤ä¸ªæ­¥éª¤ï¼š 

- 1 ) å°†ç±»å£°æ˜ä¸ºå®ç°ç»™å®šçš„æ¥å£ã€‚ 

- 2 ) å¯¹æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•è¿›è¡Œå®šä¹‰ã€‚ 

è¦å°†ç±»å£°æ˜ä¸ºå®ç°æŸä¸ªæ¥å£ï¼Œ éœ€è¦ä½¿ç”¨å…³é”®å­— `implements`:

```java
class Employee implements Comparable{
	...
    public int compareTo(Object otherObject){
        Employee other = (Employee) otherObject;
        return Double.compare(salary,other.salary);
    }
    ...
}
```

ğŸ’¡ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº†é™æ€ `Double.compare` æ–¹æ³•ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°å°äºç¬¬äºŒä¸ªå‚æ•°ï¼Œ å®ƒä¼šè¿”å› ä¸€ä¸ªè´Ÿå€¼ï¼›å¦‚æœäºŒè€…ç›¸ç­‰åˆ™è¿”å› 0; å¦åˆ™è¿”å›ä¸€ä¸ªæ­£å€¼ã€‚

> ğŸš¨ åœ¨æ¥å£å£°æ˜ä¸­ï¼Œæ²¡æœ‰å°† `compareTo` æ–¹æ³•å£°æ˜ä¸º `public`, è¿™æ˜¯å› ä¸ºåœ¨æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½è‡ªåŠ¨åœ°æ˜¯ `public`ã€‚ä¸è¿‡ï¼Œåœ¨å®ç°æ¥å£æ—¶ï¼Œ å¿…é¡»æŠŠæ–¹æ³•å£°æ˜ä¸º `public`; å¦åˆ™ï¼Œ ç¼–è¯‘å™¨å°†è®¤ä¸ºè¿™ä¸ªæ–¹æ³•çš„è®¿é—®å±æ€§æ˜¯åŒ…å¯è§æ€§ï¼Œ å³ç±»çš„é»˜è®¤è®¿é—®å±æ€§ï¼Œä¹‹åç¼–è¯‘å™¨å°±ä¼šç»™å‡ºè¯•å›¾æä¾›æ›´ä¸¥æ ¼çš„è®¿é—®æƒé™çš„è­¦å‘Šä¿¡æ¯ã€‚

æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ä¸€äº›ã€‚å¯ä»¥ä¸ºæ³›å‹ `Comparable` æ¥å£æä¾›ä¸€ä¸ªç±»å‹å‚æ•°ã€‚

```java
class Employee implements Comparable<Employee>{
	...
    public int compareTo(Employee otherObject){
        Employee other = (Employee) otherObject;
        return Double.compare(salary,other.salary);
    }
    ...
}
```

> ğŸš© `Comparable` æ¥å£ä¸­çš„ `compareTo` æ–¹æ³•å°†è¿”å›ä¸€ä¸ªæ•´å‹æ•°å€¼ã€‚å¦‚æœä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ï¼Œ åˆ™è¿”å›ä¸€ä¸ªæ­£å€¼æˆ–è€…ä¸€ä¸ªè´Ÿå€¼ã€‚åœ¨å¯¹ä¸¤ä¸ªæ•´æ•°åŸŸè¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œè¿™ç‚¹éå¸¸æœ‰ç”¨ã€‚

ç°åœ¨ï¼Œ æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œè¦è®©ä¸€ä¸ªç±»ä½¿ç”¨æ’åºæœåŠ¡å¿…é¡»è®©å®ƒå®ç° `compareTo` æ–¹æ³•ã€‚è¿™æ˜¯ç†æ‰€å½“ç„¶çš„ï¼Œ å› ä¸ºè¦å‘ `sort` æ–¹æ³•æä¾›å¯¹è±¡çš„æ¯”è¾ƒæ–¹å¼ã€‚â“ ä½†æ˜¯ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ `Employee` ç±»ç›´æ¥æ ä¾›ä¸€ä¸ª `compareTo `æ–¹æ³•ï¼Œè€Œå¿…é¡»å®ç° `Comparable `æ¥å£å‘¢ï¼Ÿ

ä¸»è¦åŸå› åœ¨äº Java ç¨‹åºè®¾è®¡è¯­è¨€æ˜¯ä¸€ç§å¼ºç±»å‹ ï¼ˆ strongly typed ) è¯­è¨€ã€‚åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œ ç¼–è¯‘å™¨å°†ä¼šæ£€æŸ¥è¿™ä¸ªæ–¹æ³•æ˜¯å¦å­˜åœ¨ã€‚åœ¨ `sort `æ–¹æ³•ä¸­å¯èƒ½å­˜åœ¨ä¸‹é¢è¿™æ ·çš„è¯­å¥ï¼š

```java
if(a[i].compareTo(a[j]) > 0){
	...
}
```

ä¸ºæ­¤ï¼Œ ç¼–è¯‘å™¨å¿…é¡»ç¡®è®¤ `a[i]` â€”å®šæœ‰ `compareTo `æ–¹æ³•ã€‚å¦‚æœ a æ˜¯ä¸€ä¸ª `Comparable `å¯¹è±¡çš„æ•°ç»„ï¼Œ å°±å¯ ä»¥ç¡®ä¿æ‹¥æœ‰ `compareTo `æ–¹æ³•ï¼Œå› ä¸ºæ¯ä¸ªå®ç° `Comparable `æ¥å£çš„ç±»éƒ½å¿…é¡»æä¾›è¿™ä¸ªæ–¹æ³•çš„å®šä¹‰ã€‚

## 3. æ¥å£çš„ç‰¹æ€§

æ¥å£ä¸æ˜¯ç±»ï¼Œå°¤å…¶**ä¸èƒ½ä½¿ç”¨ `new` è¿ç®—ç¬¦å®ä¾‹åŒ–ä¸€ä¸ªæ¥å£**ï¼š

```java
x = new Comparable(. . .); // ERROR
```

ç„¶è€Œï¼Œ å°½ç®¡ä¸èƒ½æ„é€ æ¥å£çš„å¯¹è±¡ï¼Œå´èƒ½å£°æ˜æ¥å£çš„å˜é‡ï¼š

```java
Comparable x; // OK
```

 æ¥å£å˜é‡å¿…é¡»å¼•ç”¨å®ç°äº†æ¥å£çš„ç±»å¯¹è±¡ï¼š 

```java
x = new Employee(. . .); // OK provided Employee implements Comparable
```

æ¥ä¸‹æ¥ï¼Œ å¦‚åŒä½¿ç”¨ `instanceof`æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å±äºæŸä¸ªç‰¹å®šç±»ä¸€æ ·ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ `instanceof `æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å®ç°äº†æŸä¸ªç‰¹å®šçš„æ¥å£ï¼š

```java
if(x instanceof Comparable){
	...
}
```

ä¸å¯ä»¥å»ºç«‹ç±»çš„ç»§æ‰¿å…³ç³»ä¸€æ ·ï¼Œ**æ¥å£ä¹Ÿå¯ä»¥è¢«æ‰©å±•**ï¼š

```java
public interface Moveable{
	void move(double x, double y);
}

public interface Powerd extends Moveable{
	double milesPerGallon();
}
```

è™½ç„¶åœ¨**æ¥å£ä¸­ä¸èƒ½åŒ…å«å®ä¾‹åŸŸæˆ–é™æ€æ–¹æ³•ï¼Œä½†å´å¯ä»¥åŒ…å«å¸¸é‡**ã€‚ä¾‹å¦‚ï¼š

```java
public interface Powered extends Moveable{
	double milesPerGallon();
	double SPEED_LIMIT = 95; // a public static final constant
}
```

ä¸æ¥å£ä¸­çš„æ–¹æ³•éƒ½è‡ªåŠ¨åœ°è¢«è®¾ç½®ä¸º `public `â€”æ ·ï¼Œ**æ¥å£ä¸­çš„åŸŸå°†è¢«è‡ªåŠ¨è®¾ä¸º `public static final`**

> ğŸ“œ å¯ä»¥å°†æ¥å£æ–¹æ³•æ ‡è®°ä¸º `public`, å°†åŸŸæ ‡è®°ä¸º `public static final`ã€‚æœ‰äº›ç¨‹åºå‘˜å‡ºäºä¹ æƒ¯æˆ–æé«˜æ¸…æ™°åº¦çš„è€ƒè™‘ï¼Œ æ„¿æ„è¿™æ ·åšã€‚ä½† Java è¯­è¨€è§„èŒƒå´å»ºè®®ä¸è¦ä¹¦å†™è¿™äº›å¤šä½™çš„å…³é”®å­—

å°½ç®¡**æ¯ä¸ªç±»åªèƒ½å¤Ÿæ‹¥æœ‰ä¸€ä¸ªè¶…ç±»ï¼Œ ä½†å´å¯ä»¥å®ç°å¤šä¸ªæ¥å£**ã€‚è¿™å°±ä¸ºå®šä¹‰ç±»çš„è¡Œä¸ºæä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚

## 4. æœ‰äº†æŠ½è±¡ç±»ï¼Œä¸ºå•¥è¿˜è¦æ¥å£

â“ æ—¢ç„¶æœ‰äº†æŠ½è±¡ç±»ï¼Œä¸ºä»€ä¹ˆ Java ç¨‹åºè®¾è®¡è¯­è¨€è¿˜è¦ä¸è¾è¾›è‹¦åœ°å¼•å…¥æ¥å£æ¦‚å¿µï¼Ÿ ä¸ºä»€ä¹ˆä¸å°† `Comparable` ç›´æ¥è®¾è®¡æˆå¦‚ä¸‹æ‰€ç¤ºçš„æŠ½è±¡ç±»ã€‚

```java
abstract class Comparable {
	public abstract int compareTo(Object other);
}
```

ç„¶åï¼Œ`Employee `ç±»å†ç›´æ¥æ‰©å±•è¿™ä¸ªæŠ½è±¡ç±»ï¼Œ å¹¶æä¾› `compareTo `æ–¹æ³•çš„å®ç°ï¼š

```java
class Employee extends Comparable{ 
	public int compareTo(Object other) { 
        . . . 
    } 
}
```

éå¸¸é—æ†¾ï¼Œä½¿ç”¨æŠ½è±¡ç±»è¡¨ç¤ºé€šç”¨å±æ€§å­˜åœ¨è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š æ¯ä¸ªç±»åªèƒ½æ‰©å±•äºä¸€ä¸ªç±»ã€‚å‡è®¾ `Employee` ç±»å·²ç»æ‰©å±•äºä¸€ä¸ªç±»ï¼Œ ä¾‹å¦‚ `Person`, å®ƒå°±ä¸èƒ½å†åƒä¸‹é¢è¿™æ ·æ‰©å±•ç¬¬äºŒä¸ªç±»äº†ï¼š 

```java
class Employee extends Person, Comparable // Error 
```

ä½†æ¯ä¸ªç±»å¯ä»¥åƒä¸‹é¢è¿™æ ·å®ç°å¤šä¸ªæ¥å£ï¼š 

```java
class Employee extends Person implements Comparable // OK
```

ğŸš¨ æœ‰äº›ç¨‹åºè®¾è®¡è¯­è¨€å…è®¸ä¸€ä¸ªç±»æœ‰å¤šä¸ªè¶…ç±»ï¼Œ ä¾‹å¦‚ C++ã€‚æˆ‘ä»¬å°†æ­¤ç‰¹æ€§ç§°ä¸º<u>å¤šé‡ç»§æ‰¿ ( multiple inheritance)</u> ã€‚è€Œ **Java çš„è®¾è®¡è€…é€‰æ‹©äº†ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œå…¶ä¸»è¦åŸå› æ˜¯å¤šç»§æ‰¿ä¼šè®©è¯­è¨€æœ¬èº«å˜å¾—éå¸¸å¤æ‚**ï¼ˆå¦‚åŒ C++) ï¼Œæ•ˆç‡ä¹Ÿä¼šé™ä½ã€‚å®é™…ä¸Šï¼Œæ¥å£å¯ä»¥æä¾›å¤šé‡ç»§æ‰¿çš„å¤§å¤šæ•°å¥½å¤„ï¼ŒåŒæ—¶è¿˜èƒ½é¿å…å¤šé‡ç»§æ‰¿çš„å¤æ‚æ€§å’Œä½æ•ˆæ€§ã€‚

## 5. é™æ€æ–¹æ³•

**åœ¨ Java SE 8 ä¸­ï¼Œå…è®¸åœ¨æ¥å£ä¸­å¢åŠ é™æ€æ–¹æ³•**ã€‚<u>ç†è®ºä¸Šè®²ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±è®¤ä¸ºè¿™æ˜¯ä¸åˆæ³•çš„ã€‚åªæ˜¯è¿™æœ‰è¿äºå°†æ¥å£ä½œä¸ºæŠ½è±¡è§„èŒƒçš„åˆè¡·ã€‚</u>

ä¸‹é¢æ¥çœ‹ Paths ç±»ï¼Œ å…¶ä¸­åªåŒ…å«ä¸¤ä¸ªå·¥å‚æ–¹æ³•ã€‚å¯ä»¥ç”±ä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ—æ„é€ ä¸€ä¸ªæ–‡ä»¶æˆ– ç›®å½•çš„è·¯å¾„ï¼Œ å¦‚ `Paths.get`("jdk1.8.0", "jre", "bin") ã€‚åœ¨ Java SE 8 ä¸­ï¼Œ å¯ä»¥ä¸º `Path ` æ¥å£å¢åŠ ä»¥ä¸‹æ–¹æ³•ï¼š

```java
public interface Path{
    public static Path get(String first, String... more){
    	return FileSystems.getDefault().getPath(first, more); 
    }
}
```

è¿™æ ·ä¸€æ¥ï¼Œ `Paths` ç±»å°±ä¸å†æ˜¯å¿…è¦çš„äº†ã€‚

## 6. é»˜è®¤æ–¹æ³• default

**å¯ä»¥ä¸ºæ¥å£æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤å®ç°**ã€‚ å¿…é¡»ç”¨ `default` ä¿®é¥°ç¬¦æ ‡è®°è¿™æ ·ä¸€ä¸ªæ–¹æ³•ã€‚

```java
public interface Comparable<T>{
    default int compareTo(T other) { 
        return 0; 
    } 
} 
```

## 7. è§£å†³é»˜è®¤æ–¹æ³•å†²çª

å¦‚æœå…ˆåœ¨ä¸€ä¸ªæ¥å£ä¸­å°†ä¸€ä¸ªæ–¹æ³•å®šä¹‰ä¸ºé»˜è®¤æ–¹æ³•ï¼Œ ç„¶ååˆåœ¨è¶…ç±»æˆ–å¦ä¸€ä¸ªæ¥å£ä¸­å®šä¹‰äº†åŒæ ·çš„æ–¹æ³•ï¼Œ ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼ŸJava è§„åˆ™å¦‚ä¸‹ï¼š

- 1 ) â­ **è¶…ç±»ä¼˜å…ˆ**ã€‚å¦‚æœè¶…ç±»æä¾›äº†ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼ŒåŒåè€Œä¸”æœ‰ç›¸åŒå‚æ•°ç±»å‹çš„é»˜è®¤æ–¹æ³•ä¼šè¢«å¿½ç•¥ã€‚ 

- 2 )  **æ¥å£å†²çª**ã€‚ å¦‚æœä¸€ä¸ªè¶…æ¥å£æä¾›äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ¥å£æä¾›äº†ä¸€ä¸ªåŒåè€Œä¸”å‚æ•°ç±»å‹ï¼ˆä¸è®ºæ˜¯å¦æ˜¯é»˜è®¤å‚æ•°ï¼‰ç›¸åŒçš„æ–¹æ³•ï¼Œ å¿…é¡»è¦†ç›–è¿™ä¸ªæ–¹æ³•æ¥è§£å†³å†²çªã€‚

  ä¾‹å¦‚ï¼š

  ```java
  interface Named{
  	default String getName(){
  		return getClass().getName() + "_" + hashCode();
  	}
  }
  
  interface Person{
  	default String getName(){
  		return getClass().getName();
  	}
  }
  
  // éœ€è¦åœ¨ Student ç±»ä¸­æä¾›ä¸€ä¸ª getName æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¯ä»¥é€‰æ‹©ä¸¤ä¸ªå†²çªæ–¹æ³•ä¸­çš„ä¸€ä¸ª
  class Stduent implements Person, Named{
      public String getName(){
          return Person.super.getName();
      }
  }
  ```

  ç°åœ¨å‡è®¾ `Named `æ¥å£æ²¡æœ‰ä¸º `getName `æä¾›é»˜è®¤å®ç°ï¼š

  ```java
  interface Named{
  	String getName();
  }
  ```

  â“ Student ç±»ä¼šä» Person æ¥å£ç»§æ‰¿é»˜è®¤æ–¹æ³•å—ï¼Ÿ è¿™å¥½åƒæŒºæœ‰é“ç†ï¼Œ ä¸è¿‡ï¼ŒJava è®¾è®¡è€…æ›´å¼ºè°ƒä¸€è‡´æ€§ã€‚ä¸¤ä¸ªæ¥å£å¦‚ä½•å†²çªå¹¶ä¸é‡è¦ã€‚**å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªæ¥å£æä¾›äº†ä¸€ä¸ªå®ç°ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥å‘Šé”™è¯¯ï¼Œ è€Œç¨‹åºå‘˜å°±å¿…é¡»è§£å†³è¿™ä¸ªäºŒä¹‰æ€§ã€‚**

  > ğŸ“œ å½“ç„¶ï¼Œ**å¦‚æœä¸¤ä¸ªæ¥å£éƒ½æ²¡æœ‰ä¸ºå…±äº«æ–¹æ³•æä¾›é»˜è®¤å®ç°ï¼Œ é‚£ä¹ˆå°±ä¸ Java SE 8 ä¹‹å‰çš„ æƒ…å†µä¸€æ ·ï¼Œè¿™é‡Œä¸å­˜åœ¨å†²çª**ã€‚ å®ç°ç±»å¯ä»¥æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼šå®ç°è¿™ä¸ªæ–¹æ³•ï¼Œæˆ–è€…å¹²è„†ä¸å®ç°ã€‚ å¦‚æœæ˜¯åä¸€ç§æƒ…å†µï¼Œè¿™ä¸ªç±»æœ¬èº«å°±æ˜¯æŠ½è±¡çš„ã€‚

## 8. Comparable æ¥å£

`Comparable` æ¥å£ï¼šå¼ºè¡Œå¯¹**å®ç°å®ƒçš„æ¯ä¸ªç±»çš„å¯¹è±¡**è¿›è¡Œæ•´ä½“æ’åºã€‚è¿™ç§æ’åºè¢«ç§°ä¸ºç±»çš„è‡ªç„¶æ’åºï¼Œç±»çš„ `compareTo `æ–¹æ³•è¢«ç§°ä¸ºå®ƒçš„è‡ªç„¶æ¯”è¾ƒæ–¹æ³•ã€‚åªèƒ½åœ¨ç±»ä¸­å®ç° `compareTo() `ä¸€æ¬¡ï¼Œä¸èƒ½ç»å¸¸ä¿®æ”¹ç±»çš„ä»£ç å®ç°è‡ªå·±æƒ³è¦çš„æ’åºã€‚å®ç°æ­¤æ¥å£çš„å¯¹è±¡åˆ—è¡¨ï¼ˆå’Œæ•°ç»„ï¼‰å¯ä»¥é€šè¿‡ `Collections.sort` æˆ–  `Arrays.sort` è¿›è¡Œè‡ªåŠ¨æ’åºï¼Œå¯¹è±¡å¯ä»¥ç”¨ä½œæœ‰åºæ˜ å°„ä¸­çš„é”®æˆ–æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼Œæ— éœ€æŒ‡å®šæ¯”è¾ƒå™¨ã€‚

ğŸ‘‡ `Comparable `æ¥å£æºç å¦‚ä¸‹ï¼š

```java
public interface Comparable<T> {
    public int compareTo(T o);
}
```

ğŸ’¬ ä¸¾ä¾‹å¦‚ä¸‹ï¼š

```java
String[] strArr = {"A","B","C","E","D"};
Arrays.sort(strArr);
for (String string : strArr) {
    System.out.print(string+";");
}
```

è¾“å‡ºç»“æœï¼š

> A;B;C;D;E;

OKï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•å¯¹ä¸€ä¸ªå¯¹è±¡æ•°ç»„æ’åºï¼Œå‰ææ˜¯è¿™äº›å¯¹è±¡æ˜¯å®ç°äº† `Comparable `æ¥å£çš„ç±»çš„å®ä¾‹, ä¾‹å¦‚ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ å¯ä»¥å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„æ’åºï¼Œ å› ä¸º `String `ç±»å®ç°äº† `Comparable`, è€Œ ä¸” `String.compareTo` æ–¹æ³•å¯ä»¥æŒ‰å­—å…¸é¡ºåºæ¯”è¾ƒå­—ç¬¦ä¸²ã€‚

ğŸ‘‰ `String` ç±»æºç å¦‚ä¸‹ï¼š

```java
public final class String
    implements java.io.Serializable, Comparable<String>, CharSequence{
	...
    public int compareTo(String anotherString) {
        int len1 = value.length;
        int len2 = anotherString.value.length;
        int lim = Math.min(len1, len2);
        char v1[] = value;
        char v2[] = anotherString.value;

        int k = 0;
        while (k < lim) {
            char c1 = v1[k];
            char c2 = v2[k];
            if (c1 != c2) {
                return c1 - c2;
            }
            k++;
        }
        return len1 - len2;
    }
}
```

å®ƒå®ç°äº† `Comparable` æ¥å£ï¼Œé‡Œé¢ä¹Ÿå®ç°äº† `compareTo` æ–¹æ³•ï¼Œæ‰€ä»¥æŒ‰ç…§æŸç§è§„åˆ™èƒ½å¤Ÿè¿›è¡Œæ’åºã€‚

â­ æ‰€ä»¥ï¼Œå¦‚**æœæˆ‘ä»¬æƒ³è¦å¯¹è‡ªå®šä¹‰ç±»å‹åº”ç”¨æ­¤æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»å®ç° `Comparable `æ¥å£å¹¶é‡å†™ `compareTo `æ–¹æ³•**ã€‚

ğŸ’¬ å®ä¾‹å¦‚ä¸‹ï¼š

```java
class Student implements Comparable<Student>{
    private String name;
    private int age;

    public Student() {
    }

    public Student(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "Student{" +
               "name='" + name + '\'' +
               ", age=" + age +
               '}';
    }
    
    @Override
    public int compareTo(String o){
        return.age - o.age; // æŒ‰å¹´é¾„å‡åºæ’åº
    }
}

public class Demo {
    public static void main(String[] args) {
        // åˆ›å»ºå››ä¸ªå­¦ç”Ÿå¯¹è±¡ å­˜å‚¨åˆ°é›†åˆä¸­
        ArrayList<Student> list = new ArrayList<Student>();

        list.add(new Student("rose",18));
        list.add(new Student("jack",16));
        list.add(new Student("abc",16));
        list.add(new Student("ace",17));
        list.add(new Student("mark",16));

        /*
          è®©å­¦ç”Ÿ æŒ‰ç…§å¹´é¾„æ’åº å‡åº
         */
		Collections.sort(list);// è¦æ±‚è¯¥listä¸­å…ƒç´ ç±»å‹å¿…é¡»å®ç°æ¯”è¾ƒå™¨ Comparable æ¥å£

        for (Student student : list) 
            System.out.println(student);
    }
}
```

è¾“å‡ºç»“æœï¼š

> Student{name='jack', age=16}
>
> Student{name='abc', age=16}
>
> Student{name='mark', age=16}
>
> Student{name='ace', age=17}
>
> Student{name='rose', age=18}

## 9. Comparator æ¥å£ â€” æ¯”è¾ƒå™¨

ç°åœ¨å‡è®¾æˆ‘ä»¬å¸Œæœ›æŒ‰é•¿åº¦é€’å¢çš„é¡ºåºå¯¹å­—ç¬¦ä¸²è¿›è¡Œæ’åºï¼Œè€Œä¸æ˜¯æŒ‰å­—å…¸é¡ºåºè¿›è¡Œæ’åºã€‚ è‚¯å®šä¸èƒ½è®© `String` ç±»ç”¨ä¸¤ç§ä¸åŒçš„æ–¹å¼å®ç° `compareTo `æ–¹æ³• â€”â€” æ›´ä½•å†µï¼Œ`String `ç±»ä¹Ÿä¸åº”ç”±æˆ‘ä»¬æ¥ä¿®æ”¹ã€‚ 

è¦å¤„ç†è¿™ç§æƒ…å†µï¼Œ`Arrays.sort` å’Œ `Collections.sort` æ–¹æ³•è¿˜æœ‰ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼Œ æœ‰ä¸€ä¸ªæ•°ç»„å’Œä¸€ä¸ª**æ¯”è¾ƒå™¨ ( comparator )**ä½œä¸ºå‚æ•°ï¼Œ **æ¯”è¾ƒå™¨æ˜¯å®ç°äº† `Comparator `æ¥å£çš„ç±»çš„å®ä¾‹ï¼Œéœ€è¦é‡å†™ compare æ–¹æ³•**ã€‚

ğŸ‘‡ `Comparator `æºç å¦‚ä¸‹ï¼š

```java
@FunctionalInterface
public interface Comparator<T> {
    int compare(T o1, T o2);
    ...
```

` int compare(T o1, T o2)`ï¼šæ¯”è¾ƒå…¶ä¸¤ä¸ªå‚æ•°çš„å¤§å°

æ¯”è¾ƒä¹‹åä¼šæ ¹æ®å¤§å°è¿”å›å€¼ã€‚ 

- è¿”å›â€œè´Ÿæ•°â€ï¼Œ æ„å‘³ç€â€œo1 < o2â€ï¼›
- è¿”å›â€œé›¶â€ï¼Œæ„å‘³ç€â€œo1 = o2â€ï¼›
- è¿”å›â€œæ­£æ•°â€ï¼Œæ„å‘³ç€â€œo1 > o2ã€‚

> å‡åº: o1 - o2
>
> é™åº: o2 - o1

ğŸ’¬ ä¾‹å¦‚ï¼šè¦æŒ‰é•¿åº¦æ¯”è¾ƒå­—ç¬¦ä¸²ï¼Œå¯ä»¥å¦‚ä¸‹å®šä¹‰ä¸€ä¸ªå®ç° `Comparator<String>`çš„ç±»ï¼š 

```java
class LengthComparator implements Comparator<String>{
	public int compare(String first, String second){
		return first.length() - second.length();
	}
}
```

å…·ä½“å®Œæˆæ¯”è¾ƒæ—¶ï¼Œéœ€è¦å»ºç«‹ä¸€ä¸ªå®ä¾‹ï¼š

```java
Comparator<String> comp = new LengthComparator();
if(comp.compare(words[i],words[j]) > 0){
    ...
}
```

å°†è¿™ä¸ªè°ƒç”¨ä¸ `words[i].compareTo(words[j])` åšæ¯”è¾ƒã€‚è¿™ä¸ª `compare` æ–¹æ³•è¦åœ¨æ¯”è¾ƒå™¨å¯¹è±¡ä¸Šè°ƒç”¨ï¼Œè€Œä¸æ˜¯åœ¨å­—ç¬¦ä¸²æœ¬èº«ä¸Šè°ƒç”¨ã€‚

> ğŸ“œ å°½ç®¡ `LengthComparator `å¯¹è±¡æ²¡æœ‰çŠ¶æ€ï¼Œ ä¸è¿‡è¿˜æ˜¯éœ€è¦å»ºç«‹è¿™ä¸ªå¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹ã€‚ æˆ‘ä»¬éœ€è¦è¿™ä¸ªå®ä¾‹æ¥è°ƒç”¨ `compare `æ–¹æ³• å®ƒä¸æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚

â­ è¦å¯¹ä¸€ä¸ªæ•°ç»„æ’åºï¼Œ éœ€è¦ä¸º` Arrays.sort` æ–¹æ³•ä¼ å…¥ä¸€ä¸ª `LengthComparator `å¯¹è±¡ï¼š

```java
String[] friends = { "Peter", "Paul", "Mary" };
Arrays.sort(friends, new LengthComparator());
```

åˆ©ç”¨ lambda è¡¨è¾¾å¼ï¼ˆè§ä¸‹èŠ‚ï¼‰å¯ä»¥æ›´å®¹æ˜“åœ°ä½¿ç”¨ `Comparator`ï¼š

```java
public class Demo {
    public static void main(String[] args) {
        ArrayList<String> list = new ArrayList<String>();
        list.add("cba");
        list.add("aba");
        list.add("sba");
        list.add("nba");
        //æ’åºæ–¹æ³•  æŒ‰ç…§ç¬¬ä¸€ä¸ªå•è¯çš„é™åº
        Collections.sort(list,new Comparator<String>(){
           @Override
            public int compare(String o1, String o2){
                return o2.charAt(0) - o1.charAt(0);
            }
        });
        System.out.println(list);
    }
}
```

ç»“æœå¦‚ä¸‹ï¼š

>  [sba, nba, cba, aba]

**é™æ€ `comparing `æ–¹æ³•å–ä¸€ä¸ªâ€œ é”®æå–å™¨â€ å‡½æ•°ï¼Œ å®ƒå°†ç±»å‹ T æ˜ å°„ä¸ºä¸€ä¸ªå¯æ¯”è¾ƒçš„ç±»å‹ ( å¦‚ `String `)ã€‚å¯¹è¦æ¯”è¾ƒçš„å¯¹è±¡åº”ç”¨è¿™ä¸ªå‡½æ•°ï¼Œ ç„¶åå¯¹è¿”å›çš„é”®å®Œæˆæ¯”è¾ƒ**ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ª `Person `å¯¹è±¡æ•°ç»„ï¼Œå¯ä»¥å¦‚ä¸‹æŒ‰åå­—å¯¹è¿™äº›å¯¹è±¡æ’åºï¼š 

```java
Arrays.sort(people, Comparator.comparing(Person::getName));
```

å¯ä»¥æŠŠæ¯”è¾ƒå™¨ä¸ `thenComparing `æ–¹æ³•ä¸²èµ·æ¥ã€‚ä¾‹å¦‚ï¼š

```java
Arrays.sort(people,Comparator.comparing(Person::getLastName).thenComparing(Person::getFirstName));
```

å¦‚æœä¸¤ä¸ªäººçš„ `LastName `ç›¸åŒï¼Œ å°±ä¼šä½¿ç”¨ç¬¬äºŒä¸ªæ¯”è¾ƒå™¨ã€‚

## ğŸ“š References

- ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ - å· 1 åŸºç¡€çŸ¥è¯† - ç¬¬ 10 ç‰ˆã€‹
- ã€ŠThinking In Javaï¼ˆJava ç¼–ç¨‹æ€æƒ³ï¼‰- ç¬¬ 4 ç‰ˆã€‹
- [javaç»éªŒæ€»ç»“-208é“é¢è¯•é¢˜](https://www.zhihu.com/question/27858692/answer/787505434)
- [Comparableæ¥å£ä½œç”¨](https://blog.csdn.net/ysj4428/article/details/81195846)
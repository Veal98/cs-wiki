# ğŸ‘¦ é™æ€ä»£ç† + JDK/CGLIB/Javassit åŠ¨æ€ä»£ç†

---

## 1. å¸¸è§„ç¼–ç æ–¹å¼

åœ¨å­¦ä¹ ä»£ç†ä¹‹å‰ï¼Œå…ˆå›é¡¾ä»¥ä¸‹æˆ‘ä»¬çš„å¸¸è§„ç¼–ç æ–¹å¼ï¼šæ‰€æœ‰ `interface` ç±»å‹çš„å˜é‡æ€»æ˜¯é€šè¿‡å‘ä¸Šè½¬å‹å¹¶æŒ‡å‘æŸä¸ªå®ä¾‹çš„

å®šä¹‰æ¥å£ï¼š

```java
public interface SmsService {
    String send(String message);
}
```

ç¼–å†™å®ç°ç±»ï¼š

```java
public class SmsServicseImpl implements SmsService {
    public String send(String message) {
        System.out.println("send message:" + message);
        return message;
    }
}
```

åˆ›å»ºå®ä¾‹ï¼Œè½¬å‹ä¸ºæ¥å£å¹¶è°ƒç”¨ï¼š

```java
SmsService s = new SmsServicseImpl();
s.send("Bob");
```

è¿™ç§æ–¹å¼å°±æ˜¯æˆ‘ä»¬é€šå¸¸ç¼–å†™ä»£ç çš„æ–¹å¼ã€‚

## 2. ä»£ç†æ¨¡å¼

ä»£ç†æ¨¡å¼ç®€å•æ¥è¯´å°±æ˜¯ **æˆ‘ä»¬ä½¿ç”¨ä»£ç†å¯¹è±¡æ¥ä»£æ›¿å¯¹çœŸå®å¯¹è±¡(real object)çš„è®¿é—®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¸ä¿®æ”¹åŸç›®æ ‡å¯¹è±¡çš„å‰æä¸‹ï¼Œæä¾›é¢å¤–çš„åŠŸèƒ½æ“ä½œï¼Œæ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ã€‚**

ä»£ç†æ¨¡å¼åŸºæœ¬ä¸Šæœ‰ `Subject è§’è‰²`ï¼Œ`Real Subject è§’è‰²`ï¼Œ`Proxy è§’è‰²`ã€‚å…¶ä¸­ï¼šSubject è§’è‰²è´Ÿè´£å®šä¹‰ RealSubject å’Œ Proxy è§’è‰²åº”è¯¥å®ç°çš„æ¥å£ï¼›RealSubject è§’è‰²ç”¨æ¥çœŸæ­£å®Œæˆä¸šåŠ¡æœåŠ¡åŠŸèƒ½ï¼›Proxy è§’è‰²è´Ÿè´£å°†è‡ªèº«çš„è¯·æ±‚ï¼Œè°ƒç”¨ Real Subject å¯¹åº”çš„åŠŸèƒ½æ¥å®ç°ä¸šåŠ¡åŠŸèƒ½ï¼Œè‡ªå·±ä¸çœŸæ­£åšä¸šåŠ¡ã€‚

ä¸‹é¢çš„è¿™å¹…ä»£ç†ç»“æ„å›¾æ˜¯å…¸å‹çš„é™æ€ä»£ç†æ¨¡å¼ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20201209145404.png)

**ä»£ç†æ¨¡å¼çš„ä¸»è¦ä½œç”¨æ˜¯æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´åœ¨ç›®æ ‡å¯¹è±¡çš„æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰åä½ å¯ä»¥å¢åŠ ä¸€äº›è‡ªå®šä¹‰çš„æ“ä½œã€‚**

ä¸¾ä¸ªä¾‹å­ï¼šä½ çš„æ‰¾äº†å°çº¢æ¥å¸®ä½ é—®è¯ï¼Œå°çº¢å°±çœ‹ä½œæ˜¯ä»£ç†æˆ‘çš„ä»£ç†å¯¹è±¡ï¼Œä»£ç†çš„è¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰æ˜¯é—®è¯ã€‚

<img src="https://gitee.com/veal98/images/raw/master/img/20201209103020.png" style="zoom:80%;" />

ä»£ç†æ¨¡å¼æœ‰é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ä¸¤ç§å®ç°æ–¹å¼ã€‚

## 3. é™æ€ä»£ç†

### â‘  ä»€ä¹ˆæ˜¯é™æ€ä»£ç†

é™æ€ä»£ç†å®ç°æ­¥éª¤:

1. å®šä¹‰ä¸€ä¸ªæ¥å£åŠå…¶å®ç°ç±»ï¼›
2. åˆ›å»ºä¸€ä¸ªä»£ç†ç±»åŒæ ·å®ç°è¿™ä¸ªæ¥å£
3. **å°†ç›®æ ‡å¯¹è±¡ï¼ˆå³è¢«ä»£ç†ç±»ï¼‰æ³¨å…¥è¿›ä»£ç†ç±»**ï¼Œç„¶ååœ¨ä»£ç†ç±»çš„å¯¹åº”æ–¹æ³•è°ƒç”¨ç›®æ ‡ç±»ä¸­çš„å¯¹åº”æ–¹æ³•ã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»£ç†ç±»å±è”½å¯¹ç›®æ ‡å¯¹è±¡çš„è®¿é—®ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰ååšä¸€äº›è‡ªå·±æƒ³åšçš„äº‹æƒ…ã€‚

ä»å®ç°å’Œåº”ç”¨è§’åº¦æ¥è¯´ï¼Œé™æ€ä»£ç†ä¸­ï¼Œæˆ‘ä»¬å¯¹ç›®æ ‡å¯¹è±¡çš„æ¯ä¸ªæ–¹æ³•çš„å¢å¼ºéƒ½æ˜¯æ‰‹åŠ¨å®Œæˆçš„ï¼Œéå¸¸ä¸çµæ´»ï¼ˆæ¯”å¦‚æ¥å£ä¸€æ—¦æ–°å¢åŠ æ–¹æ³•ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡éƒ½è¦è¿›è¡Œä¿®æ”¹ï¼‰ä¸”éº»çƒ¦(éœ€è¦å¯¹æ¯ä¸ªç›®æ ‡ç±»éƒ½å•ç‹¬å†™ä¸€ä¸ªä»£ç†ç±»)ã€‚ å®é™…åº”ç”¨åœºæ™¯éå¸¸éå¸¸å°‘ï¼Œæ—¥å¸¸å¼€å‘å‡ ä¹çœ‹ä¸åˆ°ä½¿ç”¨é™æ€ä»£ç†çš„åœºæ™¯ã€‚

ä» JVM å±‚é¢æ¥è¯´ï¼Œ **é™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å°†æ¥å£ã€å®ç°ç±»ã€ä»£ç†ç±»è¿™äº›éƒ½å˜æˆäº†ä¸€ä¸ªä¸ªå®é™…çš„ class æ–‡ä»¶ã€‚**

> ğŸ’¡ Java ç¼–è¯‘å™¨ç¼–è¯‘å¥½ Java æ–‡ä»¶ä¹‹åï¼Œäº§ç”Ÿ `.class` å­—èŠ‚ç æ–‡ä»¶åœ¨ç£ç›˜ä¸­ã€‚è¿™ç§ class æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†…å®¹æ˜¯åªæœ‰ JVM è™šæ‹Ÿæœºèƒ½å¤Ÿè¯†åˆ«çš„æœºå™¨ç ã€‚JVM è™šæ‹Ÿæœºè¯»å–å­—èŠ‚ç æ–‡ä»¶ï¼Œå–å‡ºäºŒè¿›åˆ¶æ•°æ®ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè§£æ `.class` æ–‡ä»¶å†…çš„ä¿¡æ¯ï¼Œç”Ÿæˆå¯¹åº”çš„ Class å¯¹è±¡ï¼š
>
> ![](https://gitee.com/veal98/images/raw/master/img/20201209145947.png)

### â‘¡ ä»£ç ç¤ºä¾‹

**1. å®šä¹‰å‘é€çŸ­ä¿¡çš„æ¥å£**

```java
public interface SmsService {
    String send(String message);
}
```

**2. å®ç°å‘é€çŸ­ä¿¡çš„æ¥å£ï¼ˆç›®æ ‡ç±» / è¢«ä»£ç†ç±»ï¼‰**

```java
public class SmsServiceImpl implements SmsService {
    public String send(String message) {
        System.out.println("send message:" + message);
        return message;
    }
}
```

**3. åˆ›å»ºä»£ç†ç±»å¹¶åŒæ ·å®ç°å‘é€çŸ­ä¿¡çš„æ¥å£**

```java
public class SmsProxy implements SmsService {
	
    // å°†ç›®æ ‡å¯¹è±¡ï¼ˆå³è¢«ä»£ç†ç±»ï¼‰æ³¨å…¥è¿›ä»£ç†ç±»
    private final SmsService smsService;

    public SmsProxy(SmsService smsService) {
        this.smsService = smsService;
    }

    @Override
    public String send(String message) {
        // è°ƒç”¨ç›®æ ‡ç±»æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ
        System.out.println("before method send()");
        // è°ƒç”¨ç›®æ ‡ç±»æ–¹æ³•
        smsService.send(message); 
        // è°ƒç”¨ç›®æ ‡ç±»æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ
        System.out.println("after method send()");
        return null;
    }
}
```

**4. å®é™…ä½¿ç”¨**

```java
public class Main {
    public static void main(String[] args) {
        SmsService smsService = new SmsServiceImpl();
        SmsProxy smsProxy = new SmsProxy(smsService);
        smsProxy.send("java");
    }
}
```

è¿è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œæ§åˆ¶å°æ‰“å°å‡ºï¼š

```bash
before method send()
send message:java
after method send()Copy to clipboardErrorCopied
```

å¯ä»¥è¾“å‡ºç»“æœçœ‹å‡ºï¼Œæˆ‘ä»¬å·²ç»å¢åŠ äº† `SmsServiceImpl` çš„`send()`æ–¹æ³•ã€‚

## 4. åŠ¨æ€ä»£ç† Dynamic Proxy

### â‘  ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†

ç›¸æ¯”äºé™æ€ä»£ç†æ¥è¯´ï¼ŒåŠ¨æ€ä»£ç†æ›´åŠ çµæ´»ã€‚æˆ‘ä»¬<u>ä¸éœ€è¦é’ˆå¯¹æ¯ä¸ªç›®æ ‡ç±»éƒ½å•ç‹¬åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ï¼Œä¹Ÿä¸éœ€è¦å¿…é¡»å®ç°æ¥å£ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ä»£ç†åˆ›å»ºæ¥å£å¯¹è±¡ï¼ˆCGLIB åŠ¨æ€ä»£ç†æœºåˆ¶å¯ä¸ç”¨å®ç°æ¥å£ï¼Œä½† JDK åŠ¨æ€ä»£ç†ä»ç„¶å¿…é¡»éœ€è¦å®ç°æ¥å£ï¼‰</u>

**ä» JVM è§’åº¦æ¥è¯´ï¼ŒåŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»å­—èŠ‚ç æ–‡ä»¶ `.class`ï¼Œå¹¶åŠ è½½åˆ° JVM ä¸­çš„ã€‚**

åŠ¨æ€ä»£ç†åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨çš„ç›¸å¯¹è¾ƒå°ï¼Œä½†æ˜¯åœ¨æ¡†æ¶ä¸­çš„å‡ ä¹æ˜¯å¿…ç”¨çš„ä¸€é—¨æŠ€æœ¯ã€‚å­¦ä¼šäº†åŠ¨æ€ä»£ç†ä¹‹åï¼Œå¯¹äºæˆ‘ä»¬ç†è§£å’Œå­¦ä¹ å„ç§æ¡†æ¶çš„åŸç†ä¹Ÿéå¸¸æœ‰å¸®åŠ©ã€‚**Spring AOPã€RPC æ¡†æ¶çš„å®ç°éƒ½ä¾èµ–äº†åŠ¨æ€ä»£ç†**ã€‚

å°± Java æ¥è¯´ï¼ŒåŠ¨æ€ä»£ç†çš„å®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ **JDK åŠ¨æ€ä»£ç†**ã€**CGLIB åŠ¨æ€ä»£ç†**ã€**Javassit åŠ¨æ€ä»£ç†**ç­‰ç­‰ï¼Œä¸‹é¢è¯¦ç»†è®²è§£è¿™ä¸‰ç§ä»£ç†æœºåˆ¶ ğŸ‘‡

### â‘¡ JDK åŠ¨æ€ä»£ç†æœºåˆ¶

#### â…  æ¦‚è¿°

**åœ¨ Java åŠ¨æ€ä»£ç†æœºåˆ¶ä¸­ï¼Œ `InvocationHandler` æ¥å£å’Œ `Proxy` ç±»æ˜¯æ ¸å¿ƒã€‚**

è¦æƒ³åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œ éœ€è¦ä½¿ç”¨ `Proxy `ç±»çš„ `newProxylnstance `æ–¹æ³•ã€‚ è¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š 

```java
public static Object newProxyInstance(ClassLoader loader, Class<?>[] interfaces, InvocationHandler h) throws IllegalArgumentException{
    ......
}
```

- **ç±»åŠ è½½å™¨ï¼ˆclass loader)** ï¼šç”¨äºåŠ è½½ä»£ç†å¯¹è±¡ã€‚ä½œä¸º Java å®‰å…¨æ¨¡å‹çš„ä¸€éƒ¨åˆ†ï¼Œ å¯¹äºç³»ç»Ÿç±»å’Œä»å› ç‰¹ç½‘ä¸Šä¸‹è½½ä¸‹æ¥çš„ç±»ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„ç±»åŠ è½½å™¨ã€‚ç”¨ `null `è¡¨ç¤ºä½¿ç”¨é»˜è®¤çš„ç±»åŠ è½½å™¨
- **Class å¯¹è±¡æ•°ç»„**ï¼Œ è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½ä»£è¡¨éœ€è¦è¢«ä»£ç†ç±»å®ç°çš„æ¥å£
- **è°ƒç”¨å¤„ç†å™¨ handler**ï¼šå®ç°äº† `InvocationHandler` æ¥å£çš„å¯¹è±¡

è¦å®ç°åŠ¨æ€ä»£ç†çš„è¯ï¼Œè¿˜å¿…é¡»éœ€è¦å®ç° `InvocationHandler` æ¥è‡ªå®šä¹‰å¤„ç†é€»è¾‘ï¼ˆè°ƒç”¨å¤„ç†å™¨ï¼‰ã€‚ å½“æˆ‘ä»¬çš„åŠ¨æ€ä»£ç†å¯¹è±¡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶å€™ï¼Œè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨å°±ä¼šè¢«è½¬å‘åˆ°å®ç° `InvocationHandler` æ¥å£ç±»çš„ `invoke` æ–¹æ³•æ¥è°ƒç”¨ï¼š

```java
public interface InvocationHandler {
    /**
     * å½“ä½ ä½¿ç”¨ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•çš„æ—¶å€™å®é™…ä¼šè°ƒç”¨åˆ°è¿™ä¸ªæ–¹æ³•
     */
    public Object invoke(Object proxy, Method method, Object[] args)
        throws Throwable;
}

```

`invoke()` æ–¹æ³•æœ‰ä¸‹é¢ä¸‰ä¸ªå‚æ•°ï¼š

- **proxy** : åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»
- **method** : ç”¨äºè°ƒç”¨åŸå§‹æ–¹æ³•
- **args** : å½“å‰ method æ–¹æ³•çš„å‚æ•°

ä¹Ÿå°±æ˜¯è¯´ï¼š**ä½ é€šè¿‡`Proxy` ç±»çš„ `newProxyInstance()` åˆ›å»ºçš„ä»£ç†å¯¹è±¡åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå®é™…ä¼šè°ƒç”¨åˆ°å®ç°`InvocationHandler` æ¥å£çš„ç±»çš„ `invoke()`æ–¹æ³•ã€‚** <u>ä½ å¯ä»¥åœ¨ `invoke()` æ–¹æ³•ä¸­è‡ªå®šä¹‰å¤„ç†é€»è¾‘ï¼Œæ¯”å¦‚åœ¨æ–¹æ³•æ‰§è¡Œå‰ååšä»€ä¹ˆäº‹æƒ…</u>ã€‚

#### â…¡ JDK åŠ¨æ€ä»£ç†ç±»ä½¿ç”¨æ­¥éª¤

- é¦–å…ˆå¿…é¡»å®šä¹‰ä¸€ä¸ªæ¥å£åŠå…¶å®ç°ç±»ï¼ˆè¢«ä»£ç†ï¼‰
- è‡ªå®šä¹‰ `InvocationHandler` å¹¶é‡å†™`invoke`æ–¹æ³•ï¼Œåœ¨ `invoke` æ–¹æ³•ä¸­åˆ©ç”¨åå°„æœºåˆ¶è°ƒç”¨åŸç”Ÿæ–¹æ³•ï¼ˆè¢«ä»£ç†ç±»çš„æ–¹æ³•ï¼‰å¹¶è‡ªå®šä¹‰ä¸€äº›å¤„ç†é€»è¾‘ï¼›
- é€šè¿‡ `Proxy.newProxyInstance()` åˆ›å»ºæ¥å£ï¼ˆHelloï¼‰å®ä¾‹çš„ä»£ç†å¯¹è±¡ï¼Œå®ƒéœ€è¦ 3 ä¸ªå‚æ•°ï¼š
  - ç±»åŠ è½½å™¨
  - éœ€è¦å®ç°çš„æ¥å£æ•°ç»„ï¼Œè‡³å°‘éœ€è¦ä¼ å…¥ä¸€ä¸ªæ¥å£è¿›å»
  - ç”¨æ¥å¤„ç†æ¥å£æ–¹æ³•è°ƒç”¨çš„ `InvocationHandler` å®ä¾‹

#### â…¢ ä»£ç ç¤ºä¾‹

**1. å®šä¹‰å‘é€çŸ­ä¿¡çš„æ¥å£**

```java
public interface SmsService {
    String send(String message);
}
```

**2. å®ç°å‘é€çŸ­ä¿¡çš„æ¥å£**

```java
public class SmsServiceImpl implements SmsService {
    public String send(String message) {
        System.out.println("send message:" + message);
        return message;
    }
}
```

**3. å®šä¹‰ä¸€ä¸ªå®ç°äº† `InvocationHandler` ç±»çš„è°ƒç”¨å¤„ç†å™¨**

```java
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class DebugInvocationHandler implements InvocationHandler {
    /**
     * ä»£ç†ç±»ä¸­çš„çœŸå®å¯¹è±¡
     */
    private final Object target;

    public DebugInvocationHandler(Object target) {
        this.target = target;
    }

    public Object invoke(Object proxy, Method method, Object[] args) throws InvocationTargetException, IllegalAccessException {
        //è°ƒç”¨æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ
        System.out.println("before method " + method.getName());
        Object result = method.invoke(target, args);
        //è°ƒç”¨æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ
        System.out.println("after method " + method.getName());
        return result;
    }
}
```

å…¶ä¸­ï¼Œ`method.invoke` ç”¨äºè°ƒç”¨åŸå§‹æ–¹æ³•ï¼ˆJava **åå°„æœºåˆ¶**ï¼‰ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20201209113656.png" style="zoom:67%;" />

**4. å®šä¹‰ä¸€ä¸ªè·å–ä»£ç†å¯¹è±¡çš„å·¥å‚ç±»**

```java
public class JdkProxyFactory {
    public static Object getProxy(Object target) {
        return Proxy.newProxyInstance(
                target.getClass().getClassLoader(), // ç›®æ ‡ç±»çš„ç±»åŠ è½½
                target.getClass().getInterfaces(),  // ä»£ç†éœ€è¦å®ç°çš„æ¥å£ï¼Œå¯æŒ‡å®šå¤šä¸ª
                new DebugInvocationHandler(target)   // ä»£ç†å¯¹è±¡å¯¹åº”çš„è‡ªå®šä¹‰ InvocationHandler
        );
    }
}
```

`getProxy()` ï¼šä¸»è¦é€šè¿‡`Proxy.newProxyInstanceï¼ˆï¼‰`æ–¹æ³•è·å–æŸä¸ªç±»çš„ä»£ç†å¯¹è±¡

**5. å®é™…ä½¿ç”¨**

```java
SmsService smsService = (SmsService) JdkProxyFactory.getProxy(new SmsServiceImpl());
smsService.send("java");
```

è¿è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œæ§åˆ¶å°æ‰“å°å‡ºï¼š

```
before method send
send message:java
after method send
```

### â‘¢ CGLIB åŠ¨æ€ä»£ç†æœºåˆ¶

#### â…  æ¦‚è¿°

â° **JDK åŠ¨æ€ä»£ç†æœ‰ä¸€ä¸ªæœ€è‡´å‘½çš„é—®é¢˜æ˜¯å…¶åªèƒ½ä»£ç†å®ç°äº†æ¥å£çš„ç±»ã€‚**

**ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ CGLIB åŠ¨æ€ä»£ç†æœºåˆ¶æ¥é¿å…ã€‚**

> ğŸ’¡ [CGLIB](https://github.com/cglib/cglib)(*Code Generation Library*)æ˜¯ä¸€ä¸ªåŸºäº[ASM](http://www.baeldung.com/java-asm)çš„å­—èŠ‚ç ç”Ÿæˆåº“ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶å¯¹å­—èŠ‚ç è¿›è¡Œä¿®æ”¹å’ŒåŠ¨æ€ç”Ÿæˆã€‚**CGLIB é€šè¿‡ç»§æ‰¿æ–¹å¼å®ç°ä»£ç†**ã€‚å¾ˆå¤šçŸ¥åçš„å¼€æºæ¡†æ¶éƒ½ä½¿ç”¨åˆ°äº†[CGLIB](https://github.com/cglib/cglib)ï¼Œ ä¾‹å¦‚ **Spring ä¸­çš„ AOP æ¨¡å—ä¸­ï¼šå¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ï¼Œåˆ™é»˜è®¤é‡‡ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œå¦åˆ™é‡‡ç”¨ CGLIB åŠ¨æ€ä»£ç†**ã€‚

**åœ¨ CGLIB åŠ¨æ€ä»£ç†æœºåˆ¶ä¸­ï¼Œ `MethodInterceptor` æ¥å£å’Œ `Enhancer` ç±»æ˜¯æ ¸å¿ƒã€‚**

ä½ éœ€è¦è‡ªå®šä¹‰ `MethodInterceptor` å¹¶é‡å†™ `intercept` æ–¹æ³•ï¼Œ`intercept` ç”¨äºæ‹¦æˆªå¢å¼ºè¢«ä»£ç†ç±»çš„æ–¹æ³•ã€‚

```java
public interface MethodInterceptor extends Callback{
    // æ‹¦æˆªè¢«ä»£ç†ç±»ä¸­çš„æ–¹æ³•
    public Object intercept(Object obj, java.lang.reflect.Method method, Object[] args,
                               MethodProxy proxy) throws Throwable;
}
```

1. **obj** :è¢«ä»£ç†çš„å¯¹è±¡ï¼ˆéœ€è¦å¢å¼ºçš„å¯¹è±¡ï¼‰
2. **method** :è¢«æ‹¦æˆªçš„æ–¹æ³•ï¼ˆéœ€è¦å¢å¼ºçš„æ–¹æ³•ï¼‰
3. **args** :æ–¹æ³•å…¥å‚
4. **methodProxy** :ç”¨äºè°ƒç”¨åŸå§‹æ–¹æ³•

å’Œ JDK ç±»ä¼¼ï¼Œä½ å¯ä»¥é€šè¿‡ `Enhancer`ç±»æ¥åŠ¨æ€è·å–è¢«ä»£ç†ç±»ï¼Œå½“ä»£ç†ç±»è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œå®é™…è°ƒç”¨çš„æ˜¯ `MethodInterceptor` ä¸­çš„ `intercept` æ–¹æ³•ã€‚

#### â…¡ CGLIB åŠ¨æ€ä»£ç†ç±»ä½¿ç”¨æ­¥éª¤

- é¦–å…ˆå®šä¹‰ä¸€ä¸ªç±»ï¼ˆè¢«ä»£ç†ç±»/ç›®æ ‡ç±»ï¼Œéœ€è¦å¢å¼ºç±»ï¼‰ï¼›
- è‡ªå®šä¹‰ `MethodInterceptor` å¹¶é‡å†™ `intercept` æ–¹æ³•ï¼Œ`intercept` ç”¨äºæ‹¦æˆªå¢å¼ºè¢«ä»£ç†ç±»çš„æ–¹æ³•ï¼ˆå’Œ JDK åŠ¨æ€ä»£ç†ä¸­çš„ `invoke` æ–¹æ³•ç±»ä¼¼ï¼‰
- é€šè¿‡ `Enhancer` ç±»çš„ `create()`åˆ›å»ºä»£ç†ç±»ï¼›

#### â…¢ ä»£ç ç¤ºä¾‹

ğŸš¨ ä¸åŒäº JDK åŠ¨æ€ä»£ç†ä¸éœ€è¦é¢å¤–çš„ä¾èµ–ã€‚[CGLIB](https://github.com/cglib/cglib)(*Code Generation Library*) å®é™…æ˜¯å±äºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå¦‚æœä½ è¦ä½¿ç”¨å®ƒçš„è¯ï¼Œ**éœ€è¦æ‰‹åŠ¨æ·»åŠ ç›¸å…³ä¾èµ–**ã€‚

```xml
<dependency>
  <groupId>cglib</groupId>
  <artifactId>cglib</artifactId>
  <version>3.3.0</version>
</dependency>
```

**1. å®ç°ä¸€ä¸ªå‘é€çŸ­ä¿¡çš„ç±»**

```java
public class AliSmsService {
    public String send(String message) {
        System.out.println("send message:" + message);
        return message;
    }
}
```

**2. è‡ªå®šä¹‰ `MethodInterceptor`ï¼ˆæ–¹æ³•æ‹¦æˆªå™¨ï¼‰**

```java
import net.sf.cglib.proxy.MethodInterceptor;
import net.sf.cglib.proxy.MethodProxy;

import java.lang.reflect.Method;

/**
 * è‡ªå®šä¹‰MethodInterceptor
 */
public class DebugMethodInterceptor implements MethodInterceptor {


    /**
     * @param o           è¢«ä»£ç†çš„å¯¹è±¡ï¼ˆéœ€è¦å¢å¼ºçš„å¯¹è±¡ï¼‰
     * @param method      è¢«æ‹¦æˆªçš„æ–¹æ³•ï¼ˆéœ€è¦å¢å¼ºçš„æ–¹æ³•ï¼‰
     * @param args        æ–¹æ³•å…¥å‚
     * @param methodProxy ç”¨äºè°ƒç”¨åŸå§‹æ–¹æ³•
     */
    @Override
    public Object intercept(Object o, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {
        //è°ƒç”¨æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ
        System.out.println("before method " + method.getName());
        Object object = methodProxy.invokeSuper(o, args);
        //è°ƒç”¨æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ
        System.out.println("after method " + method.getName());
        return object;
    }

}
```

å…¶ä¸­ï¼Œ`methodProxy.invokeSuper` ç”¨äºè°ƒç”¨åŸå§‹æ–¹æ³•ï¼ˆJava **åå°„æœºåˆ¶**ï¼‰

**3. è·å–ä»£ç†ç±»**

```java
import net.sf.cglib.proxy.Enhancer;

public class CglibProxyFactory {

    public static Object getProxy(Class<?> clazz) {
        // åˆ›å»ºåŠ¨æ€ä»£ç†å¢å¼ºç±»
        Enhancer enhancer = new Enhancer();
        // è®¾ç½®ç±»åŠ è½½å™¨
        enhancer.setClassLoader(clazz.getClassLoader());
        // è®¾ç½®è¢«ä»£ç†ç±»
        enhancer.setSuperclass(clazz);
        // è®¾ç½®æ–¹æ³•æ‹¦æˆªå™¨
        enhancer.setCallback(new DebugMethodInterceptor());
        // åˆ›å»ºä»£ç†ç±»
        return enhancer.create();
    }
}
```

**4. å®é™…ä½¿ç”¨**

```java
AliSmsService aliSmsService = (AliSmsService) CglibProxyFactory.getProxy(AliSmsService.class);
aliSmsService.send("java");
```

è¿è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œæ§åˆ¶å°æ‰“å°å‡ºï¼š

```bash
before method send
send message:java
after method send
```

#### â…£ JDK åŠ¨æ€ä»£ç†å’Œ CGLIB åŠ¨æ€ä»£ç†å¯¹æ¯”

- JDK åŠ¨æ€ä»£ç†æ˜¯å®ç°äº†è¢«ä»£ç†å¯¹è±¡çš„æ¥å£ï¼ŒCglib æ˜¯ç»§æ‰¿äº†è¢«ä»£ç†å¯¹è±¡
- **JDK åŠ¨æ€ä»£ç†åªèƒ½åªèƒ½ä»£ç†å®ç°äº†æ¥å£çš„ç±»ï¼Œè€Œ CGLIB å¯ä»¥ä»£ç†æœªå®ç°ä»»ä½•æ¥å£çš„ç±»ã€‚** å¦å¤–ï¼Œ CGLIB åŠ¨æ€ä»£ç†æ˜¯é€šè¿‡ç”Ÿæˆä¸€ä¸ªè¢«ä»£ç†ç±»çš„å­ç±»æ¥æ‹¦æˆªè¢«ä»£ç†ç±»çš„æ–¹æ³•è°ƒç”¨ï¼Œå› æ­¤ä¸èƒ½ä»£ç†å£°æ˜ä¸º `final` ç±»å‹çš„ç±»å’Œæ–¹æ³•ã€‚
- å°±äºŒè€…çš„æ•ˆç‡æ¥è¯´ï¼Œ**å¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯ JDK åŠ¨æ€ä»£ç†çš„æ•ˆç‡æ›´é«˜**ï¼Œéšç€ JDK ç‰ˆæœ¬çš„å‡çº§ï¼Œè¿™ä¸ªä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ã€‚

### â‘£ Javassit åŠ¨æ€ä»£ç†æœºåˆ¶

#### â…  æ¦‚è¿°

ç”±äº JVM æ˜¯é€šè¿‡å­—èŠ‚ç æ–‡ä»¶ `.class` çš„äºŒè¿›åˆ¶ä¿¡æ¯åŠ è½½ç±»çš„ï¼Œé‚£ä¹ˆï¼Œå¦‚æœæˆ‘ä»¬åœ¨è¿è¡ŒæœŸç³»ç»Ÿä¸­ï¼Œéµå¾ª Java ç¼–è¯‘ç³»ç»Ÿç»„ç»‡ `.class` æ–‡ä»¶çš„æ ¼å¼å’Œç»“æ„ï¼Œç”Ÿæˆç›¸åº”çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œç„¶åå†æŠŠè¿™ä¸ªäºŒè¿›åˆ¶æ•°æ®åŠ è½½è½¬æ¢æˆå¯¹åº”çš„ç±»ï¼Œè¿™æ ·ï¼Œå°±å®Œæˆäº†åœ¨ä»£ç ä¸­åŠ¨æ€åˆ›å»ºä¸€ä¸ªç±»çš„èƒ½åŠ›äº†ã€‚

<img src="https://gitee.com/veal98/images/raw/master/img/20201209151138.png" style="zoom: 50%;" />

åœ¨è¿è¡Œæ—¶æœŸæŒ‰ç…§ JVM è§„èŒƒå¯¹ class æ–‡ä»¶çš„ç»„ç»‡è§„åˆ™ç”Ÿæˆå¯¹åº”çš„äºŒè¿›åˆ¶å­—èŠ‚ç ï¼Œå½“å‰æœ‰å¾ˆå¤šå¼€æºæ¡†æ¶å¯ä»¥å®Œæˆè¿™äº›åŠŸèƒ½ï¼Œå¦‚ **ASM**ï¼Œ**Javassist**

Javassist æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†æã€ç¼–è¾‘å’Œåˆ›å»º Java å­—èŠ‚ç çš„ç±»åº“ã€‚æ˜¯ç”±ä¸œäº¬å·¥ä¸šå¤§å­¦çš„æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ç³»çš„ Shigeru Chiba ï¼ˆåƒå¶ æ»‹ï¼‰æ‰€åˆ›å»ºçš„ã€‚å®ƒå·²åŠ å…¥äº†å¼€æ”¾æºä»£ç  JBoss åº”ç”¨æœåŠ¡å™¨é¡¹ç›®,é€šè¿‡ä½¿ç”¨ Javassist å¯¹å­—èŠ‚ç æ“ä½œä¸º JBoss å®ç°åŠ¨æ€ AOP æ¡†æ¶ã€‚Javassist çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒæ“ä½œå­—èŠ‚ç çš„èƒ½åŠ›ï¼Œå¯ä»¥åŠ¨æ€çš„ä¿®æ”¹ç±»ï¼ŒåŠ è½½ç±»ï¼Œæ·»åŠ åˆ é™¤å­—æ®µã€æ–¹æ³•ç­‰æ“ä½œã€‚

ğŸ‘ **Dubbo** é»˜è®¤ä½¿ç”¨çš„å°±æ˜¯ Javassit æ¥è¿›è¡ŒåŠ¨æ€ä»£ç†

> ğŸ’¡ æ­£å¸¸åˆ›å»ºä¸€ä¸ªç±»çš„ä»£ç å¦‚ä¸‹ï¼š
>
> ```java
> package com.samples;
>  
> public class Programmer {
> 	public void code(){
> 		System.out.println("I'm a Programmer,Just Coding.....");
> 	}
> }
> ```
>
> ä¸‹é¢é€šè¿‡ Javassist åˆ›å»º `Programmer` ç±»ï¼š
>
> ```java
> import javassist.ClassPool;
> import javassist.CtClass;
> import javassist.CtMethod;
> import javassist.CtNewMethod;
>  
> public class MyGenerator {
>  
> 	public static void main(String[] args) throws Exception {
> 		ClassPool pool = ClassPool.getDefault();
>         // åˆ›å»º Programmer ç±»		
> 		CtClass cc= pool.makeClass("com.samples.Programmer");
> 		// å®šä¹‰æ–¹æ³•
> 		CtMethod method = CtNewMethod.make("public void code(){}", cc);
> 		// æ’å…¥æ–¹æ³•ä»£ç 
> 		method.insertBefore("System.out.println(\"I'm a Programmer,Just Coding.....\");");
> 		cc.addMethod(method);
> 		// ä¿å­˜ç”Ÿæˆçš„å­—èŠ‚ç 
> 		cc.writeFile("d://temp");
> 	}
> }
> ```
>
> é€šè¿‡ JD-gui åç¼–è¯‘å·¥å…·æ‰“å¼€ `Programmer.class` å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ä»£ç ï¼š
>
> <img src="https://gitee.com/veal98/images/raw/master/img/20201209151002.png" style="zoom:67%;" />

Javassist ä»£ç†é€»è¾‘å¯ä»¥æ˜¯åœ¨ `MethodHandler` æ¥å£ä¸­ï¼Œ`MethodHandler `åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š

```java
Object invoke(Object self, Method thisMethod, Method proceed,Object[] args)
```

- `self`ï¼šç”Ÿæˆçš„ä»£ç†ç±» 
- `thisMethod`ï¼šç›®æ ‡ç±»çš„æ–¹æ³• 
- `proceed`ï¼šä»£ç†ç±»çš„æ–¹æ³• 
- `args`ï¼šæ‰§è¡Œæ–¹æ³•çš„å‚æ•°

Javassist çš„æ‰§è¡Œé€»è¾‘å’Œ cglib çš„å¾ˆåƒï¼Œæ˜¯åœ¨ä»£ç†ç±»å®ä¾‹ä¸Šè°ƒç”¨ä»£ç†æ–¹æ³•ï¼š

```java
proceed.invoke(self, args)
```

#### â…¡ Javassit åŠ¨æ€ä»£ç†ç±»ä½¿ç”¨æ­¥éª¤

- é¦–å…ˆæˆ‘ä»¬**éœ€è¦å®šä¹‰æ¥å£åŠå…¶å®ç°ç±»**
- è‡ªå®šä¹‰ `MethodHandler`  å¹¶é‡å†™ `invoke` æ–¹æ³•ï¼Œ`invoke` ç”¨äºæ‹¦æˆªå¢å¼ºè¢«ä»£ç†ç±»çš„æ–¹æ³•
- é€šè¿‡ `ProxyFactory` ç±»çš„ `.createClass().newInstance()`åˆ›å»ºä»£ç†ç±»

#### â…¢ ä»£ç ç¤ºä¾‹

**1. å®šä¹‰å‘é€çŸ­ä¿¡çš„æ¥å£**

```java
public interface SmsService {
    String send(String message);
}
```

**2. å®ç°å‘é€çŸ­ä¿¡çš„æ¥å£**

```java
public class SmsServiceImpl implements SmsService {
    public String send(String message) {
        System.out.println("send message:" + message);
        return message;
    }
}
```

**3. å®šä¹‰ä¸€ä¸ªå®ç°äº† `MethodHandler` ç±»çš„è°ƒç”¨å¤„ç†å™¨**

```java
import javassist.util.proxy.MethodHandler;
import java.lang.reflect.Method;

public class DoSomethingMethodHandler implements MethodHandler {

    @Override
    public Object invoke(Object self, Method thisMethod, Method proceed, Object[] args) throws Throwable {
        //è°ƒç”¨æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ
        System.out.println("before method " + method.getName());
        Object result = proceed.invoke(self, args);
        //è°ƒç”¨æ–¹æ³•ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ è‡ªå·±çš„æ“ä½œ
        System.out.println("after method " + method.getName());
        return result;
    }
}
```

**4. åˆ›å»ºä»£ç†ç±»**

```java
import javassist.util.proxy.ProxyFactory;

public class JavassistProxyFactory<T> {
	
    /**
     * ä»£ç†ç±»ä¸­çš„çœŸå®å¯¹è±¡
     */
    private Object target;

    public JavassistProxyFactory(T target) {
        this.target = target;
    }

    public static Object T getProxy(Class<?> clazz) throws InstantiationException, IllegalAccessException {
        // åˆ›å»ºåŠ¨æ€ä»£ç†ç±»
        ProxyFactory proxyFactory = new ProxyFactory();
        // è®¾ç½®ç±»åŠ è½½å™¨
        proxyFactory.setSuperclass(clazz);
        // è®¾ç½®æ–¹æ³•æ‹¦æˆªå™¨
        proxyFactory.setHandler(new DoSomethingMethodHandler());
        // åˆ›å»ºåŠ¨æ€ä»£ç†ç±»
        return proxyFactory.createClass().newInstance();
    }
}
```

**5. å®é™…ä½¿ç”¨**

```java
SmsService smsService = JavassistProxyFactory.getProxy(SmsServiceImpl.class);
smsService.send("java");
```

è¿è¡Œä¸Šè¿°ä»£ç ä¹‹åï¼Œæ§åˆ¶å°æ‰“å°å‡ºï¼š

```
before method send
send message:java
after method send
```

### â‘¤ ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨åŠ¨æ€ä»£ç†

- è®¾è®¡æ¨¡å¼ä¸­æœ‰ä¸€ä¸ªè®¾è®¡åŸåˆ™æ˜¯**å¼€é—­åŸåˆ™**ï¼Œå³**å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾**ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œä¸­æœ‰æ—¶ä¼šæ¥æ‰‹å¾ˆå¤šå‰äººçš„ä»£ç ï¼Œé‡Œé¢ä»£ç é€»è¾‘è®©äººæ‘¸ä¸ç€å¤´è„‘ï¼Œè¿™æ—¶å°±å¾ˆéš¾å»ä¸‹æ‰‹ä¿®æ”¹ä»£ç ï¼Œé‚£ä¹ˆè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä»£ç†å¯¹ç±»è¿›è¡Œå¢å¼ºã€‚

- æˆ‘ä»¬åœ¨ä½¿ç”¨ **RPC æ¡†æ¶**çš„æ—¶å€™ï¼Œæ¡†æ¶æœ¬èº«å¹¶ä¸èƒ½æå‰çŸ¥é“å„ä¸ªä¸šåŠ¡æ–¹è¦è°ƒç”¨å“ªäº›æ¥å£çš„å“ªäº›æ–¹æ³• ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ç”¨é€šè¿‡åŠ¨æ€ä»£ç†çš„æ–¹å¼æ¥å»ºç«‹ä¸€ä¸ªä¸­é—´äººç»™å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¹Ÿæ–¹ä¾¿æ¡†æ¶è¿›è¡Œæ­å»ºé€»è¾‘ï¼ŒæŸç§ç¨‹åº¦ä¸Šä¹Ÿæ˜¯å®¢æˆ·ç«¯ä»£ç å’Œæ¡†æ¶æ¾è€¦åˆçš„ä¸€ç§è¡¨ç°ã€‚

  **Spring çš„ AOP æœºåˆ¶**åŒæ ·ä¹Ÿæ˜¯é‡‡ç”¨äº†åŠ¨æ€ä»£ç†

## 5. é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†å¯¹æ¯”

- **çµæ´»æ€§** ï¼šåŠ¨æ€ä»£ç†æ›´åŠ çµæ´»ï¼Œä¸éœ€è¦å¿…é¡»å®ç°æ¥å£ï¼Œå¯ä»¥ç›´æ¥ä»£ç†å®ç°ç±»ï¼Œå¹¶ä¸”å¯ä»¥ä¸éœ€è¦é’ˆå¯¹æ¯ä¸ªç›®æ ‡ç±»éƒ½åˆ›å»ºä¸€ä¸ªä»£ç†ç±»ã€‚å¦å¤–ï¼Œé™æ€ä»£ç†ä¸­ï¼Œæ¥å£ä¸€æ—¦æ–°å¢åŠ æ–¹æ³•ï¼Œç›®æ ‡å¯¹è±¡å’Œä»£ç†å¯¹è±¡éƒ½è¦è¿›è¡Œä¿®æ”¹ï¼Œè¿™æ˜¯éå¸¸éº»çƒ¦çš„

- **JVM å±‚é¢** ï¼šé™æ€ä»£ç†åœ¨ç¼–è¯‘æ—¶å°±å°†æ¥å£ã€å®ç°ç±»ã€ä»£ç†ç±»è¿™äº›éƒ½å˜æˆäº†ä¸€ä¸ªä¸ªå®é™…çš„ class æ–‡ä»¶ã€‚è€ŒåŠ¨æ€ä»£ç†æ˜¯åœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆç±»å­—èŠ‚ç ï¼Œå¹¶åŠ è½½åˆ° JVM ä¸­çš„ã€‚

## ğŸ“š References

- ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ - å· 1 åŸºç¡€çŸ¥è¯† - ç¬¬ 10 ç‰ˆã€‹
- ã€ŠThinking In Javaï¼ˆJava ç¼–ç¨‹æ€æƒ³ï¼‰- ç¬¬ 4 ç‰ˆã€‹
- [JavaGuide (gitee.io)](https://snailclimb.gitee.io/javaguide/#/docs/java/basis/ä»£ç†æ¨¡å¼è¯¦è§£?id=_32-cglib-åŠ¨æ€ä»£ç†æœºåˆ¶)
- [è¯¦è§£javaåŠ¨æ€ä»£ç†æœºåˆ¶ä»¥åŠä½¿ç”¨åœºæ™¯(ä¸€)_è¿œæ–¹å’Œè¯— çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/u011784767/article/details/78281384?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1.not_use_machine_learn_pai&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1.not_use_machine_learn_pai)
- [ JavaåŠ¨æ€ä»£ç†æœºåˆ¶è¯¦è§£ï¼ˆJDK å’ŒCGLIBï¼ŒJavassistï¼ŒASMï¼‰_æˆ‘çš„ç¨‹åºäººç”Ÿ(äº¦å±±æœ­è®°)-CSDNåšå®¢](https://blog.csdn.net/luanlouis/article/details/24589193)
- [jboss-javassist/javassist Wiki (github.com)](https://github.com/jboss-javassist/javassist/wiki/Tutorial-1)
- [Cglibã€Javassistã€JDKåŠ¨æ€ä»£ç† - trayvonçš„ä¸ªäººç©ºé—´ - OSCHINA](https://my.oschina.net/u/2474629/blog/3128030)
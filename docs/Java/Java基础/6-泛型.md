# **ğŸ¥ ** æ³›å‹ç¨‹åºè®¾è®¡

---

ä½¿ç”¨æ³›å‹æœºåˆ¶ç¼–å†™çš„ç¨‹åºä»£ç è¦æ¯”é‚£äº›æ‚ä¹±åœ°ä½¿ç”¨ Object å˜é‡ï¼Œç„¶åå†è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢çš„ä»£ç å…·æœ‰æ›´å¥½çš„å®‰å…¨æ€§å’Œå¯è¯»æ€§ã€‚æ³›å‹å¯¹äºé›†åˆç±»å°¤å…¶æœ‰ç”¨ï¼Œä¾‹å¦‚ï¼Œ ArrayList å°±æ˜¯ä¸€ä¸ªæ— å¤„ä¸åœ¨çš„é›†åˆç±»ã€‚ æ³›å‹å¾ˆåƒ C++ ä¸­çš„æ¨¡æ¿ã€‚

## 1. ç±»å‹å‚æ•° type parameters

æ¯”å¦‚ï¼š`ArrayList `ç±»æœ‰ä¸€ä¸ªç±»å‹å‚æ•°ç”¨æ¥æŒ‡ç¤ºå…ƒç´ çš„ç±»å‹ï¼š

```java
ArrayList<String> arr = new ArrayList<>();
```

è¿™ä½¿å¾—ä»£ç å…·æœ‰æ›´å¥½çš„å¯è¯»æ€§ã€‚äººä»¬ä¸€çœ‹å°±çŸ¥é“è¿™ä¸ªæ•°ç»„åˆ—è¡¨ä¸­åŒ…å«çš„æ˜¯ `String `å¯¹è±¡ã€‚

> ğŸ“œ åœ¨ Java SE 7 åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œ æ„é€ å‡½æ•°ä¸­å¯ä»¥çœç•¥æ³›å‹ç±»å‹ï¼š
>
> ```java
> ArrayList files = new ArrayListo<String>();
> ```
>
>  çœç•¥çš„ç±»å‹å¯ä»¥ä»å˜é‡çš„ç±»å‹æ¨æ–­å¾—å‡ºã€‚

## 2. å®šä¹‰ç®€å•æ³›å‹ç±» generic class

**ä¸€ä¸ªæ³›å‹ç±»ï¼ˆ generic class ) å°±æ˜¯å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å˜é‡çš„ç±»**ã€‚

```java
class Pair<T> {
    private T first;
    private T last;

    public Pair(T first, T last) {
        this.first = first;
        this.last = last;
    }

    public T getFirst() {
        return first;
    }

    public T getLast() {
        return last;
    }
}

public class Demo {
    public static void main(String[] args) {
        Pair<String> p1 = new Pair<>("Hello", "world");  
        Pair<Integer> p2 = new Pair<>(123, 456);
        Class c1 = p1.getClass();
        Class c2 = p2.getClass();
        System.out.println(c1 == c2); // true
        System.out.println(c1 == Pair.class); // true    
        System.out.println(p1.getFirst()); // Hello
    }
}
```

æ³›å‹ç±»å¯ä»¥æœ‰å¤šä¸ªç±»å‹å˜é‡ã€‚ä¾‹å¦‚ï¼Œ å¯ä»¥å®šä¹‰ `Pair `ç±»ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªåŸŸå’Œç¬¬äºŒä¸ªåŸŸä½¿ç”¨ä¸åŒçš„ç±»å‹ï¼š

```java
public class Pair<T,U>{
	
}
```

ç±»å‹å˜é‡ç”¨ `,` åˆ†å‰²ã€‚

> ğŸ“œ ç±»å‹å˜é‡ä½¿ç”¨å¤§å†™å½¢å¼ï¼Œä¸”æ¯”è¾ƒçŸ­ï¼Œ è¿™æ˜¯å¾ˆå¸¸è§çš„ã€‚åœ¨ Java åº“ä¸­ï¼š
>
> - ä½¿ç”¨å˜é‡ `E` è¡¨ç¤ºé›†åˆçš„å…ƒç´ ç±»å‹ï¼Œ
> - `K `å’Œ `V` åˆ†åˆ«è¡¨ç¤ºè¡¨çš„å…³é”®å­—ä¸å€¼çš„ç±»å‹
> - `T` ( éœ€è¦æ—¶è¿˜å¯ä»¥ç”¨ä¸´è¿‘çš„å­—æ¯ `U `å’Œ `S`) è¡¨ç¤ºâ€œ ä»»æ„ç±»å‹â€

> ğŸ“œ ä»è¡¨é¢ä¸Šçœ‹ï¼Œ Java çš„æ³›å‹ç±»ç±»ä¼¼äº C++ çš„æ¨¡æ¿ç±»ã€‚å”¯ä¸€æ˜æ˜¾çš„ä¸åŒæ˜¯ Java æ²¡ æœ‰ä¸“ç”¨çš„ `template `å…³é”®å­—ã€‚ä½†æ˜¯ï¼Œ åœ¨æœ¬ç« ä¸­è¯»è€…å°†ä¼šçœ‹åˆ°ï¼Œ **è¿™ä¸¤ç§æœºåˆ¶æœ‰ç€æœ¬è´¨çš„åŒºåˆ«**ã€‚

## 3. é™æ€æ³›å‹æ–¹æ³•

ç¼–å†™æ³›å‹ç±»æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ï¼Œæ³›å‹ç±»å‹`<T>`ä¸èƒ½ç”¨äºé™æ€æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š

```java
// å¯¹é™æ€æ–¹æ³•ä½¿ç”¨<T>:
public static Pair<T> create(T first, T last) {
    return new Pair<T>(first, last);
}
```

ä¸Šè¿°ä»£ç ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œæˆ‘ä»¬æ— æ³•åœ¨é™æ€æ–¹æ³•`create()`çš„æ–¹æ³•å‚æ•°å’Œè¿”å›ç±»å‹ä¸Šä½¿ç”¨æ³›å‹ç±»å‹`T`

æœ‰äº›åŒå­¦åœ¨ç½‘ä¸Šæœç´¢å‘ç°ï¼Œå¯ä»¥åœ¨`static`ä¿®é¥°ç¬¦åé¢åŠ ä¸€ä¸ª`<T>`ï¼Œç¼–è¯‘å°±èƒ½é€šè¿‡ï¼š

## 4. ç±»å‹å˜é‡çš„é™å®š

æœ‰æ—¶ï¼Œç±»æˆ–æ–¹æ³•éœ€è¦å¯¹ç±»å‹å˜é‡åŠ ä»¥çº¦æŸã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ã€‚æˆ‘ä»¬è¦è®¡ç®—æ•°ç»„ä¸­çš„æœ€å°å…ƒç´ ï¼š

```java
class ArrayAlg{
    public static<T> T min(T[] a){
        if(a == null || a.length == 0)
            return null;
        T smallest = a[0];
        for(int i = 0; i < a.length; i++){
            if(smallest.compareTo(a[i]) > 0)
                smallest = a[i];
        }
        return smallest;
    }
}
```

ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ã€‚å˜é‡ `smallest `ç±»å‹ä¸º `T`, è¿™æ„ å‘³ç€å®ƒå¯ä»¥æ˜¯ä»»ä½•ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚â“ **æ€ä¹ˆæ‰èƒ½ç¡®ä¿¡ `T` æ‰€å±çš„ç±»æœ‰ `compareTo `æ–¹æ³•å‘¢ï¼Ÿ**

è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ¡ˆæ˜¯å°† `T` é™åˆ¶ä¸ºå®ç°äº† `Comparable `æ¥å£çš„ç±»ã€‚

```java
public static<T extends Comparable> T min(T[] a){
    
}
```

â“ è¯»è€…æˆ–è®¸ä¼šæ„Ÿåˆ°å¥‡æ€ªåœ¨æ­¤ä¸ºä»€ä¹ˆä½¿ç”¨å…³é”®å­— `extends `è€Œä¸æ˜¯ `implements `? æ¯•ç«Ÿï¼Œ `Comparable `æ˜¯ä¸€ä¸ªæ¥å£ã€‚ä¸‹é¢çš„è®°æ³•

```java
<T extends BoundingType>
```

è¡¨ç¤º `T` åº”è¯¥æ˜¯ç»‘å®šç±»å‹çš„å­ç±»å‹ ï¼ˆsubtype)ã€‚ `T` å’Œç»‘å®šç±»å‹å¯ä»¥æ˜¯ç±»ï¼Œ ä¹Ÿå¯ä»¥æ˜¯æ¥å£ã€‚<u>é€‰æ‹©å…³é”®å­— `extends `çš„åŸå› æ˜¯æ›´æ¥è¿‘å­ç±»çš„æ¦‚å¿µ</u>ï¼Œ å¹¶ä¸” Java çš„è®¾è®¡è€…ä¹Ÿä¸æ‰“ç®—åœ¨è¯­è¨€ä¸­å†æ·»åŠ  ä¸€ä¸ªæ–°çš„å…³é”®å­—ï¼ˆå¦‚ sub)ã€‚

ä¸€ä¸ªç±»å‹å˜é‡æˆ–é€šé…ç¬¦å¯ä»¥æœ‰å¤šä¸ªé™å®šï¼Œ ä¾‹å¦‚ï¼š 

```java
T extends Comparable & Serializable
```

 é™å®šç±»å‹ç”¨ `&` åˆ†éš”ã€‚

## 5. æ³›å‹ä»£ç å’Œè™šæ‹Ÿæœº

â­ **è™šæ‹Ÿæœºæ²¡æœ‰æ³›å‹ç±»å‹å¯¹è±¡ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½å±äºæ™®é€šç±»**ã€‚

### â‘  ç±»å‹æ“¦é™¤

**æ— è®ºä½•æ—¶å®šä¹‰ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œ éƒ½è‡ªåŠ¨æä¾›äº†ä¸€ä¸ªç›¸åº”çš„åŸå§‹ç±»å‹ ï¼ˆ raw type )**ã€‚åŸå§‹ç±»å‹çš„åå­—å°±æ˜¯åˆ å»ç±»å‹å‚æ•°åçš„æ³›å‹ç±»å‹åã€‚æ“¦é™¤ï¼ˆerased) ç±»å‹å˜é‡, å¹¶æ›¿æ¢ä¸ºé™å®šç±»å‹ï¼ˆæ— é™å®šçš„å˜é‡ç”¨ Object) ã€‚

ä¾‹å¦‚ï¼Œ `Pair` çš„åŸå§‹ç±»å‹å¦‚ä¸‹æ‰€ç¤ºï¼š

å‡å®šå£°æ˜äº†ä¸€ ä¸ªä¸åŒçš„ç±»å‹ï¼š

```java
public class Interval <T extends Comparable & Serializableã€‰implements Serializable{
    private T lower;
    private T upper;
    ...
    public Interval (T first, T second){
        if (first.compareTo(second) <= 0) { 
            lower = first; upper = second; 
        }
        else { 
            lower = second; 
            upper = first; 
        }
    }
}
```

åŸå§‹ç±»å‹ `Interval `å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
public class Interval implements Serializable{
    private Comparable lower;
    private Coiparable upper;
    public Interval (Comparable first, Comparable second) { 
        . . . 
    }
}
```



### â‘¡ ç¿»è¯‘æ³›å‹è¡¨è¾¾å¼

**å½“ç¨‹åºè°ƒç”¨æ³›å‹æ–¹æ³•æ—¶ï¼Œå¦‚æœæ“¦é™¤è¿”å›ç±»å‹ï¼Œ ç¼–è¯‘å™¨æ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢**ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªè¯­å¥åºåˆ—

```java
Pair<Employee> buddies = ...;
Employee buddy = buddies.getFirst();
```

æ“¦é™¤ `getFirst `çš„è¿”å›ç±»å‹åå°†è¿”å› `Object `ç±»å‹ã€‚ç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥ `Employee `çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œç¼–è¯‘å™¨æŠŠè¿™ä¸ªæ–¹æ³•è°ƒç”¨ç¿»è¯‘ä¸ºä¸¤æ¡è™šæ‹ŸæœºæŒ‡ä»¤ï¼š

- å¯¹åŸå§‹æ–¹æ³• `Pair.getFirst` çš„è°ƒç”¨ã€‚ 
- å°†è¿”å›çš„ `Object `ç±»å‹å¼ºåˆ¶è½¬æ¢ä¸º `Employee `ç±»å‹

å½“å­˜å–ä¸€ä¸ªæ³›å‹åŸŸæ—¶ä¹Ÿè¦æ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚å‡è®¾ `Pair `ç±»çš„ `first `åŸŸå’Œ `second `åŸŸéƒ½æ˜¯å…¬æœ‰çš„ï¼ˆä¹Ÿè®¸è¿™ä¸æ˜¯ä¸€ç§å¥½çš„ç¼–ç¨‹é£æ ¼ï¼Œä½†åœ¨ Java ä¸­æ˜¯åˆæ³•çš„ )ã€‚è¡¨è¾¾å¼ï¼š 

```java
Employee buddy = buddies.first;
```

ä¹Ÿä¼šåœ¨ç»“æœå­—èŠ‚ç ä¸­æ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚

### â‘¢ ç¿»è¯‘æ³›å‹æ–¹æ³•

ç±»å‹æ“¦é™¤ä¹Ÿä¼šå‡ºç°åœ¨æ³›å‹æ–¹æ³•ä¸­ã€‚ç¨‹åºå‘˜é€šå¸¸è®¤ä¸ºä¸‹è¿°çš„æ³›å‹æ–¹æ³•

```java
public static <T extends Comparableã€‰T min(T[] a)
```

æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–¹æ³•æ—ï¼Œè€Œæ“¦é™¤ç±»å‹ä¹‹åï¼Œåªå‰©ä¸‹ä¸€ä¸ªæ–¹æ³•ï¼š

```java
public static Comparable min(Comparable[] a)
```

æ³¨æ„ï¼Œç±»å‹å‚æ•° `T` å·²ç»è¢«æ“¦é™¤äº†ï¼Œ åªç•™ä¸‹äº†é™å®šç±»å‹ `Comparable`ã€‚

ğŸ˜¥ æ–¹æ³•çš„æ“¦é™¤å¸¦æ¥äº†ä¸¤ä¸ªå¤æ‚é—®é¢˜ã€‚çœ‹ä¸€çœ‹ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ï¼š

```java
class DateInterval extends Pair<LocalDate>{
 	public void setSecond(LocalDate second){
        if(second.compareTo(getFirst()) >= 0)
            super.setSecond(second);
    }
    ...
}
```

ä¸€ä¸ªæ—¥æœŸåŒºé—´æ˜¯ä¸€å¯¹ `LocalDate `å¯¹è±¡ï¼Œ å¹¶ä¸”éœ€è¦è¦†ç›–è¿™ä¸ªæ–¹æ³•æ¥ç¡®ä¿ç¬¬äºŒä¸ªå€¼æ°¸è¿œä¸å°äºç¬¬ä¸€ä¸ªå€¼ã€‚è¿™ä¸ªç±»æ“¦é™¤åå˜æˆ

```java
class DateInterval extends Pair{ // after erasure
	public void setSecond(LocalDate second) { 
    . . . 
	}
}
```

ä»¤äººæ„Ÿåˆ°å¥‡æ€ªçš„æ˜¯ï¼Œå­˜åœ¨å¦ä¸€ä¸ªä» `Pair `ç»§æ‰¿çš„ `setSecond`æ–¹æ³•ï¼Œå³ 

```java
public void setSecond(Object second)
```

è¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªä¸åŒçš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ªä¸åŒç±»å‹çš„å‚æ•° `Object`, è€Œä¸æ˜¯ `LocalDate`ã€‚ ç„¶è€Œï¼Œä¸**åº”è¯¥ä¸ä¸€æ ·**ã€‚è€ƒè™‘ä¸‹é¢çš„è¯­å¥åºåˆ—ï¼š

```java
DateInterval interval = new DateInterval(. . .);
Pair<LocalDate> pair = interval; // OK assignment to superclass
pair.setSecond(aDate);
```

è¿™é‡Œï¼Œ å¸Œæœ›å¯¹ `setSecond `çš„è°ƒç”¨å…·æœ‰å¤šæ€æ€§ï¼Œ å¹¶è°ƒç”¨æœ€åˆé€‚çš„é‚£ä¸ªæ–¹æ³•ã€‚ç”±äº `pair `å¼•ç”¨ `DateInterval `å¯¹è±¡ï¼Œæ‰€ä»¥åº”è¯¥è°ƒç”¨ `DateInterval.setSecond`ã€‚é—®é¢˜åœ¨äº**ç±»å‹æ“¦é™¤ä¸å¤šæ€å‘ç”Ÿäº†å†² çª**ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ å°±éœ€è¦ç¼–è¯‘å™¨åœ¨ `DateInterval `ç±»ä¸­ç”Ÿæˆä¸€ä¸ª**æ¡¥æ–¹æ³•ï¼ˆbridge method)**:

```java
public void setSecond(Object second) { 
    setSecond((Date) second); 
}
```

è¦æƒ³äº†è§£å®ƒçš„å·¥ä½œè¿‡ç¨‹ï¼Œè¯·ä»”ç»†åœ°è·Ÿè¸ªä¸‹åˆ—è¯­å¥çš„æ‰§è¡Œ

```java
pair.setSecond(aDate)
```

å˜é‡ `pair `å·²ç»å£°æ˜ä¸ºç±»å‹ `Pair<LocalDate>`, å¹¶ä¸”è¿™ä¸ªç±»å‹åªæœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•å«`setSecond`ï¼Œ å³ `setSecond(Object)`ã€‚ è™šæ‹Ÿæœºç”¨ `pair `å¼•ç”¨çš„å¯¹è±¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªå¯¹è±¡æ˜¯ `DateInterval `ç±»å‹çš„ï¼Œ å› è€Œå°†ä¼šè°ƒç”¨ `DateInterval.setSecond(Object)`æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯åˆæˆçš„æ¡¥æ–¹æ³•ã€‚å®ƒè°ƒç”¨ `DateInterval.setSecond(Date)`ï¼Œ è¿™æ­£æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„æ“ä½œæ•ˆæœã€‚

æ¡¥æ–¹æ³•å¯èƒ½ä¼šå˜å¾—ååˆ†å¥‡æ€ªã€‚å‡è®¾ `DateInterval `æ–¹æ³•ä¹Ÿè¦†ç›–äº† `getSecond `æ–¹æ³•ï¼š

```java
class DateInterval extends Pair<LocalDate>{
	public LocalDate getSecond(){
        return (Date) super.getSecond)().clone();
    }
    ...
}
```

åœ¨ `DateInterval `ç±»ä¸­ï¼Œæœ‰ä¸¤ä¸ª `getSecond` æ–¹æ³•ï¼š

- `LocalDate getSecond()` // defined in Datelnterval 

- `Object getSecond()` // overrides the method defined in Pair to call the first method

**ä¸èƒ½è¿™æ ·ç¼–å†™ Java ä»£ç ï¼ˆåœ¨è¿™é‡Œï¼Œå…·æœ‰ç›¸åŒå‚æ•°ç±»å‹çš„ä¸¤ä¸ªæ–¹æ³•æ˜¯ä¸åˆæ³•çš„**ï¼‰ã€‚å®ƒä»¬éƒ½æ²¡æœ‰å‚æ•°ã€‚ä½†æ˜¯ï¼Œåœ¨è™šæ‹Ÿæœºä¸­ï¼Œç”¨å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹ç¡®å®šä¸€ä¸ªæ–¹æ³•ã€‚å› æ­¤ï¼Œ ç¼–è¯‘å™¨å¯èƒ½äº§ç”Ÿä¸¤ä¸ªä»…è¿”å›ç±»å‹ä¸åŒçš„æ–¹æ³•å­—èŠ‚ç ï¼Œè™šæ‹Ÿæœºèƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†è¿™ä¸€æƒ…å†µã€‚

<br>

ğŸš© æ€»ä¹‹ï¼Œéœ€è¦è®°ä½æœ‰å…³ Java æ³›å‹è½¬æ¢çš„äº‹å®ï¼š 

- è™šæ‹Ÿæœºä¸­æ²¡æœ‰æ³›å‹ï¼Œåªæœ‰æ™®é€šçš„ç±»å’Œæ–¹æ³•ã€‚ 
- æ‰€æœ‰çš„ç±»å‹å‚æ•°éƒ½ç”¨å®ƒä»¬çš„é™å®šç±»å‹æ›¿æ¢ã€‚ 
- æ¡¥æ–¹æ³•è¢«åˆæˆæ¥ä¿æŒå¤šæ€ã€‚ 
- ä¸ºä¿æŒç±»å‹å®‰å…¨æ€§ï¼Œå¿…è¦æ—¶æ’äººå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚

## 6. çº¦æŸå’Œå±€é™æ€§

åœ¨ä¸‹é¢å‡ èŠ‚ä¸­ï¼Œ å°†é˜è¿°ä½¿ç”¨ Java æ³›å‹æ—¶éœ€è¦è€ƒè™‘çš„ä¸€äº›é™åˆ¶ã€‚å¤§å¤šæ•°é™åˆ¶éƒ½æ˜¯ç”±ç±»å‹æ“¦ é™¤å¼•èµ·çš„ã€‚

### â‘  ä¸èƒ½ç”¨åŸºæœ¬ç±»å‹å®ä¾‹åŒ–ç±»å‹å‚æ•°

ä¸èƒ½ç”¨ç±»å‹å‚æ•°ä»£æ›¿åŸºæœ¬ç±»å‹ã€‚

å› æ­¤ï¼Œæ²¡æœ‰ `Pair<int>`, åªæœ‰ `Pair<Integer> `ã€‚ 

å…¶åŸå› æ˜¯ç±»å‹æ“¦é™¤ã€‚æ“¦é™¤ä¹‹åï¼Œ `Pair `ç±»å«æœ‰ `Object `ç±»å‹çš„åŸŸï¼Œ è€Œ `Object `ä¸èƒ½å­˜å‚¨ `int `

### â‘¡ è¿è¡Œæ—¶ç±»å‹æŸ¥è¯¢åªé€‚ç”¨äºåŸå§‹ç±»å‹

è™šæ‹Ÿæœºä¸­çš„å¯¹è±¡æ€»æœ‰ä¸€ä¸ªç‰¹å®šçš„éæ³›å‹ç±»å‹ã€‚å› æ­¤ï¼Œæ‰€æœ‰çš„ç±»å‹æŸ¥è¯¢åªäº§ç”ŸåŸå§‹ç±»å‹ã€‚ ä¾‹å¦‚ï¼š

```java
if (a instanceof Pair<String>) // Error
```

**å®é™…ä¸Šä»…ä»…æµ‹è¯• `a` æ˜¯å¦æ˜¯ä»»æ„ç±»å‹çš„ä¸€ä¸ª `Pair`**ã€‚

åŒæ ·çš„é“ç†ï¼Œ `getClass `æ–¹æ³•æ€»æ˜¯è¿”å›åŸå§‹ç±»å‹ã€‚ä¾‹å¦‚ï¼š

```java
Pair<String> stringPair = . .
Pair<Employee> employeePair = . .
if (stringPair.getClass() == employeePair.getClass()){ // they are equal
    ...
} 
```

å…¶æ¯”è¾ƒçš„ç»“æœæ˜¯ `true`, è¿™æ˜¯å› ä¸º**ä¸¤æ¬¡è°ƒç”¨ `getClass `éƒ½å°†è¿”å› `Pair.class`**ã€‚

### â‘¢ ä¸èƒ½åˆ›å»ºå‚æ•°åŒ–ç±»å‹çš„æ•°ç»„

ä¸èƒ½å®ä¾‹åŒ–å‚æ•°åŒ–ç±»å‹çš„æ•°ç»„ï¼Œ ä¾‹å¦‚ï¼š

```java
Pair<String>[] table = new Pair<String>[10]; // Error
```

![](https://gitee.com/veal98/images/raw/master/img/20200622203215.png)

éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ åªæ˜¯ä¸å…è®¸åˆ›å»ºè¿™äº›æ•°ç»„ï¼Œ è€Œå£°æ˜ç±»å‹ä¸º `Pair<String>[]` çš„å˜é‡ä»æ˜¯åˆæ³•çš„ã€‚ä¸è¿‡ä¸èƒ½ç”¨ `new Pair<String>[10]` åˆå§‹åŒ–è¿™ä¸ªå˜é‡ã€‚

### â‘£ Varargs è­¦å‘Š

ä¸Šä¸€èŠ‚ä¸­å·²ç»äº†è§£åˆ°ï¼Œ Java ä¸æ”¯æŒæ³›å‹ç±»å‹çš„æ•°ç»„ã€‚è¿™ä¸€èŠ‚ä¸­æˆ‘ä»¬å†æ¥è®¨è®ºä¸€ä¸ªç›¸å…³çš„é—®é¢˜ï¼š<u>å‘å‚æ•°ä¸ªæ•°å¯å˜çš„æ–¹æ³•ä¼ é€’ä¸€ä¸ªæ³›å‹ç±»å‹çš„å®ä¾‹</u>ã€‚

è€ƒè™‘ä¸‹é¢è¿™ä¸ªç®€å•çš„æ–¹æ³•ï¼Œ å®ƒçš„å‚æ•°ä¸ªæ•°æ˜¯å¯å˜çš„ï¼š

```java
public static <T> void addAll(Collection<T> coll, T... ts){
	for (t : ts) 
        coll.add(t);
}
```

å‚æ•° ts æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ åŒ…å«æä¾›çš„æ‰€æœ‰å®å‚

ç°åœ¨è€ƒè™‘ä»¥ä¸‹è°ƒç”¨ï¼š

```java
Collection<Pair<String>> table = ...;
Pair<String> pair1 = ...;
Pair<String> pair2 = ...;
addAll(table,pair1,pair2);
```

ä¸ºäº†è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼ŒJava è™šæ‹Ÿæœºå¿…é¡»å»ºç«‹ä¸€ä¸ª `Pair<String> `æ•°ç»„ï¼Œ è¿™å°±è¿åäº†å‰é¢çš„è§„åˆ™ã€‚ä¸è¿‡ï¼Œ<u>å¯¹äºè¿™ç§æƒ…å†µï¼Œ è§„åˆ™æœ‰æ‰€æ”¾æ¾ï¼Œä½ åªä¼šå¾—åˆ°ä¸€ä¸ªè­¦å‘Šï¼Œè€Œä¸æ˜¯é”™è¯¯</u>ã€‚

å¯ä»¥é‡‡ç”¨ä¸¤ç§æ–¹æ³•æ¥æŠ‘åˆ¶è¿™ä¸ªè­¦å‘Šã€‚ä¸€ç§æ–¹æ³•æ˜¯ä¸ºåŒ…å« `addAll `è°ƒç”¨çš„æ–¹æ³•å¢åŠ æ³¨è§£ `@ SuppressWamings("unchecked") `ã€‚æˆ–è€…åœ¨ Java SE 7 ä¸­ï¼Œ è¿˜ å¯ ä»¥ ç”¨`@SafeVarargs` ç›´æ¥æ ‡æ³¨ `addAll `æ–¹æ³•ï¼š 

```java
@SafeVarargs 
public static void addAll(Collection<T> coll, T... ts)
```

 ç°åœ¨å°±å¯ä»¥æä¾›æ³›å‹ç±»å‹æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•äº†ã€‚å¯¹äºåªéœ€è¦è¯»å–å‚æ•°æ•°ç»„å…ƒç´ çš„æ‰€æœ‰æ–¹ æ³•ï¼Œéƒ½å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£ï¼Œè¿™ä»…é™äºæœ€å¸¸è§çš„ç”¨ä¾‹ã€‚

### â‘¤ ä¸èƒ½å®ä¾‹åŒ–ç±»å‹å˜é‡

ä¸èƒ½ä½¿ç”¨åƒ `new T(...)` ï¼Œ`newT[...] `æˆ– `T.class` è¿™æ ·çš„è¡¨è¾¾å¼ä¸­çš„ç±»å‹å˜é‡ã€‚ä¾‹å¦‚ï¼Œ ä¸‹é¢çš„ `Pair `æ„é€ å™¨å°±æ˜¯éæ³•çš„ï¼š

```java
public Pair(){
    first = new T(); // error
    second = new T(); // error
}
```

ç±»å‹æ“¦é™¤å°† `T` æ”¹å˜æˆ `Object`, è€Œä¸”ï¼Œ æœ¬æ„è‚¯å®šä¸å¸Œæœ›è°ƒç”¨ `new Object()`ã€‚ åœ¨ Java SE 8 ä¹‹åï¼Œ æœ€å¥½çš„è§£å†³åŠæ³•æ˜¯è®©è°ƒç”¨è€…æä¾›ä¸€ä¸ªæ„é€ å™¨è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼š

```java
Pair<String> p = Pair.makePair(String::new);
```

`makePair `æ–¹æ³•æ¥æ”¶ä¸€ä¸ª `Supplier<T>`ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œè¡¨ç¤ºä¸€ä¸ªæ— å‚æ•°è€Œä¸”è¿”å›ç±»å‹ä¸º `T` çš„å‡½æ•°ï¼š

```java
public static<T> Pair<T> makePair(Supplier<T> constr){
	return new Pair<>(constr.get(),constr.get());
}
```

æ¯”è¾ƒä¼ ç»Ÿçš„è§£å†³æ–¹æ³•æ˜¯é€šè¿‡åå°„è°ƒç”¨ `Class.newInstance `æ–¹æ³•æ¥æ„é€ æ³›å‹å¯¹è±¡ã€‚é—æ†¾çš„æ˜¯ï¼Œç»†èŠ‚æœ‰ç‚¹å¤æ‚ã€‚ä¸èƒ½è°ƒç”¨ï¼š

```java
first = T.class.newInstance(); // Error
```

è¡¨è¾¾å¼ `T.class` æ˜¯ä¸åˆæ³•çš„ï¼Œ å› ä¸ºå®ƒä¼šæ“¦é™¤ä¸º `Object.class`ã€‚å¿…é¡»åƒä¸‹é¢è¿™æ ·è®¾è®¡ API ä»¥ä¾¿å¾—åˆ°ä¸€ä¸ª `Class `å¯¹è±¡ï¼š

```java
public static <T> Pair<T> makePair(Class<T> cl){
    try { 
        return new Pair<>(cl.newInstance(),cl.newInstance());
    }
    catch (Exception ex) { 
        return null; 
    }
}
```

è¿™ä¸ªæ–¹æ³•å¯ä»¥æŒ‰ç…§ä¸‹åˆ—æ–¹å¼è°ƒç”¨ï¼š 

```java
Pair p = Pair.makePair(String.class);
```

**æ³¨æ„ï¼Œ`Class` ç±»æœ¬èº«æ˜¯æ³›å‹**ã€‚ ä¾‹å¦‚ï¼Œ`String.class` æ˜¯ä¸€ä¸ª `Class `çš„å®ä¾‹ï¼ˆäº‹å®ä¸Šï¼Œ å®ƒæ˜¯å”¯ä¸€çš„å®ä¾‹) ã€‚å› æ­¤ï¼Œ`makePair `æ–¹æ³•èƒ½å¤Ÿæ¨æ–­å‡º `pair `çš„ç±»å‹ã€‚

### â‘¥ ä¸èƒ½æ„é€ æ³›å‹æ•°ç»„

å°±åƒä¸èƒ½å®ä¾‹åŒ–ä¸€ä¸ªæ³›å‹å®ä¾‹ä¸€æ ·ï¼Œ ä¹Ÿä¸èƒ½å®ä¾‹åŒ–æ•°ç»„ã€‚ä¸è¿‡åŸå› æœ‰æ‰€ä¸åŒï¼Œæ¯•ç«Ÿæ•°ç»„ ä¼šå¡«å…… mill å€¼ï¼Œæ„é€ æ—¶çœ‹ä¸Šå»æ˜¯å®‰å…¨çš„ã€‚ä¸è¿‡ï¼Œ **æ•°ç»„æœ¬èº«ä¹Ÿæœ‰ç±»å‹ï¼Œç”¨æ¥ç›‘æ§å­˜å‚¨åœ¨è™šæ‹Ÿæœºä¸­çš„æ•°ç»„ã€‚è¿™ä¸ªç±»å‹ä¼šè¢«æ“¦é™¤**ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸‹é¢çš„ä¾‹å­ï¼š

```java
public static <T extends Comparable> T[] minmax(T[] a) { 
    T[] mm = new T[2];  // Error
    ...
}
```

ç±»å‹æ“¦é™¤ä¼šè®©è¿™ä¸ªæ–¹æ³•æ°¸è¿œæ„é€  `Comparable[2]` æ•°ç»„ã€‚

### â‘¦ æ³›å‹ç±»çš„é™æ€ä¸Šä¸‹æ–‡ä¸­ç±»å‹å˜é‡æ— æ•ˆ

**ä¸èƒ½åœ¨é™æ€åŸŸæˆ–æ–¹æ³•ä¸­å¼•ç”¨ç±»å‹å˜é‡**ã€‚ä¾‹å¦‚ï¼š

```java
public class Singleton<T>{
	private static T singlelnstance; // Error
	public static T getSinglelnstance(){ // Error
		if (singleinstance == null) 
            construct new instance of T
		return singlelnstance;
	}
}
```

è¿™ä¸ªç¨‹åºæ— æ³•å·¥ä½œã€‚ç±»å‹æ“¦é™¤ä¹‹åï¼Œ åªå‰©ä¸‹ `Singleton` ç±»ï¼Œå®ƒåªåŒ…å«ä¸€ä¸ª `singleInstance `åŸŸã€‚ å› æ­¤ï¼Œ **ç¦æ­¢ä½¿ç”¨å¸¦æœ‰ç±»å‹å˜é‡çš„é™æ€åŸŸå’Œæ–¹æ³•ã€‚**

### â‘§ ä¸èƒ½æŠ›å‡ºæˆ–æ•è·æ³›å‹ç±»çš„å®ä¾‹

**æ—¢ä¸èƒ½æŠ›å‡ºä¹Ÿä¸èƒ½æ•è·æ³›å‹ç±»å¯¹è±¡ã€‚å®é™…ä¸Šï¼Œ ç”šè‡³æ³›å‹ç±»æ‰©å±• `Throwable `éƒ½æ˜¯ä¸åˆæ³•çš„**ã€‚

ä¾‹å¦‚ï¼Œ ä»¥ä¸‹å®šä¹‰å°±ä¸èƒ½æ­£å¸¸ç¼–è¯‘ï¼š

```java
public class Problem<T> extends Exception { /* . . . */ } // Error can't extend Throwable
```

## 7. æ³›å‹ç±»å‹çš„ç»§æ‰¿è§„åˆ™

æ¯”å¦‚ `Employee `æ˜¯ `Manager `çš„çˆ¶ç±»ï¼Œä½†æ˜¯ `Pair<Employee>` å’Œ `Pair<Manager>` å¹¶æ— çˆ¶å­å…³ç³»

æ³›å‹ç±»å¯ä»¥æ‰©å±•æˆ–å®ç°å…¶ä»–çš„æ³›å‹ç±»ã€‚å°±è¿™ä¸€ç‚¹è€Œè¨€ï¼Œä¸æ™®é€šçš„ç±»æ²¡æœ‰ä»€ä¹ˆ åŒºåˆ«ã€‚ä¾‹å¦‚ï¼Œ `ArrayList `ç±»å®ç° `List `æ¥å£ã€‚è¿™æ„å‘³ç€ï¼Œ ä¸€ä¸ª `ArrayList<Manager>` å¯ ä»¥è¢«è½¬æ¢ä¸ºä¸€ä¸ª `List<Manager>`ã€‚ä½†æ˜¯ï¼Œ å¦‚å‰é¢æ‰€è§ï¼Œ ä¸€ä¸ª `ArrayList<Manager> `ä¸æ˜¯ä¸€ä¸ª `ArrayList<Employee>  `æˆ– `List <Employee>`ã€‚

![](https://gitee.com/veal98/images/raw/master/img/20200622210454.png)

## 8. é€šé…ç¬¦ç±»å‹

### â‘  ä¸Šç•Œé€šé…ç¬¦ extends

**é€šé…ç¬¦ç±»å‹ä¸­ï¼Œ å…è®¸ç±»å‹å‚æ•°å˜åŒ–**ã€‚ ä¾‹å¦‚ï¼Œ é€šé…ç¬¦ç±»å‹

```java
Pair<? extends Employee>
```

è¡¨ç¤º**ä»»ä½•æ³›å‹ `Pair `ç±»å‹ï¼Œ å®ƒçš„ç±»å‹å‚æ•°æ˜¯ `Employee `çš„<u>å­ç±»</u>**ï¼Œ å¦‚ `Pair<Manager>`ï¼Œ ä½†ä¸æ˜¯ `Pair<String>`ã€‚

å‡è®¾è¦ç¼–å†™ä¸€ä¸ªæ‰“å°é›‡å‘˜å¯¹çš„æ–¹æ³•ï¼Œ åƒè¿™æ ·ï¼š

```java
public static void printBuddies(Pair<Employee> p){
    Employee first = p.getFirst();
    Employee second = p.getSecond();
    System.out.println(first.getName() + " and " + second.getName() + "are buddies.");                     
}
```

æ­£å¦‚å‰é¢è®²åˆ°çš„ï¼Œ**ä¸èƒ½å°† `Pair<Manager> `ä¼ é€’ç»™è¿™ä¸ªæ–¹æ³•**ï¼Œè¿™ä¸€ç‚¹å¾ˆå—é™åˆ¶ã€‚è§£å†³çš„æ–¹æ³•å¾ˆç®€å•ï¼šä½¿ç”¨é€šé…ç¬¦ç±»å‹ï¼š

```java
public static void printBuddies(Pair<? extends Employee> p)
```

ç±»å‹ `Pair<Manager> `æ˜¯ `Pair<? extends Employee> `çš„å­ç±»å‹ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200622210935.png)

ä¸¾ä¾‹å¦‚ä¸‹ï¼š

```java
public class Main {
    public static void main(String[] args) {
        Pair<Integer> p = new Pair<>(123, 456);
        int n = add(p);
        System.out.println(n);
    }

    static int add(Pair<? extends Number> p) {
        Number first = p.getFirst();
        Number last = p.getLast();
        return first.intValue() + last.intValue();
    }

}

class Pair<T> {
    private T first;
    private T last;
    public Pair(T first, T last) {
        this.first = first;
        this.last = last;
    }
    public T getFirst() {
        return first;
    }
    public T getLast() {
        return last;
    }
}
```

è¿™æ ·ä¸€æ¥ï¼Œç»™æ–¹æ³•ä¼ å…¥`Pair<Integer>`ç±»å‹æ—¶ï¼Œå®ƒç¬¦åˆå‚æ•°`Pair<? extends Number>`ç±»å‹ã€‚è¿™ç§ä½¿ç”¨`<? extends Number>`çš„æ³›å‹å®šä¹‰ç§°ä¹‹ä¸º**ä¸Šç•Œé€šé…ç¬¦ï¼ˆUpper Bounds Wildcards**ï¼‰ï¼Œå³æŠŠæ³›å‹ç±»å‹`T`çš„ä¸Šç•Œé™å®šåœ¨`Number`äº†ã€‚

é™¤äº†å¯ä»¥ä¼ å…¥`Pair<Integer>`ç±»å‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¼ å…¥`Pair<Double>`ç±»å‹ï¼Œ`Pair<BigDecimal>`ç±»å‹ç­‰ç­‰ï¼Œå› ä¸º`Double`å’Œ`BigDecimal`éƒ½æ˜¯`Number`çš„å­ç±»ã€‚

### â‘¡ è¶…ç±»å‹é™å®šé€šé…ç¬¦ super

é€šé…ç¬¦é™å®šä¸ç±»å‹å˜é‡é™å®šååˆ†ç±»ä¼¼ï¼Œä½†æ˜¯ï¼Œè¿˜æœ‰ä¸€ä¸ªé™„åŠ çš„èƒ½åŠ›ï¼Œå³å¯ä»¥æŒ‡å®šä¸€ä¸ª**è¶…ç±»å‹é™å®š** ï¼ˆsupertype bound)ã€‚

å¦‚ï¼š **`? super Manager` è¿™ä¸ªé€šé…ç¬¦é™åˆ¶ä¸º `Manager `çš„æ‰€æœ‰<u>è¶…/çˆ¶ç±»å‹</u>**ã€‚

è€ƒå¯Ÿä¸‹é¢çš„`set`æ–¹æ³•ï¼š

```java
void set(Pair<Integer> p, Integer first, Integer last) {
    p.setFirst(first);
    p.setLast(last);
}
```

ä¼ å…¥`Pair<Integer>`æ˜¯å…è®¸çš„ï¼Œä½†æ˜¯ä¼ å…¥`Pair<Number>`æ˜¯ä¸å…è®¸çš„ã€‚

å’Œ`extends`é€šé…ç¬¦ç›¸åï¼Œè¿™æ¬¡ï¼Œæˆ‘ä»¬å¸Œæœ›æ¥å—`Pair<Integer>`ç±»å‹ä»¥åŠ`Pair<Number>`ã€`Pair<Object>`ï¼Œå› ä¸º`Number`å’Œ`Object`æ˜¯`Integer`çš„çˆ¶ç±»ã€‚

æˆ‘ä»¬ä½¿ç”¨`super`é€šé…ç¬¦æ¥æ”¹å†™è¿™ä¸ªæ–¹æ³•ï¼š

```java
void set(Pair<? super Integer> p, Integer first, Integer last) {
    p.setFirst(first);
    p.setLast(last);
}
```

æ³¨æ„åˆ°`Pair<? super Integer>`è¡¨ç¤ºï¼Œæ–¹æ³•å‚æ•°æ¥å—æ‰€æœ‰æ³›å‹ç±»å‹ä¸º`Integer`æˆ–`Integer`çˆ¶ç±»çš„`Pair`ç±»å‹ã€‚

ä¸‹é¢çš„ä»£ç å¯ä»¥è¢«æ­£å¸¸ç¼–è¯‘ï¼š

```java
public class Main {
    public static void main(String[] args) {
        Pair<Number> p1 = new Pair<>(12.3, 4.56);
        Pair<Integer> p2 = new Pair<>(123, 456);
        setSame(p1, 100);
        setSame(p2, 200);
        System.out.println(p1.getFirst() + ", " + p1.getLast());
        System.out.println(p2.getFirst() + ", " + p2.getLast());
    }

    static void setSame(Pair<? super Integer> p, Integer n) {
        p.setFirst(n);
        p.setLast(n);
    }

}

class Pair<T> {
    private T first;
    private T last;

    public Pair(T first, T last) {
        this.first = first;
        this.last = last;
    }
    
    public T getFirst() {
        return first;
    }
    public T getLast() {
        return last;
    }
    public void setFirst(T first) {
        this.first = first;
    }
    public void setLast(T last) {
        this.last = last;
    }

}
```

### â‘¢ æ— é™å®šé€šé…ç¬¦

æˆ‘ä»¬å·²ç»è®¨è®ºäº†`<? extends T>`å’Œ`<? super T>`ä½œä¸ºæ–¹æ³•å‚æ•°çš„ä½œç”¨ã€‚å®é™…ä¸Šï¼ŒJavaçš„æ³›å‹è¿˜å…è®¸ä½¿ç”¨**æ— é™å®šé€šé…ç¬¦ï¼ˆUnbounded Wildcard Typeï¼‰**ï¼Œå³åªå®šä¹‰ä¸€ä¸ª`?`ï¼š

```java
void sample(Pair<?> p) {
}
```

å› ä¸º`<?>`é€šé…ç¬¦æ—¢æ²¡æœ‰`extends`ï¼Œä¹Ÿæ²¡æœ‰`super`ï¼Œå› æ­¤ï¼š

- ä¸å…è®¸è°ƒç”¨`set(T)`æ–¹æ³•å¹¶ä¼ å…¥å¼•ç”¨ï¼ˆ`null`é™¤å¤–ï¼‰ï¼›

- ä¸å…è®¸è°ƒç”¨`T get()`æ–¹æ³•å¹¶è·å–Tå¼•ç”¨ï¼ˆåªèƒ½è·å–`Object`å¼•ç”¨ï¼‰ã€‚

æ¢å¥è¯è¯´ï¼Œ**æ—¢ä¸èƒ½è¯»ï¼Œä¹Ÿä¸èƒ½å†™ï¼Œé‚£åªèƒ½åšä¸€äº›`null`åˆ¤æ–­**ï¼š

```java
static boolean isNull(Pair<?> p) {
    return p.getFirst() == null || p.getLast() == null;
}
```

å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥å¼•å…¥æ³›å‹å‚æ•°`T`æ¶ˆé™¤`?`é€šé…ç¬¦ï¼š

```java
static <T> boolean isNull(Pair<T> p) {
    return p.getFirst() == null || p.getLast() == null;
}
```

`?`é€šé…ç¬¦æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯ï¼š`Pair<?>`æ˜¯æ‰€æœ‰`Pair<T>`çš„è¶…ç±»ï¼š

```java
public static void main(String[] args) {
    Pair<Integer> p = new Pair<>(123, 456);
    Pair<?> p2 = p; // å®‰å…¨åœ°å‘ä¸Šè½¬å‹
    System.out.println(p2.getFirst() + ", " + p2.getLast());
}
```

ä¸Šè¿°ä»£ç æ˜¯å¯ä»¥æ­£å¸¸ç¼–è¯‘è¿è¡Œçš„ï¼Œå› ä¸º`Pair<Integer>`æ˜¯`Pair<?>`çš„å­ç±»ï¼Œå¯ä»¥å®‰å…¨åœ°å‘ä¸Šè½¬å‹ã€‚

## 9. åå°„å’Œæ³›å‹

**åå°„å…è®¸ä½ åœ¨è¿è¡Œæ—¶åˆ†æä»»æ„çš„å¯¹è±¡ã€‚å¦‚æœå¯¹è±¡æ˜¯æ³›å‹ç±»çš„å®ä¾‹ï¼Œå…³äºæ³›å‹ç±»å‹å‚æ•°åˆ™å¾—ä¸åˆ°å¤ªå¤šä¿¡æ¯ï¼Œå› ä¸ºå®ƒä»¬ä¼šè¢«æ“¦é™¤**ã€‚åœ¨ä¸‹é¢çš„å°èŠ‚ä¸­ï¼Œå¯ä»¥äº†è§£åˆ©ç”¨åå°„å¯ä»¥è·å¾—æ³›å‹ç±» çš„ä»€ä¹ˆä¿¡æ¯ã€‚

### â‘  æ³›å‹ Class ç±»

Javaçš„éƒ¨åˆ†åå°„APIä¹Ÿæ˜¯æ³›å‹ã€‚ä¾‹å¦‚ï¼š`Class<T>`å°±æ˜¯æ³›å‹ï¼š

```java
// compile warning:
Class clazz = String.class;
String str = (String) clazz.newInstance();

// no warning:
Class<String> clazz = String.class;
String str = clazz.newInstance();
```

è°ƒç”¨`Class`çš„`getSuperclass()`æ–¹æ³•è¿”å›çš„`Class`ç±»å‹æ˜¯`Class<? super T>`ï¼š

```java
Class<? super String> sup = String.class.getSuperclass();
```

æ„é€ æ–¹æ³•`Constructor<T>`ä¹Ÿæ˜¯æ³›å‹ï¼š

```java
Class<Integer> clazz = Integer.class;
Constructor<Integer> cons = clazz.getConstructor(int.class);
Integer i = cons.newInstance(123);
```

### â‘¡ ä½¿ç”¨ Class< T > å‚æ•°è¿›è¡Œç±»å‹åŒ¹é…

æœ‰æ—¶ï¼Œ åŒ¹é…æ³›å‹æ–¹æ³•ä¸­çš„ `Class<T>` å‚æ•°çš„ç±»å‹å˜é‡å¾ˆæœ‰å®ç”¨ä»·å€¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ç¤ºä¾‹ï¼š

```java
public static<T> Pair<T> makePair(Class<T> c) throws InstantiationException,IllegalAccessException{
    return new Pair<>(c.newInstance(),c.newInstance());
}
```

å¦‚æœè°ƒç”¨ `makePair(Employee.class)` ï¼Œ`Employee.class` æ˜¯ç±»å‹ `Class<Employee>` çš„ä¸€ä¸ªå¯¹è±¡ã€‚`makePair `æ–¹æ³•çš„ç±»å‹å‚æ•° `T` åŒ `Employee `åŒ¹é…ï¼Œ å¹¶ä¸”ç¼–è¯‘å™¨å¯ä»¥æ¨æ–­å‡ºè¿™ä¸ªæ–¹æ³•å°†è¿”å›ä¸€ä¸ª `Pair<Employee> `ã€‚

## ğŸ“š References

- ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ - å· 1 åŸºç¡€çŸ¥è¯† - ç¬¬ 10 ç‰ˆã€‹
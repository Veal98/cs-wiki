# è¯»æ‡‚æ¡†æ¶è®¾è®¡çš„çµé­‚ â€” Java åå°„æœºåˆ¶

---

## 1. ä»€ä¹ˆæ˜¯ Java çš„åå°„æœºåˆ¶

åå°„ä¸»è¦æ˜¯æŒ‡ç¨‹åºå¯ä»¥è®¿é—®ã€æ£€æµ‹å’Œä¿®æ”¹å®ƒæœ¬èº«çŠ¶æ€æˆ–è¡Œä¸ºçš„ä¸€ç§èƒ½åŠ›ã€‚

â­ **åœ¨ Java è¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸º Java è¯­è¨€çš„åå°„æœºåˆ¶ã€‚**

Java åå°„æœºåˆ¶ä¸»è¦æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

- åœ¨è¿è¡Œæ—¶ï¼ˆåŠ¨æ€ç¼–è¯‘ï¼‰åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚
- åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚
- åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚
- åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§ã€‚

è¿™ç§**åŠ¨æ€è·å–ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•**çš„åŠŸèƒ½ç§°ä¸º Java è¯­è¨€çš„åå°„æœºåˆ¶

## 2. Class ç±»

**åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼ŒJava è¿è¡Œæ—¶ç³»ç»Ÿå§‹ç»ˆä¸ºæ‰€æœ‰çš„å¯¹è±¡ç»´æŠ¤ä¸€ä¸ªè¢«ç§°ä¸º<u>è¿è¡Œæ—¶çš„ç±»å‹æ ‡è¯†</u>**ã€‚ è¿™ä¸ªä¿¡æ¯è·Ÿè¸ªç€æ¯ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚ è™šæ‹Ÿæœºåˆ©ç”¨è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯é€‰æ‹©ç›¸åº”çš„æ–¹æ³•æ‰§è¡Œã€‚ 

å¯ä»¥é€šè¿‡ä¸“é—¨çš„ Java ç±»è®¿é—®è¿™äº›ä¿¡æ¯ã€‚**ä¿å­˜è¿™äº›ä¿¡æ¯çš„ç±»è¢«ç§°ä¸º `Class`ï¼Œ`Class` ç±»ç”¨äºè¡¨ç¤º `.class` æ–‡ä»¶ï¼ˆå­—èŠ‚ç **ã€‚

è¯´çš„é€šä¿—ç‚¹ï¼Œ**åå°„å°±æ˜¯æŠŠ Java ç±»ä¸­çš„å„ç§æˆåˆ†æ˜ å°„æˆä¸€ä¸ªä¸ªçš„ Java å¯¹è±¡**ã€‚

ä¾‹å¦‚ä¸€ä¸ªç±»æœ‰ï¼šæˆå‘˜å˜é‡ã€æ–¹æ³•ã€æ„é€ æ–¹æ³•ã€åŒ…ç­‰ç­‰ä¿¡æ¯ï¼Œ**åˆ©ç”¨åå°„æŠ€æœ¯å¯ä»¥å¯¹ä¸€ä¸ªç±»è¿›è¡Œè§£å‰–ï¼ŒæŠŠä¸ªä¸ªç»„æˆéƒ¨åˆ†æ˜ å°„æˆä¸€ä¸ªä¸ªå¯¹è±¡ã€‚**

å¦‚å›¾æ˜¯ç±»çš„æ­£å¸¸åŠ è½½è¿‡ç¨‹ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20201220172602.png)

â­ **å°† `.class` æ–‡ä»¶è¯»å…¥å†…å­˜çš„æ—¶å€™ï¼ŒJVM ä¼šä¸ºä¹‹åˆ›å»ºä¸€ä¸ª `Class` å¯¹è±¡**

## 3. è·å– Class ç±»å¯¹è±¡çš„å››ç§æ–¹å¼

`Class` ç±»å¯¹è±¡å°†ä¸€ä¸ªç±»çš„æ–¹æ³•ã€å˜é‡ç­‰ä¿¡æ¯å‘Šè¯‰è¿è¡Œçš„ç¨‹åºã€‚Java æä¾›äº†å››ç§æ–¹å¼è·å– `Class` å¯¹è±¡:

ğŸ”¸ **1. çŸ¥é“å…·ä½“ç±»çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨**ï¼š

```java
Class alunbarClass = TargetObject.class;
```

ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬æ˜¯ä¸çŸ¥é“å…·ä½“ç±»çš„ï¼ŒåŸºæœ¬éƒ½æ˜¯é€šè¿‡éå†åŒ…ä¸‹é¢çš„ç±»æ¥è·å– Class å¯¹è±¡ï¼Œé€šè¿‡æ­¤æ–¹å¼è·å– Class å¯¹è±¡ä¸ä¼šè¿›è¡Œåˆå§‹åŒ–

ğŸ”¸ **2. é€šè¿‡ `Class.forName() `ä¼ å…¥ç±»çš„è·¯å¾„è·å–**ï¼š

```java
Class alunbarClass1 = Class.forName("com.xxx.TargetObject");
```

`Class.forName(className)` æ–¹æ³•ï¼Œå†…éƒ¨å®é™…è°ƒç”¨çš„æ˜¯ä¸€ä¸ª native æ–¹æ³• `forName0(className, true, ClassLoader.getClassLoader(caller), caller)`;

<u>ç¬¬ 2 ä¸ª `boolean` å‚æ•°è¡¨ç¤ºç±»æ˜¯å¦éœ€è¦åˆå§‹åŒ–ï¼Œ`Class.forName(className)` é»˜è®¤æ˜¯éœ€è¦åˆå§‹åŒ–</u>ã€‚

ä¸€æ—¦åˆå§‹åŒ–ï¼Œå°±ä¼šè§¦å‘ç›®æ ‡å¯¹è±¡çš„ `static` å—ä»£ç æ‰§è¡Œï¼Œ`static` å‚æ•°ä¹Ÿä¼šè¢«å†æ¬¡åˆå§‹åŒ–ã€‚

ğŸ”¸ **3. é€šè¿‡å¯¹è±¡å®ä¾‹ `instance.getClass()` è·å–**ï¼š

```java
Employee e = new Employee();
Class alunbarClass2 = e.getClass(); // è·å–è¯¥å¯¹è±¡å®ä¾‹çš„ Class ç±»å¯¹è±¡
```

ğŸ”¸ **4. é€šè¿‡ç±»åŠ è½½å™¨ `xxxClassLoader.loadClass()` ä¼ å…¥ç±»è·¯å¾„è·å–**

```java
class clazz = ClassLoader.LoadClass("com.xxx.TargetObject");
```

<u>é€šè¿‡ç±»åŠ è½½å™¨è·å– Class å¯¹è±¡ä¸ä¼šè¿›è¡Œåˆå§‹åŒ–ï¼Œæ„å‘³ç€ä¸è¿›è¡ŒåŒ…æ‹¬åˆå§‹åŒ–ç­‰ä¸€äº›åˆ—æ­¥éª¤ï¼Œé™æ€å—å’Œé™æ€å¯¹è±¡ä¸ä¼šå¾—åˆ°æ‰§è¡Œ</u>

è™šæ‹Ÿæœºä¸ºæ¯ä¸ªç±»å‹ç®¡ç†ä¸€ä¸ª Class å¯¹è±¡ã€‚ å› æ­¤ï¼Œå¯ä»¥åˆ©ç”¨ `==` è¿ç®—ç¬¦å®ç°ä¸¤ä¸ªç±»å¯¹è±¡æ¯”è¾ƒçš„æ“ä½œã€‚ ä¾‹å¦‚ï¼Œ 

```java
if(e.getClass() == Employee.getClass())
```

## 4. åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹

### â‘  ä½¿ç”¨ class.newInstance

â­ è¿˜æœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æ–¹æ³• **`newInstance()`ï¼Œ å¯ä»¥ç”¨æ¥åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹**ã€‚ä¾‹å¦‚ï¼Œ 

```java
e.getClass().newInstance(); 
```

åˆ›å»ºäº†ä¸€ä¸ªä¸ `e` å…·æœ‰ç›¸åŒç±»ç±»å‹çš„å®ä¾‹ã€‚ ğŸš¨ **`newlnstance`æ–¹æ³•è°ƒç”¨é»˜è®¤çš„æ„é€ å‡½æ•°ï¼ˆæ— å‚æ„é€ å‡½æ•°ï¼‰åˆå§‹åŒ–æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªç±»æ²¡æœ‰é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œ å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸** 

 å°† `forName` ä¸ `newlnstance` é…åˆèµ·æ¥ä½¿ç”¨ï¼Œ å¯ä»¥æ ¹æ®å­˜å‚¨åœ¨å­—ç¬¦ä¸²ä¸­çš„ç±»ååˆ›å»ºä¸€ä¸ªå¯¹è±¡ :

```java
String s = "java.util.Random"; 
Object m = Class.forName(s).newInstance();
```

### â‘¡ ä½¿ç”¨å¼€æºåº“ Objenesis

**Objenesis** æ˜¯ä¸€ä¸ªJavaçš„åº“ï¼Œä¸»è¦ç”¨æ¥åˆ›å»ºç‰¹å®šçš„å¯¹è±¡ã€‚

**ç”±äºä¸æ˜¯æ‰€æœ‰çš„ç±»éƒ½æœ‰æ— å‚æ„é€ å™¨åˆæˆ–è€…ç±»æ„é€ å™¨æ˜¯ privateï¼Œåœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¿˜æƒ³å®ä¾‹åŒ–å¯¹è±¡ï¼Œ`class.newInstance` æ˜¯æ— æ³•æ»¡è¶³çš„**ã€‚

```java
public class Test {
    private int i;
 
    public Test(int i){
        this.i = i;
    }
 
    public void show(){
        System.out.println("test..." + i);
    }
 
}
------------------------
    
public static void main(String[] args) {
        Objenesis objenesis = new ObjenesisStd(true);
        Test test = objenesis.newInstance(Test.class);
        test.show();
    }
```

ä½¿ç”¨éå¸¸ç®€å•ï¼Œ`Objenesis` ç”±å­ç±» `ObjenesisObjenesisStd`å®ç°ï¼Œ**æ„é€ æ–¹æ³•ä¸­ä½¿ç”¨äº†ç¼“å­˜**

```java
public ObjenesisStd(boolean useCache) {
    super(new StdInstantiatorStrategy(), useCache);
}
```

è¯¦ç»†æºç æ­¤å¤„å°±ä¸æ·±ç©¶äº†ï¼Œäº†è§£å³å¯ã€‚

## 5. é€šè¿‡åå°„è·å–æ„é€ æ–¹æ³•å¹¶è°ƒç”¨

æ‰¹é‡è·å–ï¼š

- `public Constructor[] getConstructors()`ï¼šè·å–æ‰€æœ‰"å…¬æœ‰çš„"æ„é€ æ–¹æ³•
- `public Constructor[] getDeclaredConstructors()`ï¼šè·å–æ‰€æœ‰çš„æ„é€ æ–¹æ³•(åŒ…æ‹¬ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤ã€å…¬æœ‰)

å•ä¸ªè·å–ï¼š

- `public Constructor getConstructor(Class... parameterTypes)`: è·å–ä¸€ä¸ªæŒ‡å®šå‚æ•°ç±»å‹çš„"å…¬æœ‰çš„"æ„é€ æ–¹æ³•ï¼š
- `public Constructor getDeclaredConstructor(Class... parameterTypes)`: è·å–ä¸€ä¸ªæŒ‡å®šå‚æ•°ç±»å‹"æ„é€ æ–¹æ³•"ï¼Œå¯ä»¥æ˜¯ç§æœ‰çš„ï¼Œæˆ–å—ä¿æŠ¤ã€é»˜è®¤ã€å…¬æœ‰ï¼›

ä¸¾ä¸ªä¾‹å­ï¼š

```java
package fanshe;
 
public class Student {
	
	//---------------æ„é€ æ–¹æ³•-------------------
	//ï¼ˆé»˜è®¤çš„æ„é€ æ–¹æ³•ï¼‰
	Student(String str){
		System.out.println("(é»˜è®¤)çš„æ„é€ æ–¹æ³• s = " + str);
	}
	
	// æ— å‚æ„é€ æ–¹æ³•
	public Student(){
		System.out.println("è°ƒç”¨äº†å…¬æœ‰ã€æ— å‚æ„é€ æ–¹æ³•æ‰§è¡Œäº†ã€‚ã€‚ã€‚");
	}
	
	// æœ‰ä¸€ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•
	public Student(char name){
		System.out.println("å§“åï¼š" + name);
	}
	
	// æœ‰å¤šä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•
	public Student(String name ,int age){
		System.out.println("å§“åï¼š"+name+"å¹´é¾„ï¼š"+ age);//è¿™çš„æ‰§è¡Œæ•ˆç‡æœ‰é—®é¢˜ï¼Œä»¥åè§£å†³ã€‚
	}
	
	// å—ä¿æŠ¤çš„æ„é€ æ–¹æ³•
	protected Student(boolean n){
		System.out.println("å—ä¿æŠ¤çš„æ„é€ æ–¹æ³• n = " + n);
	}
	
	// ç§æœ‰æ„é€ æ–¹æ³•
	private Student(int age){
		System.out.println("ç§æœ‰çš„æ„é€ æ–¹æ³•   å¹´é¾„ï¼š"+ age);
	}
 
}

----------------------------------
    
package fanshe;
 
import java.lang.reflect.Constructor;
 
public class Constructors {
 
	public static void main(String[] args) throws Exception {
        
		// åŠ è½½Classå¯¹è±¡
		Class clazz = Class.forName("fanshe.Student");
		
		
		// è·å–æ‰€æœ‰å…¬æœ‰æ„é€ æ–¹æ³•
		Constructor[] conArray = clazz.getConstructors();
		for(Constructor c : conArray){
			System.out.println(c);
		}
		
		
		// è·å–æ‰€æœ‰çš„æ„é€ æ–¹æ³•(åŒ…æ‹¬ï¼šç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤ã€å…¬æœ‰)
		conArray = clazz.getDeclaredConstructors();
		for(Constructor c : conArray){
			System.out.println(c);
		}
        
		
		// è·å–å…¬æœ‰ã€æ— å‚çš„æ„é€ æ–¹æ³•
         // å› ä¸ºæ˜¯æ— å‚çš„æ„é€ æ–¹æ³•æ‰€ä»¥ç±»å‹æ˜¯ä¸€ä¸ªnull,ä¸å†™ä¹Ÿå¯ä»¥ï¼šè¿™é‡Œéœ€è¦çš„æ˜¯ä¸€ä¸ªå‚æ•°çš„ç±»å‹ï¼Œåˆ‡è®°æ˜¯ç±»å‹
		// è¿”å›çš„æ˜¯æè¿°è¿™ä¸ªæ— å‚æ„é€ å‡½æ•°çš„ç±»å¯¹è±¡ã€‚
		Constructor con = clazz.getConstructor(null);
		System.out.println("con = " + con);
		//è°ƒç”¨æ„é€ æ–¹æ³•
		Object obj = con.newInstance();
		//	System.out.println("obj = " + obj);
		//	Student stu = (Student)obj;
		
        
		// è·å–ç§æœ‰æ„é€ æ–¹æ³•
		con = clazz.getDeclaredConstructor(char.class);
		System.out.println(con);
		//è°ƒç”¨æ„é€ æ–¹æ³•
		con.setAccessible(true); // ä¸ºäº†è°ƒç”¨ private æ–¹æ³•/åŸŸ æˆ‘ä»¬éœ€è¦å–æ¶ˆå®‰å…¨æ£€æŸ¥
		obj = con.newInstance('ç”·');
	}
	
}
```

## 6. é€šè¿‡åå°„è·å–æˆå‘˜å˜é‡å¹¶ä½¿ç”¨

æ‰¹é‡è·å–ï¼š

- `public Field[] getFields()`ï¼šè·å–æ‰€æœ‰å…¬æœ‰çš„å­—æ®µ
- `public Field[] getDeclaredFields()`ï¼šè·å–æ‰€æœ‰çš„å­—æ®µ (åŒ…æ‹¬ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤çš„)

å•ä¸ªè·å–ï¼š

- `public Field getField(String name)`: è·å–ä¸€ä¸ªæŒ‡å®šåç§°çš„å…¬æœ‰çš„å­—æ®µ
- `public Field getDeclaredField(String name)`: è·å–ä¸€ä¸ªæŒ‡å®šåç§°çš„å­—æ®µï¼Œå¯ä»¥æ˜¯ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤çš„

ä¸¾ä¸ªä¾‹å­:

```java
package fanshe.field;
 
public class Student {
	public Student(){
		
	}
	//**********å­—æ®µ*************//
	public String name;
	protected int age;
	char sex;
	private String phoneNum;
	
	@Override
	public String toString() {
		return "Student [name=" + name + ", age=" + age + ", sex=" + sex
				+ ", phoneNum=" + phoneNum + "]";
	}

}

----------------------------------
    
package fanshe.field;
import java.lang.reflect.Field;

public class Fields {
 
		public static void main(String[] args) throws Exception {
			// è·å–Classå¯¹è±¡
			Class stuClass = Class.forName("fanshe.field.Student");
			// è·å–æ‰€æœ‰å…¬æœ‰çš„å­—æ®µ
			Field[] fieldArray = stuClass.getFields();
			for(Field f : fieldArray){
				System.out.println(f);
			}
            
             // è·å–æ‰€æœ‰çš„å­—æ®µ(åŒ…æ‹¬ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤çš„)
			fieldArray = stuClass.getDeclaredFields();
			for(Field f : fieldArray){
				System.out.println(f);
			}
            
             // è·å–æŒ‡å®šåç§°çš„å…¬æœ‰å­—æ®µ
			Field f = stuClass.getField("name");
             System.out.println(f);
			Object obj = stuClass.getConstructor().newInstance(); // è·å–è¯¥å¯¹è±¡çš„å®ä¾‹
			// ä¸ºå­—æ®µè®¾ç½®å€¼
			f.set(obj, "åˆ˜å¾·å"); // ä¸ºStudentå¯¹è±¡ä¸­çš„nameå±æ€§èµ‹å€¼
			
			
			// è·å–ç§æœ‰å­—æ®µ
			f = stuClass.getDeclaredField("phoneNum");
             System.out.println(f);
			f.setAccessible(true); //æš´åŠ›åå°„ï¼Œè§£é™¤ç§æœ‰é™å®š
			f.set(obj, "18888889999");
			
		}
	}
```

## 7. é€šè¿‡åå°„è·å–æˆå‘˜æ–¹æ³•å¹¶è°ƒç”¨

æ‰¹é‡è·å–ï¼š

- `public Method[] getMethods()`ï¼šè·å–æ‰€æœ‰"å…¬æœ‰æ–¹æ³•"ï¼ˆåŒ…å«äº†çˆ¶ç±»çš„æ–¹æ³•ä¹ŸåŒ…å« Object ç±»ï¼‰
- `public Method[] getDeclaredMethods()`: è·å–æ‰€æœ‰çš„æˆå‘˜æ–¹æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰çš„(ä¸åŒ…æ‹¬ç»§æ‰¿çš„)

å•ä¸ªè·å–ï¼š

- `public Method getMethod(String name, Class<?>... parameterTypes)`: è·å–ä¸€ä¸ªæŒ‡å®šæ–¹æ³•åå’Œå‚æ•°ç±»å‹çš„æˆå‘˜æ–¹æ³•ï¼š

**è°ƒç”¨æ–¹æ³•**ï¼š

- `Object invoke(Object obj, Object... args)`ï¼šobj è¦è°ƒç”¨æ–¹æ³•çš„å¯¹è±¡ï¼›args è°ƒç”¨æ–¹æ³•æ—¶æ‰€ä¼ é€’çš„å®å‚

ä¸¾ä¸ªä¾‹å­ï¼š

```java
package fanshe.method;
 
public class Student {

	public void show1(String s){
		System.out.println("è°ƒç”¨äº†ï¼šå…¬æœ‰çš„ï¼ŒStringå‚æ•°çš„show1(): s = " + s);
	}
	protected void show2(){
		System.out.println("è°ƒç”¨äº†ï¼šå—ä¿æŠ¤çš„ï¼Œæ— å‚çš„show2()");
	}
	void show3(){
		System.out.println("è°ƒç”¨äº†ï¼šé»˜è®¤çš„ï¼Œæ— å‚çš„show3()");
	}
	private String show4(int age){
		System.out.println("è°ƒç”¨äº†ï¼Œç§æœ‰çš„ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼çš„ï¼Œintå‚æ•°çš„show4(): age = " + age);
		return "abcd";
	}
}

-------------------------------------------

package fanshe.method;
 
import java.lang.reflect.Method;
 
public class MethodClass {
 
	public static void main(String[] args) throws Exception {
		// è·å– Classå¯¹è±¡
		Class stuClass = Class.forName("fanshe.method.Student");
        
		// è·å–æ‰€æœ‰å…¬æœ‰æ–¹æ³•
		stuClass.getMethods();
		Method[] methodArray = stuClass.getMethods();
		for(Method m : methodArray){
			System.out.println(m);
		}
        
		// è·å–æ‰€æœ‰çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰çš„
		methodArray = stuClass.getDeclaredMethods();
		for(Method m : methodArray){
			System.out.println(m);
		}
        
		// è·å–å…¬æœ‰çš„show1()æ–¹æ³•
		Method m = stuClass.getMethod("show1", String.class);
		System.out.println(m);
		Object obj = stuClass.getConstructor().newInstance(); // å®ä¾‹åŒ–ä¸€ä¸ªStudentå¯¹è±¡
		m.invoke(obj, "åˆ˜å¾·å");
		
		// è·å–ç§æœ‰çš„show4()æ–¹æ³•
		m = stuClass.getDeclaredMethod("show4", int.class);
		System.out.println(m);
		m.setAccessible(true); //è§£é™¤ç§æœ‰é™å®š
		Object result = m.invoke(obj, 20); //éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯è¦è°ƒç”¨çš„å¯¹è±¡ï¼ˆè·å–æœ‰åå°„ï¼‰ï¼Œä¸€ä¸ªæ˜¯å®å‚
		System.out.println("è¿”å›å€¼ï¼š" + result);
	}
}
```

## 8. é€šè¿‡åå°„è·å–é…ç½®æ–‡ä»¶å†…å®¹

student ç±»ï¼š

```java
public class Student {
	public void show(){
		System.out.println("is show()");
	}
}
```

é…ç½®æ–‡ä»¶ä»¥ txt æ–‡ä»¶ä¸ºä¾‹å­ï¼ˆpro.txtï¼‰ï¼š

```
className = cn.fanshe.Student
methodName = show
```


æµ‹è¯•ç±»ï¼š

```java
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.lang.reflect.Method;
import java.util.Properties;
 
/*
 * æˆ‘ä»¬åˆ©ç”¨åå°„å’Œé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ï¼šåº”ç”¨ç¨‹åºæ›´æ–°æ—¶ï¼Œå¯¹æºç æ— éœ€è¿›è¡Œä»»ä½•ä¿®æ”¹
 * æˆ‘ä»¬åªéœ€è¦å°†æ–°ç±»å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶å³å¯
 */
public class Demo {
	public static void main(String[] args) throws Exception {
		//é€šè¿‡åå°„è·å–Classå¯¹è±¡
		Class stuClass = Class.forName(getValue("className"));//"cn.fanshe.Student"
		//2è·å–show()æ–¹æ³•
		Method m = stuClass.getMethod(getValue("methodName"));//show
		//3.è°ƒç”¨show()æ–¹æ³•
		m.invoke(stuClass.getConstructor().newInstance());
		
	}
	
	//æ­¤æ–¹æ³•æ¥æ”¶ä¸€ä¸ªkeyï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­è·å–ç›¸åº”çš„value
	public static String getValue(String key) throws IOException{
		Properties pro = new Properties();//è·å–é…ç½®æ–‡ä»¶çš„å¯¹è±¡
		FileReader in = new FileReader("pro.txt");//è·å–è¾“å…¥æµ
		pro.load(in);//å°†æµåŠ è½½åˆ°é…ç½®æ–‡ä»¶å¯¹è±¡ä¸­
		in.close();
		return pro.getProperty(key);//è¿”å›æ ¹æ®keyè·å–çš„valueå€¼
	}
}
```


å½“æˆ‘ä»¬ä¸è¦ Student ç±»ï¼Œè€Œéœ€è¦æ–°å†™ä¸€ä¸ª Student2 çš„ç±»æ—¶ï¼Œè¿™æ—¶åªéœ€è¦æ›´æ”¹ `pro.txt` çš„æ–‡ä»¶å†…å®¹å°±å¯ä»¥äº†ã€‚ä»£ç å°±ä¸€ç‚¹ä¸ç”¨æ”¹åŠ¨ã€‚é…ç½®æ–‡ä»¶æ›´æ”¹ä¸ºï¼š

```java
className = cn.fanshe.Student2
methodName = show2
```

## 9. åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**ï¼š åŠ¨æ€ç¼–è¯‘ã€‚è¿è¡ŒæœŸç±»å‹çš„åˆ¤æ–­ï¼ŒåŠ¨æ€åŠ è½½ç±»ï¼Œæé«˜ä»£ç çµæ´»åº¦ã€‚

**ç¼ºç‚¹**ï¼š

- æ€§èƒ½ç“¶é¢ˆï¼šåå°„ç›¸å½“äºä¸€ç³»åˆ—è§£é‡Šæ“ä½œï¼Œé€šçŸ¥ JVM è¦åšçš„äº‹æƒ…ï¼Œæ€§èƒ½æ¯”ç›´æ¥çš„ java ä»£ç è¦æ…¢å¾ˆå¤šã€‚
- å®‰å…¨é—®é¢˜ï¼šè®©æˆ‘ä»¬å¯ä»¥åŠ¨æ€æ“ä½œæ”¹å˜ç±»çš„å±æ€§åŒæ—¶ä¹Ÿå¢åŠ äº†ç±»çš„å®‰å…¨éšæ‚£ã€‚

## 10. åå°„çš„åº”ç”¨åœºæ™¯

**åå°„æ˜¯æ¡†æ¶è®¾è®¡çš„çµé­‚ã€‚**

åœ¨æˆ‘ä»¬å¹³æ—¶çš„é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒåŸºæœ¬ä¸Šå¾ˆå°‘ä¼šç›´æ¥ä½¿ç”¨åˆ°åå°„æœºåˆ¶ï¼Œä½†è¿™ä¸èƒ½è¯´æ˜åå°„æœºåˆ¶æ²¡æœ‰ç”¨ï¼Œå®é™…ä¸Šæœ‰å¾ˆå¤šè®¾è®¡ã€å¼€å‘éƒ½ä¸åå°„æœºåˆ¶æœ‰å…³ï¼Œä¾‹å¦‚æ¨¡å—åŒ–çš„å¼€å‘ï¼Œé€šè¿‡åå°„å»è°ƒç”¨å¯¹åº”çš„å­—èŠ‚ç ï¼›åŠ¨æ€ä»£ç†è®¾è®¡æ¨¡å¼ä¹Ÿé‡‡ç”¨äº†åå°„æœºåˆ¶ï¼Œè¿˜æœ‰æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨çš„ Springï¼Hibernate ç­‰æ¡†æ¶ä¹Ÿå¤§é‡ä½¿ç”¨åˆ°äº†åå°„æœºåˆ¶ã€‚

ä¸¾ä¾‹ï¼š

- æˆ‘ä»¬åœ¨ä½¿ç”¨ JDBC è¿æ¥æ•°æ®åº“æ—¶ä½¿ç”¨ `Class.forName()`é€šè¿‡åå°„åŠ è½½æ•°æ®åº“çš„é©±åŠ¨ç¨‹åº
- Spring æ¡†æ¶çš„ IOCï¼ˆåŠ¨æ€åŠ è½½ç®¡ç† Beanï¼‰åˆ›å»ºå¯¹è±¡ä»¥åŠ AOPï¼ˆåŠ¨æ€ä»£ç†ï¼‰åŠŸèƒ½éƒ½å’Œåå°„æœ‰è”ç³»
- åŠ¨æ€é…ç½®å®ä¾‹çš„å±æ€§

## ğŸ“š References

- ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ - å· 1 åŸºç¡€çŸ¥è¯† - ç¬¬ 10 ç‰ˆã€‹
- ã€ŠThinking In Javaï¼ˆJava ç¼–ç¨‹æ€æƒ³ï¼‰- ç¬¬ 4 ç‰ˆã€‹
- [æ•¬ä¸šçš„å°é©¬å“¥ â€” JavaåŸºç¡€ä¹‹â€”åå°„ï¼ˆéå¸¸é‡è¦ï¼‰](https://blog.csdn.net/sinat_38259539/article/details/71799078)
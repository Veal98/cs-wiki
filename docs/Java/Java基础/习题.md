# âœ Java ç¼–ç¨‹æ€æƒ³ - ç¬¬å››ç‰ˆ - è¯¾åä¹ é¢˜

---

> ğŸ˜€ æœ¬æ–‡ç»ƒä¹ é¢˜çš„é¢˜å·å‡å¯¹åº”ã€ŠJava ç¼–ç¨‹æ€æƒ³ã€‹ä¹¦ä¸­çš„é¢˜å·ï¼Œæœ‰äº›ç›¸ä¼¼æˆ–è€…é‡å¤é¢˜ç›®å°±æ²¡æœ‰åˆ—å‡ºæ¥~

## Everything is an Object ä¸€åˆ‡çš†æ˜¯å¯¹è±¡

**ç»ƒä¹  1ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå®ƒåŒ…å«ä¸€ä¸ª int åŸŸå’Œä¸€ä¸ª char åŸŸï¼Œå®ƒä»¬éƒ½æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œå°†å®ƒä»¬çš„å€¼æ‰“å°å‡ºæ¥ï¼Œä»¥éªŒè¯ java æ‰§è¡Œäº†é»˜è®¤åˆå§‹åŒ–ã€‚**

```java
public class ex1 {
    static int i;
    static char c;
    public static void main(String[] args) {
        System.out.println("i = " + i); // 0
        System.out.println("c = " + c); // â€œâ€
    }
}
```

**ç»ƒä¹  2ï¼šåˆ›å»ºä¸€ä¸ªâ€œHello Worldâ€ç¨‹åºï¼Œè¯¥ç¨‹åºåªè¦è¾“å‡ºè¿™å¥è¯å³å¯**

```java
public class ex2 {
    public static void main(String[] args){
        System.out.println("Hello world!");
    }
}
```

**ç»ƒä¹  3ï¼šå°†ä¸‹åˆ—ç±»æ”¹å†™æˆå®Œæ•´çš„ç¨‹åº**

```java
class ATypeName {
   int i;
   double d;
   boolean b;
   void show() {
      System.out.println(i);
      System.out.println(d);
      System.out.println(b);Â Â 
   }
}Â Â 
```

```java
public class ex3 {
    public static void main(String[] args){
        class ATypeName{
            int i;
            double d;
            boolean b;
            void show(){
                System.out.println(i);
                System.out.println(d);
                System.out.println(b);
            }
        }
        ATypeName a = new ATypeName();
        a.i = 3;
        a.d = 2.71828;
        a.b = false;
        a.show();
    }
}
```

**ç»ƒä¹  6ï¼šç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œè®©å®ƒå«æœ‰ä¸‹åˆ—å®šä¹‰çš„ `storage()` æ–¹æ³•çš„ä»£ç æ®µï¼Œå¹¶è°ƒç”¨ä¹‹**

```java
int storage(String s) {
  return s.length() * 2;
}  
```

```java
public class ex6 {
    public static void main(String[] args) {
        class StoreStuff{
            int storage(String s){
                return s.length()*2;
            }
        }
        StoreStuff s = new StoreStuff();
        System.out.println(s.storage("hello")); // 10
    }
}
```

**ç»ƒä¹  8ï¼šç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå±•ç¤ºæ— è®ºä½ åˆ›å»ºäº†æŸä¸ªç‰¹å®šç±»çš„å¤šå°‘ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªç±»ä¸­çš„æŸä¸ªç‰¹å®šçš„ static åŸŸåªæœ‰ä¸€ä¸ªå®ä¾‹**

```java
class StaticTest{
    static int i = 47;
}
class Incrementable{
    static void increment(){
        StaticTest.i ++;
    }
}

public class ex8 {
    public static void main(String[] args){
        System.out.println("StaticTest.i = " + StaticTest.i);
        
        StaticTest st1 = new StaticTest();
        StaticTest st2 = new StaticTest();
        System.out.println("st1.i = " + st1.i); // 47
        System.out.println("st2.i = " + st2.i); // 47
        
        Incrementable sf = new Incrementable();
        sf.increment();
        System.out.println("After sf.increment() called: "); 
        System.out.println("st1.i = " + st1.i); // 48
        System.out.println("st2.i = " + st2.i); // 48
        
        Incrementable.increment();
        System.out.println("After Incrementable.increment() called: ");
        System.out.println("st1.i = " + st1.i); // 49
        System.out.println("st2.i = " + st2.i); // 49
        
        st1.i = 3;
        System.out.println("After st1.i = 3 callend: ");
        System.out.println("st1.i = " + st1.i); // 3
        System.out.println("st2.i = " + st2.i); // 3
        
        System.out.println("Create another StaticTest st3.");
        StaticTest st3 = new StaticTest();
        System.out.println("st3.i = " + st3.i); // 3
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200712104807.png)

**ç»ƒä¹  9ï¼šç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå±•ç¤ºè‡ªåŠ¨åŒ…è£…åŠŸèƒ½å¯¹æ‰€æœ‰çš„åŸºæœ¬ç±»å‹å’ŒåŒ…è£…å™¨ç±»å‹éƒ½èµ·ä½œç”¨**

```java
public class ex9 {
    public static void main(String [] args){
        boolean b = false;
        char c = 'X';
        byte t = 8;
        short s = 16;
        int i = 32;
        long l = 64;
        float f = 0.32f;
        double d = 0.64;

        Boolean B = b;
        System.out.println("boolean b = " + b);
        System.out.println("boolean B = " + B);

        Character C = c;
        System.out.println("char c = " + c);
        System.out.println("Character C = " + C);

        Byte T = t;
        System.out.println("byte t = " + t);
        System.out.println("Byte T = " + T);

        Short S = s;
        System.out.println("short s = " + s);
        System.out.println("Short S = " + S);

        Integer I = i;
        System.out.println("int i = " + i);
        System.out.println("Integer I = " + I);

        Long L = l;
        System.out.println("long l = " + l);
        System.out.println("Long L = " + L);

        Float F = f;
        System.out.println("float f = " + f);
        System.out.println("Float F = " + F);
        
        Double D = d;
        System.out.println("double d = " + d);
        System.out.println("Double D = " + D);
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200712105344.png)

**ç»ƒä¹  11ï¼šå°† `AllTheColorsOfTheRainbxow` è¿™ä¸ªç¤ºä¾‹æ”¹å†™æˆä¸€ä¸ªç¨‹åº**

```java
public class ex11 {
    public static void main(String[] args){
        AllTheColorsOfTheRainbow atc = new AllTheColorsOfTheRainbow();
        System.out.println("atc.anIntegerRepresentingColors = " + atc.anIntegerRepresentingColors); // 0
        atc.changeColor(7);
        atc.changeTheHueOfTheColor(77);
        System.out.println("After color change, atc.anIntegerRepresentingColors = " + atc.anIntegerRepresentingColors); // 7
        System.out.println("atc.hue = " + atc.hue); // 7
    }
}

class AllTheColorsOfTheRainbow {
    int anIntegerRepresentingColors = 0;
    int hue = 0;

    void changeTheHueOfTheColor(int newHue) {
        hue = newHue;
    }

    int changeColor(int newColor) {
        return anIntegerRepresentingColors = newColor;
    }
}
```

## Operators æ“ä½œç¬¦

**ç»ƒä¹  2ï¼šåˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ª float åŸŸçš„ç±»ã€‚å¹¶ç”¨è¿™ä¸ªç±»æ¥å±•ç¤ºåˆ«åæœºåˆ¶ã€‚**

```java
public class ex2 {

    public static void main(String[] args) {
        Integral integral1 = new Integral();
        Integral integral2 = new Integral();
        integral1.f = 9f;
        integral2.f = 47f;
        System.out.println("1:integral1.f=" + integral1.f + ",integral2.f=" + integral2.f); // 9.0  47.0
        integral1 = integral2;
        System.out.println("2:integral1.f=" + integral1.f + ",integral2.f=" + integral2.f); // 47.0 47.0
        integral1.f = 27f;
        System.out.println("3:integral1.f=" + integral1.f + ",integral2.f=" + integral2.f); // 27.0 27.0

    }

}

class Integral {
    float f;
}
```

**ç»ƒä¹  3ï¼šåˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ª float åŸŸçš„ç±»ã€‚å¹¶ç”¨è¿™ä¸ªç±»æ¥å±•ç¤ºæ–¹æ³•è°ƒç”¨æ—¶çš„åˆ«åæœºåˆ¶**

```java
public class ex3 {
    static void func(Integral y){
        y.f = 1.0f;
    } 
    public static void main(String[] args){
        Integral x = new Integral();
        x.f = 2.0f;
        System.out.println("1:x.f=" + x.f); // 2.0
        func(x);
        System.out.println("2:x.f=" + x.f); // 1.0

    }
}

class Integral {
    float f;
}
```

**ç»ƒä¹  4ï¼šç¼–å†™ä¸€ä¸ªè®¡ç®—é€Ÿåº¦çš„ç¨‹åºï¼Œå®ƒæ‰€ä½¿ç”¨çš„è·ç¦»å’Œæ—¶é—´éƒ½æ˜¯å¸¸é‡**

```java
public class ex4 {
    public static void main(String[] args){
        float distance = 100;
        float time = 20;
        float velocity = distance/time;
        System.out.println(velocity);
    }
}
```

**ç»ƒä¹  5ï¼šåˆ›å»ºä¸€ä¸ªåä¸º Dog çš„ç±»ï¼Œå®ƒåŒ…å«ä¸¤ä¸ª String åŸŸï¼šname å’Œ saysã€‚åœ¨ main() æ–¹æ³•ä¸­ï¼Œåˆ›å»ºä¸¤ä¸ªDog å¯¹è±¡ï¼Œä¸€ä¸ªåä¸º spotï¼ˆå®ƒçš„å«å£°ä¸º â€œ Ruff!â€ï¼‰ï¼Œå¦ä¸€ä¸ªåä¸º scruffyï¼ˆå®ƒçš„å«å£°ä¸º â€Wuff!â€ï¼‰ã€‚ç„¶åæ˜¾ç¤ºå®ƒä»¬çš„åå­—å’Œå«å£°ã€‚**

```java
class Dog {
    String name;
    String says;
}

public class ex5 {
    public static void main(String[] args){
        Dog dog1 = new Dog();
        dog1.name = "spot";
        dog1.says = "Ruff!";
        System.out.println(dog1.name + " says " + dog1.says);

        Dog dog2 = new Dog();
        dog2.name = "scruffy";
        dog2.says = "Wurf!";
        System.out.println(dog2.name + " says " + dog2.says);
    }
}
```

**ç»ƒä¹  6ï¼šåœ¨ç»ƒä¹ ï¼ˆ5ï¼‰çš„åŸºç¡€ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Dog ç´¢å¼•ï¼Œå¹¶å¯¹å…¶èµ‹å€¼ä¸º spot å¯¹è±¡ã€‚æµ‹è¯•ç”¨==å’Œequalsï¼ˆï¼‰æ–¹æ³•æ¥æ¯”è¾ƒæ‰€æœ‰å¼•ç”¨çš„ç»“æœ**

```java
class Dog {
    String name;
    String says;
}

public class ex6 {
    public static void main(String[] args){
        Dog dog1 = new Dog();
        dog1.name = "spot";
        dog1.says = "Ruff!";
        System.out.println(dog1.name + " says " + dog1.says);

        Dog dog2 = new Dog();
        dog2.name = "scruffy";
        dog2.says = "Wurf!";
        System.out.println(dog2.name + " says " + dog2.says);

        Dog dog3 = dog1;
        System.out.println("Compareing dog1 and dog2 objects");
        compare(dog1, dog2); 
        System.out.println("\nCompareing dog1 and dog3 objects");
        compare(dog1, dog3);
        System.out.println("\nCompareing dog2 and dog3 objects");
        compare(dog2, dog3);

    }

    static void compare(Dog dog1, Dog dog2){
        System.out.println("== on top references: "+(dog1==dog2));
        System.out.println(".equals() on top references: "+dog1.equals(dog2));
        System.out.println("== on name: "+(dog1.name==dog2.name));
        System.out.println(".equals() on name: "+dog1.name.equals(dog2.name));
        System.out.println("== on Says: "+(dog1.says==dog2.says));
        System.out.println(".equals() on Says: "+dog1.says.equals(dog2.says));
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200712121550.png)

> ğŸ’¡ `==` ç”¨æ¥æ£€æµ‹ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦åœ¨åŒä¸€ä½ç½®ä¸Šï¼Œ`equals` ç”¨æ¥æ£€æµ‹ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰

**ç»ƒä¹  7ï¼šç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œæ¨¡æ‹Ÿæ‰”ç¡¬å¸çš„ç»“æœã€‚**

```java
public class ex7 {
    public static void main(String[] args){
        Random random = new Random(47); 
        boolean flip = random.nextBoolean(); 
        System.out.println(flip == true?"Head":"Tail");
    }
}
```

> - `Random(long seed)` : ä½¿ç”¨ long æ•°æ®ç±»å‹çš„ç§å­æ„é€ ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨
>
> - `boolean nextBoolean()`:  è¿”å›ä¸‹ä¸€ä¸ªä¼ªéšæœºæ•°ï¼Œå®ƒæ˜¯å–è‡ªæ­¤éšæœºæ•°ç”Ÿæˆå™¨åºåˆ—çš„å‡åŒ€åˆ†å¸ƒçš„ booleanå€¼ã€‚

**ç»ƒä¹  9ï¼šåˆ†åˆ«æ˜¾ç¤ºç”¨ float å’Œ double æŒ‡æ•°è®°æ•°æ³•æ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§å’Œæœ€å°çš„æ•°å­—ã€‚**

```java
public class ex9 {
    public static void main(String[] args) {
        System.out.println("Float.MAX_VALUE = "+Float.MAX_VALUE);
        System.out.println("Float.MIN_VALUE = "+Float.MIN_VALUE);
        System.out.println("Double.MAX_VALUE = "+Double.MAX_VALUE);
        System.out.println("Double.MIN_VALUE = "+Double.MIN_VALUE);
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200712143340.png)

## Controlling Execution æ§åˆ¶æ‰§è¡Œæµç¨‹ 

**ç»ƒä¹  9ï¼šä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—ç”±æ•°å­—1ã€1ã€2ã€3ã€5ã€8ã€13ã€21ã€34ç­‰ç­‰ç»„æˆçš„ï¼Œå…¶ä¸­æ¯ä¸ªæ•°å­—ï¼ˆç¬¬ä¸‰ä¸ªæ•°å­—èµ·ï¼‰éƒ½æ˜¯å‰ä¸¤ä¸ªæ•°å­—çš„ä¹‹å’Œã€‚åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œå¹¶æ˜¾ç¤ºä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æ€»å…±ç”±è¯¥å‚æ•°æŒ‡å®šçš„ä¸ªæ•°æ‰€æ„æˆçš„æ‰€æœ‰æ–æ³¢é‚£å¥‘æ•°å­—**

```java
import java.util.Scanner;

public class ex9 {
    static int fib(int n){
        if(n <= 2)
            return 1;
        else
            return fib(n-1) + fib(n-2);
    }

    public static void main(String[] args){
        Scanner in = new Scanner(System.in);
        int n = in.nextInt();
        for(int i = 0; i < n; i++)
            System.out.print(fib(i) + " ");
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713195101.png)

**ç»ƒä¹  10ï¼š å¸è¡€é¬¼æ•°å­—æ˜¯æŒ‡ä½æ•°ä¸ºå¶æ•°çš„æ•°å­—ï¼Œå¯ä»¥ç”±ä¸€å¯¹æ•°å­—ç›¸ä¹˜è€Œå¾—åˆ°ï¼Œè€Œè¿™å¯¹æ•°å­—åŒ…å«ä¹˜ç§¯ä¸€åŠä½æ•°çš„æ•°å­—ï¼Œå…¶ä¸­ä»æœ€åˆçš„æ•°å­—ä¸­é€‰å–çš„æ•°å­—å¯ä»¥ä»»æ„æ’åºã€‚ä»¥ä¸¤ä¸ª0ç»“å°¾çš„æ•°å­—æ˜¯ä¸å…è®¸çš„ï¼Œä¾‹å¦‚ï¼Œä¸‹åˆ—æ•°å­—å°±æ˜¯â€œå¸è¡€é¬¼â€æ•°å­—ï¼š**

1260 = 21 x 60

1827 = 21 x 87

2187 = 27 x 81

å†™ä¸€ä¸ªç¨‹åºï¼Œæ‰¾å‡º4ä½æ•°çš„æ‰€æœ‰å¸è¡€é¬¼æ•°å­—ã€‚

```java
public class ex10 {
    static int a(int i){
        return i / 1000; // è¡¨ç¤ºè¿™ä¸ªå››ä½æ•°çš„åƒä½æ•°
    }
    static int b(int i){
        return (i%1000)/100; // è¡¨ç¤ºè¿™ä¸ªå››ä½æ•°çš„ç™¾ä½æ•°
    }
    static int c(int i) {
        return ((i % 1000) % 100) / 10; // è¡¨ç¤ºè¿™ä¸ªå››ä½æ•°çš„åä½æ•°
    }
    static int d(int i) {
        return ((i % 1000) % 100) % 10; // è¡¨ç¤ºè¿™ä¸ªå››ä½æ•°çš„ä¸ªä½æ•°
    }

    static int com(int num1, int num2){
        return (num1 * 10) + num2; // è¡¨ç¤ºä¸¤ä¸ªä¸€ä½æ•°ç»„åˆæˆä¸€ä¸ªä¸¤ä½æ•°
    }

    /**
     * åˆ¤æ–­æ˜¯å¦æ˜¯å¸è¡€é¬¼æ•°
     * 
     * @param i å¾…åˆ¤æ–­çš„4ä½æ•°
     * @param m ä»è¿™4ä½æ•°çš„4ä¸ªæ•°å­—ä¸­æŒ‘é€‰å‡ºæ¥éšæœºç»„åˆçš„ä¸€ä¸ªä¸¤ä½æ•°
     * @param n ä»è¿™4ä½æ•°çš„4ä¸ªæ•°å­—ä¸­æŒ‘é€‰å‡ºæ¥éšæœºç»„åˆçš„å¦ä¸€ä¸ªä¸¤ä½æ•°
     */
    static void productTest(int i, int m, int n){
        if(m * n == i)
            System.out.println(i + "=" + m + "*" + n);
    }
    public static void main(String[] args){
        // æ‰¾å‡ºæ‰€æœ‰ 4 ä½æ•°çš„å¸è¡€é¬¼æ•°
        for(int i = 1001; i < 9999; i++){
            productTest(i, com(a(i), b(i)), com(c(i), d(i)));
            productTest(i, com(a(i), c(i)), com(b(i), d(i)));
            productTest(i, com(a(i), c(i)), com(d(i), b(i)));
            productTest(i, com(a(i), d(i)), com(b(i), c(i)));
            productTest(i, com(a(i), d(i)), com(c(i), b(i)));
            productTest(i, com(b(i), a(i)), com(c(i), d(i)));
            productTest(i, com(b(i), a(i)), com(d(i), c(i)));
            productTest(i, com(b(i), c(i)), com(d(i), a(i)));
            productTest(i, com(b(i), d(i)), com(c(i), a(i)));
            productTest(i, com(c(i), a(i)), com(d(i), b(i)));
            productTest(i, com(c(i), b(i)), com(d(i), a(i)));
        }
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713201043.png)

## Initialization & Cleanup åˆå§‹åŒ–ä¸æ¸…ç†

**ç»ƒä¹  1ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæœªåˆå§‹åŒ–çš„ String å¼•ç”¨ã€‚éªŒè¯è¯¥å¼•ç”¨è¢« Java åˆå§‹åŒ–æˆäº† nullã€‚**

```java
public class ex1 {
    public static void main(String[] args){
        String s = new String();
        System.out.println("s = " + s);
    }
}
```

**ç»ƒä¹  5ï¼šåˆ›å»ºä¸€ä¸ªåä¸ºDogçš„ç±»ï¼Œå®ƒå…·æœ‰é‡è½½çš„barkï¼ˆï¼‰æ–¹æ³•ã€‚æ­¤æ–¹æ³•åº”æ ¹æ®ä¸åŒçš„åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œé‡è½½ï¼Œå¹¶æ ¹æ®è¢«è°ƒç”¨çš„ç‰ˆæœ¬ï¼Œæ‰“å°å‡ºä¸åŒç±»å‹çš„ç‹—å ï¼ˆbarkingï¼‰ã€å’†å“®ï¼ˆhowlingï¼‰ç­‰ä¿¡æ¯ï¼Œç¼–å†™mainï¼ˆï¼‰æ¥è°ƒç”¨æ‰€æœ‰ä¸åŒç‰ˆæœ¬çš„æ–¹æ³•ã€‚**

```java
public class ex5 {
     public static void main(String[] args) {
        Dog dog = new Dog();
        dog.bark();
        dog.bark(1);
    }
}
class Dog{
     public void bark() {
         System.out.println("barking");
     }
     public void bark(int i) {
         System.out.println("howling");
     }
}
```

**ç»ƒä¹  8ï¼šç¼–å†™å…·æœ‰ä¸¤ä¸ªæ–¹æ³•çš„ç±»ï¼Œåœ¨ç¬¬ä¸€ä¸ªæ–¹æ³•å†…è°ƒç”¨ç¬¬äºŒä¸ªæ–¹æ³•ä¸¤æ¬¡ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ä¸ä½¿ç”¨thiså…³é”®å­—ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ä½¿ç”¨thiså…³é”®å­—**

> è¿™é‡Œåªæ˜¯ä¸ºäº†éªŒè¯å®ƒæ˜¯èµ·ä½œç”¨çš„ï¼Œä½ ä¸åº”è¯¥åœ¨å®è·µä¸­ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚

```java
class Doc {
    void intubate() {
        System.out.println("prepare patient");
        laryngoscopy();
        this.laryngoscopy();
    }

    void laryngoscopy() {
        System.out.println("use laryngoscope");
    }
}

public class ex8 {
    public static void main(String[] args) {
        new Doc().intubate();
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713202418.png)

**ç»ƒä¹  9ï¼šç¼–å†™ä¸¤ä¸ªï¼ˆé‡è½½ï¼‰æ„é€ å™¨çš„ç±»ï¼Œå¹¶åœ¨ç¬¬ä¸€ä¸ªæ„é€ å™¨ä¸­, é€šè¿‡thisè°ƒç”¨ç¬¬äºŒä¸ªæ„é€ å™¨ã€‚**

```java
class Doc1 {
    Doc1(int i) {
        this("MD");
        int yearsTraining = i;
        System.out.println("New doc with " + i + " years of training");
    }

    Doc1(String s) {
        String degree = s;
        System.out.println("New doc with " + s + " degree");
    }

    void intubate() {
        System.out.println("prepare patient");
        laryngoscopy();
    }

    void laryngoscopy() {
        System.out.println("use laryngoscope");
    }
}

public class ex9 {
    public static void main(String[] args) {
        new Doc1(8).intubate();
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713202606.png)

**ç»ƒä¹  10ï¼šç¼–å†™å…·æœ‰ finalize æ–¹æ³•çš„ç±»ï¼Œå¹¶åœ¨æ–¹æ³•ä¸­æ‰“å°æ¶ˆæ¯ï¼Œåœ¨main ä¸­ä¸ºè¯¥ç±»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯•è§£é‡Šè¿™ä¸ªç¨‹åºçš„è¡Œä¸ºã€‚**

```java
class WebBank {
    String name;
    boolean loggedIn = false;

    public WebBank() {
        loggedIn = true;
        name = null;
    }

    public WebBank(String s){
        loggedIn = true;
        name = s;
    }

    public String getName(){
        return this.name;
    }

    void logOut() {
        loggedIn = false;
    }

    protected void finalize() {
        if (loggedIn)
            System.out.println(this.getName() + " Error: still logged in");
        else
            System.out.println(this.getName() + " OK: logged out successful!");
        // Normally, you'll also call the base-class version:
        // super.finalize();
    }
}

public class ex10 {
    public static void main(String[] args) {
        WebBank bank1 = new WebBank("web1");
        WebBank bank2 = new WebBank("web2");
        // Proper cleanup: log out of bank1 before going home
        bank1.logOut();
        // Drop the reference, forget to cleanup:
        new WebBank("web3");
        // Force garbage collection and finalization:
        System.gc();
        
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713205046.png)

æ˜¾ç„¶ï¼Œweb1 å’Œ web2 çš„ finalize æ–¹æ³•å¹¶æ²¡æœ‰è¢«è°ƒç”¨ï¼Œå› ä¸º Java å¹¶ä¸ä¿è¯ finalize ä½•æ—¶æˆ–è€…ä¸€å®šä¼šè¢«è°ƒç”¨ã€‚

**ç»ƒä¹  11ï¼šä¿®æ”¹å‰ä¸€ä¸ªç»ƒä¹ çš„ç¨‹åº,è®©ä½ çš„ finalize æ€»ä¼šè¢«è°ƒç”¨ã€‚**

```java
class WebBank {
    String name;
    boolean loggedIn = false;

    public WebBank() {
        loggedIn = true;
        name = null;
    }

    public WebBank(String s){
        loggedIn = true;
        name = s;
    }

    public String getName(){
        return this.name;
    }

    void logOut() {
        loggedIn = false;
    }

    protected void finalize() {
        if (loggedIn)
            System.out.println(this.getName() + " Error: still logged in");
        else
            System.out.println(this.getName() + " OK: logged out successful!");
        // Normally, you'll also call the base-class version:
        // super.finalize();
    }
}

public class ex10 {
    public static void main(String[] args) {
        WebBank bank1 = new WebBank("web1");
        WebBank bank2 = new WebBank("web2");
        new WebBank("web3");
        // Proper cleanup: log out of bank1 before going home:
        bank1.logOut();
        // Forget to logout of bank2 and unnamed new bank
        // Attempts to finalize any missed banks:
        System.out.println("Try 1: ");
        System.runFinalization();
        System.out.println("Try 2: ");
        Runtime.getRuntime().runFinalization(); // ç­‰ä»·äº System.runFinalization();
        System.out.println("Try 3: ");
        System.gc();
        System.out.println("Try 4: ");
        // using deprecated since 1.1 method:
        System.runFinalizersOnExit(true);
        
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713204536.png)

è¿™æ ·ï¼Œweb1ï¼Œweb2ï¼Œweb3 çš„ finalize  æ–¹æ³•å°±éƒ½ä¸€å®šä¼šè¢«æ‰§è¡Œäº†ã€‚

**ç»ƒä¹  12ï¼šç¼–å†™åä¸ºTankçš„ç±»ï¼Œæ­¤ç±»çš„çŠ¶æ€å¯ä»¥æ˜¯â€œæ»¡çš„â€æˆ–â€œç©ºçš„â€ã€‚å…¶ç»ˆç»“æ¡ä»¶æ˜¯ï¼šå¯¹è±¡è¢«æ¸…ç†æ—¶å¿…é¡»å¤„äºç©ºçŠ¶æ€ã€‚ è¯·ç¼–å†™finalizeï¼ˆï¼‰ä»¥æ£€éªŒç»ˆç»“æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œåœ¨ mainï¼ˆï¼‰ä¸­æµ‹è¯• Tank å¯èƒ½å‘ç”Ÿçš„å‡ ç§ä½¿ç”¨æ–¹å¼**

```java
class Tank {
    static int counter = 0;
    int id = ++ counter; 

    int howFull = 0;

    Tank() {
        this(0);
    }

    Tank(int fullness) {
        howFull = fullness;
    }

    void sayHowFull() {
        if (howFull == 0)
            System.out.println("Tank " + this.id + " is empty");
        else
            System.out.println("Tank " + this.id + " filling status = " + howFull);
    }

    void empty() {
        howFull = 0;
    }

    protected void finalize() {
        if (howFull != 0)
            System.out.println("Tank " + this.id + " not empty");
        else {
            System.out.println("Tank " + this.id + " cleaned up Ok");
        }
        // Normally, you'll also do this:
        // super.finalize(); // Call the base-class version
    }
}

public class ex12 {
    public static void main(String[] args) {
        Tank tank1 = new Tank(); // new Tank(0) id = 1
        Tank tank2 = new Tank(3); // id = 2
        Tank tank3 = new Tank(5); // id =3
        // Proper cleanup: empty tank before going home
        tank2.empty();
        // Drop the reference, forget to cleanup:
        new Tank(6); // id = 4
        System.out.println("Check tanks:");
        System.out.println("tank1: ");
        tank1.sayHowFull();
        System.out.println("tank2: ");
        tank2.sayHowFull();
        System.out.println("tank3: ");
        tank3.sayHowFull();
        System.out.println("first forced gc():");
        System.gc();
        // Force finalization on exit but using method
        // deprecated since JDK 1.1:
        System.out.println("try deprecated runFinalizersOnExit(true):");
        System.runFinalization();
        System.out.println("last forced gc():");
        System.gc();
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713210806.png)

åªæ‰§è¡Œäº† Tank 4 çš„ finalize æ–¹æ³•ã€‚

**ç»ƒä¹  14ï¼šç¼–å†™ä¸€ä¸ªç±»ï¼Œæ‹¥æœ‰ä¸¤ä¸ªé™æ€å­—ç¬¦ä¸²åŸŸï¼Œå…¶ä¸­ä¸€ä¸ªåœ¨å®šä¹‰å¤„åˆå§‹åŒ–ï¼Œå¦ä¸€ä¸ªåœ¨é™æ€å—ä¸­åˆå§‹åŒ–ã€‚ç°åœ¨ï¼ŒåŠ å…¥ä¸€ä¸ªé™æ€æ–¹æ³•ç”¨ä»¥æ‰“å°å‡ºä¸¤ä¸ªå­—æ®µå€¼ã€‚è¯·è¯æ˜å®ƒä»¬éƒ½ä¼šåœ¨è¢«ä½¿ç”¨ä¹‹å‰å®Œæˆåˆå§‹åŒ–åŠ¨ä½œã€‚**

```java
class Go {
    static String s1 = "run";
    static String s2, s3;
    // åªä¼šè¢«æ‰§è¡Œä¸€æ¬¡
    static {
        s2 = "drive car";
        s3 = "fly plane";
        System.out.println("s2 & s3 initialized");
    }

    static void how() {
        System.out.println(s1 + " or " + s2 + " or " + s3);
    }

    public Go() {
        System.out.println("Go()");
    }
}

public class ex14 { 
    static Go g1 = new Go();
    static Go g2 = new Go();

    public static void main(String[] args) {
        System.out.println("Inside main()");
        Go.how();
        System.out.println("Go.s1: " + Go.s1);
    }

}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713212356.png)

**ç»ƒä¹  19ï¼šå†™ä¸€ä¸ªç±»ï¼Œä»–æ¥å—ä¸€ä¸ªå¯å˜å‚æ•°çš„Stringæ•°ç»„ï¼ŒéªŒè¯ä½ å¯ä»¥å‘è¯¥æ–¹æ³•ä¼ é€’ä¸€ä¸ªç”¨é€—å·åˆ†éš”çš„Stringåˆ—è¡¨ï¼Œæˆ–æ˜¯ä¸€ä¸ª String[]ã€‚**

```java
public class ex19 {
    static void showString(String ...args){
        for(String s : args){
            System.out.print(s + " ");
        }
        System.out.println();
    }

    public static void main(String[] args){
        showString("one","two","three");
        showString(new String[]{"a","b","c","d"});
    }
}
```

**ç»ƒä¹  21ï¼šåˆ›å»ºä¸€ä¸ª enumï¼Œå®ƒåŒ…å«çº¸å¸ä¸­æœ€å°é¢å€¼çš„ 6 ç§ç±»å‹ã€‚é€šè¿‡ values() å¾ªç¯å¹¶æ‰“å°æ¯ä¸€ä¸ªå€¼åŠå…¶ordinal() ä¸‹æ ‡**

```java

public class ex21 {
    public enum Bills {
        ONE, FIVE, TEN, TWENTY, FIFTY, HUNDRED
    }

    public static void main(String[] args) {
        for (Bills b : Bills.values())
            System.out.println(b + ", ordinal " + b.ordinal());
    }
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713215701.png)

**ç»ƒä¹  22ï¼šåœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œä¸ºenumå†™ä¸€ä¸ªswitchè¯­å¥ï¼Œå¯¹äºæ¯ä¸€ä¸ªcaseï¼Œè¾“å‡ºè¯¥ç‰¹å®šè´§å¸çš„æè¿°ã€‚**

```java
package Thinking_in_Java.InitAndClean;


public class ex21 {
    public enum Bills {
        ONE, FIVE, TEN, TWENTY, FIFTY, HUNDRED
    }

    public static void main(String[] args) {
        for (Bills b : Bills.values()){
            switch(b){
                case ONE:
                System.out.println("George Washington");
                break;
            case FIVE:
                System.out.println("Abraham Lincoln");
                break;
            case TEN:
                System.out.println("Alexander Hamilton");
                break;
            case TWENTY:
                System.out.println("Andrew Jackson");
                break;
            case FIFTY:
                System.out.println("U.S. Grant");
                break;
            }
        }
    }
}
```

## Access Control è®¿é—®æƒé™æ§åˆ¶

**ç»ƒä¹  4ï¼šå±•ç¤º protected æ–¹æ³•å…·æœ‰åŒ…è®¿é—®æƒé™ï¼Œä½†æ˜¯å®ƒä»æ—§ä¸æ˜¯ public çš„ã€‚**

é¦–å…ˆï¼Œprotected çš„åŒ…è®¿é—®æƒé™ï¼ˆæ³¨æ„ä»¥ä¸‹è¿™ä¸¤ä¸ªç±»æ˜¯åŒä¸€ä¸ªåŒ…ï¼‰

```java
/*
* package access.cookie2;
*
* public class Cookie {
*	public Cookie() {
*		System.out.println("Cookie contstructor");
*	}
*	protected void bite() { System.out.println("bite"); }
* }
*/

package access.cookie2;

public class CookieMonster {
	public static void main(String[] args) {
		Cookie x = new Cookie();
		x.bite(); // package access to protected method
	}	
}
```

ç„¶åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ protected æ˜¯æ— æ³•è·¨åŒ…è®¿é—®çš„ï¼ˆä»¥ä¸‹è¿™ä¸¤ä¸ªç±»ä¸å±äºåŒä¸€ä¸ªåŒ…ï¼‰

```java
/*
* package access.cookie2;
*
* public class Cookie {
*	public Cookie() {
*		System.out.println("Cookie contstructor");
*	}
*	protected void bite() { System.out.println("bite"); }
* }
*/

import access.cookie2.*;

public class CookieThief {
	public static void main(String[] args) {
		Cookie x = new Cookie();
		// x.bite(); // access protected
	}	
}
```

**ç»ƒä¹  5ï¼šåˆ›å»ºä¸€ä¸ªå¸¦æœ‰publicï¼Œprivateï¼Œprotectedå’ŒåŒ…è®¿é—®æƒé™åŸŸä»¥åŠæ–¹æ³•æˆå‘˜çš„ç±»ã€‚åˆ›å»ºä¸€ä¸ªè¯¥ç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œçœ‹çœ‹åœ¨ä½ è¯•å›¾è°ƒç”¨æ‰€æœ‰ç±»æˆå‘˜æ—¶ï¼Œä¼šå¾—åˆ°ä»€ä¹ˆç±»å‹çš„ç¼–è¯‘ä¿¡æ¯ã€‚è¯·æ³¨æ„ï¼Œå¤„äºåŒä¸€ä¸ªç›®å½•ä¸­çš„æ‰€æœ‰ç±»éƒ½æ˜¯é»˜è®¤åŒ…çš„ä¸€éƒ¨åˆ†**

åœ¨åŒä¸€åŒ…ä¸‹åˆ›å»ºä»¥ä¸‹ä¸¤ä¸ªç±»ï¼š

```java
/* in same directory:
* package access; 
*
* public class FourWays {
*	int a = 0;
*	public int b = 1;
*	protected int c = 2;
*	private int d = 3;
*	FourWays() { System.out.println("FourWays() constructor"); }
*	void showa() { System.out.println(a); }
*	public void showb() { System.out.println(b); }
*	protected void showc() { System.out.println(c); }
*	private void showd() { System.out.println(d); }	
* }
*/

package access; 

public class AccessTest {
	public static void main(String[] args) {
		FourWays fw = new FourWays();
		fw.showa();
		fw.showb();
		fw.showc();
		fw.a = 10;
		fw.b = 20;
		fw.c = 30;
		fw.showa();
		fw.showb();
		fw.showc();
		//! fw.showd(); // private access, compiler can't touch
	}	
}
```

![](https://gitee.com/veal98/images/raw/master/img/20200713221908.png)

**ç»ƒä¹  8ï¼šåˆ›å»ºä¸€ä¸ªåä¸ºConnectionManagerçš„ç±»ï¼Œè¯¥ç±»ç®¡ç†ä¸€ä¸ªå…ƒç´ ä¸ºConnectionå¯¹è±¡çš„å›ºå®šæ•°ç»„ã€‚å®¢æˆ·ç«¯ç¨‹åºå‘˜ä¸èƒ½ç›´æ¥åˆ›å»ºConnectionå¯¹è±¡ï¼Œè€Œåªèƒ½é€šè¿‡ConnectionManagerä¸­çš„æŸä¸ªstaticæ–¹æ³•æ¥è·å–ä»–ä»¬ã€‚å½“ConnectionManagerä¹‹ä¸­ä¸å†æœ‰å¯¹è±¡æ—¶ï¼Œå®ƒä¼šè¿”å›nullå¼•ç”¨ã€‚åœ¨mainï¼ˆï¼‰ä¹‹ä¸­æ£€æµ‹è¿™äº›ç±»ã€‚**

```java
class Connection {
    private static int count = 0;
    private int i = 0;

    // ç§æœ‰æ„é€ ï¼Œä½¿å¾—ç¨‹åºå‘˜ä¸èƒ½ç›´æ¥åˆ›å»ºConnectionå¯¹è±¡
    private Connection() {
        System.out.println("Connection()");
    }

    // Allow creation via static method:
    static Connection makeConnection() {
        count++;
        return new Connection();
    }

    public static int howMany() {
        return count;
    }

    public String toString() {
        return ("Connection " + count);
    }
}

public class ConnectionManager {
    static int howManyLeft = 3;
    static Connection[] ca = new Connection[3];
    {
        for (Connection x : ca)
            x = Connection.makeConnection();
    }

    public static Connection getConnection() {
        if (howManyLeft > 0)
            return ca[--howManyLeft];
        else {
            System.out.println("No more connections");
            return null;
        }
    }

    public static void main(String[] args) {
        ConnectionManager cm = new ConnectionManager();
        System.out.println(cm.howManyLeft);
        cm.getConnection();
        System.out.println(howManyLeft);
        cm.getConnection();
        System.out.println(howManyLeft);
        cm.getConnection();
        System.out.println(cm.getConnection());
        System.out.println(howManyLeft);
    }

```

![](https://gitee.com/veal98/images/raw/master/img/20200713222623.png)



## ğŸ“š References

- ã€ŠJava ç¼–ç¨‹æ€æƒ³ - ç¬¬å››ç‰ˆ - ä¸­æ–‡ç¿»è¯‘ç‰ˆã€‹

- [Thinking in Java 4th Edition (Bruce Eckel) è¯¾åä¹ é¢˜ç­”æ¡ˆ](http://greggordon.org/java/tij4/solutions.htm)
- [Java ç¼–ç¨‹æ€æƒ³ç¬¬å››ç‰ˆç»ƒä¹ ](https://blog.csdn.net/lelouch_j_zs/category_7270086.html)
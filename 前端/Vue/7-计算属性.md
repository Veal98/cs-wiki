# ğŸš Vue.js è®¡ç®—å±æ€§ computed

---

æ¨¡æ¿å†…çš„è¡¨è¾¾å¼éå¸¸ä¾¿åˆ©ï¼Œä½†æ˜¯è®¾è®¡å®ƒä»¬çš„åˆè¡·æ˜¯ç”¨äºç®€å•è¿ç®—çš„ã€‚åœ¨æ¨¡æ¿ä¸­æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ä¼šè®©æ¨¡æ¿è¿‡é‡ä¸”éš¾ä»¥ç»´æŠ¤ã€‚ä¾‹å¦‚ï¼š
```vue
<div id="example">
  {{ message.split('').reverse().join('') }}
</div>
```
åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œæ¨¡æ¿ä¸å†æ˜¯ç®€å•çš„å£°æ˜å¼é€»è¾‘ã€‚ä½ å¿…é¡»çœ‹ä¸€æ®µæ—¶é—´æ‰èƒ½æ„è¯†åˆ°ï¼Œè¿™é‡Œæ˜¯æƒ³è¦æ˜¾ç¤ºå˜é‡ `message` çš„ç¿»è½¬å­—ç¬¦ä¸²ã€‚å½“ä½ æƒ³è¦åœ¨æ¨¡æ¿ä¸­å¤šæ¬¡å¼•ç”¨æ­¤å¤„çš„ç¿»è½¬å­—ç¬¦ä¸²æ—¶ï¼Œå°±ä¼šæ›´åŠ éš¾ä»¥å¤„ç†ã€‚

æ‰€ä»¥ï¼Œå¯¹äºä»»ä½•å¤æ‚é€»è¾‘ï¼Œä½ éƒ½åº”å½“ä½¿ç”¨**è®¡ç®—å±æ€§**ã€‚

è®¡ç®—å±æ€§å…³é”®è¯: `computed`

## 1. åŸºç¡€ä¾‹å­


```vue
<div id="app">
  <p>åŸå§‹å­—ç¬¦ä¸²: {{ message }}</p>
  <p>è®¡ç®—ååè½¬å­—ç¬¦ä¸²: {{ reversedMessage }}</p>
</div>
 
<script>
var vm = new Vue({
  el: '#app',
  data: {
    message: 'Vuetest!'
  },
  computed: {
    // è®¡ç®—å±æ€§çš„ getter
    reversedMessage: function () {
      // this æŒ‡å‘ vm å®ä¾‹
      return this.message.split('').reverse().join('')
    }
  }
})
</script>
```
ä¸Šè¿°ä»£ç å£°æ˜äº†ä¸€ä¸ªè®¡ç®—å±æ€§ `reversedMessage `ã€‚æä¾›çš„å‡½æ•°å°†ç”¨ä½œå±æ€§ `vm.reversedMessage` çš„ `getter`æ–¹æ³• ã€‚


## 2.Â è®¡ç®—å±æ€§ç¼“å­˜ vs æ–¹æ³•
ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¡¨è¾¾å¼ä¸­è°ƒç”¨æ–¹æ³•æ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š
```vue
<p>Reversed message: "{{ reversedMessage() }}"</p>
```
```js
methods: {
  reversedMessage: function () {
    return this.message.split('').reverse().join('')
  }
}
```
<u>æˆ‘ä»¬å¯ä»¥å°†åŒä¸€å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚ä¸¤ç§æ–¹å¼çš„æœ€ç»ˆç»“æœç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„</u>ã€‚ğŸš¨ ç„¶è€Œï¼Œä¸åŒçš„æ˜¯**è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„**ã€‚åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚ğŸ‘ è¿™å°±æ„å‘³ç€**åªè¦ `message` è¿˜æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¤šæ¬¡è®¿é—® `reversedMessage` è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚**

è¿™ä¹ŸåŒæ ·æ„å‘³ç€ä¸‹é¢çš„è®¡ç®—å±æ€§å°†ä¸å†æ›´æ–°ï¼Œå› ä¸º `Date.now()` ä¸æ˜¯å“åº”å¼ä¾èµ–ï¼š

```js
computed: {
  now: function () {
    return Date.now()
  }
}
```
<u>ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ¯å½“è§¦å‘é‡æ–°æ¸²æŸ“æ—¶ï¼Œè°ƒç”¨æ–¹æ³•å°†**æ€»ä¼š**å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚</u>

æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ€§èƒ½å¼€é”€æ¯”è¾ƒå¤§çš„è®¡ç®—å±æ€§ **A**ï¼Œå®ƒéœ€è¦éå†ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„å¹¶åšå¤§é‡çš„è®¡ç®—ã€‚ç„¶åæˆ‘ä»¬å¯èƒ½æœ‰å…¶ä»–çš„è®¡ç®—å±æ€§ä¾èµ–äº **A**ã€‚å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œæˆ‘ä»¬å°†ä¸å¯é¿å…çš„å¤šæ¬¡æ‰§è¡Œ **A** çš„ getterã€‚

## 3.Â è®¡ç®—å±æ€§çš„ setter
è®¡ç®—å±æ€§é»˜è®¤åªæœ‰ `getter` ï¼Œä¸è¿‡åœ¨éœ€è¦æ—¶ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª `setter`ï¼š
```vue
<div id="app">
  <p>{{ site }}</p>
</div>

<script>
var vm = new Vue({
  el: '#app',
  data: {
	name: 'Google',
	url: 'http://www.google.com'
  },
  computed: {
    site: {
      // getter
      get: function () {
        return this.name + ' ' + this.url
      },
      // setter
      set: function (newValue) {
        var names = newValue.split(' ')
        this.name = names[0]
        this.url = names[names.length - 1]
      }
    }
  }
})
// è°ƒç”¨ setterï¼Œ vm.name å’Œ vm.url ä¹Ÿä¼šè¢«å¯¹åº”æ›´æ–°
vm.site = 'æµ‹è¯• http://www.baidu.com';
document.write('name: ' + vm.name);
document.write('<br>');
document.write('url: ' + vm.url);
</script>
```
ä»å®ä¾‹è¿è¡Œç»“æœçœ‹åœ¨è¿è¡Œ `vm.site = 'æµ‹è¯• http://www.baidu.com';` æ—¶ï¼Œ`setter `ä¼šè¢«è°ƒç”¨ï¼Œ `vm.name` å’Œ `vm.url` ä¹Ÿä¼šè¢«å¯¹åº”æ›´æ–°ã€‚

<img src="https://gitee.com/veal98/images/raw/master/img/20200804095105.png" style="zoom:80%;" />

## ğŸ“š References

- ğŸ¦ [èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/vue2)

- ğŸ“˜ [Vue å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/v2/guide)
# ğŸ“° Redis å‘å¸ƒè®¢é˜…

---

## 1. æ¦‚è¿°

Redis å‘å¸ƒè®¢é˜… (pub/sub) æ˜¯ä¸€ç§**æ¶ˆæ¯é€šä¿¡æ¨¡å¼**ï¼šå‘é€è€…(pub)å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€…(sub)æ¥æ”¶æ¶ˆæ¯ã€‚

Redis å®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»»æ„æ•°é‡çš„é¢‘é“ã€‚

è®¢é˜…/å‘å¸ƒæ¶ˆæ¯å›¾ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200724092858.png" style="zoom: 36%;" />

ğŸ‘¨â€ğŸ’¼ ä¸‰å¤§è§’è‰²ï¼š

- æ¶ˆæ¯å‘å¸ƒè€…
- é¢‘é“ channel
- æ¶ˆæ¯è®¢é˜…è€…

ä¸‹å›¾å±•ç¤ºäº†é¢‘é“ channel1 ï¼Œ ä»¥åŠè®¢é˜…è¿™ä¸ªé¢‘é“çš„ä¸‰ä¸ªå®¢æˆ·ç«¯ â€”â€” client2 ã€ client5 å’Œ client1 ä¹‹é—´çš„
å…³ç³»ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200724093026.png)

å½“æœ‰æ–°æ¶ˆæ¯é€šè¿‡ `PUBLISH `å‘½ä»¤å‘é€ç»™é¢‘é“ channel1 æ—¶ï¼Œ è¿™ä¸ªæ¶ˆæ¯å°±ä¼šè¢«å‘é€ç»™è®¢é˜…å®ƒçš„ä¸‰ä¸ªå®¢æˆ·
ç«¯ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200724093107.png)

## 2. Redis å‘å¸ƒè®¢é˜…å‘½ä»¤

ä¸‹è¡¨åˆ—å‡ºäº† redis å‘å¸ƒè®¢é˜…å¸¸ç”¨å‘½ä»¤ï¼š

| åºå· | å‘½ä»¤åŠæè¿°                                                   |
| :--- | :----------------------------------------------------------- |
| 1    | `PSUBSCRIBE pattern [pattern ...]` è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªç¬¦åˆç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚ |
| 2    | `PUBSUB subcommand [argument [argument ...]]` æŸ¥çœ‹è®¢é˜…ä¸å‘å¸ƒç³»ç»ŸçŠ¶æ€ã€‚ |
| 3    | `PUBLISH channel message` å°†ä¿¡æ¯å‘é€åˆ°æŒ‡å®šçš„é¢‘é“ã€‚           |
| 4    | `PUNSUBSCRIBE [pattern [pattern ...]]` é€€è®¢æ‰€æœ‰ç»™å®šæ¨¡å¼çš„é¢‘é“ã€‚ |
| 5    | `SUBSCRIBE channel channel [...]` è®¢é˜…ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“çš„ä¿¡æ¯ã€‚ |
| 6    | `UNSUBSCRIBE [channel [channel ...]]` æŒ‡é€€è®¢ç»™å®šçš„é¢‘é“ã€‚     |

è¿™äº›å‘½ä»¤è¢«å¹¿æ³›ç”¨äºæ„å»ºå³æ—¶é€šä¿¡åº”ç”¨ï¼Œæ¯”å¦‚ç½‘ç»œèŠå¤©å®¤(chatroom)å’Œå®æ—¶å¹¿æ’­ã€å®æ—¶æé†’ç­‰ã€‚

## 3. å®ä¾‹

ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†å‘å¸ƒè®¢é˜…æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚åœ¨æˆ‘ä»¬å®ä¾‹ä¸­æˆ‘ä»¬åˆ›å»ºäº†è®¢é˜…é¢‘é“åä¸º **redisChat**

è®¢é˜…ç«¯ï¼š

```powershell
redis 127.0.0.1:6379> SUBSCRIBE redisChat

Reading messages... (press Ctrl-C to quit)
1) "subscribe"
2) "redisChat"
3) (integer) 1
# ç­‰å¾…è¯»å–æ¨é€çš„ä¿¡æ¯
```

ç°åœ¨ï¼Œæˆ‘ä»¬å…ˆé‡æ–°å¼€å¯ä¸ª redis å®¢æˆ·ç«¯ï¼Œç„¶ååœ¨åŒä¸€ä¸ªé¢‘é“ redisChat å‘å¸ƒä¸¤æ¬¡æ¶ˆæ¯ï¼Œè®¢é˜…è€…å°±èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯ã€‚

å‘å¸ƒç«¯ï¼š

```powershell
redis 127.0.0.1:6379> PUBLISH redisChat "Redis is a great caching technique"

(integer) 1

redis 127.0.0.1:6379> PUBLISH redisChat "Learn redis"

(integer) 1

# è®¢é˜…è€…çš„å®¢æˆ·ç«¯ä¼šæ˜¾ç¤ºå¦‚ä¸‹æ¶ˆæ¯
1) "message" # æ¶ˆæ¯
2) "redisChat" # å“ªä¸ªé¢‘é“çš„æ¶ˆæ¯
3) "Redis is a great caching technique" # æ¶ˆæ¯çš„å…·ä½“å†…å®¹
1) "message"
2) "redisChat"
3) "Learn redis"
```

## 4. åŸç†

Redis åº•å±‚æ˜¯ä½¿ç”¨ C å®ç°çš„ï¼Œé€šè¿‡åˆ†æ Redis æºç é‡Œçš„ `pubsub.c` æ–‡ä»¶ï¼Œäº†è§£å‘å¸ƒå’Œè®¢é˜…æœºåˆ¶çš„åº•å±‚å®ç°ï¼ŒåŠ æ·±å¯¹ Redis çš„ç†è§£ã€‚

Redis é€šè¿‡ `PUBLISH `ã€ `SUBSCRIBE `ç­‰å‘½ä»¤å®ç°äº†è®¢é˜…ä¸å‘å¸ƒæ¨¡å¼ï¼Œ è¿™ä¸ªåŠŸèƒ½æä¾›ä¸¤ç§ä¿¡æ¯æœºåˆ¶ï¼Œ åˆ†åˆ«æ˜¯è®¢é˜…/å‘å¸ƒåˆ°é¢‘é“å’Œè®¢é˜…/å‘å¸ƒåˆ°æ¨¡å¼ï¼Œ ä¸‹æ–‡å…ˆè®¨è®ºè®¢é˜…/å‘å¸ƒåˆ°é¢‘é“çš„å®ç°ï¼Œ å†è®¨è®ºè®¢é˜…/å‘å¸ƒåˆ°æ¨¡å¼çš„å®ç°ã€‚

### â‘  è®¢é˜…é¢‘é“

æ¯ä¸ª Redis æœåŠ¡å™¨è¿›ç¨‹éƒ½ç»´æŒç€ä¸€ä¸ªè¡¨ç¤ºæœåŠ¡å™¨çŠ¶æ€çš„ `redis.h/redisServer` ç»“æ„ï¼Œ ç»“æ„çš„ `pubsub_channels` å±æ€§æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œ **è¿™ä¸ªå­—å…¸å°±ç”¨äºä¿å­˜è®¢é˜…é¢‘é“çš„ä¿¡æ¯**ï¼š

```c
struct redisServer {
    // ...
    dict *pubsub_channels;
    // ...
};
```

â­ å…¶ä¸­ï¼Œ**å­—å…¸çš„é”®ä¸ºæ­£åœ¨è¢«è®¢é˜…çš„é¢‘é“ï¼Œ è€Œå­—å…¸çš„å€¼åˆ™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œ é“¾è¡¨ä¸­ä¿å­˜äº†æ‰€æœ‰è®¢é˜…è¿™ä¸ªé¢‘é“çš„å®¢æˆ·ç«¯**ã€‚

æ¯”å¦‚è¯´ï¼Œåœ¨ä¸‹å›¾å±•ç¤ºçš„è¿™ä¸ª `pubsub_channels` ç¤ºä¾‹ä¸­ï¼Œ `client2` ã€ `client5` å’Œ `client1` å°±è®¢é˜…äº† `channel1` ï¼Œ è€Œå…¶ä»–é¢‘é“ä¹Ÿåˆ†åˆ«è¢«åˆ«çš„å®¢æˆ·ç«¯æ‰€è®¢é˜…ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200724095553.png" style="zoom:80%;" />

å½“å®¢æˆ·ç«¯è°ƒç”¨ `SUBSCRIBE` å‘½ä»¤æ—¶ï¼Œ ç¨‹åºå°±å°†å®¢æˆ·ç«¯å’Œè¦è®¢é˜…çš„é¢‘é“åœ¨ `pubsub_channels` å­—å…¸ä¸­å…³è”èµ·æ¥ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœå®¢æˆ·ç«¯ `client10086` æ‰§è¡Œå‘½ä»¤ `SUBSCRIBE channel1 channel2 channel3` ï¼Œé‚£ä¹ˆå‰é¢å±•ç¤ºçš„ `pubsub_channels` å°†å˜æˆä¸‹é¢è¿™ä¸ªæ ·å­ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200724095636.png)

`SUBSCRIBE `å‘½ä»¤çš„è¡Œä¸ºå¯ä»¥ç”¨ä¼ªä»£ç è¡¨ç¤ºå¦‚ä¸‹ï¼š

```python
def SUBSCRIBE(client, channels):

    # éå†æ‰€æœ‰è¾“å…¥é¢‘é“
    for channel in channels:

        # å°†å®¢æˆ·ç«¯æ·»åŠ åˆ°é“¾è¡¨çš„æœ«å°¾
        redisServer.pubsub_channels[channel].append(client)
```

é€šè¿‡ `pubsub_channels` å­—å…¸ï¼Œ ç¨‹åºåªè¦æ£€æŸ¥æŸä¸ªé¢‘é“æ˜¯å¦ä¸ºå­—å…¸çš„é”®ï¼Œ å°±å¯ä»¥çŸ¥é“è¯¥é¢‘é“æ˜¯å¦æ­£åœ¨è¢«å®¢æˆ·ç«¯è®¢é˜…ï¼› åªè¦å–å‡ºæŸä¸ªé”®çš„å€¼ï¼Œ å°±å¯ä»¥å¾—åˆ°æ‰€æœ‰è®¢é˜…è¯¥é¢‘é“çš„å®¢æˆ·ç«¯çš„ä¿¡æ¯ã€‚

### â‘¡ å‘é€ä¿¡æ¯åˆ°é¢‘é“

äº†è§£äº† `pubsub_channels` å­—å…¸çš„ç»“æ„ä¹‹åï¼Œ è§£é‡Š [PUBLISH](http://redis.readthedocs.org/en/latest/pub_sub/publish.html#publish) å‘½ä»¤çš„å®ç°å°±éå¸¸ç®€å•äº†ï¼š å½“è°ƒç”¨ `PUBLISH channel message` å‘½ä»¤ï¼Œ ç¨‹åºé¦–å…ˆæ ¹æ® `channel` å®šä½åˆ°å­—å…¸çš„é”®ï¼Œ ç„¶åå°†ä¿¡æ¯å‘é€ç»™å­—å…¸å€¼é“¾è¡¨ä¸­çš„æ‰€æœ‰å®¢æˆ·ç«¯ã€‚

æ¯”å¦‚è¯´ï¼Œå¯¹äºä»¥ä¸‹è¿™ä¸ª `pubsub_channels` å®ä¾‹ï¼Œ å¦‚æœæŸä¸ªå®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤ `PUBLISH channel1 "hello moto"` ï¼Œé‚£ä¹ˆ `client2` ã€ `client5` å’Œ `client1` ä¸‰ä¸ªå®¢æˆ·ç«¯éƒ½å°†æ¥æ”¶åˆ° `"hello moto"` ä¿¡æ¯ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200724110749.png" style="zoom:80%;" />

`PUBLISH `å‘½ä»¤çš„å®ç°å¯ä»¥ç”¨ä»¥ä¸‹ä¼ªä»£ç æ¥æè¿°ï¼š

```python
def PUBLISH(channel, message):

    # éå†æ‰€æœ‰è®¢é˜…é¢‘é“ channel çš„å®¢æˆ·ç«¯
    for client in server.pubsub_channels[channel]:

        # å°†ä¿¡æ¯å‘é€ç»™å®ƒä»¬
        send_message(client, message)
```

### â‘¢ é€€è®¢é¢‘é“

ä½¿ç”¨ `UNSUBSCRIBE `å‘½ä»¤å¯ä»¥é€€è®¢æŒ‡å®šçš„é¢‘é“ï¼Œ è¿™ä¸ªå‘½ä»¤æ‰§è¡Œçš„æ˜¯è®¢é˜…çš„åæ“ä½œï¼š å®ƒä» `pubsub_channels` å­—å…¸çš„ç»™å®šé¢‘é“ï¼ˆé”®ï¼‰ä¸­ï¼Œ åˆ é™¤å…³äºå½“å‰å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œ è¿™æ ·è¢«é€€è®¢é¢‘é“çš„ä¿¡æ¯å°±ä¸ä¼šå†å‘é€ç»™è¿™ä¸ªå®¢æˆ·ç«¯ã€‚

### â‘£ æ¨¡å¼çš„è®¢é˜…ä¸ä¿¡æ¯å‘é€

å½“ä½¿ç”¨ `PUBLISH `å‘½ä»¤å‘é€ä¿¡æ¯åˆ°æŸä¸ªé¢‘é“æ—¶ï¼Œ ä¸ä»…æ‰€æœ‰è®¢é˜…è¯¥é¢‘é“çš„å®¢æˆ·ç«¯ä¼šæ”¶åˆ°ä¿¡æ¯ï¼Œ å¦‚æœæœ‰æŸä¸ª/æŸäº›æ¨¡å¼å’Œè¿™ä¸ªé¢‘é“åŒ¹é…çš„è¯ï¼Œ é‚£ä¹ˆæ‰€æœ‰è®¢é˜…è¿™ä¸ª/è¿™äº›é¢‘é“çš„å®¢æˆ·ç«¯ä¹ŸåŒæ ·ä¼šæ”¶åˆ°ä¿¡æ¯ã€‚

ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªå¸¦æœ‰é¢‘é“å’Œæ¨¡å¼çš„ä¾‹å­ï¼Œ å…¶ä¸­ `tweet.shop.*` æ¨¡å¼åŒ¹é…äº† `tweet.shop.kindle` é¢‘é“å’Œ `tweet.shop.ipad` é¢‘é“ï¼Œ å¹¶ä¸”æœ‰ä¸åŒçš„å®¢æˆ·ç«¯åˆ†åˆ«è®¢é˜…å®ƒä»¬ä¸‰ä¸ªï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200724111256.png)

å½“æœ‰ä¿¡æ¯å‘é€åˆ° `tweet.shop.kindle` é¢‘é“æ—¶ï¼Œ ä¿¡æ¯é™¤äº†å‘é€ç»™ `clientX` å’Œ `clientY` ä¹‹å¤–ï¼Œ è¿˜ä¼šå‘é€ç»™è®¢é˜… `tweet.shop.*` æ¨¡å¼çš„ `client123` å’Œ `client256` ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200724111515.png)

å¦ä¸€æ–¹é¢ï¼Œ å¦‚æœæ¥æ”¶åˆ°ä¿¡æ¯çš„æ˜¯é¢‘é“ `tweet.shop.ipad` ï¼Œ é‚£ä¹ˆ `client123` å’Œ `client256` åŒæ ·ä¼šæ”¶åˆ°ä¿¡æ¯ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200724111533.png)

### â‘¤ è®¢é˜…æ¨¡å¼

`redisServer.pubsub_patterns` å±æ€§æ˜¯ä¸€ä¸ª**é“¾è¡¨**ï¼Œé“¾è¡¨ä¸­ä¿å­˜ç€æ‰€æœ‰å’Œæ¨¡å¼ç›¸å…³çš„ä¿¡æ¯ï¼š

```c
struct redisServer {
    // ...
    list *pubsub_patterns;
    // ...
};
```

é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ª `redis.h/pubsubPattern` ç»“æ„ï¼š

```c
typedef struct pubsubPattern {
    redisClient *client;
    robj *pattern;
} pubsubPattern;
```

`client` å±æ€§ä¿å­˜ç€è®¢é˜…æ¨¡å¼çš„å®¢æˆ·ç«¯ï¼Œè€Œ `pattern` å±æ€§åˆ™ä¿å­˜ç€è¢«è®¢é˜…çš„æ¨¡å¼ã€‚

æ¯**å½“è°ƒç”¨ `PSUBSCRIBE` å‘½ä»¤è®¢é˜…ä¸€ä¸ªæ¨¡å¼æ—¶ï¼Œ ç¨‹åºå°±åˆ›å»ºä¸€ä¸ªåŒ…å«å®¢æˆ·ç«¯ä¿¡æ¯å’Œè¢«è®¢é˜…æ¨¡å¼çš„ `pubsubPattern` ç»“æ„ï¼Œ å¹¶å°†è¯¥ç»“æ„æ·»åŠ åˆ° `redisServer.pubsub_patterns` é“¾è¡¨ä¸­**ã€‚

ä½œä¸ºä¾‹å­ï¼Œä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæ¨¡å¼çš„ `pubsub_patterns` é“¾è¡¨ï¼Œ å…¶ä¸­ `client123` å’Œ `client256` éƒ½æ­£åœ¨è®¢é˜… `tweet.shop.*` æ¨¡å¼ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200724111849.png" style="zoom:80%;" />

å¦‚æœè¿™æ—¶å®¢æˆ·ç«¯ `client10086` æ‰§è¡Œ `PSUBSCRIBE broadcast.list.*` ï¼Œ é‚£ä¹ˆ `pubsub_patterns` é“¾è¡¨å°†è¢«æ›´æ–°æˆè¿™æ ·ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200724111930.png)

é€šè¿‡éå†æ•´ä¸ª `pubsub_patterns` é“¾è¡¨ï¼Œç¨‹åºå¯ä»¥æ£€æŸ¥æ‰€æœ‰æ­£åœ¨è¢«è®¢é˜…çš„æ¨¡å¼ï¼Œä»¥åŠè®¢é˜…è¿™äº›æ¨¡å¼çš„å®¢æˆ·ç«¯ã€‚

### â‘¥ å‘é€ä¿¡æ¯åˆ°æ¨¡å¼

å‘é€ä¿¡æ¯åˆ°æ¨¡å¼çš„å·¥ä½œä¹Ÿæ˜¯ç”± `PUBLISH `å‘½ä»¤è¿›è¡Œçš„ï¼Œ åœ¨å‰é¢è®²è§£é¢‘é“çš„æ—¶å€™ï¼Œ æˆ‘ä»¬ç»™å‡ºäº†è¿™æ ·ä¸€æ®µä¼ªä»£ç ï¼Œ è¯´å®ƒå®šä¹‰äº† `PUBLISH `å‘½ä»¤çš„è¡Œä¸ºï¼š

```python
def PUBLISH(channel, message):

    # éå†æ‰€æœ‰è®¢é˜…é¢‘é“ channel çš„å®¢æˆ·ç«¯
    for client in server.pubsub_channels[channel]:

        # å°†ä¿¡æ¯å‘é€ç»™å®ƒä»¬
        send_message(client, message)
```

ä½†æ˜¯ï¼Œè¿™æ®µä¼ªä»£ç å¹¶æ²¡æœ‰å®Œæ•´æè¿° `PUBLISH` å‘½ä»¤çš„è¡Œä¸ºï¼Œ å› ä¸º `PUBLISH `é™¤äº†å°† `message` å‘é€åˆ°æ‰€æœ‰è®¢é˜… `channel` çš„å®¢æˆ·ç«¯ä¹‹å¤–ï¼Œ å®ƒè¿˜ä¼šå°† `channel` å’Œ `pubsub_patterns` ä¸­çš„æ¨¡å¼è¿›è¡Œå¯¹æ¯”ï¼Œ **å¦‚æœ `channel` å’ŒæŸä¸ªæ¨¡å¼åŒ¹é…çš„è¯ï¼Œ é‚£ä¹ˆä¹Ÿå°† `message` å‘é€åˆ°è®¢é˜…é‚£ä¸ªæ¨¡å¼çš„å®¢æˆ·ç«¯**ã€‚

å®Œæ•´æè¿° `PUBLISH `åŠŸèƒ½çš„ä¼ªä»£ç å®šäºå¦‚ä¸‹ï¼š

```python
def PUBLISH(channel, message):

    # éå†æ‰€æœ‰è®¢é˜…é¢‘é“ channel çš„å®¢æˆ·ç«¯
    for client in server.pubsub_channels[channel]:

        # å°†ä¿¡æ¯å‘é€ç»™å®ƒä»¬
        send_message(client, message)

    # å–å‡ºæ‰€æœ‰æ¨¡å¼ï¼Œä»¥åŠè®¢é˜…æ¨¡å¼çš„å®¢æˆ·ç«¯
    for pattern, client in server.pubsub_patterns:

        # å¦‚æœ channel å’Œæ¨¡å¼åŒ¹é…
        if match(channel, pattern):

            # é‚£ä¹ˆä¹Ÿå°†ä¿¡æ¯å‘ç»™è®¢é˜…è¿™ä¸ªæ¨¡å¼çš„å®¢æˆ·ç«¯
            send_message(client, message)
```

ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœ Redis æœåŠ¡å™¨çš„ `pubsub_patterns` çŠ¶æ€å¦‚ä¸‹ï¼š

![](https://gitee.com/veal98/images/raw/master/img/20200724112201.png)

é‚£ä¹ˆå½“æŸä¸ªå®¢æˆ·ç«¯å‘é€ä¿¡æ¯ `"Amazon Kindle, $69."` åˆ° `tweet.shop.kindle` é¢‘é“æ—¶ï¼Œ é™¤äº†æ‰€æœ‰è®¢é˜…äº† `tweet.shop.kindle` é¢‘é“çš„å®¢æˆ·ç«¯ä¼šæ”¶åˆ°ä¿¡æ¯ä¹‹å¤–ï¼Œ å®¢æˆ·ç«¯ `client123` å’Œ `client256` ä¹ŸåŒæ ·ä¼šæ”¶åˆ°ä¿¡æ¯ï¼Œ å› ä¸ºè¿™ä¸¤ä¸ªå®¢æˆ·ç«¯è®¢é˜…çš„ `tweet.shop.*` æ¨¡å¼å’Œ `tweet.shop.kindle` é¢‘é“åŒ¹é…ã€‚

### â‘¦  é€€è®¢æ¨¡å¼

ä½¿ç”¨ `PUNSUBSCRIBE `å‘½ä»¤å¯ä»¥é€€è®¢æŒ‡å®šçš„æ¨¡å¼ï¼Œ è¿™ä¸ªå‘½ä»¤æ‰§è¡Œçš„æ˜¯è®¢é˜…æ¨¡å¼çš„åæ“ä½œï¼š ç¨‹åºä¼šåˆ é™¤ `redisServer.pubsub_patterns` é“¾è¡¨ä¸­ï¼Œ æ‰€æœ‰å’Œè¢«é€€è®¢æ¨¡å¼ç›¸å…³è”çš„ `pubsubPattern` ç»“æ„ï¼Œ è¿™æ ·å®¢æˆ·ç«¯å°±ä¸ä¼šå†æ”¶åˆ°å’Œæ¨¡å¼ç›¸åŒ¹é…çš„é¢‘é“å‘æ¥çš„ä¿¡æ¯ã€‚

## ğŸ“š References

- [ã€ç‹‚ç¥è¯´Javaã€‘Redisæœ€æ–°è¶…è¯¦ç»†ç‰ˆæ•™ç¨‹é€šä¿—æ˜“æ‡‚](https://www.bilibili.com/video/BV1S54y1R7SB?from=search&seid=3325634079268895938)

- [Redis è®¾è®¡ä¸å®ç°ï¼ˆç¬¬ä¸€ç‰ˆï¼‰](https://redisbook.readthedocs.io/en/latest/index.html)

- [èœé¸Ÿæ•™ç¨‹ â€” Redis å‘å¸ƒè®¢é˜…](https://www.runoob.com/redis/redis-pub-sub.html)

  



# 241. ä¸ºè¿ç®—ç¬¦è¡¨è¾¾å¼è®¾è®¡ä¼˜å…ˆçº§

---

ğŸ‘‰ [241. Different Ways to Add Parentheses(æ’å…¥è¯­) â€” Medium](https://leetcode-cn.com/problems/different-ways-to-add-parentheses/)

## ğŸ“œ  é¢˜ç›®æè¿° 

Given a string of numbers and operators, return all possible results from computing all the **different possible ways to group numbers and operators**. The valid operators are `+`, `-` and `*`.

å…¶å®å°±æ˜¯ä¸ºè¡¨è¾¾å¼æ·»åŠ æ‹¬å·ï¼Œæ”¹å˜å…¶è¿ç®—ä¼˜å…ˆçº§ä»¥æ±‚å‡ºä¸åŒçš„ç»“æœ

**Example 1**:

```
Input: "2-1-1"
Output: [0, 2]
Explanation: 
((2-1)-1) = 0 
(2-(1-1)) = 2
```

**Example 2**:

```
Input: "2*3-4*5"
Output: [-34, -14, -10, -10, 10]
Explanation: 
(2*(3-(4*5))) = -34 
((2*3)-(4*5)) = -14 
((2*(3-4))*5) = -10 
(2*((3-4)*5)) = -10 
(((2*3)-4)*5) = 10
```



## ğŸ’¡ è§£é¢˜æ€è·¯ 

å¯¹äºä¸€ä¸ªå½¢å¦‚ `x op y`ï¼ˆop ä¸ºè¿ç®—ç¬¦ï¼Œx å’Œ y ä¸ºæ•°ï¼‰ çš„ç®—å¼è€Œè¨€ï¼Œå®ƒçš„ç»“æœç»„åˆå–å†³äº x å’Œ y çš„ç»“æœç»„åˆæ•°ã€‚å› æ­¤ï¼Œè¯¥é—®é¢˜çš„å­é—®é¢˜å°±æ˜¯ `x op y` ä¸­çš„ `x1 op x2` å’Œ `y1 op y2`ï¼š**ä»¥è¿ç®—ç¬¦åˆ†éš”**çš„å·¦å³ä¸¤ä¾§ç®—å¼è§£ã€‚

ç„¶åæˆ‘ä»¬æ¥è¿›è¡Œ åˆ†æ²»ç®—æ³•ä¸‰æ­¥èµ°ï¼š

- åˆ†è§£ï¼šæŒ‰è¿ç®—ç¬¦åˆ†æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«æ±‚è§£

- è§£å†³ï¼šå®ç°ä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œè¾“å…¥ç®—å¼ï¼Œè¿”å›ç®—å¼è§£

- åˆå¹¶ï¼šæ ¹æ®è¿ç®—ç¬¦åˆå¹¶å·¦å³ä¸¤éƒ¨åˆ†çš„è§£ï¼Œå¾—å‡ºæœ€ç»ˆè§£

ğŸ’¬ ä»¥ `2-1-1` ä¸ºä¾‹ï¼š

é‡è§ç¬¬ä¸€ä¸ªè¿ç®—ç¬¦ `-` è¿›è¡Œç¬¬ä¸€æ¬¡åˆ†æ²»ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200919152820.png" style="zoom:55%;" />

é‡è§ç¬¬äºŒä¸ªè¿ç®—ç¬¦ `-` è¿›è¡Œç¬¬äºŒæ¬¡åˆ†æ²»ï¼š

<img src="https://gitee.com/veal98/images/raw/master/img/20200919152751.png" style="zoom:55%;" />

## âœ… å…·ä½“ä»£ç 

```java
class Solution {

    // å­˜å‚¨å„ä¸ªå­—ç¬¦ä¸²å¯¹åº”çš„ä¸åŒè¿ç®—ç»“æœçš„ä¸ªæ•°
    public Map<String,List<Integer>> resultMap = new HashMap<>();

    // å­˜å‚¨è¾“å…¥çš„inputå­—ç¬¦ä¸²å¯¹åº”çš„ä¸åŒè¿ç®—ç»“æœï¼Œè¿”å›è¯¥ç»“æœçš„é›†åˆ
    public List<Integer> diffWaysToCompute(String input) {
        // å» map ä¸­æŸ¥æ‰¾è¯¥è¾“å…¥inputæ˜¯å¦å·²ç»è®¡ç®—å­˜å‚¨è¿‡ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚
        if(resultMap.containsKey(input))
            return resultMap.get(input);

        List<Integer> resultList = new ArrayList<>(); // å­˜å‚¨è¿ç®—ç»“æœ

        int len = input.length();
        for(int i = 0; i < len; i++){
            char c = input.charAt(i); 
            // å¦‚æœæ˜¯è¿ç®—ç¬¦å·ï¼Œåˆ™é€’å½’æ±‚è§£å…¶å‰åŠæ®µå’ŒååŠæ®µã€‚
            if(c == '+' || c == '-' || c == '*'){
                List<Integer> left = diffWaysToCompute(input.substring(0,i));
                List<Integer> right = diffWaysToCompute(input.substring(i+1, input.length()));
            
                // å¯¹å·¦å³ä¸¤ä¾§çš„ç»“æœè¿›è¡Œåˆå¹¶
                for(int l : left) {
                    for(int r : right){
                        switch(c){
                            case '+':
                                resultList.add(l + r);
                                break;
                            case '-':
                                resultList.add(l - r);
                                break;
                            case '*':
                                resultList.add(l * r);
                                break;
                        }
                    }
                }
            } // if End
        } // for End

        // æ²¡æœ‰è¿ç®—ç¬¦çš„æƒ…å†µ(åªæœ‰æ•°å­—)ï¼Œç›´æ¥å­˜å‚¨è¯¥æ•°å­—å³å¯
        if(resultList.size() == 0)
            resultList.add(Integer.valueOf(input));

        resultMap.put(input, resultList);

        return resultList;
        
    }
}
```

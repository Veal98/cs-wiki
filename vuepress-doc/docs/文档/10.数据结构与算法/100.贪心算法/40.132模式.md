---
title: 132æ¨¡å¼
date: 2022-03-20 11:53:59
permalink: /pages/db2346/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š[456. 132 æ¨¡å¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/132-pattern/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œæ•°ç»„ä¸­å…±æœ‰ n ä¸ªæ•´æ•°ã€‚132 æ¨¡å¼çš„å­åºåˆ— ç”±ä¸‰ä¸ªæ•´æ•° nums[i]ã€nums[j] å’Œ nums[k] ç»„æˆï¼Œå¹¶åŒæ—¶æ»¡è¶³ï¼ši < j < k å’Œ nums[i] < nums[k] < nums[j]ã€‚

å¦‚æœ nums ä¸­å­˜åœ¨ 132 æ¨¡å¼çš„å­åºåˆ— ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› falseã€‚

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼šnums = [1,2,3,4]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šåºåˆ—ä¸­ä¸å­˜åœ¨ 132 æ¨¡å¼çš„å­åºåˆ—
```

ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥ï¼šnums = [3,1,4,2]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šåºåˆ—ä¸­æœ‰ 1 ä¸ª 132 æ¨¡å¼çš„å­åºåˆ—ï¼š [1, 4, 2]
```

ç¤ºä¾‹ 3ï¼š

```
è¾“å…¥ï¼šnums = [-1,3,2,0]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šåºåˆ—ä¸­æœ‰ 3 ä¸ª 132 æ¨¡å¼çš„çš„å­åºåˆ—ï¼š[-1, 3, 2]ã€[-1, 3, 0] å’Œ [-1, 2, 0]
```

## ğŸ”” è§£é¢˜æ€è·¯

### è´ªå¿ƒç®—æ³•

ä»¥ `nums[j]` è¿›è¡Œéå†ï¼Œæ¯æ¬¡éƒ½å°½å¯èƒ½çš„é€‰å– j å·¦è¾¹**æœ€å°**çš„æ•°ä½œä¸º `nums[i]`(è´ªå¿ƒæ€æƒ³)ï¼Œç„¶åæ‰¾åˆ° j å³è¾¹æ¯” `num[j]` å°ã€æ¯” `nums[i]` å¤§çš„æ•°ä½œä¸º `nums[k]` å°±å¯ä»¥äº†

> æˆ‘ä¸ªäººçš„ç†è§£ï¼šå¦‚æœæˆ‘ä»¬åœ¨ j å·¦è¾¹æ‰¾åˆ°çš„æ•° nums[i] è¶Šå°ï¼Œé‚£ä¹ˆåœ¨ j å³è¾¹æ‰¾åˆ°æ¯” nums[i] å¤§çš„å¯èƒ½æ€§æ˜¯ä¸æ˜¯å°±è¶Šå¤§


```java
class Solution {
    public boolean find132pattern(int[] nums) {
        if (nums == null || nums.length < 3) {
            return false;
        }

        // è®°å½• nums[j] å·¦è¾¹æœ€å°çš„æ•°ä½œä¸º nums[i]
        int nums_i = nums[0];
        for (int j = 1; j < nums.length - 1; j ++) {
            for (int k = j + 1; k < nums.length; k ++) {
                if (nums[j] > nums[k] && nums[k] > nums_i) {
                    return true;
                }
            }
            // æ›´æ–° nums[i]
            nums_i = Math.min(nums_i, nums[j]);
        }

        return false;
    }
}
```

è¿™ä¹ˆå†™çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(N^2)ï¼Œåœ¨ LeetCode ä¸Šæäº¤ä¼šè¶…æ—¶

æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå¯¹äº nums[j] çš„é€‰å–ï¼Œä¸èƒ½ç”¨å¾ªç¯æ¥åšã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨å•è°ƒæ ˆ

![image-20220211104859542](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220211104859.png)

### å•è°ƒæ ˆ

å¯¹äº 132 æ¥è¯´ï¼Œå¤§å®¶è‚¯å®šéƒ½èƒ½æƒ³åˆ°ï¼Œä»¥ 3 ä¸ºä¸­å¿ƒï¼Œé€‰å– 1 å’Œ 2ï¼Œé‚£ä¹ˆå°±å¸Œæœ› 1 å°½å¯èƒ½å°ï¼Œ2 å°½å¯èƒ½å¤§ã€‚

> 1 å°½å¯èƒ½å°å¾ˆå¥½ç†è§£ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ j å·¦è¾¹æ‰¾åˆ°çš„æ•° nums[i] è¶Šå°ï¼Œé‚£ä¹ˆåœ¨ j å³è¾¹æ‰¾åˆ°æ¯” nums[i] å¤§çš„å¯èƒ½æ€§æ˜¯ä¸æ˜¯å°±è¶Šå¤§
>
> ç–‘æƒ‘ï¼šå¯¹äº 2 å°½å¯èƒ½å¤§å¦‚ä½•ç†è§£ï¼Ÿ

æ‰€ä»¥æ€è·¯æ˜¯è¿™æ ·çš„ï¼š

- éå†çš„ä½ç½® j ç›¸å½“äº 132 æ¨¡å¼ä¸­çš„ 3ï¼Œå³ nums[j] ï¼›

- **æ‰¾åˆ° 3 å·¦è¾¹çš„æœ€å°å…ƒç´ ** ä¸º 1ï¼Œå³ nums[i] ï¼›

- **æ‰¾åˆ° 3 å³è¾¹çš„æ¯” 3 å°çš„æœ€å¤§å…ƒç´ ** ä¸º 2ï¼Œå³ nums[k] ï¼›æƒ³è¦æ±‚æ¯” 3 å°çš„æœ€å¤§å…ƒç´ ï¼Œåªéœ€è¦ä¸€ä¸ªå•è°ƒé€’å‡çš„æ ˆï¼ˆæ ˆåº•->æ ˆé¡¶ï¼‰ã€‚è¿™æ ·çš„è¯ï¼Œæœ€å¤§å…ƒç´ åœ¨æ ˆåº•ï¼Œæ¬¡å¤§å…ƒç´ åœ¨æ ˆåº•çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å…·ä½“æ¥è¯´ï¼Œ<u>éå†åˆ° nums[j] æ—¶ï¼ŒæŠŠæ ˆé‡Œé¢æ¯”å®ƒå°çš„å…ƒç´ å…¨éƒ½ pop å‡ºæ¥ï¼Œpop å‡ºæ¥çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯æ¯” nums[j] å°çš„æœ€å¤§å…ƒç´  nums[k]</u>ã€‚

  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**å› ä¸ºå•è°ƒæ ˆæ˜¯å»ºç«‹åœ¨ 3 çš„å³è¾¹çš„ï¼Œæˆ‘ä»¬éœ€è¦ä»å³å‘å·¦éå†**

> å¦‚æœå°ä¼™ä¼´ä»¬ä¸ç†è§£è¿™é‡Œå•è°ƒæ ˆä¸­ nums[k] å’Œ nums[j] çš„å…³ç³»çš„è¯ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£ï¼š
>
> - å¤„ç†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ è¿˜æ²¡åŠ å…¥æ ˆçš„æ—¶å€™ï¼Œä»–å°±è¡¨ç¤º nums[j]
> - å…ƒç´ å…¥æ ˆåï¼Œæ ˆä¸­çš„å…ƒç´ å°±è¡¨ç¤º nums[k]


```java
class Solution {
    public boolean find132pattern(int[] nums) {
        if (nums == null || nums.length < 3) {
            return false;
        }

        // leftMin[j] è¡¨ç¤º nums[j] å·¦è¾¹å’Œå®ƒç›¸æ¯”æœ€å°çš„æ•°
        int[] leftMin = new int[nums.length];
        // nums[0] å·¦è¾¹æ²¡æœ‰æ•°æ¯”å®ƒå°
        leftMin[0] = Integer.MAX_VALUE;
        for (int j = 1; j < nums.length; j ++) {
            leftMin[j] = Math.min(leftMin[j - 1], nums[j - 1]);
        }

        // å•è°ƒæ ˆ
        Stack<Integer> stack = new Stack<>();
        for (int j = nums.length - 1; j >= 0; j --) {
            if (stack.isEmpty()) {
                stack.push(nums[j]);
            }
            else if (nums[j] < stack.peek()) {
                stack.push(nums[j]);
            }
            else {
                // æ³¨æ„è¿™é‡Œä¸èƒ½åˆå§‹åŒ–ä¸º 0ï¼Œå¿…é¡»å¾—åˆå§‹åŒ–ä¸ºæœ€å°å€¼ï¼ˆæ¯”å¦‚è¿™ç§æƒ…å†µä¸‹åˆå§‹åŒ–ä¸º 0 å°±ä¼šæœ‰é—®é¢˜ï¼š-2, 1, 1ï¼‰
                int nums_k = Integer.MIN_VALUE;
                while(!stack.isEmpty() && stack.peek() < nums[j]) {
                    nums_k = stack.pop();
                }
                if (nums_k > leftMin[j]) {
                    return true;
                }

                stack.push(nums[j]);
            }   
        }

        return false;
    }
}
```

è¿™å…¶ä¸­å…¶å®ä¹Ÿæ˜¯ç”¨åˆ°äº†**åŠ¨æ€è§„åˆ’**çš„æ€æƒ³çš„ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220225102040.png)

-> nums[j] å·¦è¾¹çš„æœ€å¤§å€¼ = Math.max(nums[j - 1] å·¦è¾¹çš„æœ€å¤§å€¼, nums[j - 1])

<br>

ä¸Šè¿°ä»£ç å†™å¾—ç®€å•ç‚¹ï¼š

```java
class Solution {
    public boolean find132pattern(int[] nums) {
        if (nums == null || nums.length < 3) {
            return false;
        }

        // leftMin[j] è¡¨ç¤º nums[j] å·¦è¾¹å’Œå®ƒç›¸æ¯”æœ€å°çš„æ•°
        int[] leftMin = new int[nums.length];
        // nums[0] å·¦è¾¹æ²¡æœ‰æ•°æ¯”å®ƒå°
        leftMin[0] = Integer.MAX_VALUE;
        for (int j = 1; j < nums.length; j ++) {
            leftMin[j] = Math.min(leftMin[j - 1], nums[j - 1]);
        }

        // å•è°ƒæ ˆ
        Stack<Integer> stack = new Stack<>();
        for (int j = nums.length - 1; j >= 0; j --) {
            int nums_k = Integer.MIN_VALUE;
            while(!stack.isEmpty() && stack.peek() < nums[j]) {
                nums_k = stack.pop();
            }
            if (nums_k > leftMin[j]) {
                return true;
            }

            stack.push(nums[j]);
        }

        return false;
    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220115214439.png)

- ç©ºé—´å¤æ‚åº¦ï¼šO(N)
- æ—¶é—´å¤æ‚åº¦ï¼šO(N)


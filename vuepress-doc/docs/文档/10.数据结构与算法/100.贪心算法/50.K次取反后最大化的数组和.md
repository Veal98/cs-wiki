---
stitle: K æ¬¡å–ååæœ€å¤§åŒ–çš„æ•°ç»„å’Œ
title: Kæ¬¡å–ååæœ€å¤§åŒ–çš„æ•°ç»„å’Œ
date: 2022-03-20 11:53:59
permalink: /pages/2499e6/
---

## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š[1005. K æ¬¡å–ååæœ€å¤§åŒ–çš„æ•°ç»„å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/maximize-sum-of-array-after-k-negations/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼ŒæŒ‰ä»¥ä¸‹æ–¹æ³•ä¿®æ”¹è¯¥æ•°ç»„ï¼š

- é€‰æ‹©æŸä¸ªä¸‹æ ‡ i å¹¶å°† nums[i] æ›¿æ¢ä¸º -nums[i]
- é‡å¤è¿™ä¸ªè¿‡ç¨‹æ°å¥½ k æ¬¡ã€‚å¯ä»¥å¤šæ¬¡é€‰æ‹©åŒä¸€ä¸ªä¸‹æ ‡ i

ä»¥è¿™ç§æ–¹å¼ä¿®æ”¹æ•°ç»„åï¼Œè¿”å›æ•°ç»„ å¯èƒ½çš„æœ€å¤§å’Œ

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼šnums = [4,2,3], k = 1
è¾“å‡ºï¼š5
è§£é‡Šï¼šé€‰æ‹©ä¸‹æ ‡ 1 ï¼Œnums å˜ä¸º [4,-2,3]
```

ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥ï¼šnums = [3,-1,0,2], k = 3
è¾“å‡ºï¼š6
è§£é‡Šï¼šé€‰æ‹©ä¸‹æ ‡ (1, 2, 2) ï¼Œnums å˜ä¸º [3,1,0,2]
```

ç¤ºä¾‹ 3ï¼š

```
è¾“å…¥ï¼šnums = [2,-3,-1,5,-4], k = 2
è¾“å‡ºï¼š13
è§£é‡Šï¼šé€‰æ‹©ä¸‹æ ‡ (1, 4) ï¼Œnums å˜ä¸º [2,3,-1,5,4]
```

## ğŸ”” è§£é¢˜æ€è·¯

è¿™é‡Œæœ‰ä¸¤ä¸ªè´ªå¿ƒæ€æƒ³ï¼š

1. ä¼˜å…ˆé€‰æ‹©ç»å¯¹å€¼å¤§çš„è´Ÿæ•°è¿›è¡Œå–å
2. å¦‚æœè´Ÿæ•°å…¨éƒ¨å–åå k è¿˜æ˜¯å¤§äº 0ï¼š
   - k ä¸ºå¶æ•°ï¼Œåˆ™ç›´æ¥è¿”å›ç»“æœå°±è¡Œäº†ï¼ˆæ¯”å¦‚ nums = [3,-1,0,2], k = 3ï¼Œè´Ÿæ•°å…¨éƒ¨å–ååï¼Œk = 2ï¼Œæ­¤æ—¶ nums = [3, 1, 0, 2]ï¼Œ nums å…¨éƒ¨ä¸ºæ­£æ•°çš„æƒ…å†µå°±æ˜¯èƒ½å¤Ÿå¾—åˆ°çš„æœ€å¤§å’Œï¼Œæ­¤æ—¶æˆ‘ä»¬åªéœ€è¦å¯¹ä»»æ„ä¸€ä¸ªæ•°å–åä¸¤æ¬¡å³ä¿æŒä¸å˜å°±è¡Œï¼‰
   - k ä¸ºå¥‡æ•°ï¼Œåˆ™å¯¹æœ€å°çš„è¿™ä¸ªæ­£æ•°å–åå¥‡æ•°æ¬¡ï¼ˆå³æŠŠæœ€å°çš„æ­£æ•°å˜ä¸ºè´Ÿæ•°ï¼‰



> Comparator<T> åªæ”¯æŒå¼•ç”¨ç±»å‹ï¼Œå¯¹äº int[] ç±»å‹çš„æ•°ç»„ï¼Œæ˜¯æ²¡æœ‰åŠæ³•ç›´æ¥ä¼ è¿›å»çš„ï¼Œéœ€è¦è½¬æˆ Integer ç±»å‹æ•°ç»„ã€‚å¯ä»¥ç”¨ Stream æµæ¥ç®€åŒ–æ“ä½œ


```java
class Solution {
    public int largestSumAfterKNegations(int[] nums, int k) {
        if (nums == null || nums.length == 0) {
            return 0;
        }

        // æŒ‰ç…§ç»å¯¹å€¼å¤§å°é™åºæ’åº
        // IntStream.of() å¡«å……ä¸€ä¸ªæˆ–å¤šä¸ªintå…ƒç´ æ„é€ æµ
        // IntStream.boxed() æ–¹æ³•è¿”å›ä¸€ä¸ªç”±è¯¥æµå…ƒç´ ç»„æˆçš„ Streamï¼Œæ¯ä¸ªå…ƒç´ éƒ½è£…ç®±ä¸ºä¸€ä¸ª Integer
        // mapToInt ä½¿ç”¨æ˜ å°„å‡½æ•°å¤„ç†æµä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ , å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ IntStream
        nums = IntStream.of(nums).boxed().sorted(new Comparator<Integer>() {
            @Override
            public int compare(Integer o1, Integer o2) {
                return Math.abs(o2) - Math.abs(o1);
            }
        }).mapToInt(Integer::intValue).toArray();

        // ä¼˜å…ˆå–åç»å¯¹å€¼å¤§çš„è´Ÿæ•°
        for (int i = 0; i < nums.length; i ++) {
            if (nums[i] < 0 && k > 0) {
                nums[i] *= -1;
                k --;
            }
        }

        // å¦‚æœè´Ÿæ•°å…¨éƒ¨å–åå k è¿˜æ˜¯å¤§äº 0
        if (k % 2 == 1) {
            // k ä¸ºå¥‡æ•°ï¼Œåˆ™å¯¹æœ€å°çš„è¿™ä¸ªæ­£æ•°å–åå¥‡æ•°æ¬¡ï¼ˆå³æŠŠæœ€å°çš„æ­£æ•°å˜ä¸ºè´Ÿæ•°ï¼‰
            nums[nums.length - 1] *= -1;
        }

        // k ä¸ºå¶æ•°æˆ–è€… k == 0ï¼Œåˆ™ç›´æ¥è¿”å›ç»“æœå°±è¡Œäº†
        return Arrays.stream(nums).sum();
    }
}
```

![image-20220110120028132](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220110120028.png)

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šO(1)
- æ—¶é—´å¤æ‚åº¦ï¼šO(NLogN)ï¼Œä¸»è¦æ˜¯æ’åºçš„è€—æ—¶


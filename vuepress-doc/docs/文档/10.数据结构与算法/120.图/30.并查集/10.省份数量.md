---
title: çœä»½æ•°é‡
date: 2022-03-25 17:37:47
permalink: /pages/7c856f/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 116. çœä»½æ•°é‡ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/bLyHh0/)
- [547. çœä»½æ•°é‡ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/number-of-provinces/)

æœ‰ n ä¸ªåŸå¸‚ï¼Œå…¶ä¸­ä¸€äº›å½¼æ­¤ç›¸è¿ï¼Œå¦ä¸€äº›æ²¡æœ‰ç›¸è¿ã€‚å¦‚æœåŸå¸‚ a ä¸åŸå¸‚ b ç›´æ¥ç›¸è¿ï¼Œä¸”åŸå¸‚ b ä¸åŸå¸‚ c ç›´æ¥ç›¸è¿ï¼Œé‚£ä¹ˆåŸå¸‚ a ä¸åŸå¸‚ c é—´æ¥ç›¸è¿ã€‚

çœä»½ æ˜¯ä¸€ç»„ç›´æ¥æˆ–é—´æ¥ç›¸è¿çš„åŸå¸‚ï¼Œç»„å†…ä¸å«å…¶ä»–æ²¡æœ‰ç›¸è¿çš„åŸå¸‚ã€‚

ç»™ä½ ä¸€ä¸ª n x n çš„çŸ©é˜µ isConnected ï¼Œå…¶ä¸­ `isConnected[i][j] = 1` è¡¨ç¤ºç¬¬ i ä¸ªåŸå¸‚å’Œç¬¬ j ä¸ªåŸå¸‚ç›´æ¥ç›¸è¿ï¼Œè€Œ `isConnected[i][j] = 0` è¡¨ç¤ºäºŒè€…ä¸ç›´æ¥ç›¸è¿ã€‚

è¿”å›çŸ©é˜µä¸­ çœä»½ çš„æ•°é‡ã€‚

ç¤ºä¾‹ 1ï¼š

![](https://assets.leetcode.com/uploads/2020/12/24/graph1.jpg)

```
è¾“å…¥ï¼šisConnected = [[1,1,0],[1,1,0],[0,0,1]]
è¾“å‡ºï¼š2
```

ç¤ºä¾‹ 2ï¼š

![](https://assets.leetcode.com/uploads/2020/12/24/graph2.jpg)

```
è¾“å…¥ï¼šisConnected = [[1,0,0],[0,1,0],[0,0,1]]
è¾“å‡ºï¼š3
```



## ğŸ”” è§£é¢˜æ€è·¯

### BFS

å¯¹äºæ¯ä¸ªåŸå¸‚ï¼Œå¦‚æœè¯¥åŸå¸‚å°šæœªè¢«è®¿é—®è¿‡ï¼Œåˆ™ä»è¯¥åŸå¸‚å¼€å§‹å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œç›´åˆ°åŒä¸€ä¸ªè¿é€šåˆ†é‡ä¸­çš„æ‰€æœ‰åŸå¸‚éƒ½è¢«è®¿é—®åˆ°ï¼Œå³å¯å¾—åˆ°ä¸€ä¸ªçœä»½ã€‚

> å’Œä¹‹å‰æˆ‘ä»¬å†™çš„ BFS é¢˜ç›®å·®ä¸å¤šï¼Œä¸è¿‡ä¹‹å‰ BFS å¤§å¤šæ±‚çš„éƒ½æ˜¯æœ€å¤§æ•°é‡ or æœ€é•¿è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯åªéœ€è¦ä¿å­˜å…¶ä¸­ä¸€ä¸ªå­å›¾çš„ç»“æœå°±è¡Œäº†ã€‚ä½†è¿™é¢˜ä¸è¡Œï¼Œè¿™é¢˜éœ€è¦ä¿å­˜æ‰€æœ‰å­å›¾çš„æ•°é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¾ªç¯æ¥å¤„ç†æ‰€æœ‰çš„èŠ‚ç‚¹ä»è€Œè®°å½•å­å›¾æ•°é‡ï¼š
>
> ```java
> int res = 0;
> 
> // å¯¹äºæ¯ä¸ªåŸå¸‚ï¼Œå¦‚æœè¯¥åŸå¸‚å°šæœªè¢«è®¿é—®è¿‡ï¼Œåˆ™ä»è¯¥åŸå¸‚å¼€å§‹å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œç›´åˆ°åŒä¸€ä¸ªè¿é€šåˆ†é‡ä¸­çš„æ‰€æœ‰åŸå¸‚éƒ½è¢«è®¿é—®åˆ°ï¼Œå³å¯å¾—åˆ°ä¸€ä¸ªçœä»½
> for (int city = 0; city < isConnected.length; city ++) {
>     if (!visited[city]) {
>         bfs();
>         res ++;
>     }
> }
> 
> return res;
> ```
>
> 


```java
class Solution {
    public int findCircleNum(int[][] isConnected) {
        if (isConnected == null || isConnected.length == 0) {
            return 0;
        }

        // çœä»½ï¼ˆå­å›¾ï¼‰çš„æ•°é‡
        int res = 0;

        // æ¯ä¸ªåŸå¸‚æ˜¯å¦è®¿é—®è¿‡
        boolean[] visited = new boolean[isConnected.length];
		
        // å¯¹äºæ¯ä¸ªåŸå¸‚ï¼Œå¦‚æœè¯¥åŸå¸‚å°šæœªè¢«è®¿é—®è¿‡ï¼Œåˆ™ä»è¯¥åŸå¸‚å¼€å§‹å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œç›´åˆ°åŒä¸€ä¸ªè¿é€šåˆ†é‡ä¸­çš„æ‰€æœ‰åŸå¸‚éƒ½è¢«è®¿é—®åˆ°ï¼Œå³å¯å¾—åˆ°ä¸€ä¸ªçœä»½
        for (int city = 0; city < isConnected.length; city ++) {
            if (!visited[city]) {
                bfs(isConnected, visited, city);
                res ++;
            }
        }

        return res;
    }

    // å¹¿åº¦ä¼˜å…ˆæœç´¢
    private void bfs(int[][] isConnected, boolean[] visited, int city) {
        Queue<Integer> queue = new LinkedList<>();
        queue.offer(city);
        visited[city] = true;

        while (!queue.isEmpty()) {
            int size = queue.size();
            for (int i = 0; i < size; i ++) {
                // ä»é˜Ÿåˆ—ä¸­å¼¹å‡ºä¸€ä¸ªåŸå¸‚
                int cur = queue.poll();
                // å¤„ç†è¿™ä¸ªåŸå¸‚çš„é‚»å±…
                for (int neighbor = 0; neighbor < isConnected.length; neighbor ++) {
                    if (isConnected[cur][neighbor] == 1 && !visited[neighbor]) {
                        queue.offer(neighbor);
                        visited[neighbor] = true;
                    }
                }
            }
        }
    }
    
}
```

æ—¶é—´å¤æ‚åº¦ï¼šå¦‚æœç­çº§ä¸­æœ‰ n ä¸ªå­¦ç”Ÿï¼Œé‚£ä¹ˆå›¾ä¸­æœ‰ n ä¸ªèŠ‚ç‚¹å’Œ $O(n^2)$ æ¡è¾¹ï¼Œå¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n^2)$

### å¹¶æŸ¥é›†

å¹¶æŸ¥é›†çš„å­é›†å’Œå›¾ä¸­çš„å­å›¾å¯¹åº”ï¼Œå¹¶æŸ¥é›†ä¸­çš„å­é›†ç”¨æ ‘å½¢ç»“æ„è¡¨ç¤ºã€‚å­é›†çš„èŠ‚ç‚¹éƒ½æœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ ¹èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å°±æ˜¯å®ƒè‡ªèº«ã€‚åŒä¸€ä¸ªå­é›†ä¸­ä¸åŒèŠ‚ç‚¹çš„æ ¹èŠ‚ç‚¹ä¸€å®šç›¸åŒã€‚åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯è¿é€šï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­å®ƒä»¬æ˜¯ä¸æ˜¯å±äºåŒä¸€ä¸ªå­é›†ï¼Œåªéœ€è¦çœ‹å®ƒä»¬çš„æ ¹èŠ‚ç‚¹æ˜¯ä¸æ˜¯ç›¸åŒå°±å¯ä»¥ã€‚

é¦–å…ˆï¼Œå¾ˆè‡ªç„¶çš„æ˜¾ç„¶ï¼Œåˆ›å»ºé•¿åº¦ä¸º n çš„æ•°ç»„ fathers å­˜å‚¨ n ä¸ªèŠ‚ç‚¹çš„**çˆ¶èŠ‚ç‚¹**ã€‚æœ‰äº†è¿™ä¸ªæ•°ç»„ fathersï¼Œå¦‚æœæƒ³çŸ¥é“èŠ‚ç‚¹ i æ‰€åœ¨çš„å­é›†çš„æ ¹èŠ‚ç‚¹ï¼Œå°±å¯ä»¥ä»èŠ‚ç‚¹ i å¼€å§‹æ²¿ç€æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆæœç´¢ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(N)$

æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è·¯å¾„å‹ç¼©çš„æ‰‹æ®µæ¥ä¼˜åŒ–è¿™ä¸ªæŸ¥æ‰¾æ ¹èŠ‚ç‚¹çš„æ—¶é—´å¤æ‚åº¦ï¼š

å…·ä½“æ¥è¯´ï¼Œ**æˆ‘ä»¬çœŸæ­£å…³å¿ƒçš„æ˜¯èŠ‚ç‚¹ i çš„æ ¹èŠ‚ç‚¹æ˜¯è°è€Œä¸æ˜¯å®ƒçš„çˆ¶èŠ‚ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬æ›´åº”è¯¥åœ¨ fathers[i] ä¸­å­˜å‚¨å®ƒçš„æ ¹èŠ‚ç‚¹**ã€‚

è¿™æ ·ï¼Œå½“ç¬¬1æ¬¡æ‰¾èŠ‚ç‚¹ i çš„æ ¹èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦æ²¿ç€æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„è¾¹éå†ç›´åˆ°æ‰¾åˆ°æ ¹èŠ‚ç‚¹ã€‚ä¸€æ—¦æ‰¾åˆ°äº†å®ƒçš„æ ¹èŠ‚ç‚¹ï¼Œå°±æŠŠæ ¹èŠ‚ç‚¹å­˜æ”¾åˆ° fathers[i] ä¸­ã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿˜å¯ä»¥ä¸€èµ·æ›´æ–°ä»èŠ‚ç‚¹ i åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„æ ¹èŠ‚ç‚¹ã€‚ä»¥å**åªéœ€è¦ $O(1)$ çš„æ—¶é—´å°±èƒ½çŸ¥é“è¿™äº›èŠ‚ç‚¹çš„æ ¹èŠ‚ç‚¹**ã€‚è¿™ç§ä¼˜åŒ–å«ä½œè·¯å¾„å‹ç¼©ï¼Œå› ä¸ºä»èŠ‚ç‚¹ i åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„è¢«å‹ç¼©æˆè‹¥å¹²é•¿åº¦ä¸º1çš„è·¯å¾„ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæŸ¥æ‰¾å›¾ï¼ˆaï¼‰ä¸­èŠ‚ç‚¹ 5 çš„æ ¹èŠ‚ç‚¹ï¼Œå°±æ²¿ç€æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆä¾æ¬¡æ‰¾åˆ°èŠ‚ç‚¹3ã€èŠ‚ç‚¹2å’ŒèŠ‚ç‚¹1ï¼Œæœ€ç»ˆå‘ç°æ ¹èŠ‚ç‚¹æ˜¯èŠ‚ç‚¹1ï¼Œäºæ˜¯èŠ‚ç‚¹2ã€èŠ‚ç‚¹3å’ŒèŠ‚ç‚¹5çš„æ ¹èŠ‚ç‚¹éƒ½æ›´æ–°ä¸ºèŠ‚ç‚¹1ï¼Œå¦‚å›¾ï¼ˆbï¼‰æ‰€ç¤ºã€‚ä»¥åå†æŸ¥æ‰¾è¿™äº›èŠ‚ç‚¹çš„æ ¹èŠ‚ç‚¹ï¼Œå°±åªéœ€è¦Oï¼ˆ1ï¼‰çš„æ—¶é—´ã€‚

![](https://staticcdn1-5.umiwi.com/epms_ebook/21a6630e0c9e324708a1f084f839e529.jpg?x-oss-process=image/resize,w_1707,m_lfit)

è¯´æ˜ï¼šï¼ˆaï¼‰è·¯å¾„å‹ç¼©ä¹‹å‰çš„å¹¶æŸ¥é›†ï¼›ï¼ˆbï¼‰æŸ¥æ‰¾èŠ‚ç‚¹5çš„æ ¹èŠ‚ç‚¹å¹¶åšè·¯å¾„å‹ç¼©ä¹‹åçš„å¹¶æŸ¥é›†

æ¥ä¸‹æ¥è€ƒè™‘å¦‚ä½•åˆå¹¶ä¸¤ä¸ªå­å›¾ã€‚å‡è®¾ç¬¬ 1 ä¸ªå­å›¾çš„æ ¹èŠ‚ç‚¹æ˜¯ iï¼Œç¬¬ 2 ä¸ªå­å›¾çš„æ ¹èŠ‚ç‚¹æ˜¯ jã€‚å¦‚æœæŠŠ fathers[i] è®¾ä¸º jï¼Œå°±ç›¸å½“äºæŠŠæ•´ä¸ªç¬¬1ä¸ªå­å›¾æŒ‚åœ¨èŠ‚ç‚¹ j çš„ä¸‹é¢ï¼Œè®©ç¬¬1ä¸ªå­å›¾æˆä¸ºç¬¬2ä¸ªå­å›¾çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯åˆå¹¶ä¸¤ä¸ªå­å›¾ã€‚

```java
class Solution {
    public int findCircleNum(int[][] isConnected) {
        // è®°å½•æ¯ä¸ªèŠ‚ç‚¹(åŸå¸‚)æ‰€å±å­å›¾(çœä»½)çš„æ ¹èŠ‚ç‚¹
        int[] fathers = new int[isConnected.length];
        // åˆå§‹åŒ– fathers, æ­¤æ—¶æ¯ä¸ªåŸå¸‚éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„èŠ‚ç‚¹
        for (int i = 0; i < isConnected.length; i ++) {
            fathers[i] = i;
        }

        // ä¸è¿é€šå­å›¾çš„æ•°é‡, æ­¤æ—¶æ¯ä¸ªåŸå¸‚éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„èŠ‚ç‚¹
        int res = isConnected.length;

        // æ ¹æ®é‚»æ¥è¡¨ä¾æ¬¡å¤„ç†æ‰€æœ‰åŸå¸‚
        for (int i = 0; i < isConnected.length; i ++) {
            for (int j = 0; j < isConnected[0].length; j ++) {
                // i å’Œ j è¿é€š
                if (isConnected[i][j] == 1 && i != j) {
                    int fatherOfI = findFathers(fathers, i);
                    int fatherOfJ = findFathers(fathers, j);
                    // å¦‚æœæ­¤æ—¶ä¸¤ä¸ªèŠ‚ç‚¹çš„æ ¹èŠ‚ç‚¹ä¸ç›¸åŒï¼Œè¯´æ˜å®ƒä»¬æ­¤æ—¶ä»ç„¶ä½äºä¸åŒçš„å­é›†ä¸­ï¼Œéœ€è¦è¿›è¡Œåˆå¹¶
                    if (fatherOfI != fatherOfJ) {
                        // å°†ä¸€ä¸ªå­é›†çš„æ ¹èŠ‚ç‚¹çš„æŒ‡å‘çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘å¦ä¸€ä¸ªå­é›†çš„æ ¹èŠ‚ç‚¹ï¼Œè¿™å°±åˆå¹¶äº†ä¸¤ä¸ªå­é›†
                        fathers[fatherOfI] = fatherOfJ;
                        res --;
                    }
                }
            }
        }

        return res;
    }

    // æŸ¥æ‰¾ city æ‰€å±å­å›¾çš„æ ¹èŠ‚ç‚¹
    private int findFathers(int[] fathers, int city) {
        if (fathers[city] != city) {
            // é€’å½’æŸ¥æ‰¾ city çš„æ ¹èŠ‚ç‚¹ (è·¯å¾„å‹ç¼©)
            fathers[city] = findFathers(fathers, fathers[city]);
        }

        return fathers[city];

    }
}
```

æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$




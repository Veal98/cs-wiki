---
title: å€¼å’Œä¸‹æ ‡ä¹‹å·®éƒ½åœ¨ç»™å®šçš„èŒƒå›´å†…
date: 2022-04-26 12:39:38
permalink: /pages/45630b/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 057. å€¼å’Œä¸‹æ ‡ä¹‹å·®éƒ½åœ¨ç»™å®šçš„èŒƒå›´å†… - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/7WqeDu/)
- [220. å­˜åœ¨é‡å¤å…ƒç´  III - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/contains-duplicate-iii/)

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220426124547.png)

## ğŸ”” è§£é¢˜æ€è·¯

### æš´åŠ›å¾ªç¯

è¶…æ—¶äº†


```java
class Solution {
    public boolean containsNearbyAlmostDuplicate(int[] nums, int k, int t) {
        if (nums.length <= 1) {
            return false;
        }
        
        for (int i = 0; i < nums.length; i ++) {
            for (int j = i + 1; j <= i + k && j < nums.length; j ++) {
                // è¿™é‡Œç”¨ long å¤„ç†ï¼Œä¸ç„¶å¾ˆå¯èƒ½è¶…å‡º int èŒƒå›´
                long sum = Math.abs((long)nums[i] - (long)nums[j]);
                if (sum <= t) {
                    return true;
                }
            }
        }

        return false;
    }
}
```

### å¹³è¡¡äºŒå‰æ ‘

ç›®çš„å°±æ˜¯ä½¿å¾— nums[i] å’Œ nums[j] çš„**å·®å€¼ç»å¯¹å€¼**å°½å¯èƒ½çš„å°

- `nums[i] - nums[j] <= t`ï¼šå¯¹äºæ¯ä¸ªæ•°å­— nums[i]ï¼Œåº”è¯¥å…ˆä»å®ƒå‰é¢çš„ k ä¸ªæ•°å­—ä¸­æ‰¾å‡º**å°äºæˆ–ç­‰äº** nums[i] çš„æœ€å¤§çš„æ•°å­—ï¼Œå¦‚æœè¿™ä¸ªæ•°å­—ä¸ nums[i] çš„å·®çš„ç»å¯¹å€¼ä¸å¤§äº tï¼Œé‚£ä¹ˆå°±æ‰¾åˆ°äº†ä¸€ç»„ç¬¦åˆæ¡ä»¶çš„ä¸¤ä¸ªæ•°å­—
- `nums[j] - nums[i] <= t`ï¼šä» nums[j] å‰é¢çš„ k ä¸ªæ•°å­—ä¸­æ‰¾å‡º**å¤§äºæˆ–ç­‰äº** nums[i] çš„æœ€å°çš„æ•°å­—ï¼Œå¦‚æœè¿™ä¸ªæ•°å­—ä¸ nums[i] çš„å·®çš„ç»å¯¹å€¼ä¸å¤§äº tï¼Œå°±æ‰¾åˆ°äº†ä¸€ç»„ç¬¦åˆæ¡ä»¶çš„ä¸¤ä¸ªæ•°å­—

```java
class Solution {
    public boolean containsNearbyAlmostDuplicate(int[] nums, int k, int t) {
        if (nums.length <= 1) {
            return false;
        }

        TreeSet<Long> treeSet = new TreeSet<>();
        for (int i = 0; i < nums.length; i ++) {
            Long lower = treeSet.floor((long)nums[i]);
            if (lower != null && (long)nums[i] - lower <= t) {
                return true;
            }

            Long upper = treeSet.ceiling((long)nums[i]);
            if (upper != null && upper - (long)nums[i] <= t) {
                return true;
            }

            treeSet.add((long)nums[i]);
            
            // è¿›å…¥ä¸‹æ ‡ i + 1 ä¹‹å‰ï¼Œåˆ æ‰ä¸‹æ ‡ä¸º i-k çš„æ•°ï¼Œè¿™æ ·ç»´æŒ set çš„å¤§å°åœ¨ k+1 ä¸ª
            if (i >= k) {
                treeSet.remove((long)nums[i - k]);
            }
        }

        return false;
    }
}
```

æˆ‘ä»¬éœ€è¦ç»´æŒä¸€ä¸ªå¤§å°ä¸º k + 1 çš„ treeSetï¼Œå¯¹äº `treeSet.remove((long)nums[i - k]);` è¿™å¥ä»£ç ä¸ç†è§£çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸‹å›¾ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220426125757.png)

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå˜é‡ set æ˜¯ä¸€ä¸ª TreeSetï¼Œå®ƒçš„å¤§å°æ˜¯ kï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦æ˜¯ Oï¼ˆkï¼‰ã€‚å¯¹å®ƒåšæŸ¥æ‰¾ã€æ·»åŠ å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ Oï¼ˆlogkï¼‰ï¼Œå› æ­¤å¯¹äºä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„è€Œè¨€ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦æ˜¯ Oï¼ˆnlogkï¼‰

### æ¡¶æ’åº

- [ ] TODO

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼š


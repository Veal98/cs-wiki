---
title: äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ
date: 2021-11-29 09:35:14
permalink: /pages/269839/
---

## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š[235. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-search-tree/)

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚

ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€

ä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹äºŒå‰æœç´¢æ ‘:  root = [6,2,8,0,4,7,9,null,null,3,5]

![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/binarysearchtree_improved.png)

ç¤ºä¾‹ 1:

```
è¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 8
è¾“å‡º: 6 
è§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 8 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 6ã€‚
```

ç¤ºä¾‹ 2:

```
è¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 4
è¾“å‡º: 2
è§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 2, å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚
```

## ğŸ”” è§£é¢˜æ€è·¯

è·Ÿ [236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree/) çš„æ€è·¯ä¸€æ ·ï¼Œä½†æ˜¯å¯¹äºäºŒå‰æœç´¢æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»–çš„ç‰¹æ€§åˆ©ç”¨èµ·æ¥ï¼ŒäºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾æ–¹å‘éå¸¸æ˜ç¡®ï¼Œå°±ä¸éœ€è¦é€šè¿‡ååºéå†ï¼ˆååºéå†å…¶å®å°±æ˜¯ä¸€ç§å›æº¯ï¼‰æ¥åšäº†ï¼Œå¯ä»¥ç›´æ¥å‰åºéå†ï¼ˆä¸è¿‡æœ¬é¢˜ä¸æ¶‰åŠä¸­é—´èŠ‚ç‚¹çš„å¤„ç†ï¼‰ï¼š

A å’Œ B çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæœ‰ä¸‰ç§æƒ…å†µï¼š

1. A == rootï¼Œåˆ™ A æ˜¯ B çš„æœ€è¿‘ç¥–å…ˆï¼ˆåä¹‹ä¹Ÿä¸€æ ·ï¼‰
2. root.val > A.val && root.val < B.valï¼Œè¯´æ˜ A å’Œ B åˆ†åˆ«ä½äº root çš„å·¦å³ä¸¤ä¾§ï¼ˆåä¹‹äº¦ç„¶ï¼‰ï¼Œåˆ™ root å°±æ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆ
3. root.val > A.val && root.val > B.valï¼Œè¯´æ˜ A å’Œ B éƒ½åœ¨ root çš„å·¦å­æ ‘ä¸Šï¼ˆroot.val < A.val && root.val < B.valï¼Œè¯´æ˜ A å’Œ B éƒ½åœ¨ root çš„å³å­æ ‘ä¸Šï¼‰


```java
class Solution {
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        if (root == null) {
            return null;
        }
        
        // ç¬¬ 1 ç§æƒ…å†µ
        if (root == p || root == q) {
            return root;
        }
        
        if (root.val > p.val && root.val > q.val) {
            // ç¬¬ 3 ç§æƒ…å†µï¼šp q éƒ½ä½äº root çš„å·¦å­æ ‘ä¸Š
            return lowestCommonAncestor(root.left, p, q);
        }
        
        if (root.val < p.val && root.val < q.val) {
            // ç¬¬ 3 ç§æƒ…å†µï¼šp q éƒ½ä½äº root çš„å³å­æ ‘ä¸Š
            return lowestCommonAncestor(root.right, p, q);
        }
        
        // ç¬¬ 2 ç§æƒ…å†µï¼šp q åˆ†å±… root çš„ä¸¤ä¾§, åˆ™ä»–ä¿©çš„æœ€è¿‘å…¬å…±ç¥–å…ˆç»“ç‚¹ä¸º root
        return root;
        
    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211129095514.png)

äº‹å®ä¸Šï¼Œè¿™é¢˜ç”¨è¿­ä»£æ³•åšæ›´æ¸…æ¥šï¼š

```java
class Solution {
    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {
        if (root == null) {
            return null;
        }
        
        // ç¬¬ 1 ç§æƒ…å†µ
        if (root == p || root == q) {
            return root;
        }
        
        TreeNode cur = root;
        while (cur != null) {
            if (cur.val > p.val && cur.val > q.val) {
                // ç¬¬ 3 ç§æƒ…å†µï¼šp q éƒ½ä½äº cur çš„å·¦å­æ ‘ä¸Š
                cur = cur.left;
            } else if (cur.val < p.val && cur.val < q.val) {
                // ç¬¬ 3 ç§æƒ…å†µ p q éƒ½ä½äº cur çš„å³å­æ ‘ä¸Š
                cur = cur.right;
            } else {
                // ç¬¬ 2 ç§æƒ…å†µï¼šp q åˆ†å±… cur çš„ä¸¤ä¾§, åˆ™ä»–ä¿©çš„æœ€è¿‘å…¬å…±ç¥–å…ˆç»“ç‚¹ä¸º cur
                return cur;
            }
        }
        
        // èµ°ä¸åˆ°è¿™é‡Œ
        return root;
    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211129100350.png)

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šé€’å½’ O(LogN)ï¼Œè¿­ä»£ O(1)
- æ—¶é—´å¤æ‚åº¦ï¼šO(N)


---
title: 队列理论基础
permalink: /pages/queue
date: 2022-04-18 09:46:00
---

## 队列定义

同样也是操作受限的线性表，**先进先出FIFO**，从队尾进队，从队头出队

队列分为：

- 顺序队列
- 循环队列
- 链式队列
- 双端队列



## 顺序队列

- 同样采用数组存储元素
- 队头指针指向第一个元素
- **队尾指针一般指向最后一个元素的下一个位置**



进队：先送值到队尾，再将队尾指针+1

```cpp
Q.data[Q.rear] = x;
rear ++;
```



出队：先取出队头元素，再将队头指针+1

```cpp
x = Q.data[Q.front]
front ++;
```



**顺序队列存在的问题** ：会导致上溢出；是一种 **假溢出** ，在data数组中任然存在可以存放数组的位置

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20200505094012.png)

解决方法：

- 建立一个足够大的存储空间以避免溢出，但这样做空间使用率低，浪费存储空间
- 移动元素：每当出队一个元素，就将移动队列中所有的已有元素向队头移动一个位置
- 循环队列：将队头和队尾看作是一个首尾相接的循环队列

## 循环队列

**弥补顺序队列的缺点**

- 初始/队空：Q.front = Q.rear (队空条件）
- 出队：Q.front = (Q.front+1) % maxsize (最大元素个数)
- 进队：Q.rear = (Q.rear+1) % maxsize
- 队列长度 = (Q.rear - Q.front + maxsize) % maxsize
- 队满：( **牺牲一个单元来区分队空和队满** ）(Q.rear + 1) % maxsize = Q.front

<img src="https://cdn.nlark.com/yuque/0/2020/png/1237282/1586069628893-2e862333-bb9c-439e-95c8-a4fddaed591d.png" alt="img" style="zoom:67%;" />



## 链式队列

**实际就是一个同时带有头指针和尾指针的单链表**

头指针指向队头结点，尾指针指向队尾结点（即单链表最后一个结点，与顺序存储有所不同）



适合于数据元素变动较大的情况，而且不存在队列满或者溢出的问题。

- 队空： Q.rear == Q.front == NULL
- 出队：（带头结点）

```
LinkNode *p = Q.front->next;
x = p->data;
Q.front->next = p->next; //插入头节点之后
if(Q.rear = p) //若原队列中只有一个结点，删除后变空，还需修改尾指针
    Q.rear = Q.front;
free(p);
```



- 进队：（带头节点）

```c
LinkNode *s = (LinkNode *) malloc (sizeof(LinkNode)); //创建新结点
s->data = x; s->next = NULL;
Q.rear->next = s; //插入到表尾
Q.rear = s;
```



## 双端队列

允许两端都进行入队和出队操作的队列

- 输出受限：有一端允许插入和删除；另一端只允许插入
- 输入受限：有一端允许插入和删除；另一端只允许删除



## 队列的应用

- 层次遍历
- 计算机系统中的应用
- 解决主机与外部设备之间速度不匹配的问题（ex:打印机数据缓冲区中所存储的数据就是一个队列）
- 解决由多用户引起的资源竞争问题（CPU将请求按时间先后排成队列）
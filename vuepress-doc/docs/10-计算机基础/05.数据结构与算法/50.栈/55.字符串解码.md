---
title: å­—ç¬¦ä¸²è§£ç 
date: 2022-07-24 11:35:40
permalink: /pages/ab32f5/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [394. å­—ç¬¦ä¸²è§£ç ](https://leetcode.cn/problems/decode-string/)

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/image-20220724114115329.png)

## ğŸ”” è§£é¢˜æ€è·¯

å’Œåç¼€è¡¨è¾¾å¼ [å‰‘æŒ‡ Offer II 036. åç¼€è¡¨è¾¾å¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/8Zf90G/) å·®ä¸å¤šï¼Œéƒ½æ˜¯å°†è¿ç®—åçš„ç»“æœå†å…¥æ ˆ

è¿™é‡Œæœ‰ä¸ªå°å‘å°±æ˜¯æ•°å­—å¯èƒ½å¹¶ä¸æ˜¯åªæœ‰ä¸€ä½ï¼Œè€Œæ˜¯å¤šä½çš„ï¼Œæ¯”å¦‚ `12[ab]` è¿™æ ·


```java
class Solution {

    // å­—ç¬¦ä¸²ä¸‹æ ‡
    private int i = 0;

    public String decodeString(String s) {
        Stack<Character> stack = new Stack<>();

        while(i < s.length()) {
            char c = s.charAt(i);
            // æ•°å­—ï¼Œå…¥æ ˆ
            if (Character.isDigit(c)) {
                // æ•°å­—å¯èƒ½ä¸åªä¸€ä½ï¼Œæ˜¯å¤šä½
                int num = getNum(s);
                stack.push((char)num);
            }
            // '[' or å­—æ¯ï¼Œå…¥æ ˆ
            else if (c == '[' || Character.isLowerCase(c) || Character.isUpperCase(c)) {
                // æ›´æ–°å¾…å¤„ç†çš„ä¸‹æ ‡
                i ++;

                stack.push(c);
            }
            // '['ï¼Œå‡ºæ ˆ
            else if (c == ']') {
                // æ›´æ–°å¾…å¤„ç†çš„ä¸‹æ ‡
                i ++;

                // è·å– '[' å’Œ ']' ä¹‹é—´çš„å­—ç¬¦ä¸² temp
                StringBuilder temp = new StringBuilder();
                while (stack.peek() != '[') {
                    temp.append(stack.pop());
                }
                // reverse temp
                temp = temp.reverse();
                
                // '[' å‡ºæ ˆ
                stack.pop();
                // æ­¤æ—¶æ ˆé¡¶ä¸º temp åº”è¯¥å‡ºç°çš„æ¬¡æ•°
                int repetions = stack.pop();
                // æˆ‘ä»¬æ ¹æ®è¿™ä¸ªæ¬¡æ•°å’Œ temp æ„é€ å‡ºæ–°çš„å­—ç¬¦ä¸²
                StringBuilder newTemp = new StringBuilder();
                for (int i = 0; i < repetions; i ++) {
                    newTemp.append(temp);
                }
                // æ–°å­—ç¬¦ä¸² newTemp å†è¿›æ ˆ
                for (Character ch : newTemp.toString().toCharArray()) {
                    stack.push(ch);
                }
            }
        }

        // æ ˆåº• -> æ ˆé¡¶å³ä¸ºæœ€ç»ˆç»“æœ
        return getStack(stack);
    }


    // æ‰¾åˆ°ä»ä¸‹æ ‡ i å¼€å§‹çš„è¿ç»­æ•°å­—
    private int getNum(String s) {
        StringBuilder res = new StringBuilder();
        for (; i < s.length(); i ++) {
            if (!Character.isDigit(s.charAt(i))) {
                break;
            }

            res.append(s.charAt(i));
        }

        return Integer.parseInt(res.toString());
    }

    // æŒ‰ç…§æ ˆåº• -> æ ˆé¡¶çš„é¡ºåºè¾“å‡º
    private String getStack(Stack<Character> stack) {
        StringBuilder res = new StringBuilder();

        while (!stack.isEmpty()) {
            res.append(stack.pop());
        }

        return res.reverse().toString();
    }

}
```

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šO(N)
- æ—¶é—´å¤æ‚åº¦ï¼šO(N)


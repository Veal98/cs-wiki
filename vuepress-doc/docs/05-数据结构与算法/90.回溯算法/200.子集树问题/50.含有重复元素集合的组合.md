---
title: ç»„åˆæ€»å’Œ II
date: 2021-12-14 10:52:21
permalink: /pages/459ffa/
---

## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 082. å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„ç»„åˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/4sjJUc/)
- [40. ç»„åˆæ€»å’Œ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/combination-sum-ii/)

ç»™å®šä¸€ä¸ª**å¯èƒ½æœ‰é‡å¤æ•°å­—**çš„æ•´æ•°æ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° targetï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚

candidates ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚

æ³¨æ„ï¼šè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚

ç¤ºä¾‹ 1:

```
è¾“å…¥: candidates = [10,1,2,7,6,1,5], target = 8,
è¾“å‡º:
[
[1,1,6],
[1,2,5],
[1,7],
[2,6]
]
```

ç¤ºä¾‹ 2:

```
è¾“å…¥: candidates = [2,5,2,1,2], target = 5,
è¾“å‡º:
[
[1,2,2],
[5]
]
```

## ğŸ”” è§£é¢˜æ€è·¯

å’Œä¸Šé¢˜ [39. ç»„åˆæ€»å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/combination-sum/) çš„ä¸åŒä¹‹å¤„åœ¨äºï¼š

- candidates ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡
- æ•°ç»„ä¸­å«æœ‰é‡å¤å…ƒç´ 

å¦‚æœä»ç„¶æŒ‰ç…§ä¸Šé¢˜çš„å¥—è·¯åšï¼Œä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯è§£é›†ä¸­ä¼šåŒ…å«é‡å¤çš„ç»„åˆï¼Œä¸¾ä¸ªä¾‹å­ï¼š

éå†åˆ° 1 çš„æ—¶å€™ï¼Œå¯ä»¥é€‰å– 1 2 5 æ„æˆ target

éå†åˆ° 2 çš„æ—¶å€™ï¼Œè™½ç„¶ä¸ä¼šé€‰å–åˆ°å®ƒå‰é¢çš„ 1ï¼Œä½†æ˜¯ 2 åé¢è¿˜æœ‰ 1ï¼Œæ‰€ä»¥ï¼ŒæŒ‰ç…§ä¸Šé¢˜é‚£ç§è§£æ³•ï¼Œä¼šé€‰å–åˆ° 2 1 5 æ„æˆ targetã€‚è¿™å°±å¯¼è‡´äº†é‡å¤ç»„åˆ

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211214111325.png)

è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œé‚£å°±æ˜¯å¯¹æ•°ç»„è¿›è¡Œä¸€ä¸ªæ’åºï¼Œæ’åºä¹‹åå°±å˜æˆäº† 1 1 2 5 6 7 10

éå†åˆ°ç¬¬ä¸€ä¸ª 1 çš„æ—¶å€™ï¼Œå¯ä»¥é€‰å–åˆ° {1 1 6} {1 2 5} {1 7}

è€Œåœ¨éå†åˆ°ç¬¬äºŒä¸ª 1 çš„æ—¶å€™ `candidates[i] = cadidate[i-1]`ï¼Œä¸ºäº†é˜²æ­¢é‡å¤ç»„åˆï¼Œç›´æ¥ continue

ä¸è¿‡å¾ˆæ˜¾ç„¶ï¼Œå¦‚æœåªä½¿ç”¨ `candidates[i] = cadidate[i-1]` è¿™ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶çš„è¯ï¼Œåœ¨éå†åˆ°ç¬¬ä¸€ä¸ª 1 çš„æ—¶å€™ï¼Œå°±ä¼šæ¼æ‰ {1 1 6} è¿™ä¸ªé€‰æ‹©

æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé¢å¤–çš„æ•°ç»„ usedï¼Œç”¨æ¥æ ‡è¯† candidates ä¸­çš„æ•°å­—æ˜¯å¦è¢«ä½¿ç”¨è¿‡ã€‚å¦‚æœ `candidates[i] = cadidate[i-1] && used[i-1] == false`ï¼Œåˆ™è¯´æ˜æ˜¯é‡å¤å…ƒç´ ï¼Œç›´æ¥ continue 

> âš  æ³¨æ„ï¼Œ**å»é‡éœ€è¦æ’åº**

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211214113636.png)


```java
class Solution {
    private List<List<Integer>> res = new ArrayList<>();

    public List<List<Integer>> combinationSum2(int[] candidates, int target) {
        if (candidates == null || candidates.length == 0) {
            return res;
        }
        // å¯¹æ•°ç»„è¿›è¡Œæ’åº
        Arrays.sort(candidates);
        // å¯¹åº” candidates ä¸­çš„å…ƒç´ æ˜¯å¦è¢«ä½¿ç”¨è¿‡
        boolean[] used = new boolean[candidates.length];
        List<Integer> track = new ArrayList<>();
        // æ ‡å¿—ä½ï¼Œè¡¨ç¤ºä»æ•°ç»„çš„å“ªä¸ªä½ç½®å¼€å§‹é€‰å–
        int start = 0;
        backtrack(candidates, target, start, used, track);
        return res;
    }

    private void backtrack(int[] candidates, int target, int start, boolean[] used, List<Integer> track) {
        // ç»“æŸæ¡ä»¶
        if (target == 0) {
            res.add(new ArrayList<>(track));
            return;
        }

        // éå†é€‰æ‹©åˆ—è¡¨
        for (int i = start; i < candidates.length; i ++) {
            // å‰ªæ
            if (candidates[i] > target) {
                // å› ä¸ºæ•°ç»„å·²ç»æ’å¥½åºäº†ï¼Œi åŠå…¶åé¢çš„æ•°ä¸€å®šéƒ½æ¯” target å¤§ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ç›´æ¥ break æ‰
                break;
            }
            if (i > 0 && used[i - 1] == false && candidates[i] == candidates[i - 1]) {
                continue;
            }
            
            // åšé€‰æ‹©
            track.add(candidates[i]);
            target -= candidates[i];
            used[i] = true;
            // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘
            backtrack(candidates, target, i + 1, used, track);
            // å›æº¯
            track.remove(track.size() - 1);
            target += candidates[i];
            used[i] = false;
        }
    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211214113657.png)

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š*O*(*n*)ã€‚æˆ‘ä»¬åˆ†åˆ«éœ€è¦ O(n) çš„ç©ºé—´å­˜å‚¨ resã€trackã€usedã€ä»¥åŠé€’å½’éœ€è¦çš„æ ˆ
- æ—¶é—´å¤æ‚åº¦ï¼šæ¯ä¸€ä¸ªèŠ‚ç‚¹æœ‰ 2 ä¸ªé€‰æ‹©ï¼Œé€‰å–è¿˜æ˜¯ä¸é€‰å–ï¼Œä¸€å…± n ä¸ªèŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ $O(2^n)$ï¼Œå¦å¤–ï¼Œå½“æˆ‘ä»¬æ¯å¾—åˆ°ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„ç»„åˆ track æ—¶ï¼Œéœ€è¦ O(n) çš„æ—¶é—´å°†å…¶æ”¾å…¥ res ä¸­ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n * 2^n)$
---
title: äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°
date: 2021-11-24 11:01:46
permalink: /pages/f091ae/
---

## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š[501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/find-mode-in-binary-search-tree/)

ç»™å®šä¸€ä¸ªæœ‰ç›¸åŒå€¼çš„äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰ï¼Œæ‰¾å‡º BST ä¸­çš„æ‰€æœ‰ä¼—æ•°ï¼ˆå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ï¼‰ã€‚

å‡å®š BST æœ‰å¦‚ä¸‹å®šä¹‰ï¼š

- ç»“ç‚¹å·¦å­æ ‘ä¸­æ‰€å«ç»“ç‚¹çš„å€¼å°äºç­‰äºå½“å‰ç»“ç‚¹çš„å€¼
- ç»“ç‚¹å³å­æ ‘ä¸­æ‰€å«ç»“ç‚¹çš„å€¼å¤§äºç­‰äºå½“å‰ç»“ç‚¹çš„å€¼
- å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘

ä¾‹å¦‚ï¼š

```
ç»™å®š BST [1,null,2,2],

   1
    \
     2
    /
   2
   
è¿”å›[2].
```

## ğŸ”” è§£é¢˜æ€è·¯

æš´åŠ›è§£æ³•ï¼Œå› ä¸ºè¦æ±‚æœ€å¤§é¢‘ç‡çš„å…ƒç´ é›†åˆï¼Œæ³¨æ„æ˜¯é›†åˆï¼Œä¸æ˜¯ä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥æœ‰å¤šä¸ªä¼—æ•°ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯ï¼šå…ˆéå†ä¸€éä¸­åºéå†åºåˆ—ï¼Œæ‰¾å‡ºæœ€å¤šå‡ºç°æ¬¡æ•°ï¼ˆmaxCountï¼‰ï¼Œç„¶åå†é‡æ–°éå†ä¸€éä¸­åºéå†åºåˆ—ï¼ŒæŠŠå‡ºç°æ¬¡æ•°ä¸º maxCount çš„å…ƒç´ æ”¾è¿›é›†åˆ


```java
class Solution {
    public int[] findMode(TreeNode root) {
        if (root == null) {
            return new int[0];
        }

        // è¾…åŠ©æ ˆ
        Stack<TreeNode> stack = new Stack<>();
        // å·¥ä½œèŠ‚ç‚¹
        TreeNode cur = root;
        // å­˜å‚¨ä¸­åºéå†çš„ç»“æœ
        List<Integer> list = new ArrayList<>();

        while (!stack.isEmpty() || cur != null) {
            if (cur != null) {
                stack.push(cur);
                // å·¦
                cur = cur.left;
            } else {
                // æ ¹
                cur = stack.pop();
                list.add(cur.val);
                // å³
                cur = cur.right;
            }
        }


        // å…ˆéå†ä¸€éä¸­åºéå†åºåˆ—ï¼Œæ‰¾å‡ºæœ€å¤šå‡ºç°æ¬¡æ•°ï¼ˆmaxCountï¼‰
        // å‡ºç°æ¬¡æ•°
        int count = 1;
        // æœ€å¤šå‡ºç°æ¬¡æ•°
        int maxCount = 1;
        for (int i = 0; i < list.size() - 1; i ++) {
            if (list.get(i).equals(list.get(i + 1))) {
                count ++;
                maxCount = Math.max(maxCount, count);
            } else {
                // ä¸¤è€…ä¸ç›¸åŒ count å½’ 1
                count = 1;
            }
        }

        // ç„¶åå†é‡æ–°éå†ä¸€éä¸­åºéå†åºåˆ—ï¼ŒæŠŠå‡ºç°æ¬¡æ•°ä¸º maxCount çš„å…ƒç´ æ”¾è¿›é›†åˆ
        List<Integer> res = new ArrayList<>();
        // è¿™é‡Œéœ€è¦åœ¨ä¸­åºéå†åºåˆ—çš„æœ«å°¾åŠ ä¸Šä¸€ä¸ªè¾…åŠ©æ•°ï¼Œä¸ç„¶ä¼šæ¼å¤„ç†æœ€åä¸€ä¸ªèŠ‚ç‚¹
        list.add(Integer.MAX_VALUE);
        count = 1;
        for (int i = 0; i < list.size() - 1; i ++) {
            if (list.get(i).equals(list.get(i + 1))) {
                count ++;
            } else {
                count = 1;
            }

            if (count == maxCount) {
                res.add(list.get(i));
            }
        }

		// è½¬ä¸ºæ•°ç»„
        int[] nums = new int[res.size()];
        int index = 0;
        for (int i : res) {
            nums[index ++] = i;
        }

        return nums;
    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211124115616.png)

æ’é™¤ list è½¬æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ï¼Œè¿™ç§æš´åŠ›è§£æ³•éå†äº†ä¸€éäºŒå‰æ ‘ï¼Œéå†äº†ä¸¤é listï¼Œä½†å®é™…ä¸Šï¼Œåªéœ€è¦éå†ä¸€éäºŒå‰æ ‘å°±å¯ä»¥äº†ï¼š

ç®€å•æ¥è¯´ï¼Œ**é¢‘ç‡count å¤§äº maxCount çš„æ—¶å€™ï¼Œä¸ä»…è¦æ›´æ–° maxCountï¼Œè€Œä¸”è¦æ¸…ç©ºä¼—æ•°çš„ç»“æœé›†ï¼Œå› ä¸ºç»“æœé›†ä¹‹å‰çš„å…ƒç´ éƒ½å¤±æ•ˆäº†**ã€‚

```java
class Solution {
    public int[] findMode(TreeNode root) {
        if (root == null) {
            return new int[0];
        }

        // è¾…åŠ©æ ˆ
        Stack<TreeNode> stack = new Stack<>();
        // å·¥ä½œèŠ‚ç‚¹
        TreeNode cur = root;
        // ä¸­åºéå†çš„å‰é©±èŠ‚ç‚¹
        TreeNode pre = null;
        // å­˜å‚¨ä¼—æ•°
        List<Integer> res = new ArrayList<>();

        // å‡ºç°æ¬¡æ•°
        int count = 1;
        // æœ€å¤šå‡ºç°æ¬¡æ•°
        int maxCount = 1;

        while (!stack.isEmpty() || cur != null) {
            if (cur != null) {
                stack.push(cur);
                // å·¦
                cur = cur.left;
            } else {
                // æ ¹
                cur = stack.pop();

                if (pre != null && pre.val == cur.val) {
                    count ++;
                } else {
                    // ä¸å‰é©±èŠ‚ç‚¹æ•°å€¼ä¸åŒ
                    count = 1;
                }

                if (count == maxCount) {
                    res.add(cur.val);
                }
                if (count > maxCount) {
                    maxCount = count;
                    // å…³é”®ï¼æ¸…ç©º res
                    res.clear();
                    res.add(cur.val);
                }

                pre = cur;

                // å³
                cur = cur.right;
            }
        }

        // list è½¬æ•°ç»„
        return res.stream().mapToInt(Integer::intValue).toArray();
    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211124121716.png)

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šO(LogN)
- æ—¶é—´å¤æ‚åº¦ï¼šO(N)


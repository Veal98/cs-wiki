---
date: 2022-03-20 11:54:00
permalink: /pages/9d87d8/
title: å°ç±³äºŒé¢-é€åˆ†é¢˜-åå°„çš„åŸç†ä½œç”¨ä»¥åŠä¼˜åŠ£
---
# å°ç±³äºŒé¢ï¼šé€åˆ†é¢˜ï¼Œè®²è®²ä½ å¯¹åå°„çš„ç†è§£

---

> å› ä¸ºæˆ‘æ˜å¹´ä¹Ÿè¦å¼€å§‹ç§‹æ‹›äº†ï¼Œæ‰€ä»¥æœ€è¿‘å‡†å¤‡ä»¥é¢è¯•ä¸ºå¯¼å‘å¼€å§‹å†™æ–‡ç« 
>
> è€ƒè™‘åˆ°ç›®å‰ç½‘ç»œä¸Šæä¾›çš„é¢è¯•é¢˜å¤§éƒ¨åˆ†éƒ½æ˜¯çŸ­çŸ­çš„å‡ è¡Œå­—ï¼Œä¹Ÿå³èƒŒè¯µç‰ˆï¼Œä¿—ç§°å…«è‚¡æ–‡ï¼Œæˆ‘è§‰å¾—è¿™æ— æ³•æ»¡è¶³å¤§éƒ¨åˆ†åŒå­¦çš„è¯‰æ±‚ï¼ŒçŸ¥å…¶ç„¶è€Œä¸çŸ¥æ‰€ä»¥ç„¶
>
> æˆ‘å¸Œæœ›çš„æ˜¯**ä»¥é¢è¯•é¢˜ä¸ºå¯¼å‘ï¼Œå»ºç«‹å®Œæ•´çš„çŸ¥è¯†ä½“ç³»ï¼Œè®©å…«è‚¡æ–‡å˜å¾—æœ‰ä»·å€¼**ï¼Œè€Œä¸æ˜¯ä¸œä¸€é”¤è¥¿ä¸€æ£’ï¼Œæ‰€ä»¥åç»­å‡†å¤‡ä»¥ç‰›å®¢ä¸Šçš„é¢ç»å¸–ä¸ºå¯¼å‘ï¼Œå¯¹æ¯ä¸ªé¢è¯•é¢˜æä¾›**èƒŒè¯µç‰ˆ + è¯¦è§£ç‰ˆ**ï¼Œå·²ç»ä¼šçš„åŒå­¦å‘¢å¯ä»¥ç›´æ¥çœ‹èƒŒè¯µç‰ˆï¼Œè¿˜ä¸å¤ªäº†è§£çš„åŒå­¦å‘¢å¯ä»¥ç»“åˆè¯¦è§£ç‰ˆä¸€èµ·çœ‹
>
> æ‰€æœ‰çš„é¢è¯•é¢˜éƒ½å·²ç»æŒ‰ç…§çŸ¥è¯†ä½“ç³»çš„é¡ºåºè¿›è¡Œè¿‡æ’åºï¼Œå¹¶ä¸”æˆ‘ä¼šåŠ å…¥ä¸€äº›è¡¥å……é¢˜ç”¨äºå®Œå–„
>
> ç›®å‰å·²ç»æ•´ç†äº†ä¸€éƒ¨åˆ†æ±‡æ€»åœ¨ Notion ä¸Šï¼Œå„ä½å°ä¼™ä¼´å¯ä»¥**ç¿»åˆ°æ–‡æœ«ç‚¹å‡» `é˜…è¯»åŸæ–‡` ç›´è¾¾**



Java åå°„æœºåˆ¶å¯¹äºå°ç™½æ¥è¯´ï¼ŒçœŸçš„æ˜¯ä¸€é“å·¨å¤§çš„åå„¿ï¼Œå…¶ä»–çš„ä¸œè¥¿å§ï¼Œæ— éå°±æ˜¯å†…å®¹å¤šç‚¹ï¼Œå¤šçœ‹çœ‹å¤šèƒŒèƒŒå°±å¥½äº†ï¼Œåå°„çœŸçš„å°±æ˜¯ä¸ç®¡çœ‹äº†å¤šå°‘éä¸ç†è§£å°±è¿˜æ˜¯ä¸ç†è§£ï¼Œè€Œä¸”å­¦æ ¡é‡Œé¢çš„å„å¤§æ•™æåº”è¯¥éƒ½æ²¡æœ‰åå°„è¿™ä¸ªç« èŠ‚ï¼Œæœ‰ä¹Ÿæ˜¯ä¸€å¸¦è€Œè¿‡ã€‚è¯´å®è¯ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæˆ‘å¯¹åå°„ä¹Ÿå¹¶éå®Œå…¨äº†è§£ï¼Œæ¯•ç«Ÿå¹³å¸¸å¼€å‘åŸºæœ¬ç”¨ä¸åˆ°ï¼Œä¸è¿‡ï¼Œçœ‹å®Œè¿™ç¯‡æ–‡ç« ç›¸ä¿¡ä½ å¯¹åå°„å°±æ²¡å•¥ç–‘ç‚¹äº†ã€‚

> ğŸ”ˆ æ–‡ç« æœ«å°¾è´´äº†æœ¬é¢˜çš„èƒŒè¯µç‰ˆ

å…¨æ–‡è„‰ç»œæ€ç»´å¯¼å›¾å¦‚ä¸‹ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210221151641.png)

## 1. æŠ›ç –å¼•ç‰ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨åå°„

å‰æ–‡æˆ‘ä»¬è¯´è¿‡ï¼Œæ¥å£çš„ä½¿ç”¨æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå¹¶ä¸”é™ä½äº†ä»£ç çš„è€¦åˆåº¦ã€‚æ¥çœ‹ä¸ªä¾‹å­ï¼š

é¦–å…ˆï¼Œæˆ‘ä»¬æ‹¥æœ‰ä¸€ä¸ªæ¥å£ X åŠå…¶æ–¹æ³• testï¼Œå’Œä¸¤ä¸ªå¯¹åº”çš„å®ç°ç±» Aã€Bï¼š

```java
public class Test {
    
    interface X {
    	public void test();
	}

    class A implements X{
        @Override
        public void test() {
             System.out.println("I am A");
        }
    }

    class B implements X{
        @Override
        public void test() {
            System.out.println("I am B");
    }
}
```

é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å“ªä¸ªå®ç°ç±»å°±ç›´æ¥ new ä¸€ä¸ªå°±å¥½äº†ï¼Œçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š

```java
public class Test {    

    ......

	public static void main(String[] args) {
        X a = create1("A");
        a.test();
        X b = create1("B");
        b.test();
    }

    public static X create1(String name){
        if (name.equals("A")) {
            return new A();
        } else if(name.equals("B")){
            return new B();
        }
        return null;
    }

}
```

æŒ‰ç…§ä¸Šé¢è¿™ç§å†™æ³•ï¼Œå¦‚æœæœ‰æˆç™¾ä¸Šåƒä¸ªä¸åŒçš„ X çš„å®ç°ç±»éœ€è¦åˆ›å»ºï¼Œé‚£æˆ‘ä»¬å²‚ä¸æ˜¯å°±éœ€è¦å†™ä¸Šåƒä¸ª if è¯­å¥æ¥è¿”å›ä¸åŒçš„ X å¯¹è±¡ï¼Ÿ

æˆ‘ä»¬æ¥çœ‹çœ‹çœ‹åå°„æœºåˆ¶æ˜¯å¦‚ä½•åšçš„ï¼š

```java
public class Test {

    public static void main(String[] args) {
		X a = create2("A");
        a.test();
        X b = create2("B");
        b.testReflect();
    }
    
	// ä½¿ç”¨åå°„æœºåˆ¶
    public static X create2(String name){
        Class<?> class = Class.forName(name);
        X x = (X) class.newInstance();
        return x;
    }
}
```

å‘ `create2()` æ–¹æ³•ä¼ å…¥åŒ…åå’Œç±»åï¼Œé€šè¿‡åå°„æœºåˆ¶åŠ¨æ€çš„åŠ è½½æŒ‡å®šçš„ç±»ï¼Œç„¶åå†å®ä¾‹åŒ–å¯¹è±¡ã€‚

çœ‹å®Œä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œç›¸ä¿¡è¯¸ä½å¯¹åå°„æœ‰äº†ä¸€å®šçš„è®¤è¯†ã€‚åå°„æ‹¥æœ‰ä»¥ä¸‹å››å¤§åŠŸèƒ½ï¼š

- åœ¨è¿è¡Œæ—¶ï¼ˆåŠ¨æ€ç¼–è¯‘ï¼‰è·çŸ¥ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚
- åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚
- åœ¨è¿è¡Œæ—¶è·çŸ¥ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚
- åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§ã€‚

ä¸Šè¿°è¿™ç§**åŠ¨æ€è·å–ä¿¡æ¯ã€åŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•**çš„åŠŸèƒ½ç§°ä¸º Java è¯­è¨€çš„åå°„æœºåˆ¶ã€‚

## 2. ç†è§£ Class ç±»

è¦æƒ³ç†è§£åå°„ï¼Œé¦–å…ˆè¦ç†è§£ `Class` ç±»ï¼Œå› ä¸º `Class` ç±»æ˜¯åå°„å®ç°çš„åŸºç¡€ã€‚

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220150043.png)

åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼ŒJVM å§‹ç»ˆä¸ºæ‰€æœ‰çš„å¯¹è±¡ç»´æŠ¤ä¸€ä¸ªè¢«ç§°ä¸º**è¿è¡Œæ—¶çš„ç±»å‹æ ‡è¯†**ï¼Œè¿™ä¸ªä¿¡æ¯è·Ÿè¸ªç€æ¯ä¸ªå¯¹è±¡æ‰€å±çš„ç±»çš„å®Œæ•´ç»“æ„ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŒ…åã€ç±»åã€å®ç°çš„æ¥å£ã€æ‹¥æœ‰çš„æ–¹æ³•å’Œå­—æ®µç­‰ã€‚å¯ä»¥é€šè¿‡ä¸“é—¨çš„ Java ç±»è®¿é—®è¿™äº›ä¿¡æ¯ï¼Œè¿™ä¸ªç±»å°±æ˜¯ `Class` ç±»ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ `Class` ç±»ç†è§£ä¸º**ç±»çš„ç±»å‹**ï¼Œä¸€ä¸ª `Class` å¯¹è±¡ï¼Œç§°ä¸ºç±»çš„ç±»å‹å¯¹è±¡ï¼Œ**ä¸€ä¸ª `Class` å¯¹è±¡å¯¹åº”ä¸€ä¸ªåŠ è½½åˆ° JVM ä¸­çš„ä¸€ä¸ª `.class` æ–‡ä»¶**ã€‚

<u>åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€å®šæ˜¯å…ˆæœ‰ç±»å†æœ‰å¯¹è±¡</u>ã€‚ä»¥ä¸‹é¢è¿™æ®µä»£ç ä¸ºä¾‹ï¼Œç±»çš„æ­£å¸¸åŠ è½½è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š

```java
import java.util.Date; // å…ˆæœ‰ç±»

public class Test {
    public static void main(String[] args) {
        Date date = new Date(); // åæœ‰å¯¹è±¡
        System.out.println(date);
    }
}
```

é¦–å…ˆ JVM ä¼šå°†ä½ çš„ä»£ç ç¼–è¯‘æˆä¸€ä¸ª `.class` å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åè¢«ç±»åŠ è½½å™¨ï¼ˆClass Loaderï¼‰åŠ è½½è¿› JVM çš„å†…å­˜ä¸­ï¼Œ**åŒæ—¶ä¼šåˆ›å»ºä¸€ä¸ª `Date` ç±»çš„ `Class` å¯¹è±¡å­˜åˆ°å †ä¸­**ï¼ˆæ³¨æ„è¿™ä¸ªä¸æ˜¯ new å‡ºæ¥çš„å¯¹è±¡ï¼Œè€Œæ˜¯ç±»çš„ç±»å‹å¯¹è±¡ï¼‰ã€‚JVM åœ¨åˆ›å»º `Date` å¯¹è±¡å‰ï¼Œä¼šå…ˆæ£€æŸ¥å…¶ç±»æ˜¯å¦åŠ è½½ï¼Œå¯»æ‰¾ç±»å¯¹åº”çš„ `Class` å¯¹è±¡ï¼Œè‹¥åŠ è½½å¥½ï¼Œåˆ™ä¸ºå…¶åˆ†é…å†…å­˜ï¼Œç„¶åå†è¿›è¡Œåˆå§‹åŒ– `new Date()`ã€‚

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220201500.png)



éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**æ¯ä¸ªç±»åªæœ‰ä¸€ä¸ª `Class` å¯¹è±¡**ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬æœ‰ç¬¬äºŒæ¡ `new Date()` è¯­å¥ï¼ŒJVM ä¸ä¼šå†ç”Ÿæˆä¸€ä¸ª `Date` çš„ `Class` å¯¹è±¡ï¼Œå› ä¸ºå·²ç»å­˜åœ¨ä¸€ä¸ªäº†ã€‚è¿™ä¹Ÿä½¿å¾—æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `==` è¿ç®—ç¬¦å®ç°ä¸¤ä¸ªç±»å¯¹è±¡æ¯”è¾ƒçš„æ“ä½œï¼š

```java
System.out.println(date.getClass() == Date.getClass()); // true
```

OKï¼Œé‚£ä¹ˆåœ¨åŠ è½½å®Œä¸€ä¸ªç±»åï¼Œå †å†…å­˜çš„æ–¹æ³•åŒºå°±äº§ç”Ÿäº†ä¸€ä¸ª `Class` å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±åŒ…å«äº†å®Œæ•´çš„ç±»çš„ç»“æ„ä¿¡æ¯ï¼Œ**æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ª `Class` å¯¹è±¡çœ‹åˆ°ç±»çš„ç»“æ„**ï¼Œå°±å¥½æ¯”ä¸€é¢é•œå­ã€‚æ‰€ä»¥æˆ‘ä»¬å½¢è±¡çš„ç§°ä¹‹ä¸ºï¼šåå°„ã€‚

è¯´çš„å†è¯¦ç»†ç‚¹ï¼Œå†è§£é‡Šä¸€ä¸‹ã€‚ä¸Šæ–‡è¯´è¿‡ï¼Œåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€å®šæ˜¯å…ˆæœ‰ç±»å†æœ‰å¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªé€šå¸¸æƒ…å†µç§°ä¸º â€œæ­£â€ã€‚é‚£ä¹ˆåå°„ä¸­çš„è¿™ä¸ª â€œåâ€ æˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸ºæ ¹æ®å¯¹è±¡æ‰¾åˆ°å¯¹è±¡æ‰€å±çš„ç±»ï¼ˆå¯¹è±¡çš„å‡ºå¤„ï¼‰

```java
Date date = new Date();
System.out.println(date.getClass()); // "class java.util.Date"
```

é€šè¿‡åå°„ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨äº† `getClass()` æ–¹æ³•åï¼Œæˆ‘ä»¬å°±è·å¾—äº† `Date` ç±»å¯¹åº”çš„ `Class` å¯¹è±¡ï¼Œçœ‹åˆ°äº† `Date` ç±»çš„ç»“æ„ï¼Œè¾“å‡ºäº† `Date` å¯¹è±¡æ‰€å±çš„ç±»çš„å®Œæ•´åç§°ï¼Œå³æ‰¾åˆ°äº†å¯¹è±¡çš„å‡ºå¤„ã€‚å½“ç„¶ï¼Œè·å– `Class` å¯¹è±¡çš„æ–¹å¼ä¸æ­¢è¿™ä¸€ç§ã€‚

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220201817.png)

## 3. è·å– Class ç±»å¯¹è±¡çš„å››ç§æ–¹å¼

ä» `Class` ç±»çš„æºç å¯ä»¥çœ‹å‡ºï¼Œå®ƒçš„æ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ JVM å¯ä»¥åˆ›å»º `Class` ç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸èƒ½åƒæ™®é€šç±»ä¸€æ ·ç›´æ¥ new ä¸€ä¸ª `Class` å¯¹è±¡ã€‚

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220202541.png)

æˆ‘ä»¬åªèƒ½é€šè¿‡å·²æœ‰çš„ç±»æ¥å¾—åˆ°ä¸€ä¸ª `Class `ç±»å¯¹è±¡ï¼ŒJava æä¾›äº†å››ç§æ–¹å¼ï¼š

**ç¬¬ä¸€ç§ï¼šçŸ¥é“å…·ä½“ç±»çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨**ï¼š

```java
Class alunbarClass = TargetObject.class;
```

ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬æ˜¯ä¸çŸ¥é“å…·ä½“ç±»çš„ï¼ŒåŸºæœ¬éƒ½æ˜¯é€šè¿‡éå†åŒ…ä¸‹é¢çš„ç±»æ¥è·å– Class å¯¹è±¡ï¼Œé€šè¿‡æ­¤æ–¹å¼è·å– Class å¯¹è±¡ä¸ä¼šè¿›è¡Œåˆå§‹åŒ–ã€‚

**ç¬¬äºŒç§ï¼šé€šè¿‡ `Class.forName() `ä¼ å…¥å…¨ç±»åè·å–**ï¼š

```java
Class alunbarClass1 = Class.forName("com.xxx.TargetObject");
```

è¿™ä¸ªæ–¹æ³•å†…éƒ¨å®é™…è°ƒç”¨çš„æ˜¯ `forName0`ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220202713.png)

ç¬¬ 2 ä¸ª `boolean` å‚æ•°è¡¨ç¤ºç±»æ˜¯å¦éœ€è¦åˆå§‹åŒ–ï¼Œ<u>é»˜è®¤æ˜¯éœ€è¦åˆå§‹åŒ–</u>ã€‚ä¸€æ—¦åˆå§‹åŒ–ï¼Œå°±ä¼šè§¦å‘ç›®æ ‡å¯¹è±¡çš„ `static` å—ä»£ç æ‰§è¡Œï¼Œ`static` å‚æ•°ä¹Ÿä¼šè¢«å†æ¬¡åˆå§‹åŒ–ã€‚

**ç¬¬ä¸‰ç§ï¼šé€šè¿‡å¯¹è±¡å®ä¾‹ `instance.getClass()` è·å–**ï¼š

```java
Date date = new Date();
Class alunbarClass2 = date.getClass(); // è·å–è¯¥å¯¹è±¡å®ä¾‹çš„ Class ç±»å¯¹è±¡
```

**ç¬¬å››ç§ï¼šé€šè¿‡ç±»åŠ è½½å™¨ `xxxClassLoader.loadClass()` ä¼ å…¥ç±»è·¯å¾„è·å–**

```java
class clazz = ClassLoader.LoadClass("com.xxx.TargetObject");
```

<u>é€šè¿‡ç±»åŠ è½½å™¨è·å– Class å¯¹è±¡ä¸ä¼šè¿›è¡Œåˆå§‹åŒ–</u>ï¼Œæ„å‘³ç€ä¸è¿›è¡ŒåŒ…æ‹¬åˆå§‹åŒ–ç­‰ä¸€äº›åˆ—æ­¥éª¤ï¼Œé™æ€å—å’Œé™æ€å¯¹è±¡ä¸ä¼šå¾—åˆ°æ‰§è¡Œã€‚è¿™é‡Œå¯ä»¥å’Œ `forName` åšä¸ªå¯¹æ¯”ã€‚

## 4. é€šè¿‡åå°„æ„é€ ä¸€ä¸ªç±»çš„å®ä¾‹

ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†è·å– `Class` ç±»å¯¹è±¡çš„æ–¹å¼ï¼Œé‚£ä¹ˆæˆåŠŸè·å–ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦æ„é€ å¯¹åº”ç±»çš„å®ä¾‹ã€‚ä¸‹é¢ä»‹ç»ä¸‰ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§æœ€ä¸ºå¸¸è§ï¼Œæœ€åä¸€ç§å¤§å®¶ç¨ä½œäº†è§£å³å¯ã€‚

### â‘  ä½¿ç”¨ Class.newInstance

ä¸¾ä¸ªä¾‹å­ï¼š

```java
Date date1 = new Date();
Class alunbarClass2 = date1.getClass();
Date date2 = alunbarClass2.newInstance(); // åˆ›å»ºä¸€ä¸ªä¸ alunbarClass2 å…·æœ‰ç›¸åŒç±»ç±»å‹çš„å®ä¾‹
```

åˆ›å»ºäº†ä¸€ä¸ªä¸ `alunbarClass2` å…·æœ‰ç›¸åŒç±»ç±»å‹çš„å®ä¾‹ã€‚ 

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**`newInstance `æ–¹æ³•è°ƒç”¨é»˜è®¤çš„æ„é€ å‡½æ•°ï¼ˆæ— å‚æ„é€ å‡½æ•°ï¼‰åˆå§‹åŒ–æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªç±»æ²¡æœ‰é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œ å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸**ã€‚

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220204343.png)

### â‘¡ é€šè¿‡åå°„å…ˆè·å–æ„é€ æ–¹æ³•å†è°ƒç”¨

ç”±äºä¸æ˜¯æ‰€æœ‰çš„ç±»éƒ½æœ‰æ— å‚æ„é€ å‡½æ•°åˆæˆ–è€…ç±»æ„é€ å™¨æ˜¯ `private` çš„ï¼Œåœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¿˜æƒ³é€šè¿‡åå°„æ¥å®ä¾‹åŒ–å¯¹è±¡ï¼Œ`Class.newInstance` æ˜¯æ— æ³•æ»¡è¶³çš„ã€‚

æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `Constructor` çš„ `newInstance` æ–¹æ³•æ¥å®ç°ï¼Œå…ˆè·å–æ„é€ å‡½æ•°ï¼Œå†æ‰§è¡Œæ„é€ å‡½æ•°ã€‚

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220214318.png)

ä»ä¸Šé¢ä»£ç å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œ`Constructor.newInstance` æ˜¯å¯ä»¥æºå¸¦å‚æ•°çš„ï¼Œè€Œ `Class.newInstance` æ˜¯æ— å‚çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå®ƒåªèƒ½è°ƒç”¨æ— å‚æ„é€ å‡½æ•°çš„åŸå› äº†ã€‚

> å¤§å®¶ä¸è¦æŠŠè¿™ä¸¤ä¸ª `newInstance` æ–¹æ³•å¼„æ··äº†ã€‚å¦‚æœè¢«è°ƒç”¨çš„ç±»çš„æ„é€ å‡½æ•°ä¸ºé»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œé‡‡ç”¨`Class.newInstance()` æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©ï¼Œ ä¸€å¥ä»£ç å°± OKï¼›å¦‚æœéœ€è¦è°ƒç”¨ç±»çš„å¸¦å‚æ„é€ å‡½æ•°ã€ç§æœ‰æ„é€ å‡½æ•°ç­‰ï¼Œ å°±éœ€è¦é‡‡ç”¨ `Constractor.newInstance()`

`Constructor.newInstance` æ˜¯æ‰§è¡Œæ„é€ å‡½æ•°çš„æ–¹æ³•ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹è·å–æ„é€ å‡½æ•°å¯ä»¥é€šè¿‡å“ªäº›æ¸ é“ï¼Œä½œç”¨å¦‚å…¶åï¼Œä»¥ä¸‹å‡ ä¸ªæ–¹æ³•éƒ½æ¯”è¾ƒå¥½è®°ä¹Ÿå®¹æ˜“ç†è§£ï¼Œè¿”å›å€¼éƒ½é€šè¿‡ `Cnostructor` ç±»å‹æ¥æ¥æ”¶ã€‚

**æ‰¹é‡è·å–æ„é€ å‡½æ•°**ï¼š

1ï¼‰è·å–æ‰€æœ‰"å…¬æœ‰çš„"æ„é€ æ–¹æ³•

```java
public Constructor[] getConstructors() { }
```

2ï¼‰è·å–æ‰€æœ‰çš„æ„é€ æ–¹æ³•ï¼ˆåŒ…æ‹¬ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤ã€å…¬æœ‰ï¼‰

```java
public Constructor[] getDeclaredConstructors() { }
```

**å•ä¸ªè·å–æ„é€ å‡½æ•°**ï¼š

1ï¼‰è·å–ä¸€ä¸ªæŒ‡å®šå‚æ•°ç±»å‹çš„"å…¬æœ‰çš„"æ„é€ æ–¹æ³•

```java
public Constructor getConstructor(Class... parameterTypes) { }
```

2ï¼‰è·å–ä¸€ä¸ªæŒ‡å®šå‚æ•°ç±»å‹çš„"æ„é€ æ–¹æ³•"ï¼Œå¯ä»¥æ˜¯ç§æœ‰çš„ï¼Œæˆ–å—ä¿æŠ¤ã€é»˜è®¤ã€å…¬æœ‰

```java
public Constructor getDeclaredConstructor(Class... parameterTypes) { }
```

ä¸¾ä¸ªä¾‹å­ï¼š

```java
package fanshe;

public class Student {
	//ï¼ˆé»˜è®¤çš„æ„é€ æ–¹æ³•ï¼‰
	Student(String str){
		System.out.println("(é»˜è®¤)çš„æ„é€ æ–¹æ³• s = " + str);
	}
	// æ— å‚æ„é€ æ–¹æ³•
	public Student(){
		System.out.println("è°ƒç”¨äº†å…¬æœ‰ã€æ— å‚æ„é€ æ–¹æ³•æ‰§è¡Œäº†ã€‚ã€‚ã€‚");
	}
	// æœ‰ä¸€ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•
	public Student(char name){
		System.out.println("å§“åï¼š" + name);
	}
	// æœ‰å¤šä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•
	public Student(String name ,int age){
		System.out.println("å§“åï¼š"+name+"å¹´é¾„ï¼š"+ age);//è¿™çš„æ‰§è¡Œæ•ˆç‡æœ‰é—®é¢˜ï¼Œä»¥åè§£å†³ã€‚
	}
	// å—ä¿æŠ¤çš„æ„é€ æ–¹æ³•
	protected Student(boolean n){
		System.out.println("å—ä¿æŠ¤çš„æ„é€ æ–¹æ³• n = " + n);
	}
	// ç§æœ‰æ„é€ æ–¹æ³•
	private Student(int age){
		System.out.println("ç§æœ‰çš„æ„é€ æ–¹æ³•å¹´é¾„ï¼š"+ age);
	}
}

----------------------------------
    
public class Constructors {
	public static void main(String[] args) throws Exception {
		// åŠ è½½Classå¯¹è±¡
		Class clazz = Class.forName("fanshe.Student");
        
		// è·å–æ‰€æœ‰å…¬æœ‰æ„é€ æ–¹æ³•
		Constructor[] conArray = clazz.getConstructors();
		for(Constructor c : conArray){
			System.out.println(c);
		}
        
		// è·å–æ‰€æœ‰çš„æ„é€ æ–¹æ³•(åŒ…æ‹¬ï¼šç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤ã€å…¬æœ‰)
		conArray = clazz.getDeclaredConstructors();
		for(Constructor c : conArray){
			System.out.println(c);
		}
        
		// è·å–å…¬æœ‰ã€æ— å‚çš„æ„é€ æ–¹æ³•
        // å› ä¸ºæ˜¯æ— å‚çš„æ„é€ æ–¹æ³•æ‰€ä»¥ç±»å‹æ˜¯ä¸€ä¸ªnull,ä¸å†™ä¹Ÿå¯ä»¥ï¼šè¿™é‡Œéœ€è¦çš„æ˜¯ä¸€ä¸ªå‚æ•°çš„ç±»å‹ï¼Œåˆ‡è®°æ˜¯ç±»å‹
		// è¿”å›çš„æ˜¯æè¿°è¿™ä¸ªæ— å‚æ„é€ å‡½æ•°çš„ç±»å¯¹è±¡ã€‚
		Constructor con = clazz.getConstructor(null);
		Object obj = con.newInstance(); // è°ƒç”¨æ„é€ æ–¹æ³•
		
		// è·å–ç§æœ‰æ„é€ æ–¹æ³•
		con = clazz.getDeclaredConstructor(int.class);
		System.out.println(con);
		con.setAccessible(true); // ä¸ºäº†è°ƒç”¨ private æ–¹æ³•/åŸŸ æˆ‘ä»¬éœ€è¦å–æ¶ˆå®‰å…¨æ£€æŸ¥
		obj = con.newInstance(12); // è°ƒç”¨æ„é€ æ–¹æ³•
	}
}
```

### â‘¢ ä½¿ç”¨å¼€æºåº“ Objenesis

Objenesis æ˜¯ä¸€ä¸ªå¼€æºåº“ï¼Œå’Œä¸Šè¿°ç¬¬äºŒç§æ–¹æ³•ä¸€æ ·ï¼Œå¯ä»¥è°ƒç”¨ä»»æ„çš„æ„é€ å‡½æ•°ï¼Œä¸è¿‡å°è£…çš„æ¯”è¾ƒç®€æ´ï¼š

```java
public class Test {
    // ä¸å­˜åœ¨æ— å‚æ„é€ å‡½æ•°
    private int i;
    public Test(int i){
        this.i = i;
    }
    public void show(){
        System.out.println("test..." + i);
    }
}

------------------------
    
public static void main(String[] args) {
        Objenesis objenesis = new ObjenesisStd(true);
        Test test = objenesis.newInstance(Test.class);
        test.show();
    }
```

ä½¿ç”¨éå¸¸ç®€å•ï¼Œ`Objenesis` ç”±å­ç±» `ObjenesisObjenesisStd`å®ç°ã€‚è¯¦ç»†æºç æ­¤å¤„å°±ä¸æ·±ç©¶äº†ï¼Œäº†è§£å³å¯ã€‚

## 5. é€šè¿‡åå°„è·å–æˆå‘˜å˜é‡å¹¶ä½¿ç”¨

å’Œè·å–æ„é€ å‡½æ•°å·®ä¸å¤šï¼Œè·å–æˆå‘˜å˜é‡ä¹Ÿåˆ†æ‰¹é‡è·å–å’Œå•ä¸ªè·å–ã€‚è¿”å›å€¼é€šè¿‡ `Field` ç±»å‹æ¥æ¥æ”¶ã€‚

**æ‰¹é‡è·å–**ï¼š

1ï¼‰è·å–æ‰€æœ‰å…¬æœ‰çš„å­—æ®µ

```java
public Field[] getFields() { }
```

2ï¼‰è·å–æ‰€æœ‰çš„å­—æ®µï¼ˆåŒ…æ‹¬ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤çš„ï¼‰

```java
public Field[] getDeclaredFields() { }
```

**å•ä¸ªè·å–**ï¼š

1ï¼‰è·å–ä¸€ä¸ªæŒ‡å®šåç§°çš„å…¬æœ‰çš„å­—æ®µ

```java
public Field getField(String name) { }
```

2ï¼‰è·å–ä¸€ä¸ªæŒ‡å®šåç§°çš„å­—æ®µï¼Œå¯ä»¥æ˜¯ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤çš„

```java
public Field getDeclaredField(String name) { }
```

è·å–åˆ°æˆå‘˜å˜é‡ä¹‹åï¼Œå¦‚ä½•ä¿®æ”¹å®ƒä»¬çš„å€¼å‘¢ï¼Ÿ

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220211126.png)

`set` æ–¹æ³•åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼š

- objï¼šå“ªä¸ªå¯¹è±¡è¦ä¿®æ”¹è¿™ä¸ªæˆå‘˜å˜é‡
- valueï¼šè¦ä¿®æ”¹æˆå“ªä¸ªå€¼

ä¸¾ä¸ªä¾‹å­:

```java
package fanshe.field;

public class Student {
	public Student(){
        
	}
	
	public String name;
	protected int age;
	char sex;
	private String phoneNum;
	
	@Override
	public String toString() {
		return "Student [name=" + name + ", age=" + age + ", sex=" + sex
				+ ", phoneNum=" + phoneNum + "]";
	}
}

----------------------------------
    
public class Fields {
    public static void main(String[] args) throws Exception {
        // è·å– Class å¯¹è±¡
        Class stuClass = Class.forName("fanshe.field.Student");
        // è·å–å…¬æœ‰çš„æ— å‚æ„é€ å‡½æ•°
        Constructor con = stuClass.getConstructor();
		
		// è·å–ç§æœ‰æ„é€ æ–¹æ³•
		con = clazz.getDeclaredConstructor(int.class);
		System.out.println(con);
		con.setAccessible(true); // ä¸ºäº†è°ƒç”¨ private æ–¹æ³•/åŸŸ æˆ‘ä»¬éœ€è¦å–æ¶ˆå®‰å…¨æ£€æŸ¥
		obj = con.newInstance(12); // è°ƒç”¨æ„é€ æ–¹æ³•
        
        // è·å–æ‰€æœ‰å…¬æœ‰çš„å­—æ®µ
        Field[] fieldArray = stuClass.getFields();
        for(Field f : fieldArray){
            System.out.println(f);
        }

         // è·å–æ‰€æœ‰çš„å­—æ®µ (åŒ…æ‹¬ç§æœ‰ã€å—ä¿æŠ¤ã€é»˜è®¤çš„)
        fieldArray = stuClass.getDeclaredFields();
        for(Field f : fieldArray){
            System.out.println(f);
        }

        // è·å–æŒ‡å®šåç§°çš„å…¬æœ‰å­—æ®µ
        Field f = stuClass.getField("name");
        Object obj = con.newInstance(); // è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåˆ›å»ºè¯¥ç±»çš„å®ä¾‹
        f.set(obj, "åˆ˜å¾·å"); // ä¸º Student å¯¹è±¡ä¸­çš„ name å±æ€§èµ‹å€¼


        // è·å–ç§æœ‰å­—æ®µ
        f = stuClass.getDeclaredField("phoneNum");
        f.setAccessible(true); // æš´åŠ›åå°„ï¼Œè§£é™¤ç§æœ‰é™å®š
        f.set(obj, "18888889999"); // ä¸º Student å¯¹è±¡ä¸­çš„ phoneNum å±æ€§èµ‹å€¼
    }
}
```

## 6. é€šè¿‡åå°„è·å–æˆå‘˜æ–¹æ³•å¹¶è°ƒç”¨

åŒæ ·çš„ï¼Œè·å–æˆå‘˜æ–¹æ³•ä¹Ÿåˆ†æ‰¹é‡è·å–å’Œå•ä¸ªè·å–ã€‚è¿”å›å€¼é€šè¿‡ `Method` ç±»å‹æ¥æ¥æ”¶ã€‚

**æ‰¹é‡è·å–**ï¼š

1ï¼‰è·å–æ‰€æœ‰"å…¬æœ‰æ–¹æ³•"ï¼ˆåŒ…å«çˆ¶ç±»çš„æ–¹æ³•ï¼Œå½“ç„¶ä¹ŸåŒ…å« `Object` ç±»ï¼‰

```java
public Method[] getMethods() { }
```

2ï¼‰è·å–æ‰€æœ‰çš„æˆå‘˜æ–¹æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰çš„ï¼ˆä¸åŒ…æ‹¬ç»§æ‰¿çš„ï¼‰

```java
public Method[] getDeclaredMethods() { }
```

**å•ä¸ªè·å–**ï¼š

è·å–ä¸€ä¸ªæŒ‡å®šæ–¹æ³•åå’Œå‚æ•°ç±»å‹çš„æˆå‘˜æ–¹æ³•ï¼š

```java
public Method getMethod(String name, Class<?>... parameterTypes)
```

è·å–åˆ°æ–¹æ³•ä¹‹åè¯¥æ€ä¹ˆè°ƒç”¨å®ƒä»¬å‘¢ï¼Ÿ

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20210220210903.png)

`invoke` æ–¹æ³•ä¸­åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼š

- objï¼šå“ªä¸ªå¯¹è±¡è¦æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•
- argsï¼šè°ƒç”¨æ–¹æ³•æ—¶æ‰€ä¼ é€’çš„å®å‚

ä¸¾ä¸ªä¾‹å­ï¼š

```java
package fanshe.method;
 
public class Student {
	public void show1(String s){
		System.out.println("è°ƒç”¨äº†ï¼šå…¬æœ‰çš„ï¼ŒStringå‚æ•°çš„show1(): s = " + s);
	}
	protected void show2(){
		System.out.println("è°ƒç”¨äº†ï¼šå—ä¿æŠ¤çš„ï¼Œæ— å‚çš„show2()");
	}
	void show3(){
		System.out.println("è°ƒç”¨äº†ï¼šé»˜è®¤çš„ï¼Œæ— å‚çš„show3()");
	}
	private String show4(int age){
		System.out.println("è°ƒç”¨äº†ï¼Œç§æœ‰çš„ï¼Œå¹¶ä¸”æœ‰è¿”å›å€¼çš„ï¼Œintå‚æ•°çš„show4(): age = " + age);
		return "abcd";
	}
}

-------------------------------------------
public class MethodClass {
	public static void main(String[] args) throws Exception {
		// è·å– Classå¯¹è±¡
		Class stuClass = Class.forName("fanshe.method.Student");
        // è·å–å…¬æœ‰çš„æ— å‚æ„é€ å‡½æ•°
        Constructor con = stuClass.getConstructor();
        
		// è·å–æ‰€æœ‰å…¬æœ‰æ–¹æ³•
		stuClass.getMethods();
		Method[] methodArray = stuClass.getMethods();
		for(Method m : methodArray){
			System.out.println(m);
		}
        
		// è·å–æ‰€æœ‰çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰çš„
		methodArray = stuClass.getDeclaredMethods();
		for(Method m : methodArray){
			System.out.println(m);
		}
        
		// è·å–å…¬æœ‰çš„show1()æ–¹æ³•
		Method m = stuClass.getMethod("show1", String.class);
		System.out.println(m);
		Object obj = con.newInstance(); // è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå®ä¾‹åŒ–ä¸€ä¸ª Student å¯¹è±¡
		m.invoke(obj, "å°ç‰›è‚‰");
		
		// è·å–ç§æœ‰çš„show4()æ–¹æ³•
		m = stuClass.getDeclaredMethod("show4", int.class);
		m.setAccessible(true); // è§£é™¤ç§æœ‰é™å®š
		Object result = m.invoke(obj, 20);
		System.out.println("è¿”å›å€¼ï¼š" + result);
	}
}
```

## 7. åå°„æœºåˆ¶ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**ï¼š æ¯”è¾ƒçµæ´»ï¼Œèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–ç±»çš„å®ä¾‹ã€‚

**ç¼ºç‚¹**ï¼š

1ï¼‰æ€§èƒ½ç“¶é¢ˆï¼šåå°„ç›¸å½“äºä¸€ç³»åˆ—è§£é‡Šæ“ä½œï¼Œé€šçŸ¥ JVM è¦åšçš„äº‹æƒ…ï¼Œæ€§èƒ½æ¯”ç›´æ¥çš„ Java ä»£ç è¦æ…¢å¾ˆå¤šã€‚

2ï¼‰å®‰å…¨é—®é¢˜ï¼šåå°„æœºåˆ¶ç ´åäº†å°è£…æ€§ï¼Œå› ä¸ºé€šè¿‡åå°„å¯ä»¥è·å–å¹¶è°ƒç”¨ç±»çš„ç§æœ‰æ–¹æ³•å’Œå­—æ®µã€‚

## 8. åå°„çš„ç»å…¸åº”ç”¨åœºæ™¯

åå°„åœ¨æˆ‘ä»¬å®é™…ç¼–ç¨‹ä¸­å…¶å®å¹¶ä¸ä¼šç›´æ¥å¤§é‡çš„ä½¿ç”¨ï¼Œä½†æ˜¯å®é™…ä¸Šæœ‰å¾ˆå¤šè®¾è®¡éƒ½ä¸åå°„æœºåˆ¶æœ‰å…³ï¼Œæ¯”å¦‚ï¼š

- åŠ¨æ€ä»£ç†æœºåˆ¶
- ä½¿ç”¨ JDBC è¿æ¥æ•°æ®åº“
- Spring / Hibernate æ¡†æ¶ï¼ˆå®é™…ä¸Šæ˜¯å› ä¸ºä½¿ç”¨äº†åŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥æ‰å’Œåå°„æœºåˆ¶æœ‰å…³ï¼‰

> ä¸ºä»€ä¹ˆè¯´åŠ¨æ€ä»£ç†ä½¿ç”¨äº†åå°„æœºåˆ¶ï¼Œä¸‹ç¯‡æ–‡ç« ä¼šç»™å‡ºè¯¦ç»†è§£é‡Šã€‚

### JDBC è¿æ¥æ•°æ®åº“

åœ¨ JDBC çš„æ“ä½œä¸­ï¼Œå¦‚æœè¦æƒ³è¿›è¡Œæ•°æ®åº“çš„è¿æ¥ï¼Œåˆ™å¿…é¡»æŒ‰ç…§ä»¥ä¸‹å‡ æ­¥å®Œæˆï¼š

- é€šè¿‡ `Class.forName()` åŠ è½½æ•°æ®åº“çš„é©±åŠ¨ç¨‹åº ï¼ˆé€šè¿‡åå°„åŠ è½½ï¼‰
- é€šè¿‡ `DriverManager` ç±»è¿æ¥æ•°æ®åº“ï¼Œå‚æ•°åŒ…å«æ•°æ®åº“çš„è¿æ¥åœ°å€ã€ç”¨æˆ·åã€å¯†ç 
- é€šè¿‡ `Connection` æ¥å£æ¥æ”¶è¿æ¥
- å…³é—­è¿æ¥

```java
public static void main(String[] args) throws Exception {  
        Connection con = null; // æ•°æ®åº“çš„è¿æ¥å¯¹è±¡  
        // 1. é€šè¿‡åå°„åŠ è½½é©±åŠ¨ç¨‹åº
        Class.forName("com.mysql.jdbc.Driver"); 
        // 2. è¿æ¥æ•°æ®åº“  
        con = DriverManager.getConnection(
            "jdbc:mysql://localhost:3306/test","root","root"); 
        // 3. å…³é—­æ•°æ®åº“è¿æ¥
        con.close(); 
}
```

### Spring æ¡†æ¶

åå°„æœºåˆ¶æ˜¯ Java æ¡†æ¶è®¾è®¡çš„çµé­‚ï¼Œæ¡†æ¶çš„å†…éƒ¨éƒ½å·²ç»å°è£…å¥½äº†ï¼Œæˆ‘ä»¬è‡ªå·±åŸºæœ¬ç”¨ä¸ç€å†™ã€‚å…¸å‹çš„é™¤äº†Hibernate ä¹‹å¤–ï¼Œè¿˜æœ‰ Spring ä¹Ÿç”¨åˆ°äº†å¾ˆå¤šåå°„æœºåˆ¶ï¼Œæœ€å…¸å‹çš„å°±æ˜¯ Spring é€šè¿‡ xml é…ç½®æ–‡ä»¶è£…è½½ Beanï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰ï¼Œä¹Ÿå°±æ˜¯ **Spring çš„ IoC**ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š

- åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè·å– Spring å®¹å™¨
- ä½¿ç”¨åå°„æœºåˆ¶ï¼Œæ ¹æ®ä¼ å…¥çš„å­—ç¬¦ä¸²è·å¾—æŸä¸ªç±»çš„ Class å®ä¾‹

```java
// è·å– Spring çš„ IoC å®¹å™¨ï¼Œå¹¶æ ¹æ® id è·å–å¯¹è±¡
public static void main(String[] args) {
    // 1.ä½¿ç”¨ ApplicationContext æ¥å£åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè·å– spring å®¹å™¨
    ApplicationContext ac = new ClassPathXmlApplicationContext("spring.xml");
    // 2. ä½¿ç”¨åå°„æœºåˆ¶ï¼Œæ ¹æ®è¿™ä¸ªå­—ç¬¦ä¸²è·å¾—æŸä¸ªç±»çš„ Class å®ä¾‹
    IAccountService aService = (IAccountService) ac.getBean("accountServiceImpl");
    System.out.println(aService);
}
```

å¦å¤–ï¼Œ**Spring AOP ç”±äºä½¿ç”¨äº†åŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥ä¹Ÿä½¿ç”¨äº†åå°„æœºåˆ¶**ï¼Œè¿™ç‚¹æˆ‘ä¼šåœ¨ Spring çš„ç³»åˆ—æ–‡ç« ä¸­è¯¦ç»†è§£é‡Šã€‚

<br>

æœ€åæ”¾ä¸Šè¿™é“é¢˜çš„èƒŒè¯µç‰ˆï¼š

> ğŸ¥¸ **é¢è¯•å®˜**ï¼šè®²ä¸€è®²ä½ å¯¹åå°„çš„ç†è§£ï¼ˆé‡åˆ°è¿™ç§çœ‹ä¼¼å¼€æ”¾å¼çš„é—®é¢˜ï¼Œå½“ç„¶æ˜¯è¯´å¾—è¶Šå…¨é¢è¶Šå¥½ï¼Œä½œç”¨ + åŸç† + ä¼˜åŠ£ + é€‚ç”¨åœºæ™¯ï¼‰
>
> ğŸ˜ **å°ç‰›è‚‰**ï¼šé¦–å…ˆï¼Œåå°„çš„ä½œç”¨ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨åå°„ï¼Ÿ
>
> åå°„æ‹¥æœ‰ä»¥ä¸‹å››å¤§åŠŸèƒ½ï¼š
>
> - åœ¨è¿è¡Œæ—¶ï¼ˆåŠ¨æ€ç¼–è¯‘ï¼‰è·çŸ¥ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚
> - åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ã€‚
> - åœ¨è¿è¡Œæ—¶è·çŸ¥ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚
> - åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§ã€‚
>
> è¿™ç§åŠ¨æ€è·å–ä¿¡æ¯ã€åŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½å°±ç§°ä¸º Java è¯­è¨€çš„åå°„æœºåˆ¶ã€‚
>
> <br>
>
> ç„¶ååå°„çš„å…·ä½“åŸç†ï¼š
>
> åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€å®šæ˜¯å…ˆæœ‰ç±»ç„¶åå† new ä¸€ä¸ªå¯¹è±¡å‡ºæ¥çš„å¯¹å§ï¼Œç±»çš„æ­£å¸¸åŠ è½½è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š
>
> é¦–å…ˆ JVM ä¼šå°†æˆ‘ä»¬çš„ä»£ç ç¼–è¯‘æˆä¸€ä¸ª `.class` å­—èŠ‚ç æ–‡ä»¶ï¼Œç„¶åè¢«ç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰åŠ è½½è¿› JVM çš„å†…å­˜ä¸­ï¼ŒåŒæ—¶ä¼šåˆ›å»ºè¿™ä¸ªç±»çš„ `Class` å¯¹è±¡å­˜åˆ°å †ä¸­ï¼ˆæ³¨æ„è¿™ä¸ªä¸æ˜¯ new å‡ºæ¥çš„å¯¹è±¡ï¼Œè€Œæ˜¯ç±»çš„ç±»å‹å¯¹è±¡ï¼‰ã€‚JVM åœ¨åˆ›å»ºè¿™ä¸ªç±»å¯¹è±¡å‰ï¼Œä¼šå…ˆæ£€æŸ¥å…¶ç±»æ˜¯å¦åŠ è½½ï¼Œå¯»æ‰¾ç±»å¯¹åº”çš„ `Class` å¯¹è±¡ï¼Œè‹¥åŠ è½½å¥½ï¼Œåˆ™ä¸ºå…¶åˆ†é…å†…å­˜ï¼Œç„¶åå†è¿›è¡Œåˆå§‹åŒ– `new` æ“ä½œã€‚
>
> OKï¼Œé‚£ä¹ˆåœ¨åŠ è½½å®Œä¸€ä¸ªç±»åï¼Œå †å†…å­˜çš„æ–¹æ³•åŒºå°±äº§ç”Ÿäº†ä¸€ä¸ª `Class` å¯¹è±¡ï¼Œå¹¶ä¸”åŒ…å«äº†è¿™ä¸ªç±»çš„å®Œæ•´ç»“æ„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ª `Class` å¯¹è±¡çœ‹åˆ°ç±»çš„ç»“æ„ï¼Œå°±å¥½æ¯”ä¸€é¢é•œå­ã€‚æ‰€ä»¥æˆ‘ä»¬å½¢è±¡çš„ç§°ä¹‹ä¸ºï¼šåå°„ã€‚
>
> è¯´çš„å†è¯¦ç»†ç‚¹ï¼Œåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€å®šæ˜¯å…ˆæœ‰ç±»å†æœ‰å¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªé€šå¸¸æƒ…å†µç§°ä¸º â€œæ­£â€ã€‚é‚£ä¹ˆåå°„ä¸­çš„è¿™ä¸ª â€œåâ€ æˆ‘ä»¬å°±å¯ä»¥ç†è§£ä¸ºæ ¹æ®å¯¹è±¡æ‰¾åˆ°å¯¹è±¡æ‰€å±çš„ç±»ï¼ˆå¯¹è±¡çš„å‡ºå¤„ï¼‰
>
> é€šè¿‡åå°„ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨äº† `getClass()` æ–¹æ³•åï¼Œæˆ‘ä»¬å°±è·å¾—äº†è¿™ä¸ªç±»ç±»å¯¹åº”çš„ `Class` å¯¹è±¡ï¼Œçœ‹åˆ°äº†è¿™ä¸ªç±»çš„ç»“æ„ï¼Œè¾“å‡ºäº†ç±»å¯¹è±¡æ‰€å±çš„ç±»çš„å®Œæ•´åç§°ï¼Œå³æ‰¾åˆ°äº†å¯¹è±¡çš„å‡ºå¤„ã€‚å½“ç„¶ï¼Œè·å– `Class` å¯¹è±¡çš„æ–¹å¼é™¤äº†è°ƒç”¨ `getClass()` å¤–è¿˜æœ‰å¦å¤–ä¸‰ç§æ–¹æ³•ï¼Œbalabala......
>
> <br>
>
> åå°„çš„ä¼˜ç‚¹å°±æ˜¯æ¯”è¾ƒçµæ´»ï¼Œèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–ç±»çš„å®ä¾‹ã€‚
>
> ä¸è¿‡åå°„ä¹Ÿå­˜åœ¨å¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼š
>
> 1ï¼‰æ€§èƒ½ç“¶é¢ˆï¼šåå°„ç›¸å½“äºä¸€ç³»åˆ—è§£é‡Šæ“ä½œï¼Œé€šçŸ¥ JVM è¦åšçš„äº‹æƒ…ï¼Œæ€§èƒ½æ¯”ç›´æ¥çš„ Java ä»£ç è¦æ…¢å¾ˆå¤šã€‚
>
> 2ï¼‰å®‰å…¨é—®é¢˜ï¼šåå°„æœºåˆ¶ç ´åäº†å°è£…æ€§ï¼Œå› ä¸ºé€šè¿‡åå°„å¯ä»¥è·å–å¹¶è°ƒç”¨ç±»çš„ç§æœ‰æ–¹æ³•å’Œå­—æ®µã€‚
>
> <br>
>
> åå°„åœ¨æˆ‘ä»¬å®é™…ç¼–ç¨‹ä¸­å…¶å®å¹¶ä¸ä¼šç›´æ¥å¤§é‡çš„ä½¿ç”¨ï¼Œä½†æ˜¯å®é™…ä¸Šæœ‰å¾ˆå¤šè®¾è®¡éƒ½ä¸åå°„æœºåˆ¶æœ‰å…³ï¼Œæ¯”å¦‚ï¼š
>
> - åŠ¨æ€ä»£ç†æœºåˆ¶
> - ä½¿ç”¨ JDBC è¿æ¥æ•°æ®åº“
> - Spring / Hibernate æ¡†æ¶ï¼ˆå®é™…ä¸Šæ˜¯å› ä¸ºä½¿ç”¨äº†åŠ¨æ€ä»£ç†ï¼Œæ‰€ä»¥æ‰å’Œåå°„æœºåˆ¶æœ‰å…³ï¼Œè¿™ä¸ªåœ°æ–¹å¯ä»¥é…Œæƒ…æ‰©å±•ï¼‰
>
> <br>
>
> è¿™ä¸€å¥—è¯´å®Œï¼Œé¢è¯•å®˜å¾ˆæœ‰å¯èƒ½æ ¹æ®ä½ è¯´çš„ç»§ç»­å¯¹åŠ¨æ€ä»£ç†æˆ–è€… JVM è¿™å—è¿›è¡Œæ‰©å±•...... æˆ‘å…ˆå‘Šè¾






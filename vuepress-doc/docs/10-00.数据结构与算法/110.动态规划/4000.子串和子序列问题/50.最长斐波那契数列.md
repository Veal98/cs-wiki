---
title: æœ€é•¿æ–æ³¢é‚£å¥‘æ•°åˆ—
date: 2022-05-11 10:18:25
permalink: /pages/c79538/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 093. æœ€é•¿æ–æ³¢é‚£å¥‘æ•°åˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/Q91FMA/)
- [873. æœ€é•¿çš„æ–æ³¢é‚£å¥‘å­åºåˆ—çš„é•¿åº¦ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/length-of-longest-fibonacci-subsequence/)

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220511101852.png)

## ğŸ”” è§£é¢˜æ€è·¯

äºŒç»´æ•°ç»„ `dp[i][j]`ï¼šè¡¨ç¤ºä»¥ arr[i] ä¸ºå€’æ•°ç¬¬äºŒä¸ªæ•°å­—ï¼Œarr[j] ä¸ºæœ€åä¸€ä¸ªæ•°å­—çš„æ–æ³¢é‚£å¥‘åºåˆ—çš„é•¿åº¦

å¦‚æœæ•°ç»„ä¸­å­˜åœ¨ä¸€ä¸ªæ•°å­— kï¼Œä½¿å¾— arr[k] + arr[i] = arr[j]ï¼Œé‚£ä¹ˆ `dp[i][j] = dp[k][i] + 1`ï¼Œå³åœ¨ä»¥ arr[i] ä¸ºæœ€åä¸€ä¸ªæ•°å­—ã€arr[k] ä¸ºå€’æ•°ç¬¬ 2 ä¸ªæ•°å­—çš„æ–æ³¢é‚£å¥‘æ•°åˆ—çš„åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªæ•°å­— arr[j]ï¼Œå½¢æˆæ›´é•¿çš„ä¸€ä¸ªæ•°åˆ—ã€‚

`dp[i][j]` çš„å€¼åˆå§‹åŒ–ä¸º 2ï¼Œæ­¤æ—¶è™½ç„¶ arr[i] å’Œ arr[j] è¿™ä¸¤ä¸ªæ•°å­—ç°åœ¨è¿˜ä¸èƒ½å½¢æˆä¸€ä¸ªæœ‰æ•ˆçš„æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œä½†å¯èƒ½ä¼šåœ¨ä¹‹åå¢åŠ ä¸€ä¸ªæ–°çš„æ•°å­—ä½¿ä¹‹å½¢æˆé•¿åº¦ä¸º 3 ç”šè‡³æ›´é•¿çš„æ–æ³¢é‚£å¥‘æ•°åˆ—ã€‚

> å¯¹äºå¯»æ‰¾ k çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ HashMap(æ—¶é—´å¤æ‚åº¦ O(1)) è€Œä¸æ˜¯ for å¾ªç¯(æ—¶é—´å¤æ‚åº¦ O(N))


```java
class Solution {
    public int lenLongestFibSubseq(int[] arr) {
        int n = arr.length;
        // dp[i][j]ï¼šä»¥ arr[i] ä¸ºå€’æ•°ç¬¬äºŒä¸ªæ•°å­—ï¼Œarr[j] ä¸ºæœ€åä¸€ä¸ªæ•°å­—çš„æ–æ³¢é‚£å¥‘åºåˆ—çš„é•¿åº¦
        int[][] dp = new int[n][n];

        // key: arr å…ƒç´ å€¼ï¼›value: å¯¹åº”ä¸‹æ ‡
        Map<Integer, Integer> map = new HashMap<>();
        for (int i = 0; i < n; i ++) {
            map.put(arr[i], i);
        }

        // æœ€é•¿çš„æ–æ³¢é‚£å¥‘å¼çš„å­åºåˆ—çš„é•¿åº¦
        int res = 2;

        // ä»¥ arr[j] ä¸ºæœ€åä¸€ä¸ªæ•°å­—
        for (int j = 1; j < n; j ++) {
            // ä»¥ arr[i] ä¸ºå€’æ•°ç¬¬äºŒä¸ªæ•°å­—
            for (int i = 0; i < j; i ++) {
                // æ˜¯å¦èƒ½æ‰¾åˆ° arr[k] + arr[i] = arr[j] çš„ k å€¼
                int k = map.getOrDefault(arr[j] - arr[i], -1);
                if (k != -1 && k < i) {
                    dp[i][j] = dp[k][i] + 1;
                }
                else {
                    dp[i][j] = 2;
                }

                res = Math.max(res, dp[i][j]);
            }
        }

        // é¢˜ç›®è¦æ±‚æ–æ³¢é‚£å¥‘åºåˆ—çš„æœ€ä½é•¿åº¦ä¸º 3
        return res >= 3 ? res : 0;
    }
}
```

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šO(N)
- æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)


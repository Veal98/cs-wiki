---
title: æœ€é•¿è¿ç»­åºåˆ—
date: 2022-03-29 15:48:46
permalink: /pages/8292ed/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 119. æœ€é•¿è¿ç»­åºåˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/WhsWhI/)
- [128. æœ€é•¿è¿ç»­åºåˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/longest-consecutive-sequence/)

ç»™å®šä¸€ä¸ª**æœªæ’åº**çš„æ•´æ•°æ•°ç»„ nums ï¼Œæ‰¾å‡ºæ•°å­—è¿ç»­çš„æœ€é•¿åºåˆ—ï¼ˆä¸è¦æ±‚åºåˆ—å…ƒç´ åœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼‰çš„é•¿åº¦ã€‚

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼šnums = [100,4,200,1,3,2]
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æ•°å­—è¿ç»­åºåˆ—æ˜¯ [1, 2, 3, 4]ã€‚å®ƒçš„é•¿åº¦ä¸º 4ã€‚
```

ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥ï¼šnums = [0,3,7,2,5,8,4,6,0,1]
è¾“å‡ºï¼š9
```

## ğŸ”” è§£é¢˜æ€è·¯

### æš´åŠ›


```java
class Solution {
    public int longestConsecutive(int[] nums) {
        if (nums == null || nums.length == 0) {
            return 0;
        }
        if (nums.length == 1) {
            return 1;
        }

        Arrays.sort(nums);
        
        // è®°å½•å½“å‰è¿ç»­åºåˆ—çš„é•¿åº¦
        int len = 1;
        // è®°å½•æœ€å¤§è¿ç»­åºåˆ—çš„é•¿åº¦
        int maxLen = 1;
		
        // ä»¥ nums[i] åšå¼€å¤´çš„æœ€é•¿è¿ç»­åºåˆ—
        // è¿™é‡Œä¸ä¼šå¤„ç† nums ä¸­æœ€åä¸€ä¸ªæ•°ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œæ’åºå nums æœ€åä¸€ä¸ªæ•°æ˜¯æœ€å¤§çš„ï¼Œæœ€é•¿è¿ç»­åºåˆ—ä¸€å®šä¸ä¼šä»¥ä»–åšå¼€å¤´
        for (int i = 0; i < nums.length - 1; i ++) {
            // é‡åˆ°é‡å¤æ•°å­—å°±è·³è¿‡
            if (nums[i] == nums[i + 1]) {
                continue;
            }
            else if (nums[i] + 1 == nums[i + 1]) {
                len ++;
            }
            else {
                len = 1;
            }

            maxLen = Math.max(maxLen, len);
        }

        return maxLen;
    }   
}
```

æ’åºï¼Œæ—¶é—´å¤æ‚åº¦ O(NLogN)

### å“ˆå¸Œè¡¨

ä½¿ç”¨å“ˆå¸Œè¡¨ç©ºé—´æ¢æ—¶é—´

```java
class Solution {
    public int longestConsecutive(int[] nums) {
        if (nums == null || nums.length == 0) {
            return 0;
        }
        if (nums.length == 1) {
            return 1;
        }

        Set<Integer> set = new HashSet<>();
        for (int num : nums) {
            set.add(num);
        }
        
        // è®°å½•æœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦
        int maxLen = 1;

        for (int num : set) {
            // å¦‚æœ set ä¸­åŒ…å«äº† num - 1ï¼Œé‚£ä¹ˆæœ€é•¿è¿ç»­åºåˆ—ä¸€å®šä¸æ˜¯ä»¥ num å¼€å¤´ï¼Œæœ€èµ·ç ä¹Ÿæ˜¯ä»¥ num - 1 å¼€å¤´ï¼Œå¯¹å§
            if (!set.contains(num - 1)) {
                // ä»¥ cur ä¸ºèµ·ç‚¹çš„è¿ç»­æœ€é•¿åºåˆ—
                int cur = num;
                // è®°å½•ä»¥ cur ä¸ºèµ·ç‚¹çš„è¿ç»­åºåˆ—çš„é•¿åº¦
                int len = 1;

                while (set.contains(cur + 1)) {
                    len ++;
                    cur ++;
                }

                maxLen = Math.max(maxLen, len);
            }
        }

        return maxLen;
    }   

}
```

### BFS

å¦‚æœå°†æ¯ä¸ªæ•´æ•°çœ‹æˆå›¾ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›¸é‚»çš„ï¼ˆæ•°å€¼å¤§å°ç›¸å·®1ï¼‰ä¸¤ä¸ªæ•´æ•°æœ‰ä¸€æ¡è¾¹ç›¸è¿ï¼Œé‚£ä¹ˆè¿™äº›æ•´æ•°å°†å½¢æˆè‹¥å¹²å­å›¾ï¼Œæ¯ä¸ªè¿ç»­æ•°å€¼åºåˆ—å¯¹åº”ä¸€ä¸ªå­å›¾ã€‚ä¾‹å¦‚ï¼Œå°†æ•°ç»„[10ï¼Œ5ï¼Œ9ï¼Œ2ï¼Œ4ï¼Œ3]ä¸­ç›¸é‚»çš„æ•´æ•°ç”¨è¾¹è¿é€šåå½¢æˆçš„å›¾å¦‚å›¾æ‰€ç¤º

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220329173628.png)

**è®¡ç®—æœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦å°±è½¬å˜æˆæ±‚æœ€å¤§å­å›¾çš„å¤§å°**



å’Œå²›å±¿çš„æœ€å¤§é¢ç§¯å·®ä¸å¤š

å…³é”®å°±æ˜¯ä¸€ä¸ªæ•° num çš„é‚»å±…æœ‰ä¸¤ä¸ªï¼šnum - 1 å’Œ num + 1

```java
class Solution {
    public int longestConsecutive(int[] nums) {
        if (nums == null || nums.length == 0) {
            return 0;
        }
        if (nums.length == 1) {
            return 1;
        }

        Set<Integer> set = new HashSet<>();
        for (int num : nums) {
            set.add(num);
        }
        
        // è®°å½•æœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦
        int maxLen = 1;

        // è®°å½•å·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹
        Set<Integer> visited = new HashSet<>();

        for (int num : set) {
            // åŒ…å« num çš„æœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦
            if (!visited.contains(num)) {
                visited.add(num);
                int len = bfs(set, visited, num);
                maxLen = Math.max(maxLen, len);
            }
        }

        return maxLen;
    }   

    private int bfs(Set<Integer> set, Set<Integer> visited, int num) {
        int len = 1;
        
        Queue<Integer> queue = new LinkedList<>();
        queue.offer(num);

        while (!queue.isEmpty()) {
            int size = queue.size();
            for (int i = 0; i < size; i ++) {
                int cur = queue.poll();
                // cur çš„é‚»å±…å…¥é˜Ÿ
                int[] neighbors = new int[] {cur + 1, cur - 1};
                for (int neighbor : neighbors) {
                    if (!visited.contains(neighbor) && (set.contains(neighbor))) {
                        queue.offer(neighbor);
                        visited.add(neighbor);
                        len ++;
                    }
                }
            }
        }

        return len;
    }
}
```

### å¹¶æŸ¥é›†

ä¹Ÿå¯ä»¥ç”¨å¹¶æŸ¥é›†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨åˆå§‹åŒ–å¹¶æŸ¥é›†çš„æ—¶å€™è¾“å…¥æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°æ”¾å…¥ä¸€ä¸ªå­é›†ä¸­ï¼Œçˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘å®ƒè‡ªå·±ã€‚ç„¶åå¯¹äºæ¯ä¸ªæ•´æ•° n ï¼Œå¦‚æœå­˜åœ¨æ•´æ•° n -1 å’Œ n + 1ï¼Œåˆ™å°†å®ƒä»¬æ‰€åœ¨çš„å­é›†åˆå¹¶ã€‚

â­ **æ¯ä¸ªå­é›†çš„æ ¹èŠ‚ç‚¹è®°å½•å®ƒæ‰€åœ¨å­é›†çš„å…ƒç´ çš„æ•°ç›®**ï¼Œåœ¨åˆå¹¶å­é›†çš„æ—¶å€™éœ€è¦æ›´æ–°åˆå¹¶ä¹‹åæ–°å­é›†çš„æ ¹èŠ‚ç‚¹ä¸­å­é›†å…ƒç´ çš„æ•°ç›®

```java
class Solution {
    public int longestConsecutive(int[] nums) {
        if (nums == null || nums.length == 0) {
            return 0;
        }
        if (nums.length == 1) {
            return 1;
        }

        // è®°å½•æœ€é•¿è¿ç»­åºåˆ—çš„é•¿åº¦
        int maxLen = 1;

        // å­˜å‚¨ num
        Set<Integer> set = new HashSet<>();
        // value è¡¨ç¤º key æ‰€åœ¨å­å›¾çš„æ ¹èŠ‚ç‚¹
        Map<Integer, Integer> fathers = new HashMap<>();
        // value è¡¨ç¤ºä»¥ key ä¸ºæ ¹èŠ‚ç‚¹çš„å­é›†çš„å¤§å°
        Map<Integer, Integer> counts = new HashMap<>();

        // åˆå§‹åŒ–
        for (int num : nums) {
            fathers.put(num, num);
            counts.put(num, 1);
            set.add(num);
        }

        for (int num : set) {
            if (set.contains(num + 1)) {
                union(fathers, counts, num, num + 1);                
            }
            if (set.contains(num - 1)) {
                union(fathers, counts, num, num - 1);
            }
        }

        for (int key : counts.keySet()) {
            maxLen = Math.max(maxLen, counts.get(key));
        }

        return maxLen;
    }   

    // åˆå¹¶ numA å’Œ numB æ‰€åœ¨çš„å­å›¾
    private void union (Map<Integer, Integer> fathers, Map<Integer, Integer> counts, int numA, int numB) {
        int fathersA = findFathers(fathers, numA);
        int fathersB = findFathers(fathers, numB);

        if (fathersA != fathersB) {
            fathers.put(fathersA, fathersB);
            counts.put(fathersB, counts.get(fathersA) + counts.get(fathersB));
        }
    }

    
    private int findFathers(Map<Integer, Integer> fathers, int cur) {
        if (fathers.get(cur) != cur) {
            fathers.put(cur, findFathers(fathers, fathers.get(cur)));
        }

        return fathers.get(cur);
     }
}
```



## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼š


## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š[133. å…‹éš†å›¾](https://leetcode.cn/problems/clone-graph/)

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/image-20220831125841029.png)

## ğŸ”” è§£é¢˜æ€è·¯

### DFS

å¯¹äºæœ¬é¢˜è€Œè¨€ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®å›¾çš„æ·±æ‹·è´æ˜¯åœ¨åšä»€ä¹ˆï¼Œå¯¹äºä¸€å¼ å›¾è€Œè¨€ï¼Œå®ƒçš„æ·±æ‹·è´å³æ„å»ºä¸€å¼ ä¸åŸå›¾ç»“æ„ï¼Œå€¼å‡ä¸€æ ·çš„å›¾ï¼Œä½†æ˜¯å…¶ä¸­çš„èŠ‚ç‚¹ä¸å†æ˜¯åŸæ¥å›¾èŠ‚ç‚¹çš„å¼•ç”¨ã€‚å› æ­¤ï¼Œä¸ºäº†æ·±æ‹·è´å‡ºæ•´å¼ å›¾ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ•´å¼ å›¾çš„ç»“æ„ä»¥åŠå¯¹åº”èŠ‚ç‚¹çš„å€¼ã€‚

ç”±äºé¢˜ç›®åªç»™äº†æˆ‘ä»¬ä¸€ä¸ªèŠ‚ç‚¹çš„å¼•ç”¨ï¼Œå› æ­¤ä¸ºäº†çŸ¥é“æ•´å¼ å›¾çš„ç»“æ„ä»¥åŠå¯¹åº”èŠ‚ç‚¹çš„å€¼ï¼Œ**æˆ‘ä»¬éœ€è¦ä»ç»™å®šçš„èŠ‚ç‚¹å‡ºå‘ï¼Œè¿›è¡Œã€Œå›¾çš„éå†ã€ï¼Œå¹¶åœ¨éå†çš„è¿‡ç¨‹ä¸­å®Œæˆå›¾çš„æ·±æ‹·è´**ã€‚

ä¸ºäº†é¿å…åœ¨æ·±æ‹·è´æ—¶é™·å…¥æ­»å¾ªç¯ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£å›¾çš„ç»“æ„ã€‚å¯¹äºä¸€å¼ æ— å‘å›¾ï¼Œä»»ä½•ç»™å®šçš„æ— å‘è¾¹éƒ½å¯ä»¥è¡¨ç¤ºä¸ºä¸¤ä¸ªæœ‰å‘è¾¹ï¼Œå³å¦‚æœèŠ‚ç‚¹ A å’ŒèŠ‚ç‚¹ B ä¹‹é—´å­˜åœ¨æ— å‘è¾¹ï¼Œåˆ™è¡¨ç¤ºè¯¥å›¾å…·æœ‰ä»èŠ‚ç‚¹ A åˆ°èŠ‚ç‚¹ B çš„æœ‰å‘è¾¹å’Œä»èŠ‚ç‚¹ B åˆ°èŠ‚ç‚¹ A çš„æœ‰å‘è¾¹ã€‚

ä¸ºäº†é˜²æ­¢å¤šæ¬¡éå†åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œé™·å…¥æ­»å¾ªç¯ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ç§æ•°æ®ç»“æ„è®°å½•å·²ç»è¢«å…‹éš†è¿‡çš„èŠ‚ç‚¹

ç®—æ³•

1. ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨å­˜å‚¨æ‰€æœ‰å·²è¢«è®¿é—®å’Œå…‹éš†çš„èŠ‚ç‚¹ã€‚å“ˆå¸Œè¡¨ä¸­çš„ key æ˜¯åŸå§‹å›¾ä¸­çš„èŠ‚ç‚¹ï¼Œvalue æ˜¯å…‹éš†å›¾ä¸­çš„å¯¹åº”èŠ‚ç‚¹ã€‚
2. ä»ç»™å®šèŠ‚ç‚¹å¼€å§‹éå†å›¾ã€‚å¦‚æœæŸä¸ªèŠ‚ç‚¹å·²ç»è¢«è®¿é—®è¿‡ï¼Œåˆ™è¿”å›å…¶å…‹éš†å›¾ä¸­çš„å¯¹åº”èŠ‚ç‚¹ã€‚
3. å¦‚æœå½“å‰è®¿é—®çš„èŠ‚ç‚¹ä¸åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œåˆ™åˆ›å»ºå®ƒçš„å…‹éš†èŠ‚ç‚¹å¹¶å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­ã€‚æ³¨æ„ï¼šåœ¨è¿›å…¥é€’å½’ä¹‹å‰ï¼Œå¿…é¡»å…ˆåˆ›å»ºå…‹éš†èŠ‚ç‚¹å¹¶ä¿å­˜åœ¨å“ˆå¸Œè¡¨ä¸­ã€‚å¦‚æœä¸ä¿è¯è¿™ç§é¡ºåºï¼Œå¯èƒ½ä¼šåœ¨é€’å½’ä¸­å†æ¬¡é‡åˆ°åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå†æ¬¡éå†è¯¥èŠ‚ç‚¹æ—¶ï¼Œé™·å…¥æ­»å¾ªç¯ã€‚



```java
/*
// Definition for a Node.
class Node {
    public int val;
    public List<Node> neighbors;
    public Node() {
        val = 0;
        neighbors = new ArrayList<Node>();
    }
    public Node(int _val) {
        val = _val;
        neighbors = new ArrayList<Node>();
    }
    public Node(int _val, ArrayList<Node> _neighbors) {
        val = _val;
        neighbors = _neighbors;
    }
}
*/

class Solution {
    // key:åŸå§‹å›¾ä¸­çš„èŠ‚ç‚¹ value:å…‹éš†å›¾ä¸­çš„èŠ‚ç‚¹
    private Map<Node, Node> visited = new HashMap<>();

    // è¿”å›æ‹·è´åçš„å›¾ä¸­çš„ node èŠ‚ç‚¹
    public Node cloneGraph(Node node) {
        if (node == null) {
            return null;
        }

        if (visited.containsKey(node)) {
            return visited.get(node);
        }

        // å…‹éš†å½“å‰èŠ‚ç‚¹
        Node cloneNode = new Node(node.val, new ArrayList<>());
        visited.put(node, cloneNode);

        // éå†è¯¥èŠ‚ç‚¹çš„é‚»å±…å¹¶æ›´æ–°å…‹éš†èŠ‚ç‚¹çš„é‚»å±…åˆ—è¡¨
        List<Node> neighbors = node.neighbors;
        for (Node neighbor : neighbors) {
            cloneNode.neighbors.add(cloneGraph(neighbor));
        }

        return cloneNode;
    }
}
```

### BFS

```java
class Solution {
    // key:åŸå§‹å›¾ä¸­çš„èŠ‚ç‚¹ value:å…‹éš†å›¾ä¸­çš„èŠ‚ç‚¹
    private Map<Node, Node> visited = new HashMap<>();

    // è¿”å›æ‹·è´åçš„å›¾ä¸­çš„ node èŠ‚ç‚¹
    public Node cloneGraph(Node node) {
        if (node == null) {
            return null;
        }

        
        Queue<Node> queue = new LinkedList<>();
        queue.offer(node);

        // å…‹éš†ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        Node cloneNode = new Node(node.val, new ArrayList<>());
        visited.put(node, cloneNode);

        while (!queue.isEmpty()) {
            Node cur = queue.poll();

            // éå†å½“å‰èŠ‚ç‚¹çš„é‚»å±…å¹¶æ›´æ–°å…‹éš†èŠ‚ç‚¹çš„é‚»å±…åˆ—è¡¨
            List<Node> neighbors = cur.neighbors;
            for (Node neighbor : neighbors) {
                if (!visited.containsKey(neighbor)) {
                    queue.offer(neighbor);

                    // æ›´æ–° visited
                    Node neighborCloneNode = new Node(neighbor.val, new ArrayList<>());
                    visited.put(neighbor, neighborCloneNode);
                }
                // æ›´æ–°å½“å‰å…‹éš†èŠ‚ç‚¹çš„å…‹éš†é‚»å±…åˆ—è¡¨
                visited.get(cur).neighbors.add(visited.get(neighbor));
            }
        }

        return cloneNode;
    }
}
```



## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼š


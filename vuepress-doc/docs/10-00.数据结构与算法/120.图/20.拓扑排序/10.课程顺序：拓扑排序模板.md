---
title: è¯¾ç¨‹é¡ºåº
date: 2022-03-22 15:23:40
permalink: /pages/0fe98a/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 113. è¯¾ç¨‹é¡ºåº - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/QA2IGt/)
- [210. è¯¾ç¨‹è¡¨ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/course-schedule-ii/)

ç°åœ¨æ€»å…±æœ‰ numCourses é—¨è¯¾éœ€è¦é€‰ï¼Œè®°ä¸º 0 åˆ° numCourses-1ã€‚

ç»™å®šä¸€ä¸ªæ•°ç»„ prerequisites ï¼Œå®ƒçš„æ¯ä¸€ä¸ªå…ƒç´  prerequisites[i] è¡¨ç¤ºä¸¤é—¨è¯¾ç¨‹ä¹‹é—´çš„å…ˆä¿®é¡ºåºã€‚ ä¾‹å¦‚ prerequisites[i] = [ai, bi] è¡¨ç¤ºæƒ³è¦å­¦ä¹ è¯¾ç¨‹ ai ï¼Œéœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ bi ã€‚

è¯·æ ¹æ®ç»™å‡ºçš„æ€»è¯¾ç¨‹æ•°  numCourses å’Œè¡¨ç¤ºå…ˆä¿®é¡ºåºçš„ prerequisites å¾—å‡ºä¸€ä¸ªå¯è¡Œçš„ä¿®è¯¾åºåˆ—ã€‚

å¯èƒ½ä¼šæœ‰å¤šä¸ªæ­£ç¡®çš„é¡ºåºï¼Œåªè¦ä»»æ„è¿”å›ä¸€ç§å°±å¯ä»¥äº†ã€‚å¦‚æœä¸å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹ï¼Œè¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚

ç¤ºä¾‹ 1:

```
è¾“å…¥: numCourses = 2, prerequisites = [[1,0]] 
è¾“å‡º: [0,1]
è§£é‡Š: æ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚è¦å­¦ä¹ è¯¾ç¨‹ 1ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0ã€‚å› æ­¤ï¼Œæ­£ç¡®çš„è¯¾ç¨‹é¡ºåºä¸º [0,1] ã€‚
```

ç¤ºä¾‹ 2:

```
è¾“å…¥: numCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]
è¾“å‡º: [0,1,2,3] or [0,2,1,3]
è§£é‡Š: æ€»å…±æœ‰ 4 é—¨è¯¾ç¨‹ã€‚è¦å­¦ä¹ è¯¾ç¨‹ 3ï¼Œä½ åº”è¯¥å…ˆå®Œæˆè¯¾ç¨‹ 1 å’Œè¯¾ç¨‹ 2ã€‚å¹¶ä¸”è¯¾ç¨‹ 1 å’Œè¯¾ç¨‹ 2 éƒ½åº”è¯¥æ’åœ¨è¯¾ç¨‹ 0 ä¹‹åã€‚
 å› æ­¤ï¼Œä¸€ä¸ªæ­£ç¡®çš„è¯¾ç¨‹é¡ºåºæ˜¯ [0,1,2,3] ã€‚å¦ä¸€ä¸ªæ­£ç¡®çš„æ’åºæ˜¯ [0,2,1,3] ã€‚
```

## ğŸ”” è§£é¢˜æ€è·¯

**ç”¨ä¸€ä¸ª HashMap è¡¨ç¤ºé‚»æ¥è¡¨æ¥æ„é€ å›¾ï¼Œå®ƒçš„é”®æ˜¯å…ˆä¿®è¯¾ç¨‹ï¼Œå®ƒçš„å€¼æ˜¯å¿…é¡»åœ¨é”®å¯¹åº”çš„è¯¾ç¨‹ä¹‹åå­¦ä¹ çš„æ‰€æœ‰è¯¾ç¨‹**ã€‚

åŒæ—¶ï¼Œå°†æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦ä¿å­˜åˆ°æ•°ç»„ inDegrees ä¸­ï¼Œâ€œinDegrees[i]â€ è¡¨ç¤ºèŠ‚ç‚¹içš„å…¥åº¦

æ¥ä¸‹æ¥**ç”¨ BFS å®ç°æ‹“æ‰‘æ’åº**ï¼š

> å¤§çš„æ¡†æ¶è¿˜æ˜¯ BFSï¼

- **é˜Ÿåˆ—ä¸­ä¿å­˜çš„æ˜¯å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹**ï¼ˆè¿™ä¸ªå¾ˆé‡è¦ï¼‰
- æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ°æ‹“æ‰‘æ’åºåºåˆ—ä¸­
  - ç„¶åæ‰¾åˆ°è¯¥è¯¾ç¨‹çš„åä¿®è¯¾ç¨‹å¹¶å°†å®ƒä»¬çš„èŠ‚ç‚¹çš„å…¥åº¦å‡ 1ï¼Œè¿™ç›¸å½“äºåˆ é™¤ä»å…ˆä¿®è¯¾ç¨‹åˆ°åä¿®è¯¾ç¨‹çš„è¾¹
  - å¦‚æœå‘ç°æ–°çš„å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­
  - é‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºï¼Œæ­¤æ—¶è¦ä¹ˆå›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½å·²ç»è®¿é—®å®Œæ¯•ï¼Œå·²ç»å¾—åˆ°äº†å®Œæ•´çš„æ‹“æ‰‘æ’åºåºåˆ—ï¼›è¦ä¹ˆå‰©ä¸‹çš„è¿˜æ²¡æœ‰æœç´¢åˆ°çš„èŠ‚ç‚¹å½¢æˆä¸€ä¸ªç¯ï¼Œå·²ç»ä¸å­˜åœ¨å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹


```java
class Solution {
    public int[] findOrder(int numCourses, int[][] prerequisites) {
        // å­˜å‚¨æœ€ç»ˆç»“æœ
        List<Integer> res = new ArrayList<>();
        
        // æ„å»ºé‚»æ¥è¡¨ key: å…ˆä¿®è¯¾ç¨‹ value: æ‰€æœ‰çš„ å­¦å®Œ key å¯¹åº”çš„è¯¾ç¨‹ä¹‹åæ‰èƒ½å­¦ä¹ çš„è¯¾ç¨‹
        Map<Integer, List<Integer>> graph = new HashMap<>();
        for (int i = 0; i < numCourses; i ++) {
            graph.put(i, new ArrayList<>());
        }

        // æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦
        int[] inDegress = new int[numCourses];
        
        for (int[] pre : prerequisites) {
            // pre[1] -> pre[0]
            graph.get(pre[1]).add(pre[0]);
            inDegress[pre[0]] ++;
        }

        // BFS å®ç°æ‹“æ‰‘æ’åº
        Queue<Integer> queue = new LinkedList<>();
        // æ‰€æœ‰å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹å…¥é˜Ÿ
        for (int i = 0; i < inDegress.length; i ++) {
            if (inDegress[i] == 0) {
                queue.offer(i);
            }
        }

        while (!queue.isEmpty()) {
            // ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ°æ‹“æ‰‘æ’åºåºåˆ—ä¸­
            int cur = queue.poll();
            res.add(cur);

            // æ‰¾åˆ° cur çš„åä¿®è¯¾ç¨‹å¹¶å°†å®ƒä»¬çš„å…¥åº¦å‡ 1ï¼Œè¿™ç›¸å½“äºåˆ é™¤ä»å…ˆä¿®è¯¾ç¨‹åˆ°åä¿®è¯¾ç¨‹çš„è¾¹
            for (int next : graph.get(cur)) {
                inDegress[next] --;
                // å¦‚æœå‘ç°æ–°çš„å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­
                if (inDegress[next] == 0) {
                    queue.offer(next);
                }
            }
            
        }

        // å¦‚æœä¸å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹ï¼Œè¿”å›ä¸€ä¸ªç©ºæ•°ç»„
        if (res.size() != numCourses) {
            return new int[0];
        }

        return res.stream().mapToInt(Integer::intValue).toArray();
    }
}
```

å†™æ³•äºŒï¼š

```java
class Solution {
    public int[] findOrder(int numCourses, int[][] prerequisites) {
        // å­˜å‚¨æœ€ç»ˆç»“æœ
        List<Integer> res = new ArrayList<>();
        
        // æ„å»ºé‚»æ¥è¡¨ key: å…ˆä¿®è¯¾ç¨‹ value: æ‰€æœ‰çš„ å­¦å®Œ key å¯¹åº”çš„è¯¾ç¨‹ä¹‹åæ‰èƒ½å­¦ä¹ çš„è¯¾ç¨‹
        Map<Integer, List<Integer>> graph = new HashMap<>();

        // æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦
        int[] inDegress = new int[numCourses];
        
        for (int[] item : prerequisites) {
            // å…ˆä¿®è¯¾ç¨‹
            int pre = item[1];
            // åä¿®è¯¾ç¨‹
            int post = item[0];

            graph.putIfAbsent(pre, new ArrayList<>());
            // å¦‚æœå›¾ä¸­å·²ç»å­˜åœ¨ pre-> post çš„å…³ç³»äº†ï¼Œåˆ™ä¸å†è¿›è¡Œå¤„ç†ï¼Œé˜²æ­¢å…¥åº¦ç»Ÿè®¡é”™è¯¯
            if (!graph.get(pre).contains(post)) {
                graph.get(pre).add(post);
                // åä¿®è¯¾ç¨‹å…¥åº¦å¢åŠ 
                inDegress[post] ++;
            }
            
        }

        // BFS å®ç°æ‹“æ‰‘æ’åº
        Queue<Integer> queue = new LinkedList<>();
        // æ‰€æœ‰å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹å…¥é˜Ÿ
        for (int i = 0; i < inDegress.length; i ++) {
            if (inDegress[i] == 0) {
                queue.offer(i);
            }
        }

        while (!queue.isEmpty()) {
            // 1. ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†è¯¥èŠ‚ç‚¹æ·»åŠ åˆ°æ‹“æ‰‘æ’åºåºåˆ—ä¸­
            int cur = queue.poll();
            res.add(cur);

            List<Integer> nexts = graph.get(cur);
            // å¦‚æœ cur ä¸æ˜¯ä»»ä½•ä¸€é—¨è¯¾çš„å…ˆä¿®è¯¾ç¨‹ï¼Œé‚£ä¹ˆ nexts ä¸ºç©ºï¼Œè¿™é‡Œéœ€è¦åˆ¤æ–­ä¸‹
            if (nexts == null) {
                continue;
            }
            
            // 2. æ‰¾åˆ° cur çš„åä¿®è¯¾ç¨‹å¹¶å°†å®ƒä»¬çš„å…¥åº¦å‡ 1ï¼Œè¿™ç›¸å½“äºåˆ é™¤ä»å…ˆä¿®è¯¾ç¨‹åˆ°åä¿®è¯¾ç¨‹çš„è¾¹
            for (int next : nexts) {
                inDegress[next] --;
                // 3. å¦‚æœå‘ç°æ–°çš„å…¥åº¦ä¸º 0 çš„èŠ‚ç‚¹ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­
                if (inDegress[next] == 0) {
                    queue.offer(next);
                }
            }
            
        }

        // 4. å¦‚æœä¸å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹ï¼Œè¿”å›ä¸€ä¸ªç©ºæ•°ç»„
        if (res.size() != numCourses) {
            return new int[0];
        }

        return res.stream().mapToInt(Integer::intValue).toArray();
    }
}
```



## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼šå¦‚æœå›¾ä¸­èŠ‚ç‚¹çš„æ•°ç›®ä¸º mï¼ˆå˜é‡numCoursesï¼‰ï¼Œè¾¹çš„æ•°ç›®ä¸º nï¼ˆæ•°ç»„prerequisitesçš„é•¿åº¦ï¼‰ï¼Œé‚£ä¹ˆå¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯Oï¼ˆm+nï¼‰ï¼Œæ‹“æ‰‘æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯Oï¼ˆm+nï¼‰


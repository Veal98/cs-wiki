---
title: å±•å¹³å¤šçº§åŒå‘é“¾è¡¨
date: 2022-04-12 12:13:46
permalink: /pages/d9e773/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 028. å±•å¹³å¤šçº§åŒå‘é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/Qv1Da2/)
- [430. æ‰å¹³åŒ–å¤šçº§åŒå‘é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/flatten-a-multilevel-doubly-linked-list/)

å¤šçº§åŒå‘é“¾è¡¨ä¸­ï¼Œé™¤äº†æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å’Œå‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªå­é“¾è¡¨æŒ‡é’ˆï¼Œå¯èƒ½æŒ‡å‘å•ç‹¬çš„åŒå‘é“¾è¡¨ã€‚è¿™äº›å­åˆ—è¡¨ä¹Ÿå¯èƒ½ä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè‡ªå·±çš„å­é¡¹ï¼Œä¾æ­¤ç±»æ¨ï¼Œç”Ÿæˆå¤šçº§æ•°æ®ç»“æ„ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€ç¤ºã€‚

ç»™å®šä½äºåˆ—è¡¨ç¬¬ä¸€çº§çš„å¤´èŠ‚ç‚¹ï¼Œè¯·æ‰å¹³åŒ–åˆ—è¡¨ï¼Œå³å°†è¿™æ ·çš„å¤šçº§åŒå‘é“¾è¡¨å±•å¹³æˆæ™®é€šçš„åŒå‘é“¾è¡¨ï¼Œä½¿æ‰€æœ‰ç»“ç‚¹å‡ºç°åœ¨å•çº§åŒé“¾è¡¨ä¸­ã€‚

 

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼šhead = [1,2,3,4,5,6,null,null,null,7,8,9,10,null,null,11,12]
è¾“å‡ºï¼š[1,2,3,7,8,11,12,9,10,4,5,6]
```

è§£é‡Šï¼š

è¾“å…¥çš„å¤šçº§åˆ—è¡¨å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220413115426.png)

æ‰å¹³åŒ–åçš„é“¾è¡¨å¦‚ä¸‹å›¾ï¼š

![image-20220413115438086](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220413115438.png)

> è§£é‡Šä¸‹ï¼š
>
> ä»¥ ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼š
>
>  1---2---3---4---5---6--NULL
>          |
>          7---8---9---10--NULL
>              |
>              11--12--NULL
> åºåˆ—åŒ–å…¶ä¸­çš„æ¯ä¸€çº§ä¹‹åï¼š
>
> ```
> [1,2,3,4,5,6,null]
> [7,8,9,10,null]
> [11,12,null]
> ```
>
> ä¸ºäº†å°†æ¯ä¸€çº§éƒ½åºåˆ—åŒ–åˆ°ä¸€èµ·ï¼Œæˆ‘ä»¬éœ€è¦æ¯ä¸€çº§ä¸­æ·»åŠ å€¼ä¸º null çš„å…ƒç´ ï¼Œä»¥è¡¨ç¤ºæ²¡æœ‰èŠ‚ç‚¹è¿æ¥åˆ°ä¸Šä¸€çº§çš„ä¸Šçº§èŠ‚ç‚¹ã€‚
>
> ```
> [1,2,3,4,5,6,null]
> [null,null,7,8,9,10,null]
> [null,11,12,null]
> ```
>
> åˆå¹¶æ‰€æœ‰åºåˆ—åŒ–ç»“æœï¼Œå¹¶å»é™¤æœ«å°¾çš„ null ã€‚
>
> [1,2,3,4,5,6,null,null,null,7,8,9,10,null,null,11,12]

## ğŸ”” è§£é¢˜æ€è·¯

ç†è§£é¢˜ç›®å¾ˆé‡è¦

å…¶å®å¾ˆç®€å•

æ¯”å¦‚æœ‰ a â€”> b è¿™æ ·ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œç„¶å a è¿˜æœ‰ä¸€ä¸ª child æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªæ–°çš„é“¾è¡¨ï¼Œé¢˜ç›®å°±æ˜¯è¦æŠŠè¿™ä¸ª child é“¾è¡¨æ’å…¥åˆ° a å’Œ b ä¹‹é—´ã€‚

æ‰€ä»¥ï¼Œå¯¹äºè¿™ä¸ªæ’å…¥æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦å››ä¸ªå…³é”®ä¿¡æ¯ï¼š

- a èŠ‚ç‚¹
- a çš„ next èŠ‚ç‚¹ï¼šb
- a çš„ child é“¾è¡¨çš„å¤´èŠ‚ç‚¹
- a çš„ child é“¾è¡¨çš„å°¾èŠ‚ç‚¹


```java
/*
// Definition for a Node.
class Node {
    public int val;
    public Node prev;
    public Node next;
    public Node child;
};
*/

class Solution {
    public Node flatten(Node head) {
        flattenGetTail(head);
        return head;
    }

    // å±•å¹³ä»¥ head ä¸ºå¤´èŠ‚ç‚¹çš„é“¾è¡¨ä¹‹åè¿”å›é“¾è¡¨çš„å°¾èŠ‚ç‚¹
    public Node flattenGetTail(Node head) {
        Node node = head;
        Node tail = null;

        while (node != null) {
            // è®°å½• next åç»§èŠ‚ç‚¹
            Node next = node.next;
            if (node.child != null) {
                Node child = node.child;
                // é€’å½’è°ƒç”¨å±•å¹³ childï¼Œè¿”å›å°¾èŠ‚ç‚¹
                Node childTail = flattenGetTail(child);

                // åˆ é™¤ child æŒ‡é’ˆ
                node.child = null;
                // å°† child é“¾è¡¨æ’å…¥ node å’Œ node.next ä¹‹é—´
                node.next = child;
                child.prev = node;

                childTail.next = next;
                if (next != null) {
                    next.prev = childTail;
                }

                tail = childTail;
            }
            // å¦‚æœ node æ²¡æœ‰ childï¼Œé‚£ä¹ˆæ— é¡»å±•å¹³
            else {
                tail = node;
            }

            node = next;
        }

        return tail;
    }
}
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œé€’å½’å‡½æ•° flattenGetTail åœ¨å±•å¹³ä»¥headä¸ºå¤´èŠ‚ç‚¹çš„é“¾è¡¨ä¹‹åè¿”å›é“¾è¡¨çš„å°¾èŠ‚ç‚¹ã€‚åœ¨è¯¥å‡½æ•°ä¸­éœ€è¦é€ä¸€æ‰«æé“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹nodeæœ‰å­é“¾è¡¨ï¼Œç”±äºå­é“¾è¡¨ä¹Ÿå¯èƒ½æœ‰åµŒå¥—çš„å­é“¾è¡¨ï¼Œå› æ­¤å…ˆé€’å½’è°ƒç”¨flattenGetTailå‡½æ•°å±•å¹³å­é“¾è¡¨ï¼Œå­é“¾è¡¨å±•å¹³ä¹‹åçš„å¤´èŠ‚ç‚¹æ˜¯childï¼Œå°¾èŠ‚ç‚¹æ˜¯childTailã€‚

æœ€åå°†å±•å¹³çš„å­é“¾è¡¨æ’å…¥èŠ‚ç‚¹nodeå’Œå®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹nextä¹‹é—´ï¼Œå³æŠŠå±•å¹³çš„å­é“¾è¡¨çš„å¤´èŠ‚ç‚¹childæ’å…¥èŠ‚ç‚¹nodeä¹‹åï¼Œå¹¶å°†å°¾èŠ‚ç‚¹childTailæ’å…¥èŠ‚ç‚¹nextä¹‹å‰ã€‚

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šå‡½æ•° flattenGetTail çš„é€’å½’è°ƒç”¨æ¬¡æ•°å–å†³äºé“¾è¡¨åµŒå¥—çš„å±‚æ•°ï¼Œå› æ­¤ï¼Œå¦‚æœé“¾è¡¨çš„å±‚æ•°ä¸º kï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(K)
- æ—¶é—´å¤æ‚åº¦ï¼šæ³•æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šéå†ä¸€æ¬¡ï¼Œå¦‚æœé“¾è¡¨æ€»å…±æœ‰ n ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)


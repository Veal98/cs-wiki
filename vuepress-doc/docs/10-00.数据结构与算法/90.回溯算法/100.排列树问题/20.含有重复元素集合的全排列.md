---
title: å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ—
date: 2021-12-08 22:00:05
permalink: /pages/0f93c0/
---

## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 084. å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/7p8L0Z/)
- [47. å…¨æ’åˆ— II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/permutations-ii/)

ç»™å®šä¸€ä¸ª**å¯åŒ…å«é‡å¤æ•°å­—**çš„åºåˆ— nums ï¼ŒæŒ‰ä»»æ„é¡ºåº è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼šnums = [1,1,2]
è¾“å‡ºï¼š
[[1,1,2],
 [1,2,1],
 [2,1,1]]
```

ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
```

## ğŸ”” è§£é¢˜æ€è·¯

è¿™é¢˜å’Œä¸Šé¢˜ [46. å…¨æ’åˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/permutations/) çš„åŒºåˆ«å°±åœ¨äºï¼Œè¿™é“é¢˜ä¸­æ˜¯åŒ…å«é‡å¤æ•°å­—çš„ã€‚

æ‰€ä»¥å…¶å®åŸºæœ¬æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œåªæœ‰ä¸€ä¸ªåœ°æ–¹éœ€è¦ä¿®æ”¹ï¼Œé‚£å°±æ˜¯å¦‚ä½•åšå‰ªæ

çœ‹ä¸Šä¸€é“é¢˜ä¸åŒ…å«é‡å¤æ•°å­—çš„å‰ªæä»£ç ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211208220610.png)

å¦‚æœè¿™é“é¢˜è¿˜æ˜¯è¿™æ ·åšå‰ªæçš„è¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼ˆ1ï¼Œ1ï¼Œ3ï¼‰

å‡è®¾ track ä¸­å·²ç»å­˜åœ¨ i = 0ï¼ˆå³ nums[0] = 1ï¼‰äº†ï¼Œé‚£ä¹ˆåœ¨éå†åˆ° i = 1 çš„æ—¶å€™ï¼Œå°±ä¼šç›´æ¥ continue è·³åˆ° i = 2 å³ nums[i] = 3 ä¸Šï¼Œè¿™æ ·ï¼Œtrack ä¸­å°±åªæœ‰ä¸¤ä¸ªæ•°äº†ï¼Œæ˜¾ç„¶ä¸ç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å‰ªæä»£ç ç¨ä½œä¿®æ”¹

å®˜æ–¹é¢˜è§£å†™çš„å¾ˆæ¸…æ¥šï¼š

<img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211208221349.png" style="zoom: 67%;" />

å‡è®¾æˆ‘ä»¬æœ‰ n ä¸ªé‡å¤æ•°æ’å®Œåºåç›¸é‚»ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€å®šä¿è¯æ¯æ¬¡éƒ½æ˜¯æ‹¿ä»å·¦å¾€å³ç¬¬ä¸€ä¸ªæœªè¢«å¡«è¿‡çš„æ•°å­—ï¼Œæ¢å¥è¯è¯´ï¼Œ**å¦‚æœå½“å‰æ•°çš„å‰ä¸€ä¸ªé‡å¤æ•°æ²¡æœ‰è¢«å¡«è¿‡ï¼Œé‚£ä¹ˆå½“å‰æ•°å°±ä¸åº”è¯¥è¢«å¡«å…¥ï¼Œå¦åˆ™å¿…ç„¶æ˜¯é‡å¤æ’åˆ—**

çœ‹ä¸‹å›¾ï¼š

![image-20211208223745425](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211208223745.png)




```java
class Solution {
    // å­˜å‚¨æ‰€æœ‰æ’åˆ—
    private List<List<Integer>> res = new ArrayList<>();

    public List<List<Integer>> permuteUnique(int[] nums) {
        if (nums == null || nums.length == 0) {
            return res;
        }

        // å­˜å‚¨æ¯ä¸ªå¯èƒ½çš„æ’åˆ—
        List<Integer> track = new ArrayList<>();
        // è¡¨ç¤ºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦å·²ç»å¡«å…¥æ’åˆ—
        boolean[] vis = new boolean[nums.length];
        // å¯¹ nums è¿›è¡Œæ’åº
        Arrays.sort(nums);

        backtrack(nums, track, vis);
        return res;
    }

    private void backtrack(int[] nums, List<Integer> track, boolean[] vis) {

        // ç»“æŸæ¡ä»¶
        if (track.size() == nums.length) {
            res.add(new ArrayList<>(track));
            return ;
        }

        // éå†é€‰æ‹©åˆ—è¡¨
        for (int i = 0; i < nums.length; i ++) {
            // å‰ªæï¼ˆå‡è®¾æˆ‘ä»¬æœ‰ n ä¸ªé‡å¤æ•°æ’å®Œåºåç›¸é‚»ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€å®šä¿è¯æ¯æ¬¡éƒ½æ˜¯æ‹¿ä»å·¦å¾€å³ç¬¬ä¸€ä¸ªæœªè¢«å¡«è¿‡çš„æ•°å­—ï¼‰
            // æ¢å¥è¯è¯´ï¼Œå¦‚æœå½“å‰æ•°çš„å‰ä¸€ä¸ªé‡å¤æ•°æ²¡æœ‰è¢«å¡«è¿‡ï¼Œé‚£ä¹ˆå½“å‰æ•°å°±ä¸åº”è¯¥è¢«å¡«å…¥ï¼Œå¦åˆ™å¿…ç„¶æ˜¯é‡å¤æ’åˆ—
            if (vis[i] || (i > 0 && nums[i] == nums[i - 1] && !vis[i - 1])) {
                continue ;
            }

            if (!vis[i]) {
                // åšé€‰æ‹©
                track.add(nums[i]);
                vis[i] = true;

                // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘
                backtrack(nums, track, vis);

                // å›æº¯
                track.remove(track.size() - 1);
                vis[i] = false;
            }
        }
    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211208223859.png)

âœ… éœ€è¦æ³¨æ„çš„æ˜¯ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211222224128.png)

**å‰ªæåˆ¤æ–­ä¸­ `vis[i] == true` å¿…ä¸å¯å°‘ï¼Œä¸ç„¶åŒä¸€ä¸ªæ•° nums[i] ä¼šè¢«é‡å¤é€‰å–**ã€‚

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šO(n).æˆ‘ä»¬éœ€è¦ O(n) çš„æ ‡è®°æ•°ç»„ï¼ŒåŒæ—¶åœ¨é€’å½’çš„æ—¶å€™æ ˆæ·±åº¦ä¼šè¾¾åˆ° O(n)ï¼Œå› æ­¤æ€»ç©ºé—´å¤æ‚åº¦ä¸º O(n + n) = O(2n) = O(n)ã€‚

- æ—¶é—´å¤æ‚åº¦ï¼š*O*(n Ã— n!)ï¼Œå…¶ä¸­ n ä¸ºåºåˆ—çš„é•¿åº¦ã€‚

  <img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211207115728.png" style="zoom:67%;" />


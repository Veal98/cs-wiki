---
title: è·¯å¾„æ€»å’ŒII
date: 2022-04-08 17:55:41
permalink: /pages/cf9a26/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š[113. è·¯å¾„æ€»å’Œ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/path-sum-ii/)

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ targetSum ï¼Œæ‰¾å‡ºæ‰€æœ‰ ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚

å¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

ç¤ºä¾‹ 1ï¼š

![img](https://assets.leetcode.com/uploads/2021/01/18/pathsumii1.jpg)

è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22

è¾“å‡ºï¼š[[5,4,11,2],[5,8,4,5]]

## ğŸ”” è§£é¢˜æ€è·¯

è¡ç”Ÿè‡ª [112. è·¯å¾„æ€»å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/path-sum/)

ç»“æŸæ¡ä»¶ï¼šæŠµè¾¾äº†å¶å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”è·¯å¾„å’Œ = target

é€‰æ‹©åˆ—è¡¨ï¼šè¦ä¹ˆå¾€å·¦èµ°ï¼Œè¦ä¹ˆå¾€å³èµ°

æ‰€ä»¥ï¼Œå’Œä¸Šä¸€é¢˜ [257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/binary-tree-paths/) ç›¸æ¯”ï¼Œè¿™é“é¢˜ä¸è¿‡å°±æ˜¯å¤šäº†ä¸€ä¸ª targetSum çš„å¤„ç†ç½¢äº†

> è¿™é“é¢˜å…¶å®å°±æ˜¯ä¸€é“å­é›†æ ‘é—®é¢˜ï¼ŒtargetSum å°±æ˜¯è¿™é“é¢˜çš„æ ‡å¿—ä½

```java
class Solution {
    // å­˜å‚¨æ‰€æœ‰è·¯å¾„
    private List<List<Integer>> res = new ArrayList<>();

    public List<List<Integer>> pathSum(TreeNode root, int targetSum) {
        if (root == null) {
            return res;
        }

        // å­˜å‚¨æ¯æ¡è·¯å¾„
        List<Integer> paths = new ArrayList<>();

        // root åŠ å…¥ paths
        paths.add(root.val);
        backtrack(root, targetSum - root.val, paths);

        return res;
    }

    // targetSum éšç€è·¯å¾„ä¸­å…ƒç´ çš„å¢åŠ è€Œå‡å°‘
    private void backtrack(TreeNode root, int targetSum, List<Integer> paths) {
        // ç»“æŸæ¡ä»¶
        if (root.left == null && root.right == null && targetSum == 0) {
            // res.add(paths); error
            // Java æ˜¯æŒ‰å¼•ç”¨ä¼ é€’çš„ã€‚é€’å½’è¿‡ç¨‹ä¸­ track æ˜¯åœ¨ä¸æ–­å˜åŒ–çš„ï¼Œè€Œæˆ‘ä»¬éœ€è¦çš„å½“å‰ track çš„çŠ¶æ€ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ­¤å¤„è¿›è¡Œæ‹·è´
            res.add(new ArrayList<>(paths));
            return ;
        }

        // èµ°å·¦è¾¹
        if (root.left != null) {
            // åšé€‰æ‹©(left åŠ å…¥ paths)
            paths.add(root.left.val);
            // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘
            backtrack(root.left, targetSum - root.left.val, paths);
            // å›æº¯
            paths.remove(paths.size() - 1);
        }

        // èµ°å³è¾¹
        if (root.right != null) {
            // åšé€‰æ‹©(right åŠ å…¥ paths)
            paths.add(root.right.val);
            // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘
            backtrack(root.right, targetSum - root.right.val, paths);
            // å›æº¯
            paths.remove(paths.size() - 1);
        }
    }
}
```

å¯èƒ½æœ‰å°ä¼™ä¼´ä¼šæœ‰ç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆä¸Šè¿°ä»£ç ä¸­æ²¡æœ‰ä½“ç° targetSum çš„å›æº¯å‘¢ï¼Ÿå›æº¯çš„è¿‡ç¨‹ä¸­æŠŠä¸€ä¸ªå…ƒç´ ä» paths ä¸­å‰”é™¤ï¼Œé‚£å¯¹åº”çš„ targetSum ä¸ä¹Ÿåº”è¯¥é‡æ–°åŠ ä¸Šè¿™ä¸ªå…ƒç´ çš„å€¼å—ï¼Ÿ

æ˜¯çš„ï¼Œç¡®å®æ˜¯è¿™æ ·ï¼Œåªä¸è¿‡åœ¨ä»£ç ä¸­æ²¡æœ‰ä½“ç°å‡ºæ¥ç½¢äº†ã€‚

â­ å…·ä½“æ¥è¯´ï¼štargetSum å’Œ root.left.val æˆ–è€… root.right.val åšäº†è¿ç®—ï¼Œç„¶åä½œä¸ºå‚æ•°ä¼ ç»™äº†å‡½æ•° backtrackï¼Œä½†æ˜¯ï¼targetSum åœ¨è¿™ä¸ªæ—¶å€™ä»¥åŠå‡½æ•°æ‰§è¡Œç»“æŸåï¼Œéƒ½æ˜¯æ²¡æœ‰å‘ç”Ÿæ”¹å˜çš„ï¼ï¼ï¼

<img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211207113032.png" style="zoom:67%;" />

> è¿™ä¸ªå° tip æˆ‘ä»¬åœ¨ [112. è·¯å¾„æ€»å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/path-sum/) è§£é¢˜æ€è·¯ä¸­ä¹Ÿæåˆ°è¿‡ï¼Œå­é›†æ ‘é—®é¢˜ä¸­åŸºæœ¬éƒ½ä¼šæ¶‰åŠåˆ°è¿™ä¸ª Tipï¼Œæˆ‘å°±ä¸å†æé†’å¤§å®¶äº†å“ˆ~

ä¿®æ”¹ä¸‹ä»£ç ï¼Œæ–¹ä¾¿å¤§ä¼™çœ‹æ¸…æ¥š targetSum çš„å›æº¯è¿‡ç¨‹ï¼š

```java
class Solution {
    // å­˜å‚¨æ‰€æœ‰è·¯å¾„
    private List<List<Integer>> res = new ArrayList<>();

    public List<List<Integer>> pathSum(TreeNode root, int targetSum) {
        if (root == null) {
            return res;
        }

        // å­˜å‚¨æ¯æ¡è·¯å¾„
        List<Integer> paths = new ArrayList<>();

        // root åŠ å…¥ paths
        paths.add(root.val);
        targetSum -= root.val;
        backtrack(root, targetSum, paths);

        return res;
    }

    // targetSum éšç€è·¯å¾„ä¸­å…ƒç´ çš„å¢åŠ è€Œå‡å°‘
    private void backtrack(TreeNode root, int targetSum, List<Integer> paths) {
        // ç»“æŸæ¡ä»¶
        if (root.left == null && root.right == null && targetSum == 0) {
            // res.add(paths); error
            // Java æ˜¯æŒ‰å¼•ç”¨ä¼ é€’çš„ã€‚é€’å½’è¿‡ç¨‹ä¸­ track æ˜¯åœ¨ä¸æ–­å˜åŒ–çš„ï¼Œè€Œæˆ‘ä»¬éœ€è¦çš„å½“å‰ track çš„çŠ¶æ€ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ­¤å¤„è¿›è¡Œæ‹·è´
            res.add(new ArrayList<>(paths));
            return ;
        }

        // èµ°å·¦è¾¹
        if (root.left != null) {
            // åšé€‰æ‹©(left åŠ å…¥ paths)
            paths.add(root.left.val);
            targetSum -= root.left.val;
            // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘
            backtrack(root.left, targetSum, paths);
            // å›æº¯
            targetSum += root.left.val;
            paths.remove(paths.size() - 1);
        }

        // èµ°å³è¾¹
        if (root.right != null) {
            // åšé€‰æ‹©(right åŠ å…¥ paths)
            paths.add(root.right.val);
            targetSum -= root.right.val;
            // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘
            backtrack(root.right, targetSum, paths);
            // å›æº¯
            targetSum += root.right.val;
            paths.remove(paths.size() - 1);
        }
    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211207111521.png)

<br>

åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåšé€‰æ‹©çš„è¿‡ç¨‹æå‰ï¼Œç®€åŒ–ä»£ç ï¼š

```java
class Solution {
    // å­˜å‚¨æ‰€æœ‰è·¯å¾„
    private List<List<Integer>> res = new ArrayList<>();

    public List<List<Integer>> pathSum(TreeNode root, int targetSum) {
        if (root == null) {
            return res;
        }

        // å­˜å‚¨æ¯æ¡è·¯å¾„
        List<Integer> paths = new ArrayList<>();
        backtrack(root, targetSum, paths);

        return res;
    }

    // targetSum éšç€è·¯å¾„ä¸­å…ƒç´ çš„å¢åŠ è€Œå‡å°‘
    private void backtrack(TreeNode root, int targetSum, List<Integer> paths) {
        // å½“å‰èŠ‚ç‚¹åŠ å…¥ paths (åšé€‰æ‹©çš„è¿‡ç¨‹æå‰)
        paths.add(root.val);
        targetSum -= root.val;

        // ç»“æŸæ¡ä»¶
        if (root.left == null && root.right == null && targetSum == 0) {
            // res.add(paths); error
            // Java æ˜¯æŒ‰å¼•ç”¨ä¼ é€’çš„ã€‚é€’å½’è¿‡ç¨‹ä¸­ track æ˜¯åœ¨ä¸æ–­å˜åŒ–çš„ï¼Œè€Œæˆ‘ä»¬éœ€è¦çš„å½“å‰ track çš„çŠ¶æ€ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ­¤å¤„è¿›è¡Œæ‹·è´
            res.add(new ArrayList<>(paths));
            return ;
        }

        // èµ°å·¦è¾¹
        if (root.left != null) {
            // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘
            backtrack(root.left, targetSum, paths);
            // å›æº¯
            paths.remove(paths.size() - 1);
        }

        // èµ°å³è¾¹
        if (root.right != null) {
            // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘
            backtrack(root.right, targetSum, paths);
            // å›æº¯
            paths.remove(paths.size() - 1);
        }
    }
}
```

![image-20211207110346908](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211207110346.png)

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šç©ºé—´å¤æ‚åº¦æœ‰ä¸¤éƒ¨åˆ†ï¼Œå‡½æ•°è°ƒç”¨æ ˆä¸æ ‘é«˜æˆæ­£æ¯”ï¼Œæœ€åä¸º O(n)ï¼Œæœ€å¥½ä¸º O(log(n))ã€‚å¦å¤–ä¸€éƒ¨åˆ†æ˜¯å­˜æ”¾è·¯å¾„çš„ç©ºé—´ï¼Œä¸è·¯å¾„æ€»æ•°æ­£æ¯”ã€‚
- æ—¶é—´å¤æ‚åº¦ï¼šå¯¹æ¯ä¸€ä¸ªç»“ç‚¹éƒ½è¿›è¡Œäº†éå†ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º O(n)

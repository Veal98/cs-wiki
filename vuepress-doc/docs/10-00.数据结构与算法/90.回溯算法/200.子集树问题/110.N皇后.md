---
title: N çš‡å
date: 2021-12-22 21:53:36
permalink: /pages/570604/
---

## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š[51. N çš‡å - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/n-queens/)

n çš‡åé—®é¢˜ ç ”ç©¶çš„æ˜¯å¦‚ä½•å°† n ä¸ªçš‡åæ”¾ç½®åœ¨ nÃ—n çš„æ£‹ç›˜ä¸Šï¼Œå¹¶ä¸”ä½¿çš‡åå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’æ”»å‡»ã€‚

ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å›æ‰€æœ‰ä¸åŒçš„ n çš‡åé—®é¢˜ çš„è§£å†³æ–¹æ¡ˆã€‚

æ¯ä¸€ç§è§£æ³•åŒ…å«ä¸€ä¸ªä¸åŒçš„ n çš‡åé—®é¢˜ çš„æ£‹å­æ”¾ç½®æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆä¸­ 'Q' å’Œ '.' åˆ†åˆ«ä»£è¡¨äº†çš‡åå’Œç©ºä½ã€‚

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼šn = 4
è¾“å‡ºï¼š[[".Q..","...Q","Q...","..Q."],["..Q.","Q...","...Q",".Q.."]]
è§£é‡Šï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ4 çš‡åé—®é¢˜å­˜åœ¨ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚
```

## ğŸ”” è§£é¢˜æ€è·¯

çš‡åä»¬çš„çº¦æŸæ¡ä»¶ï¼š

1. ä¸èƒ½åŒè¡Œ
2. ä¸èƒ½åŒåˆ—
3. ä¸èƒ½åŒæ–œçº¿

ç»å…¸çš„å›æº¯æ³•é¢˜ç›®ï¼Œç”»å‡ºè§£ç©ºé—´æ ‘å…¶å®å°±ç®€å•äº†ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211222220013.png)

ç»“æŸæ¡ä»¶ï¼š**åªè¦æœç´¢åˆ°äº†æ ‘çš„å¶å­èŠ‚ç‚¹ï¼Œè¯´æ˜å°±æ‰¾åˆ°äº†çš‡åä»¬çš„åˆç†ä½ç½®äº†**ã€‚

æ‰€ä»¥ï¼Œè¿™é“é¢˜çš„ç¹çä¹‹å¤„å…¶å®å°±åœ¨å‰ªæä¸Šé¢


```java
class Solution {

    List<List<String>> res = new ArrayList<>();

    // nxn æ£‹ç›˜, n ä¸ªçš‡å
    public List<List<String>> solveNQueens(int n) {
        char[][] chessboard = new char[n][n];
        for (char[] c : chessboard) {
            Arrays.fill(c, '.');
        }
        // æ ‡å¿—ä½ï¼Œè¡¨ç¤ºå¤„ç†åˆ°æ£‹ç›˜ä¸Šçš„ç¬¬å‡ è¡Œ
        int row = 0;
        backtrack(n, row, chessboard);
        return res;
    }

    private void backtrack(int n, int row, char[][] chessboard) {
        // ç»“æŸæ¡ä»¶
        if (row == n) {
            res.add(array2List(chessboard));
            return;
        }

        // éå†é€‰æ‹©åˆ—è¡¨
        for (int col = 0; col < n; col++) {
            // å‰ªæ
            if (!isValid(col, row, n, chessboard)) {
                continue;
            } else {
                // åšé€‰æ‹©
                chessboard[row][col] = 'Q';
                // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘
                backtrack(n, row + 1, chessboard);
                // å›æº¯
                chessboard[row][col] = '.';
            }
        }
    }

    // åˆ¤æ–­ chessboard[row][col] æ˜¯å¦èƒ½æ”¾ç½®çš‡å
    private boolean isValid(int col, int row, int n, char[][] chessboard) {
        // æ£€æŸ¥åˆ—
        for (int i = 0; i < row; i++) {
            if (chessboard[i][col] == 'Q') {
                return false;
            }
        }

        // æ£€æŸ¥ 45 åº¦å¯¹è§’çº¿
        for (int i = row - 1, j = col - 1; i >= 0 && j >= 0; i--, j--) {
            if (chessboard[i][j] == 'Q') {
                return false;
            }
        }

        // æ£€æŸ¥ 135 åº¦å¯¹è§’çº¿
        for (int i = row - 1, j = col + 1; i >= 0 && j <= n - 1; i--, j++) {
            if (chessboard[i][j] == 'Q') {
                return false;
            }
        }
        return true;
    }

    // char[][] -> List<String>
    private List<String> array2List(char[][] chessboard) {
        List<String> list = new ArrayList<>();
        for (char[] c : chessboard) {
            list.add(new String(c));
        }
        return list;
    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211222222034.png)

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šç©ºé—´å¤æ‚åº¦ä¸»è¦å–å†³äºé€’å½’è°ƒç”¨å±‚æ•°ï¼Œæœ¬é¢˜å°±æ˜¯ O(N)ï¼Œå…¶ä¸­ N æ˜¯çš‡åæ•°é‡
- æ—¶é—´å¤æ‚åº¦ï¼šO(N!)

---
title: å¤åŸ IP åœ°å€
date: 2021-12-16 21:44:52
permalink: /pages/e8be5e/
---

## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 087. å¤åŸ IP - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/0on3uN/)
- [93. å¤åŸ IP åœ°å€ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/restore-ip-addresses/)

æœ‰æ•ˆ IP åœ°å€ æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆ**æ¯ä¸ªæ•´æ•°ä½äº 0 åˆ° 255 ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ 0**ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ '.' åˆ†éš”ã€‚

ä¾‹å¦‚ï¼š"0.1.2.201" å’Œ "192.168.1.1" æ˜¯ æœ‰æ•ˆ IP åœ°å€ï¼Œä½†æ˜¯ "0.011.255.245"ã€"192.168.1.312" å’Œ "192.168@1.1" æ˜¯ æ— æ•ˆ IP åœ°å€ã€‚
ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸² s ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆ IP åœ°å€ï¼Œè¿™äº›åœ°å€å¯ä»¥é€šè¿‡åœ¨ s ä¸­æ’å…¥ '.' æ¥å½¢æˆã€‚ä½ ä¸èƒ½é‡æ–°æ’åºæˆ–åˆ é™¤ s ä¸­çš„ä»»ä½•æ•°å­—ã€‚ä½ å¯ä»¥æŒ‰ ä»»ä½• é¡ºåºè¿”å›ç­”æ¡ˆã€‚

ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼šs = "25525511135"
è¾“å‡ºï¼š["255.255.11.135","255.255.111.35"]
```

ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥ï¼šs = "0000"
è¾“å‡ºï¼š["0.0.0.0"]
```

## ğŸ”” è§£é¢˜æ€è·¯

å’Œä¸Šä¸€é¢˜ä¸€æ · [131. åˆ†å‰²å›æ–‡ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/palindrome-partitioning/) æ˜¯åˆ†å‰²é—®é¢˜

**ä¸è¿‡è¿™é“é¢˜ä¸éœ€è¦ track äº†ï¼Œç›´æ¥åœ¨å­—ç¬¦ä¸² s ä¸Šæ“ä½œï¼Œæ’å…¥é€—ç‚¹ . å°±è¡Œäº†**

å¦å¤–ï¼Œç»ˆæ­¢æ¡ä»¶æœ‰æ‰€ä¸åŒï¼Œ**æœ¬é¢˜æ˜ç¡®è¦æ±‚åªä¼šåˆ†æˆ 4 æ®µï¼Œæ‰€ä»¥ä¸èƒ½ç”¨åˆ‡å‰²çº¿åˆ‡åˆ°æœ€åä½œä¸ºç»ˆæ­¢æ¡ä»¶ï¼ˆstart == s.length()ï¼‰ï¼Œè€Œæ˜¯åˆ†å‰²çš„æ®µæ•°ä½œä¸ºç»ˆæ­¢æ¡ä»¶**ã€‚æ‰€ä»¥ï¼Œé™¤äº†æ ‡å¿—ä½ index ç”¨æ¥è¡¨ç¤ºåˆ‡å‰²çš„ä½ç½®å¤–ï¼Œè¿˜éœ€è¦ pointNum ç”¨æ¥è¡¨ç¤ºé€—ç‚¹çš„æ•°é‡ã€‚

å½“é€—ç‚¹æ•°é‡ä¸º3æ—¶ï¼Œåˆ†éš”ç»“æŸï¼Œåˆ¤æ–­ç¬¬å››æ®µå­å­—ç¬¦ä¸²æ˜¯å¦åˆæ³•ï¼Œå¦‚æœåˆæ³•å°±æ”¾è¿› res ä¸­

å¤åŸ IP åœ°å€ï¼š

1. å››ä¸ªæ•´æ•°ç»„æˆ
2. æ¯ä¸ªæ•´æ•°ä½äº 0 ~ 255 ä¹‹é—´
3. ä¸èƒ½å«æœ‰å‰å¯¼ 0

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211216215543.png)


```java
class Solution {
    List<String> res = new ArrayList<>();

    public List<String> restoreIpAddresses(String s) {
        if (s == null || s.length() == 0 || s.length() > 12) {
            return res;
        }

        // ä»å“ªä¸ªä½ç½®åˆ‡å‰²ï¼ˆåŠ å…¥é€—ç‚¹ï¼‰
        int start = 0;
        // åˆ†æˆå‡ æ®µ(IP åœ°å€è§„å®šäº†å¿…é¡»ä¸º 4 æ®µ)
        int pointNum = 0;
        backtrack(s, start, pointNum);
        return res;
    }

    private void backtrack(String s, int start, int pointNum) {
        // ç»“æŸæ¡ä»¶
        if (pointNum == 3) {
            // åˆ†ä¸º 3 æ®µçš„æ—¶å€™ï¼Œåˆ¤æ–­æœ€åä¸€æ®µæ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œè‹¥ç¬¦åˆï¼Œåˆ™å°†æœ¬æ¬¡åˆ†å‰²çš„ç»“æœåŠ å…¥ res
            if (isVaild(s, start, s.length() - 1)) {
                res.add(s);
                return;
            }
        }

        // éå†é€‰æ‹©åˆ—è¡¨
        for (int i = start; i < s.length(); i++) {
            // å‰ªæ
            if (!isVaild(s, start, i)) {
                continue;
            } 
            
            // åšé€‰æ‹©(åœ¨ i çš„åé¢åŠ å…¥é€—ç‚¹) substring å·¦é—­å³å¼€
            s = s.substring(0, i + 1) + "." + s.substring(i + 1, s.length());
            pointNum ++;
            // è¿›å…¥ä¸‹ä¸€å±‚è§£ç©ºé—´æ ‘(æ³¨æ„ï¼šæ’å…¥é€—ç‚¹ä¹‹åä¸‹ä¸€ä¸ªå­ä¸²çš„èµ·å§‹ä½ç½®ä¸º i + 2)
            backtrack(s, i + 2, pointNum);
            // å›æº¯
            s = s.substring(0, i + 1) + s.substring(i + 2, s.length()); // åˆ é™¤é€—ç‚¹
            pointNum --;
        }

    }

    // åˆ¤æ–­æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼ˆå·¦é—­å³é—­ï¼‰
    private boolean isVaild(String s, int start, int end) {
        if (start > end) {
            return false;
        }

        // å‰å¯¼ 0
        if (s.charAt(start) == '0' && start != end) {
            return false;
        }

        int sum = 0;
        for (int i = start; i <= end; i++) {
            // éæ³•å­—ç¬¦
            if (s.charAt(i) > '9' || s.charAt(i) < '0') {
                return false;
            }

            sum = sum * 10 + s.charAt(i) - '0';
            if (sum > 255 || sum < 0) {
                return false;
            }
        }

        return true;
    }
}
```

æœ‰ä¸¤ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ä¸‹ï¼Œå¦‚ä¸‹å›¾æ¡†å‡ºæ¥äº†ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220509105531.png)

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

æˆ‘ä»¬ç”¨ $\text{SEG\_COUNT} = 4$ è¡¨ç¤º IP åœ°å€çš„æ®µæ•°ã€‚

- ç©ºé—´å¤æ‚åº¦ï¼šO(N)
- æ—¶é—´å¤æ‚åº¦ï¼š$$O(3^\text{SEG\_COUNT} \times n)$$â€‹â€‹â€‹ã€‚ç”±äº IP åœ°å€çš„æ¯ä¸€æ®µçš„ä½æ•°ä¸ä¼šè¶…è¿‡ 3ï¼Œå› æ­¤åœ¨é€’å½’çš„æ¯ä¸€å±‚ï¼Œæˆ‘ä»¬æœ€å¤šåªä¼šæ·±å…¥åˆ°ä¸‹ä¸€å±‚çš„ 3 ç§æƒ…å†µã€‚é€’å½’çš„æœ€å¤§å±‚æ•°å³ $\text{SEG\_COUNT} = 4$â€‹â€‹ï¼Œæ‰€ä»¥é€’å½’æœ¬èº«çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(3^\text{SEG\_COUNT})$â€‹â€‹ã€‚å¦‚æœæˆ‘ä»¬å¤åŸå‡ºäº†ä¸€ç§æ»¡è¶³é¢˜ç›®è¦æ±‚çš„ IP åœ°å€ï¼Œé‚£ä¹ˆéœ€è¦ O(n) çš„æ—¶é—´å°†å…¶åŠ å…¥ç­”æ¡ˆæ•°ç»„ä¸­ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(3^\text{SEG\_COUNT} \times n)$â€‹â€‹ã€‚


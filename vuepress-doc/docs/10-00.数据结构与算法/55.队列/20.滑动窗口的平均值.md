---
title: æ»‘åŠ¨çª—å£çš„å¹³å‡å€¼
date: 2022-04-18 10:01:04
permalink: /pages/9569b1/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 041. æ»‘åŠ¨çª—å£çš„å¹³å‡å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/qIsx9U/)
- [346. æ•°æ®æµä¸­çš„ç§»åŠ¨å¹³å‡å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/moving-average-from-data-stream/)

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220418100138.png)

## ğŸ”” è§£é¢˜æ€è·¯

ç»´æŠ¤ä¸€ä¸ªå›ºå®šå¤§å°ä¸º size çš„é˜Ÿåˆ—å°±å¯ä»¥äº†

è®°å½•å½“å‰çª—å£ä¸­çš„æ‰€æœ‰æ•°å­—ä¹‹å’Œï¼ˆç”¨ sum è¡¨ç¤ºï¼‰ï¼Œé‚£ä¹ˆæ’å…¥ä¸€ä¸ªæ–°çš„æ•°å­—v1ä¹‹åï¼Œçª—å£ä¸­çš„æ‰€æœ‰æ•°å­—ä¹‹å’Œå°±æ˜¯sum+v1ã€‚

å¦‚æœæ­¤æ—¶çª—å£çš„å¤§å°è¶…å‡ºäº†é™åˆ¶ï¼Œè¿˜éœ€è¦åˆ é™¤é˜Ÿåˆ—å¤´éƒ¨çš„æ•°å­— v2ï¼Œé‚£ä¹ˆçª—å£ä¸­çš„æ‰€æœ‰æ•°å­—ä¹‹å’Œæ˜¯ sum+v1-v2

å› æ­¤ï¼Œ`next` å‡½æ•°æœ€å¤šåªéœ€è¦ä¸€æ¬¡åŠ æ³•å’Œä¸€æ¬¡å‡æ³•å°±èƒ½æ±‚å‡ºçª—å£ä¸­çš„æ‰€æœ‰æ•°å­—ä¹‹å’Œï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)


```java
class MovingAverage {
    
    private Queue<Integer> queue;
    private int size;
    // é˜Ÿåˆ—ï¼ˆçª—å£ï¼‰ä¸­çš„å’Œ
    private int sum;
    
    /** Initialize your data structure here. */
    public MovingAverage(int size) {
        queue = new LinkedList<>();
        this.size = size;
        this.sum = 0;
    }
    
    public double next(int val) {
        queue.offer(val);
        sum += val;

        if (queue.size() > size) {
            sum -= queue.poll();
        }

        return (double)sum / queue.size();
    }
}

/**
 * Your MovingAverage object will be instantiated and called as such:
 * MovingAverage obj = new MovingAverage(size);
 * double param_1 = obj.next(val);
 */
```

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šO(N)
- æ—¶é—´å¤æ‚åº¦ï¼šO(1)


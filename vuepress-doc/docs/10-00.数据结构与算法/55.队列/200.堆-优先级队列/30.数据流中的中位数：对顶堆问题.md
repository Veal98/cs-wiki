## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š[å‰‘æŒ‡ Offer 41. æ•°æ®æµä¸­çš„ä¸­ä½æ•°](https://leetcode.cn/problems/shu-ju-liu-zhong-de-zhong-wei-shu-lcof/)

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/image-20220918170712075.png)

## ğŸ”” è§£é¢˜æ€è·¯

æˆ‘ä»¬ç”¨ä¸¤ä¸ªä¼˜å…ˆé˜Ÿåˆ—åˆ†åˆ«è®°å½•å¤§äºä¸­ä½æ•°çš„æ•°ï¼ˆleftHeapï¼Œå°æ ¹å †ï¼‰å’Œå°äºç­‰äºä¸­ä½æ•°çš„æ•°ï¼ˆrightHeapï¼Œå¤§æ ¹å †ï¼‰

- å½“ç´¯è®¡æ·»åŠ çš„æ•°çš„æ•°é‡ä¸ºå¥‡æ•°æ—¶ï¼ŒleftHeap ä¸­çš„æ•°çš„æ•°é‡æ¯” rightHeap å¤šä¸€ä¸ªï¼Œæ­¤æ—¶ä¸­ä½æ•°ä¸º leftHeap çš„é˜Ÿå¤´
- å½“ç´¯è®¡æ·»åŠ çš„æ•°çš„æ•°é‡ä¸ºå¶æ•°æ—¶ï¼Œä¸¤ä¸ªä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„æ•°çš„æ•°é‡ç›¸åŒï¼Œæ­¤æ—¶ä¸­ä½æ•°ä¸ºå®ƒä»¬çš„é˜Ÿå¤´çš„å¹³å‡å€¼ã€‚

å½“æˆ‘ä»¬å°è¯•æ·»åŠ ä¸€ä¸ªæ•°num åˆ°æ•°æ®ç»“æ„ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ†æƒ…å†µè®¨è®ºï¼š

- num < leftHeap.peek()ï¼šæ­¤æ—¶num å°äºç­‰äºä¸­ä½æ•°ï¼Œæˆ‘ä»¬éœ€è¦å°†è¯¥æ•°æ·»åŠ åˆ° leftHeap 
- num > rightHeap.peek()ï¼šæ­¤æ—¶ num å¤§äºä¸­ä½æ•°ï¼Œæˆ‘ä»¬éœ€è¦å°†è¯¥æ•°æ·»åŠ åˆ° rightHeap ä¸­

ç‰¹åˆ«åœ°ï¼Œå½“ç´¯è®¡æ·»åŠ çš„æ•°çš„æ•°é‡ä¸º 0 æ—¶ï¼Œæˆ‘ä»¬å°† num æ·»åŠ åˆ° leftHeap ä¸­


```java
class MedianFinder {

    // å­˜å‚¨æ¯”ä¸­ä½æ•°å°çš„æ•°(å¤§æ ¹å †)
    private PriorityQueue<Integer> leftHeap;
    // å­˜å‚¨æ¯”ä¸­ä½æ•°å¤§çš„æ•°(å°æ ¹å †)
    private PriorityQueue<Integer> rightHeap;
    /** initialize your data structure here. */
    public MedianFinder() {
        leftHeap = new PriorityQueue<>((o1, o2) -> o2 - o1);
        rightHeap = new PriorityQueue<>();
    }
    
    public void addNum(int num) {
        // æ–°åŠ å…¥çš„æ•°åœ¨ä¸­ä½æ•°å·¦è¾¹
        if (leftHeap.isEmpty() || num <= leftHeap.peek()) {
            leftHeap.offer(num);
            // ä¿è¯ leftHeap æ•°é‡ >= rightHeap æ•°é‡ + 1
            if (leftHeap.size() > rightHeap.size() + 1) {
                rightHeap.offer(leftHeap.poll());
            }
        }
        // æ–°åŠ å…¥çš„æ•°åœ¨ä¸­ä½æ•°å³è¾¹
        else {
            rightHeap.offer(num);
            // ä¿è¯ leftHeap æ•°é‡ >= rightHeap æ•°é‡ + 1
            if (rightHeap.size() > leftHeap.size()) {
                leftHeap.offer(rightHeap.poll());
            }
        }
    }
    
    public double findMedian() {
        int count = leftHeap.size() + rightHeap.size();
        if (count % 2 == 0) {
            return (leftHeap.peek() + rightHeap.peek()) / 2.0;
        }

        return leftHeap.peek();
    }
}

/**
 * Your MedianFinder object will be instantiated and called as such:
 * MedianFinder obj = new MedianFinder();
 * obj.addNum(num);
 * double param_2 = obj.findMedian();
 */
```

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼š


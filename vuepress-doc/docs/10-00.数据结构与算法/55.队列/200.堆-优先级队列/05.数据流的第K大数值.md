---
title: æ•°æ®æµçš„ç¬¬ K å¤§æ•°å€¼
date: 2022-03-20 11:53:59
permalink: /pages/bad528/
---

## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [703. æ•°æ®æµä¸­çš„ç¬¬ K å¤§å…ƒç´  - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/kth-largest-element-in-a-stream/)
- [å‰‘æŒ‡ Offer II 059. æ•°æ®æµçš„ç¬¬ K å¤§æ•°å€¼ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/jBjn9C/)

è®¾è®¡ä¸€ä¸ªæ‰¾åˆ°æ•°æ®æµä¸­ç¬¬ k å¤§å…ƒç´ çš„ç±»ï¼ˆclassï¼‰ã€‚æ³¨æ„æ˜¯æ’åºåçš„ç¬¬ k å¤§å…ƒç´ ï¼Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚

è¯·å®ç° KthLargest ç±»ï¼š

- KthLargest(int k, int[] nums) ä½¿ç”¨æ•´æ•° k å’Œæ•´æ•°æµ nums åˆå§‹åŒ–å¯¹è±¡ã€‚
- int add(int val) å°† val æ’å…¥æ•°æ®æµ nums åï¼Œè¿”å›å½“å‰æ•°æ®æµä¸­ç¬¬ k å¤§çš„å…ƒç´ ã€‚

```java
ç¤ºä¾‹ï¼š

è¾“å…¥ï¼š
["KthLargest", "add", "add", "add", "add", "add"]
[[3, [4, 5, 8, 2]], [3], [5], [10], [9], [4]]
è¾“å‡ºï¼š
[null, 4, 5, 5, 8, 8]

è§£é‡Šï¼š
KthLargest kthLargest = new KthLargest(3, [4, 5, 8, 2]);
kthLargest.add(3);   // return 4
kthLargest.add(5);   // return 5
kthLargest.add(10);  // return 5
kthLargest.add(9);   // return 8
kthLargest.add(4);   // return 8
```

## ğŸ”” è§£é¢˜æ€è·¯

**å¦‚æœèƒ½å¤Ÿæ‰¾å‡º k ä¸ªæœ€å¤§çš„æ•°å­—ï¼Œé‚£ä¹ˆç¬¬ k å¤§çš„æ•°å­—å°±æ˜¯è¿™kä¸ªæœ€å¤§æ•°å­—ä¸­æœ€å°çš„ä¸€ä¸ª**ã€‚

ä¾‹å¦‚ï¼Œä»æ•°æ®æµä¸­å·²ç»è¯»å‡ºäº† 4ã€5ã€8ã€2ã€3 è¿™ 5 ä¸ªæ•°å­—ï¼Œå…¶ä¸­æœ€å¤§çš„3ä¸ªæ•°å­—æ˜¯ 4ã€5ã€8ã€‚è¿™3ä¸ªæ•°å­—çš„æœ€å°å€¼4å°±æ˜¯4ã€5ã€8ã€2ã€3 è¿™ 5 ä¸ªæ•°å­—ä¸­çš„ç¬¬3å¤§çš„æ•°å­—ã€‚

ç”±äºæ¯æ¬¡éƒ½éœ€è¦æ‰¾å‡ºkä¸ªæ•°å­—ä¸­çš„æœ€å°å€¼ï¼Œå› æ­¤å¯ä»¥æŠŠè¿™kä¸ªæ•°å­—ä¿å­˜åˆ°æœ€å°å †ä¸­ã€‚æ¯å½“ä»æ•°æ®æµä¸­è¯»å‡ºä¸€ä¸ªæ•°å­—ï¼Œå°±å…ˆåˆ¤æ–­è¿™ä¸ªæ–°çš„æ•°å­—æ˜¯ä¸æ˜¯æœ‰å¿…è¦æ·»åŠ åˆ°æœ€å°å †ä¸­:

- å¦‚æœæœ€å°å †ä¸­å…ƒç´ çš„æ•°ç›®è¿˜å°äºkï¼Œé‚£ä¹ˆç›´æ¥å°†å®ƒæ·»åŠ åˆ°æœ€å°å †ä¸­
- å¦‚æœæœ€å°å †ä¸­å·²ç»æœ‰kä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°†å…¶å’Œä½äºå †é¡¶çš„æœ€å°å€¼è¿›è¡Œæ¯”è¾ƒ:
  - å¦‚æœæ–°è¯»å‡ºçš„æ•°å­—å°äºæˆ–ç­‰äºå †ä¸­çš„æœ€å°å€¼ï¼Œé‚£ä¹ˆå †ä¸­çš„kä¸ªæ•°å­—éƒ½æ¯”å®ƒå¤§ï¼Œå› æ­¤å®ƒä¸å¯èƒ½æ˜¯kä¸ªæœ€å¤§çš„æ•°å­—ä¸­çš„ä¸€ä¸ªï¼Œç”±äºåªéœ€è¦ä¿å­˜æœ€å¤§çš„kä¸ªæ•°å­—ï¼Œå› æ­¤è¿™ä¸ªæ–°è¯»å‡ºçš„æ•°å­—å¯ä»¥å¿½ç•¥
  - å¦‚æœæ–°çš„æ•°å­—å¤§äºå †é¡¶çš„æ•°å­—ï¼Œé‚£ä¹ˆå †é¡¶çš„æ•°å­—å°±æ˜¯ç¬¬k+1å¤§çš„æ•°å­—ï¼Œå¯ä»¥å°†å®ƒä»å †ä¸­åˆ é™¤ï¼Œå¹¶å°†æ–°çš„æ•°å­—æ·»åŠ åˆ°å †ä¸­ï¼Œè¿™æ ·å †ä¸­ä¿å­˜çš„ä»ç„¶æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ä»æ•°æ®æµä¸­è¯»å‡ºçš„æœ€å¤§çš„kä¸ªæ•°å­—ï¼Œæ­¤æ—¶ç¬¬kå¤§çš„æ•°å­—æ­£å¥½ä½äºæœ€å°å †çš„å †é¡¶ã€‚

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/image-20220623114742745.png)

> å…¶å®ä¸€å¥è¯å°±èƒ½è¯´æ˜ç™½ï¼Œç»´æŠ¤ä¸€ä¸ªå°é¡¶å †ï¼Œå †é¡¶ä¸€å®šæ˜¯å †ä¸­çš„æœ€å°å…ƒç´ 
>
> - å¦‚æœæ–°æ·»åŠ çš„å…ƒç´  < å †é¡¶ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰æ·»åŠ çš„å¿…è¦äº†
> - å¦‚æœæ–°æ·»åŠ çš„å…ƒç´  > å †é¡¶ï¼Œé‚£ä¹ˆå»æ‰å †ä¸­çš„æœ€å°å…ƒç´ ä¹Ÿå°±æ˜¯å †é¡¶ï¼ŒåŠ å…¥æ–°å…ƒç´ 


```java
class KthLargest {

    private PriorityQueue<Integer> minHeap = new PriorityQueue<>();
    private int k;

    public KthLargest(int k, int[] nums) {
        this.k = k;
        // æ„é€ å°é¡¶å †å­˜å‚¨å‰ k å¤§å…ƒç´ 
        for (int num : nums) {
            add(num);
        }
    }
    
    public int add(int val) {
        // å¦‚æœæœ€å°å †ä¸­å…ƒç´ çš„æ•°ç›®è¿˜å°äº kï¼Œé‚£ä¹ˆç›´æ¥å°†å®ƒæ·»åŠ åˆ°æœ€å°å †ä¸­
        if (minHeap.size() < k) {
            minHeap.offer(val);
        }
        // å¦‚æœæœ€å°å †ä¸­å·²ç»æœ‰kä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°†å…¶å’Œä½äºå †é¡¶çš„æœ€å°å€¼è¿›è¡Œæ¯”è¾ƒã€‚
        // å¦‚æœæ–°çš„æ•°å­—å¤§äºå †é¡¶çš„æ•°å­—ï¼Œé‚£ä¹ˆå †é¡¶çš„æ•°å­—å°±æ˜¯ç¬¬ k + 1 å¤§çš„æ•°å­—ï¼Œå¯ä»¥å°†å®ƒä»å †ä¸­åˆ é™¤ï¼Œå¹¶å°†æ–°çš„æ•°å­—æ·»åŠ åˆ°å †ä¸­ï¼Œè¿™æ ·å †ä¸­ä¿å­˜çš„ä»ç„¶æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ä»æ•°æ®æµä¸­è¯»å‡ºçš„æœ€å¤§çš„ k ä¸ªæ•°å­—ï¼Œæ­¤æ—¶ç¬¬ k å¤§çš„æ•°å­—æ­£å¥½ä½äºæœ€å°å †çš„å †é¡¶
        else if (val > minHeap.peek()) {
            minHeap.poll();
            minHeap.offer(val); // è¿™é‡Œ offer å¹¶ä¸æ˜¯ç›´æ¥æ”¾åœ¨å †é¡¶æˆ–è€…å †å°¾å“¦ï¼Œè€Œæ˜¯å†…éƒ¨ä¼šè¿›è¡Œè°ƒæ•´
        }
        // else if (val < minHeap.peek()) 
        // å¦‚æœæ–°è¯»å‡ºçš„æ•°å­—å°äºæˆ–ç­‰äºå †ä¸­çš„æœ€å°å€¼ï¼Œæ²¡æœ‰æ’å…¥çš„å¿…è¦
        // å› ä¸ºå †ä¸­çš„ k ä¸ªæ•°å­—éƒ½æ¯” val å¤§ï¼Œå› æ­¤ val ä¸å¯èƒ½æ˜¯ k ä¸ªæœ€å¤§çš„æ•°å­—ä¸­çš„ä¸€ä¸ª

        return minHeap.peek();
    }
}

/**
 * Your KthLargest object will be instantiated and called as such:
 * KthLargest obj = new KthLargest(k, nums);
 * int param_1 = obj.add(val);
 */
```

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šO(k),éœ€è¦ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—å­˜å‚¨å‰ k å¤§çš„å…ƒç´ ã€‚
- æ—¶é—´å¤æ‚åº¦ï¼šO(logk)


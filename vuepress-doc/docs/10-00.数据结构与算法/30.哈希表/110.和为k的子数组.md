---
title: å’Œä¸ºkçš„å­æ•°ç»„
date: 2022-04-07 09:30:08
permalink: /pages/4998fd/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 010. å’Œä¸º k çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/QTMn0o/)
- [560. å’Œä¸º K çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/subarray-sum-equals-k/)

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·æ‰¾åˆ°è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚

ç¤ºä¾‹ 1 :

```
è¾“å…¥:nums = [1,1,1], k = 2
è¾“å‡º: 2
è§£é‡Š: æ­¤é¢˜ [1,1] ä¸ [1,1] ä¸ºä¸¤ç§ä¸åŒçš„æƒ…å†µ
```

ç¤ºä¾‹ 2 :

```
è¾“å…¥:nums = [1,2,3], k = 3
è¾“å‡º: 2
```

## ğŸ”” è§£é¢˜æ€è·¯

ç»å…¸å‰ç¼€å’Œé—®é¢˜ï¼šä»ç¬¬ä¸€ä¸ªæ•°åˆ°å½“å‰æ•°çš„å’Œï¼Œè¢«ç§°ä¸º**å‰ç¼€å’Œ**

### æš´åŠ›

```java
class Solution {
    public int subarraySum(int[] nums, int k) {
        if (nums == null || nums.length == 0) {
            return 0;
        }
        
        // æ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°
        int res = 0;
        for (int i = 0; i < nums.length; i ++) {
            int sum = 0;
            for (int j = i; j < nums.length; j ++) {
                sum += nums[j];
                if (sum == k) {
                    res ++;
                    // break; è¿™é‡Œä¸èƒ½ break æ‰ï¼Œå› ä¸ºåé¢å¯èƒ½è¿˜æœ‰ num = 0ï¼Œæ¯”å¦‚ [1,-1,0]
                }
            }
        }

        return res;
    }
}
```

æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)

### å“ˆå¸Œè¡¨

> å¯èƒ½æœ‰åŒå­¦ä¼šæƒ³åˆ°ç”¨åŒæŒ‡é’ˆåšè¿™é“é¢˜ï¼ŒBut **ä½¿ç”¨åŒæŒ‡é’ˆè§£å†³å­æ•°ç»„ä¹‹å’Œçš„é¢˜ç›®æœ‰ä¸€ä¸ªå‰ææ¡ä»¶â€”â€”æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æ­£æ•°**ã€‚å¦‚æœæ•°ç»„ä¸­çš„æ•°å­—æœ‰æ­£æ•°ã€è´Ÿæ•°å’Œé›¶ï¼Œé‚£ä¹ˆåŒæŒ‡é’ˆçš„æ€è·¯å¹¶ä¸é€‚ç”¨ï¼Œè¿™æ˜¯å› ä¸ºå½“æ•°ç»„ä¸­æœ‰è´Ÿæ•°æ—¶åœ¨å­æ•°ç»„ä¸­æ·»åŠ æ•°å­—ä¸ä¸€å®šèƒ½å¢åŠ å­æ•°ç»„ä¹‹å’Œï¼Œä»å­æ•°ç»„ä¸­åˆ é™¤æ•°å­—ä¹Ÿä¸ä¸€å®šèƒ½å‡å°‘å­æ•°ç»„ä¹‹å’Œ

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220406103845.png)

çœ‹ä¸‹é¢è¿™å¼ å›¾å°±èƒ½æ˜ç™½ï¼š

æ ‡çº¢çš„é‚£æ®µ [j + 1, i]ï¼Œå°±æ˜¯é¢˜ç›®è¦æ±‚çš„å’Œä¸º k çš„å­æ•°ç»„

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220406104719.png)


```java
class Solution {
    public int subarraySum(int[] nums, int k) {
        // key: ä»ç¬¬ä¸€ä¸ªæ•°åˆ°å½“å‰æ•°çš„å’Œï¼Œvalueï¼šè¿™ä¸ªå’Œå‡ºç°çš„æ¬¡æ•°
        Map<Integer, Integer> map = new HashMap<>();
        // å½“ preSum = k çš„æ—¶å€™ï¼ŒpreSum - k = 0ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦äº‹å…ˆå¡«å…¥ä¸€ä¸ªï¼ˆ0ï¼Œ1ï¼‰çš„è®°å½•ï¼Œé˜²æ­¢å¤„ç†ä¸åˆ°è¿™ç§æƒ…å†µ
        map.put(0, 1);

        // preSum è¡¨ç¤ºä»ç¬¬ä¸€ä¸ªæ•°åˆ°å½“å‰æ•°çš„å’Œï¼ˆå‰ç¼€å’Œï¼‰
        int preSum = 0;
        // res è¡¨ç¤ºæ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°
        int res = 0;

        for (int num : nums) {
            preSum += num;
            res += map.getOrDefault(preSum - k, 0);
            // æ›´æ–° map
            map.put(preSum, map.getOrDefault(preSum, 0) + 1);
        }
        

        return res;
    }
}
```

æ—¶é—´å¤æ‚åº¦ï¼šO(N)

---
title: æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘
date: 2021-12-02 10:31:50
permalink: /pages/5a62d6/
---

## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 054. æ‰€æœ‰å¤§äºç­‰äºèŠ‚ç‚¹çš„å€¼ä¹‹å’Œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/w6cpku/)
- [538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/convert-bst-to-greater-tree/)
- [1038. ä»äºŒå‰æœç´¢æ ‘åˆ°æ›´å¤§å’Œæ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/binary-search-tree-to-greater-sum-tree/)

ç»™å‡ºäºŒå‰ æœç´¢ æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè¯¥æ ‘çš„èŠ‚ç‚¹å€¼å„ä¸ç›¸åŒï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºç´¯åŠ æ ‘ï¼ˆGreater Sum Treeï¼‰ï¼Œä½¿æ¯ä¸ªèŠ‚ç‚¹ node çš„æ–°å€¼ç­‰äºåŸæ ‘ä¸­å¤§äºæˆ–ç­‰äº node.val çš„å€¼ä¹‹å’Œã€‚


ç¤ºä¾‹ 1ï¼š

<img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/05/03/tree.png" alt="img" style="zoom: 67%;" />

è¾“å…¥ï¼š[4,1,6,0,2,5,7,null,null,null,3,null,null,null,8]

è¾“å‡ºï¼š[30,36,21,36,35,26,15,null,null,null,33,null,null,null,8]

## ğŸ”” è§£é¢˜æ€è·¯

### é€’å½’

é¢˜ç›®æ„æ€å°±æ˜¯å°†æ¯ä¸ªèŠ‚ç‚¹çš„å€¼è½¬æ¢æˆï¼Œå®ƒå’Œå®ƒå³å­æ ‘æ‰€æœ‰èŠ‚ç‚¹å€¼çš„å’Œï¼ˆå®ƒå’Œæ‰€æœ‰æ¯”å®ƒå¤§çš„èŠ‚ç‚¹å€¼çš„å’Œï¼‰

äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†æ˜¯å‡åºçš„

å¯¹äºæœ¬é¢˜æ¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥**é€†ä¸­åºéå†**æ¥ç®—ï¼Œå³ä¸­å·¦ï¼Œè®°å½•è¿‡ç¨‹ä¸­çš„èŠ‚ç‚¹å€¼ä¹‹å’Œï¼Œå¹¶ä¸æ–­æ›´æ–°å½“å‰éå†åˆ°çš„èŠ‚ç‚¹çš„èŠ‚ç‚¹å€¼ï¼Œå¦‚ä¸Šå›¾é€†ä¸­åºéå†çš„é¡ºåºå°±æ˜¯è¿™æ ·ï¼š

- å·¦æ ¹å³ï¼š0 1 2 3 4 5 6 7 8
- å³æ ¹å·¦ï¼š8 7(sum = 7 + 8 = 15) 6(sum = 6 + 15 = 21) 5(sum = 5 + 21 = 26) 4(30) 3(33) 2(35) 1(36) 0(36)


```java
class Solution {
    // è®°å½•é€†ä¸­åºéå†è¿‡ç¨‹ä¸­çš„èŠ‚ç‚¹å€¼ä¹‹å’Œ
    private int sum = 0;

    public TreeNode convertBST(TreeNode root) {
        
        if (root == null) {
            return root;
        }

        // å³
        if (root.right != null) {
            convertBST(root.right);
        }

        // è®°å½•éå†è¿‡ç¨‹ä¸­çš„èŠ‚ç‚¹å€¼ä¹‹å’Œ
        sum += root.val;
        // æ›´æ–°å½“å‰éå†åˆ°çš„èŠ‚ç‚¹çš„èŠ‚ç‚¹å€¼
        root.val = sum;
        
        // å·¦
        if (root.left != null) {
            convertBST(root.left);
        }

        return root;

    }
}
```

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20211202105017.png)

### è¿­ä»£

```java
class Solution {
    private int sum = 0;

    public TreeNode convertBST(TreeNode root) {
        if (root == null) {
            return root;
        }
        
        // è®°å½•é€†ä¸­åºéå†è¿‡ç¨‹ä¸­çš„èŠ‚ç‚¹å€¼ä¹‹å’Œ
        int sum = 0;

        Stack<TreeNode> stack = new Stack<>();
        TreeNode cur = root;

        while (!stack.isEmpty() || cur != null) {
            while (cur != null) {
                stack.push(cur);
                cur = cur.right;
            }

            cur = stack.pop();
            sum += cur.val;
            cur.val = sum;
            
            cur = cur.left;
        }

        return root;
    }
}
```



## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼šO(LogN)
- æ—¶é—´å¤æ‚åº¦ï¼šO(N)


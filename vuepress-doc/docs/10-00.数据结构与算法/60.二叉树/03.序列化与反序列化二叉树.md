---
title: åºåˆ—åŒ–ä¸ååºåˆ—åŒ–äºŒå‰æ ‘
date: 2022-04-20 11:28:38
permalink: /pages/3493cb/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 048. åºåˆ—åŒ–ä¸ååºåˆ—åŒ–äºŒå‰æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/h54YBf/)
- [297. äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼ŒBFSå’ŒDFSåŒè§£æ³• - äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ– - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/serialize-and-deserialize-binary-tree/solution/297-er-cha-shu-de-xu-lie-hua-yu-fan-xu-l-647c/)

åºåˆ—åŒ–æ˜¯å°†ä¸€ä¸ªæ•°æ®ç»“æ„æˆ–è€…å¯¹è±¡è½¬æ¢ä¸ºè¿ç»­çš„æ¯”ç‰¹ä½çš„æ“ä½œï¼Œè¿›è€Œå¯ä»¥å°†è½¬æ¢åçš„æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶æˆ–è€…å†…å­˜ä¸­ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ä¸ªè®¡ç®—æœºç¯å¢ƒï¼Œé‡‡å–ç›¸åæ–¹å¼é‡æ„å¾—åˆ°åŸæ•°æ®ã€‚

è¯·è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥å®ç°äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚è¿™é‡Œä¸é™å®šä½ çš„åºåˆ— / ååºåˆ—åŒ–ç®—æ³•æ‰§è¡Œé€»è¾‘ï¼Œ**åªéœ€è¦ä¿è¯ä¸€ä¸ªäºŒå‰æ ‘å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”å°†è¿™ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºåŸå§‹çš„æ ‘ç»“æ„**ã€‚

<img src="https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220420122012.png" style="zoom:67%;" />

## ğŸ”” è§£é¢˜æ€è·¯

### å±‚åºéå†

é¦–å…ˆï¼Œåœ¨åºåˆ—åŒ–ï¼ˆroot -> Stringï¼‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ³¨æ„ä¸‹ï¼Œæ­£å¸¸çš„å±‚åºéå†ç»“æœä¸­æ˜¯ä¸ä¼šå‡ºç° null çš„ï¼Œä½†æ˜¯å› ä¸ºåé¢éœ€è¦ååºåˆ—åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ null æ¥å¸®åŠ©æˆ‘ä»¬å¼„æ¸…æ¥šäºŒå‰æ ‘çš„ç»“æ„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220420114434.png)

æŒ‰ç…§æ­£å¸¸å±‚åºéå†çš„ç»“æœï¼Œä¸¤ä¸ªæ ‘çš„ç»“æœéƒ½æ˜¯ 6,6,6,6,6

é‚£å¦‚æœåŠ ä¸Š null

- (a) å±‚åºéå†ç»“æœï¼š6ï¼Œ6ï¼Œ6ï¼Œ6ï¼Œ6ï¼Œnullï¼Œnullï¼ˆè¿™ä¿© null å¯ä»¥çœç•¥ï¼Œå› ä¸ºä¸å½±å“ç»“æ„ï¼‰
- (b) å±‚åºéå†ç»“æœï¼š6ï¼Œ6ï¼Œ6ï¼Œnullï¼Œnullï¼Œ6ï¼Œ6

æ‰€ä»¥ï¼Œå°½ç®¡ null èŠ‚ç‚¹é€šå¸¸æ²¡æœ‰åœ¨å›¾ä¸Šç”»å‡ºæ¥ï¼Œä½†å®ƒä»¬å¯¹æ ‘çš„ç»“æ„æ˜¯è‡³å…³é‡è¦çš„

<br>

å¯¹äºååºåˆ—åŒ–ï¼Œéœ€è¦æ³¨æ„ä¸‹ï¼Œå°±æ˜¯è¿™é‡Œæˆ‘ä»¬åºåˆ—åŒ–å‡ºæ¥çš„ç»“æœå…¶å®ä¸æ˜¯æ»¡äºŒå‰æ ‘é‚£ç§æ ¼å¼çš„ï¼Œä»€ä¹ˆæ„æ€å‘¢ï¼Œå°±æ˜¯å¦‚æœæŸä¸ªèŠ‚ç‚¹æ˜¯ null çš„ï¼Œé‚£ä¹ˆå®ƒçš„å·¦å­©å­èŠ‚ç‚¹æ˜¯ä¸ä¼šå‡ºç°åœ¨åºåˆ—åŒ–ç»“æœé‡Œçš„ï¼Œä¸¾ä¸ªä¾‹å­ï¼š

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220420113440.png)

> ååºåˆ—åŒ–ä¹‹å‰åœ¨ â€œå¦‚ä½•æ„é€ ä¸€æ£µäºŒå‰æ ‘â€ ä¸­æˆ‘ä»¬è§£é‡Šè¿‡äº†ï¼Œè¿™é‡Œç›´æ¥å¤åˆ¶è¿‡æ¥å°±è¡Œ


```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
public class Codec {

    // Encodes a tree to a single string.
    public String serialize(TreeNode root) {
        if (root == null) {
            return "null";
        }

        StringBuilder sb = new StringBuilder();
        Queue<TreeNode> queue = new LinkedList<>();
        queue.offer(root);

        while (!queue.isEmpty()) {
            TreeNode cur = queue.poll();
            // null èŠ‚ç‚¹ä¹Ÿè¦åŠ è¿›å»
            sb.append(cur == null ? "null" : cur.val);
            sb.append(",");

            // cur å¦‚æœæ˜¯ null çš„è¯ï¼Œé‚£å®ƒçš„å·¦å­©å­èŠ‚ç‚¹å°±ä¸ç”¨å‡ºç°åœ¨ååºåˆ—åŒ–ç»“æœé‡Œäº†
            if (cur != null) {
                queue.offer(cur.left);
                queue.offer(cur.right);
            }
        }
        
        // åˆ é™¤æœ€åä¸€ä¸ªé€—å·
        sb.deleteCharAt(sb.length() - 1);
        return sb.toString();
    }

    // Decodes your encoded data to tree.
    public TreeNode deserialize(String data) {
        if (data == null || data.length() == 0 || data.equals("null")) {
            return null;
        }

        String[] nodes = data.split(",");
        // TreeNode é›†åˆ
        List<TreeNode> list = new ArrayList<>();
        for (String node : nodes) {
            list.add(node.equals("null") ? null : new TreeNode(Integer.parseInt(node)));
        }

        TreeNode root = list.get(0);
        Queue<TreeNode> queue = new LinkedList<>();
        queue.offer(root);

        // i æŒ‡å‘å½“å‰èŠ‚ç‚¹ cur çš„å·¦å­æ ‘èŠ‚ç‚¹
        int i = 1;
        while (!queue.isEmpty() && i < list.size()) {
            TreeNode cur = queue.poll();
            // æ­¤å¤„ä¸éœ€è¦è¿›è¡Œ cur çš„åˆ¤ç©ºï¼Œå› ä¸ºé˜Ÿåˆ—ä¸­ä¸ä¼šå­˜å‚¨ null çš„èŠ‚ç‚¹

            // cur çš„å·¦ï¼ˆiï¼‰å­©å­å…¥é˜Ÿ
            cur.left = list.get(i);
            if (cur.left != null) {
                // cur.left == null çš„è¯ï¼Œé‚£ä¹ˆ cur.left çš„å·¦å³å­©å­ä¹Ÿä¸€å®šä¸º nullï¼Œå°±ä¸ç”¨å…¥é˜Ÿæ„å»ºäº†
                queue.offer(cur.left);
            }
            // cur çš„å³ï¼ˆi + 1ï¼‰å­©å­å…¥é˜Ÿ
            cur.right = list.get(i + 1);
            if (cur.right != null) {
                // cur.right == null çš„è¯ï¼Œé‚£ä¹ˆ cur.right çš„å·¦å³å­©å­ä¹Ÿä¸€å®šä¸º nullï¼Œå°±ä¸ç”¨å…¥é˜Ÿæ„å»ºäº†
                queue.offer(cur.right);
            }

            // è¿›å…¥ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘èŠ‚ç‚¹
            i += 2;
        }

        return root;
    }
}

// Your Codec object will be instantiated and called as such:
// Codec ser = new Codec();
// Codec deser = new Codec();
// TreeNode ans = deser.deserialize(ser.serialize(root));
```

### å…ˆåºéå†

```java
/**
 * Definition for a binary tree node.
 * public class TreeNode {
 *     int val;
 *     TreeNode left;
 *     TreeNode right;
 *     TreeNode(int x) { val = x; }
 * }
 */
public class Codec {

    // å‰åºéå†åºåˆ—åŒ–
    public String serialize(TreeNode root) {
        if (root == null) {
            return "null";
        }

        String leftStr = serialize(root.left);
        String rightStr = serialize(root.right);

        return String.valueOf(root.val) + "," + leftStr + "," + rightStr;
    }

    // ååºåˆ—åŒ–å‰åºéå†çš„ç»“æœ
    public TreeNode deserialize(String data) {
        String[] nodeStrs = data.split(",");
        // nodeStrs çš„ä¸‹æ ‡
        int[] index = {0};

        return reconPreOrder(nodeStrs, index);
    }

    private TreeNode reconPreOrder(String[] nodeStrs, int[] index) {
        String str = nodeStrs[index[0]];
        // æ³¨æ„è¿™ä¸ªä½ç½®å¿…é¡»åœ¨ä¸‹é¢ if åˆ¤æ–­çš„ä¸Šé¢
        index[0] ++;
		
        // é¢˜ç›®æ˜¯å…ˆè°ƒç”¨åºåˆ—åŒ–ï¼Œå†è°ƒç”¨ååºåˆ—åŒ–ï¼Œæ‰€ä»¥æ ¹æ®åºåˆ—åŒ–çš„ç»“æœï¼Œè¿™é‡Œçš„åˆ¤ç©ºåº”è¯¥æ˜¯è¿™ç§å½¢å¼
        if (str.equals("null")) {
            return null;
        }

        TreeNode node = new TreeNode(Integer.parseInt(str));
        // æ„é€ å·¦å³å­æ ‘
        node.left = reconPreOrder(nodeStrs, index);
        node.right = reconPreOrder(nodeStrs, index);

        return node;
    }
}

// Your Codec object will be instantiated and called as such:
// Codec ser = new Codec();
// Codec deser = new Codec();
// TreeNode ans = deser.deserialize(ser.serialize(root));
```

é€’å½’å‡½æ•° reconPreOrder çš„æ¯æ¬¡æ‰§è¡Œéƒ½ä¼šä»å­—ç¬¦ä¸²æ•°ç»„ä¸­å–å‡ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä»¥æ­¤ååºåˆ—åŒ–å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚æœå–å‡ºçš„å­—ç¬¦ä¸²æ˜¯"null"ï¼Œåˆ™è¿”å›nullèŠ‚ç‚¹ï¼‰ã€‚

æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸‹æ ‡å»æ‰«æå­—ç¬¦ä¸²æ•°ç»„ nodeStrs ä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ã€‚é€šå¸¸ç”¨ä¸€ä¸ªæ•´æ•°å€¼æ¥è¡¨ç¤ºæ•°ç»„çš„ä¸‹æ ‡ï¼Œä½†åœ¨ä¸Šè¿°ä»£ç ä¸­å´å®šä¹‰äº†ä¸€ä¸ªé•¿åº¦ä¸º1çš„æ•´æ•°æ•°ç»„ index 

è¿™æ˜¯å› ä¸ºé€’å½’å‡½æ•° reconPreOrder  æ¯ååºåˆ—åŒ–ä¸€ä¸ªèŠ‚ç‚¹æ—¶ä¸‹æ ‡å°±ä¼šå¢åŠ  1ï¼Œå¹¶ä¸”å‡½æ•°çš„è°ƒç”¨è€…éœ€è¦çŸ¥é“ä¸‹æ ‡å¢åŠ äº†ã€‚å¦‚æœå‡½æ•° reconPreOrder çš„ç¬¬2ä¸ªå‚æ•° index æ˜¯æ•´æ•°ç±»å‹ï¼Œé‚£ä¹ˆå³ä½¿åœ¨å‡½æ•°ä½“å†…ä¿®æ”¹ index çš„å€¼ï¼Œä¿®æ”¹ä¹‹åçš„å€¼ä¹Ÿä¸èƒ½ä¼ é€’ç»™å®ƒçš„è°ƒç”¨è€…ã€‚ä½†æŠŠ index å®šä¹‰ä¸ºæ•´æ•°æ•°ç»„ä¹‹åï¼Œå¯ä»¥ä¿®æ”¹æ•´æ•°æ•°ç»„ä¸­çš„æ•°å­—ï¼Œä¿®æ”¹ä¹‹åçš„æ•°å€¼å°±èƒ½ä¼ ç»™å®ƒçš„è°ƒç”¨è€…

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼š


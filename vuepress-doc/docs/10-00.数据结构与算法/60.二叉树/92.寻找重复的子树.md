---
title: å¯»æ‰¾é‡å¤çš„å­æ ‘
date: 2022-03-31 15:24:46
permalink: /pages/3d6b0e/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [652. å¯»æ‰¾é‡å¤çš„å­æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/find-duplicate-subtrees/)

> è¿™é¢˜åä¸ºæœºè€ƒï¼ˆ2022.3.30 å·ï¼‰è€ƒè¿‡ï¼ŒåŸé¢˜

ç»™å®šä¸€æ£µäºŒå‰æ ‘ rootï¼Œè¿”å›æ‰€æœ‰é‡å¤çš„å­æ ‘ã€‚

å¯¹äºåŒä¸€ç±»çš„é‡å¤å­æ ‘ï¼Œä½ åªéœ€è¦è¿”å›å…¶ä¸­ä»»æ„ä¸€æ£µçš„æ ¹ç»“ç‚¹å³å¯ã€‚

å¦‚æœä¸¤æ£µæ ‘å…·æœ‰ç›¸åŒçš„ç»“æ„å’Œç›¸åŒçš„ç»“ç‚¹å€¼ï¼Œåˆ™å®ƒä»¬æ˜¯é‡å¤çš„ã€‚

ç¤ºä¾‹ 1ï¼š

![img](https://assets.leetcode.com/uploads/2020/08/16/e1.jpg)

```
è¾“å…¥ï¼šroot = [1,2,3,4,null,2,4,null,null,4]
è¾“å‡ºï¼š[[2,4],[4]]
```

## ğŸ”” è§£é¢˜æ€è·¯

**å½“å‡ºç°éœ€è¦åˆ¤æ–­æ˜¯å¦é‡å¤æ—¶ï¼Œéœ€è¦æƒ³åˆ°ä½¿ç”¨Map**ï¼Œkeyä¸ºäºŒå‰æ ‘çš„éå†ç»“æœï¼ˆä½¿ç”¨åºåˆ—åŒ–çš„æ–¹å¼ï¼Œå°†æ•°æ®æ‰“å¹³ï¼‰ï¼Œvalueä¸ºå¯¹åº”è¯¥éå†ç»“æœå‡ºç°çš„é¢‘ç‡ã€‚

ä½¿ç”¨ååºéå†ï¼Œå…ˆè·å–å·¦å­æ ‘ï¼Œç„¶åå†è·å–å³å­æ ‘ï¼Œå°†æœ¬å­æ ‘åºåˆ—åŒ–ï¼Œç„¶åå­˜å‚¨åˆ° mapä¸­ï¼Œå¦‚æœå‡ºç°é¢‘ç‡å‡ºç° 2 æ¬¡ï¼Œå°±è¡¨ç¤ºå‡ºç°é‡å¤å­æ ‘


```java
class Solution {

    // key: å­æ ‘ç»“æ„ value: è¯¥ç»“æ„å‡ºç°çš„æ¬¡æ•°
    private Map<String, Integer> map = new HashMap<>();
    // å­˜å‚¨é‡å¤å­æ ‘çš„æ ¹èŠ‚ç‚¹
    private List<TreeNode> res = new ArrayList<>();

    public List<TreeNode> findDuplicateSubtrees(TreeNode root) {
        if (root == null) {
            return res;
        }
        serialize(root);
        // è¿”å›çš„æ˜¯é‡å¤å­æ ‘çš„æ ¹ç»“ç‚¹ï¼ˆå¤šä¸ªï¼‰
        return res;
    }
    
    // åºåˆ—åŒ–ï¼ˆååºéå†å’Œå…ˆåºéå†éƒ½è¡Œï¼Œå”¯ç‹¬ä¸­åºéå†ä¸è¡Œï¼‰ä»¥å½“å‰èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„äºŒå‰æ ‘
    private String serialize(TreeNode root) {
        if (root == null) {
            return "null";
        }
       
        
        // ååºéå†
        String str1 = serialize(root.left);
        String str2 = serialize(root.right);
        String str = str1 + "," + str2 + "," + root.val  ;

        // æ›´æ–° map
        map.put(str, map.getOrDefault(str, 0) + 1);

        // é‡å¤å­æ ‘ï¼ŒåŠ å…¥ res
        if (map.get(str) == 2) {
            res.add(root);
        }

        return str;
    }
}
```

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼š


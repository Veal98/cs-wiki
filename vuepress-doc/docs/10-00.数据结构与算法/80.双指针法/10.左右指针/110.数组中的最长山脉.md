## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [845. æ•°ç»„ä¸­çš„æœ€é•¿å±±è„‰](https://leetcode.cn/problems/longest-mountain-in-array/)

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/image-20220719220352234.png)

## ğŸ”” è§£é¢˜æ€è·¯

é¢˜è§£å¯ä»¥çœ‹è¿™é‡Œï¼š[LeetCode å®˜æ–¹é¢˜è§£ï¼šæ•°ç»„ä¸­çš„æœ€é•¿å±±è„‰](https://leetcode.cn/problems/longest-mountain-in-array/solution/shu-zu-zhong-de-zui-chang-shan-mai-by-leetcode-sol/)ï¼Œå†™å¾—å¾ˆæ¸…æ¥š~

### æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆæšä¸¾å±±é¡¶ï¼‰


```java
class Solution {
    public int longestMountain(int[] arr) {
        // left[i] è¡¨ç¤º arr[i] å‘å·¦ä¾§æœ€å¤šå¯ä»¥æ‰©å±•çš„å…ƒç´ æ•°ç›®
        int[] left = new int[arr.length];
        // right[i] è¡¨ç¤º arr[i] å‘å³ä¾§æœ€å¤šå¯ä»¥æ‰©å±•çš„å…ƒç´ æ•°ç›®
        int[] right = new int[arr.length];
        
        // base case
        // left[0] = 0;
        // right[arr.length - 1] = 0;

        for (int i = 1; i < arr.length; i ++) {
            if (arr[i] > arr[i - 1]) {
                left[i] = left[i - 1] + 1;
            }
            else {
                left[i] = 0;
            }
        }

        for (int i = arr.length - 2; i >= 0; i --) {
            if (arr[i] > arr[i + 1]) {
                right[i] = right[i + 1] + 1;
            }
            else {
                right[i] = 0;
            }
        }
        
        int res = 0;
        for (int i = 0; i < arr.length; i ++) {
            if (left[i] > 0 && right[i] > 0) {
                res = Math.max(left[i] + right[i] + 1, res);
            }
        }

        return res;
    }
}
```

- ç©ºé—´å¤æ‚åº¦ï¼šO(N)
- æ—¶é—´å¤æ‚åº¦ï¼šO(N)

### æ–¹æ¡ˆäºŒï¼šåŒæŒ‡é’ˆï¼ˆæšä¸¾å±±è„šï¼‰

```java
class Solution {
    public int longestMountain(int[] arr) {
        if (arr == null || arr.length < 3) {
            return 0;
        }

        int n = arr.length;

        // æœ€é•¿å±±è„‰å­æ•°ç»„çš„é•¿åº¦
        int res = 0;

        // å·¦å±±è„šçš„ä¸‹æ ‡
        int left = 0;

        while (left + 2 < n) {
            int right = left + 1;

            // è¿™ç§æƒ…å†µä¸‹ arr[left] ä¸å¯èƒ½æ˜¯å·¦å±±è„šï¼Œç»§ç»­å‘å³éå†
            if (arr[left] >= arr[left + 1]) {
                left = left + 1;
                continue;
            }

            // å…ˆæ‰¾åˆ°å±±é¡¶ arr[right]
            while (right + 1 < n && arr[right + 1] > arr[right]) {
                right ++;
            }

            // å¦‚æœ right åé¢æ²¡æœ‰å…ƒç´ äº†ï¼Œæˆ–è€… arr[right + 1] == arr[right], éƒ½è¯´æ˜ arr[right] ä¸æ˜¯å±±é¡¶
            if (right < n - 1 && arr[right] > arr[right + 1]) {
                // å‘å³å¯»æ‰¾å³ä¾§å±±è„š
                while (right + 1 < n && arr[right] > arr[right + 1]) {
                    right ++;
                }

                res = Math.max(res, right - left + 1);
                // å³ä¾§å±±è„šæœ‰å¯èƒ½æ˜¯ä¸‹ä¸€ä¸ªå·¦ä¾§å±±è„šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°† right çš„å€¼èµ‹äºˆ leftï¼Œä»¥ä¾¿ä¸è¿›è¡Œä¸‹ä¸€æ¬¡æšä¸¾
                left = right;
            }
            else {
                // åœ¨è¿™ç§æƒ…å†µä¸‹(right åé¢æ²¡æœ‰å…ƒç´ äº†ï¼Œæˆ–è€… arr[right + 1] == arr[right])ï¼Œright å¯¹åº”çš„ä½ç½®éƒ½ä¸å¯èƒ½æ˜¯ä¸‹ä¸€ä¸ªå·¦ä¾§å±±è„šï¼Œå› æ­¤å¯ä»¥å°† right+1 çš„å€¼èµ‹äºˆ left
                left = right + 1;
            }
        }

        return res;
    }
}
```

- ç©ºé—´å¤æ‚åº¦ï¼šO(N)
- æ—¶é—´å¤æ‚åº¦ï¼šO(1)

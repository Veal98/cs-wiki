---
title: çŸ©é˜µä¸­æœ€å¤§çš„çŸ©å½¢
date: 2022-04-15 11:15:40
permalink: /pages/e336f0/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 040. çŸ©é˜µä¸­æœ€å¤§çš„çŸ©å½¢ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/PLYXKQ/)
- [85. æœ€å¤§çŸ©å½¢ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/maximal-rectangle/)

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220415111616.png)

## ğŸ”” è§£é¢˜æ€è·¯

æ ¹æ®ä¸Šé¢˜ [å‰‘æŒ‡ Offer II 039. ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢é¢ç§¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/0ynMMM/) ï¼Œå¦‚æœèƒ½ä»çŸ©é˜µä¸­æ‰¾å‡ºç›´æ–¹å›¾ï¼Œé‚£ä¹ˆå°±èƒ½é€šè¿‡è®¡ç®—ç›´æ–¹å›¾ä¸­çš„æœ€å¤§çŸ©å½¢é¢ç§¯æ¥è®¡ç®—çŸ©é˜µä¸­çš„æœ€å¤§çŸ©å½¢é¢ç§¯ã€‚

ç›´æ–¹å›¾æ˜¯ç”±æ’åˆ—åœ¨åŒä¸€åŸºçº¿ä¸Šçš„ç›¸é‚»æŸ±å­ç»„æˆçš„å›¾å½¢ã€‚ç”±äºé¢˜ç›®è¦æ±‚çŸ©å½¢ä¸­åªåŒ…å«æ•°å­— 1ï¼Œå› æ­¤å°†çŸ©é˜µä¸­ä¸Šä¸‹ç›¸é‚»çš„å€¼ä¸º1çš„æ ¼å­çœ‹æˆç›´æ–¹å›¾ä¸­çš„æŸ±å­ã€‚å¦‚æœ**åˆ†åˆ«ä»¥ä¸Šå›¾ç¤ºä¾‹ä¸­çš„çŸ©é˜µçš„æ¯è¡Œä¸ºåº•éƒ¨**ï¼Œå°±å¯ä»¥å¾—åˆ° 4 ä¸ªç”±æ•°å­— 1 çš„æ ¼å­ç»„æˆçš„ç›´æ–¹å›¾ï¼Œå¦‚å›¾æ‰€ç¤º

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220415111752.png)

åœ¨å°†çŸ©é˜µè½¬æ¢æˆå¤šä¸ªç›´æ–¹å›¾ä¹‹åï¼Œå°±å¯ä»¥è®¡ç®—å¹¶æ¯”è¾ƒæ¯ä¸ªç›´æ–¹å›¾çš„æœ€å¤§çŸ©å½¢é¢ç§¯ï¼Œæ‰€æœ‰ç›´æ–¹å›¾ä¸­çš„æœ€å¤§çŸ©å½¢ä¹Ÿæ˜¯æ•´ä¸ªçŸ©é˜µä¸­çš„æœ€å¤§çŸ©å½¢


```java
class Solution {
    public int maximalRectangle(String[] matrix) {
        if (matrix == null || matrix.length == 0) {
            return 0;
        }

        int maxArea = 0;

        int[] heights = new int[matrix[0].length()];

        // ä»¥ matrix çš„æ¯ä¸€è¡Œä¸ºåº•ï¼Œæ„é€  heights ç›´æ–¹å›¾
        for (String row : matrix) {
            for (int i = 0; i < row.length(); i ++) {
                if (row.charAt(i) == '0') {
                    heights[i] = 0;
                }
                else {
                    heights[i] ++;
                }
            }

            // è®¡ç®—å½“å‰ç›´æ–¹å›¾çš„æœ€å¤§çŸ©å½¢é¢ç§¯
            maxArea = Math.max(maxArea, largestRectangleArea(heights));
        }

        return maxArea;
    }

    private int largestRectangleArea(int[] heights) {
        // è®°å½•æœ€å¤§çŸ©å½¢çš„é¢ç§¯ï¼ˆæ³¨æ„ï¼Œä¸èƒ½åˆå§‹åŒ–ä¸º Integer.MIN_VALUEï¼Œå› ä¸ºå¦‚æœèµ°ä¸åˆ°å¼¹æ ˆçš„ while å¾ªç¯çš„è¯ï¼ˆå…¨æ˜¯ 0  çš„æƒ…å†µï¼‰ï¼Œä¼šç›´æ¥è¿”å› res çš„ï¼‰
        int res = 0;

        if (heights == null || heights.length == 0) {
            return res;
        }

        // æ•°ç»„æ‰©å®¹ï¼Œé¦–å°¾æ·»åŠ å“¨å…µ
        int [] newHeights = new int[heights.length + 2];
        newHeights[0] = 0;
        newHeights[newHeights.length - 1] = 0;
        for (int index = 0; index < heights.length; index++){
            newHeights[index + 1] = heights[index];
        }

        heights = newHeights;

        // å•è°ƒé€’å¢æ ˆï¼ˆæ ˆåº• -> æ ˆé¡¶ï¼‰,å­˜å‚¨ä¸‹æ ‡
        Stack<Integer> stack = new Stack<>();

        for (int i = 0; i < heights.length; i ++) {
            if (stack.isEmpty()) {
                stack.push(i);
            }
            else if (heights[i] > heights[stack.peek()]) {
                stack.push(i);
            }
            else if (heights[i] == heights[stack.peek()]) {
                stack.pop();
                stack.push(i);
            }
            else {
                while (!stack.isEmpty() && heights[i] < heights[stack.peek()]) {
                    // ä»¥æ ˆé¡¶ heights[mid] ä½œä¸ºçŸ©å½¢çš„é«˜
                    int mid = stack.pop();
                    if (!stack.isEmpty()) { // å› ä¸ºæ·»åŠ äº†å“¨å…µï¼Œæ‰€ä»¥è¿™ä¸ªéç©ºåˆ¤æ–­å…¶å®å¯ä»¥çœç•¥æ‰
                        // mid å·¦å³ä¸¤ä¾§æœ€è¿‘çš„å°äº height[mid] çš„ä¸‹æ ‡
                        int leftIndex = stack.peek();
                        int rightIndex = i;

                        int width = rightIndex - leftIndex - 1;
                        int height = heights[mid];
                        res = Math.max(res, width * height);
                    }
                }
                stack.push(i);
            }
        }

        return res;
    }
}
```

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼š


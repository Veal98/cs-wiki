---
title: å‰nä¸ªæ•°å­—äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°
date: 2022-03-30 17:19:10
permalink: /pages/c4a0f0/
---
## ğŸ“ƒ é¢˜ç›®æè¿°

é¢˜ç›®é“¾æ¥ï¼š

- [å‰‘æŒ‡ Offer II 003. å‰ n ä¸ªæ•°å­—äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/w3tCBm/)
- [338. æ¯”ç‰¹ä½è®¡æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ (leetcode-cn.com)](https://leetcode-cn.com/problems/counting-bits/)

ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•° n ï¼Œè¯·è®¡ç®— 0 åˆ° n ä¹‹é—´çš„æ¯ä¸ªæ•°å­—çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ 1 çš„ä¸ªæ•°ï¼Œå¹¶è¾“å‡ºä¸€ä¸ªæ•°ç»„ã€‚

ç¤ºä¾‹ 1:

```
è¾“å…¥: n = 2
è¾“å‡º: [0,1,1]
è§£é‡Š: 
0 --> 0
1 --> 1
2 --> 10
```

ç¤ºä¾‹ 2:

```
è¾“å…¥: n = 5
è¾“å‡º: [0,1,1,2,1,2]
è§£é‡Š:
0 --> 0
1 --> 1
2 --> 10
3 --> 11
4 --> 100
5 --> 101
```

## ğŸ”” è§£é¢˜æ€è·¯

### æš´åŠ›

æœ€ç®€å•ï¼ŒäºŒè¿›åˆ¶è½¬åè¿›åˆ¶ï¼Œéå†å³å¯

```java
class Solution {
    public int[] countBits(int n) {
        int[] res = new int[n + 1];

        for (int i = 0; i <= n; i ++) {
            String str = traverse(i);
            for (int j = 0;  j < str.length(); j ++) {
                if (str.charAt(j) == '1') {
                    res[i] ++;
                }
            }
        }
        
        return res;
    }

    // 10 è¿›åˆ¶è½¬ 2 è¿›åˆ¶
    private String traverse(int n) {
        StringBuilder sb = new StringBuilder();

        while (n != 0) {
            sb.append(n % 2);
            n /= 2;
        }


        return sb.reverse().toString();
    }
}
```



### Brian Kernighan ç®—æ³•

![](https://cs-wiki.oss-cn-shanghai.aliyuncs.com/img/20220330173215.png)


```java
class Solution {
    public int[] countBits(int n) {
        int[] res = new int[n + 1];

        for (int i = 0;  i <= n; i ++) {
            // å¯¹ i é‡å¤æ‰§è¡Œ (i & i - 1) æ“ä½œï¼Œç›´åˆ° i æ‰€æœ‰ä½ç½®éƒ½æ˜¯ 0
            int temp = i;
            while (temp != 0) {
                temp &= temp - 1;
                res[i] ++;
            }
        }

        return res;
    }
}
```

## ğŸ’¥ å¤æ‚åº¦åˆ†æ

- ç©ºé—´å¤æ‚åº¦ï¼š
- æ—¶é—´å¤æ‚åº¦ï¼š

